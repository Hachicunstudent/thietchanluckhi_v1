/*! For license information please see main.9c0ad193.js.LICENSE.txt */
(()=>{var e={8097:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(B){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},a={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=c(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=c(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function s(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=d)return x}else{if(e<=-p)return C;if(e+1>=p)return w}return e<0?s(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=c;var l=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var o=s(l(n,8)),a=g,i=0;i<e.length;i+=8){var c=Math.min(8,e.length-i),A=parseInt(e.substring(i,i+c),n);if(c<8){var h=s(l(n,c));a=a.mul(h).add(s(A))}else a=(a=a.mul(o)).add(s(A))}return a.unsigned=t,a}function A(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?u(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=A;var h=4294967296,d=h*h,p=d/2,f=i(1<<24),g=i(0);n.ZERO=g;var m=i(0,!0);n.UZERO=m;var y=i(1);n.ONE=y;var v=i(1,!0);n.UONE=v;var b=i(-1);n.NEG_ONE=b;var w=c(-1,2147483647,!1);n.MAX_VALUE=w;var x=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var C=c(0,-2147483648,!1);n.MIN_VALUE=C;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=s(l(e,6),this.unsigned),a=this,i="";;){var c=a.div(o),u=(a.sub(c.mul(o)).toInt()>>>0).toString(e);if((a=c).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1===(1&this.low)},k.isEven=function(){return 0===(1&this.low)},k.equals=function(e){return r(e)||(e=A(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=A(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(y)},k.neg=k.negate,k.add=function(e){r(e)||(e=A(e));var t=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,i=e.high>>>16,s=65535&e.high,l=e.low>>>16,u=0,h=0,d=0,p=0;return d+=(p+=a+(65535&e.low))>>>16,h+=(d+=o+l)>>>16,u+=(h+=n+s)>>>16,u+=t+i,c((d&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=A(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=A(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(C))return e.isOdd()?C:g;if(e.eq(C))return this.isOdd()?C:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,a=this.low>>>16,i=65535&this.low,l=e.high>>>16,u=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,m=0,y=0,v=0;return y+=(v+=i*d)>>>16,m+=(y+=a*d)>>>16,y&=65535,m+=(y+=i*h)>>>16,p+=(m+=o*d)>>>16,m&=65535,p+=(m+=a*h)>>>16,m&=65535,p+=(m+=i*u)>>>16,p+=n*d+o*h+a*u+i*l,c((y&=65535)<<16|(v&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(r(e)||(e=A(e)),e.isZero())throw Error("division by zero");var n,o,a;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return v;a=m}else{if(this.eq(C))return e.eq(y)||e.eq(b)?C:e.eq(C)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:b:(o=this.sub(e.mul(n)),a=n.add(o.div(e)));if(e.eq(C))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=g}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:l(2,i-48),h=s(n),d=h.mul(e);d.isNegative()||d.gt(o);)d=(h=s(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=y),a=a.add(h),o=o.sub(d)}return a},k.div=k.divide,k.modulo=function(e){return r(e)||(e=A(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return c(~this.low,~this.high,this.unsigned)},k.and=function(e){return r(e)||(e=A(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=A(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=A(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2831:function(e,t,n){var r,o;"undefined"!==typeof self&&self,r=function(){"function"!==typeof Promise&&function(t){function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,n(a,this),n(i,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void A((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(a){return void e.reject(a)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}))}function a(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var t=e.then;if("function"===typeof t)return void l(n(t,e),n(a,this),n(i,this))}this._state=!0,this._value=e,s.call(this)}catch(o){i.call(this,o)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(a){if(r)return;r=!0,n(a)}}var u=setTimeout,A="function"===typeof setImmediate&&setImmediate||function(e){u(e,1)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=this;return new r((function(r,a){o.call(n,new c(e,t,r,a))}))},r.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new r((function(t,n){function r(a,i){try{if(i&&("object"===typeof i||"function"===typeof i)){var s=i.then;if("function"===typeof s)return void s.call(i,(function(e){r(a,e)}),n)}e[a]=i,0===--o&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])}))},r.resolve=function(e){return e&&"object"===typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){for(var r=0,o=e.length;o>r;r++)e[r].then(t,n)}))},r._setImmediateFn=function(e){A=e},e.exports?e.exports=r:t.Promise||(t.Promise=r)}(this),"undefined"!==typeof window&&"function"!==typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),"undefined"===typeof HTMLCanvasElement||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),o=r.length,a=new Uint8Array(o),i=0;i<o;i++)a[i]=r.charCodeAt(i);e(new Blob([a],{type:t||"image/png"}))}});var t,n,r,o=["Webkit","Moz","ms"],a="undefined"!==typeof document?document.createElement("div").style:{},i=[1,8,3,6],s=[2,7,4,5];function c(e){if(e in a)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=o.length;n--;)if((e=o[n]+t)in a)return e}function l(e,t){var n=i.indexOf(e)>-1?i:s,r=n.indexOf(e),o=t/90%n.length;return n[(n.length+r+o%n.length)%n.length]}function u(e,t){for(var n in e=e||{},t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},u(e[n],t[n])):e[n]=t[n];return e}function A(e){return u({},e)}function h(e,t,n){var r;return function(){var o=this,a=arguments,i=function(){r=null,n||e.apply(o,a)},s=n&&!r;clearTimeout(r),r=setTimeout(i,t),s&&e.apply(o,a)}}function d(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function p(e,t,n){if("string"===typeof t){var r=t;(t={})[r]=n}for(var o in t)e.style[o]=t[o]}function f(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function g(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}function m(e,t){for(var n in t)e.setAttribute(n,t[n])}function y(e){return parseInt(e,10)}function v(e,t){if(!e)throw"Source image missing";var n=new Image;return n.style.opacity="0",new Promise((function(r,o){function a(){n.style.opacity="1",setTimeout((function(){r(n)}),1)}n.removeAttribute("crossOrigin"),e.match(/^https?:\/\/|^\/\//)&&n.setAttribute("crossOrigin","anonymous"),n.onload=function(){t?EXIF.getData(n,(function(){a()})):a()},n.onerror=function(e){n.style.opacity=1,setTimeout((function(){o(e)}),1)},n.src=e}))}function b(e,t){var n=e.naturalWidth,r=e.naturalHeight,o=t||k(e);if(o&&o>=5){var a=n;n=r,r=a}return{width:n,height:r}}n=c("transform"),t=c("transformOrigin"),r=c("userSelect");var w={translate3d:{suffix:", 0px"},translate:{suffix:""}},x=function(e,t,n){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(n)};x.parse=function(e){return e.style?x.parse(e.style[n]):e.indexOf("matrix")>-1||e.indexOf("none")>-1?x.fromMatrix(e):x.fromString(e)},x.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new x(y(t[4]),y(t[5]),parseFloat(t[0]))},x.fromString=function(e){var t=e.split(") "),n=t[0].substring(ae.globals.translate.length+1).split(","),r=t.length>1?t[1].substring(6):1,o=n.length>1?n[0]:0,a=n.length>1?n[1]:0;return new x(o,a,r)},x.prototype.toString=function(){var e=w[ae.globals.translate].suffix||"";return ae.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var C=function(e){if(!e||!e.style[t])return this.x=0,void(this.y=0);var n=e.style[t].split(" ");this.x=parseFloat(n[0]),this.y=parseFloat(n[1])};function k(e){return e.exifdata&&e.exifdata.Orientation?y(e.exifdata.Orientation):1}function B(e,t,n){var r=t.width,o=t.height,a=e.getContext("2d");switch(e.width=t.width,e.height=t.height,a.save(),n){case 2:a.translate(r,0),a.scale(-1,1);break;case 3:a.translate(r,o),a.rotate(180*Math.PI/180);break;case 4:a.translate(0,o),a.scale(1,-1);break;case 5:e.width=o,e.height=r,a.rotate(90*Math.PI/180),a.scale(1,-1);break;case 6:e.width=o,e.height=r,a.rotate(90*Math.PI/180),a.translate(0,-o);break;case 7:e.width=o,e.height=r,a.rotate(-90*Math.PI/180),a.translate(-r,o),a.scale(1,-1);break;case 8:e.width=o,e.height=r,a.translate(0,r),a.rotate(-90*Math.PI/180)}a.drawImage(t,0,0,r,o),a.restore()}function S(){var e,t,n,r,o,a,i=this,s="croppie-container",c=i.options.viewport.type?"cr-vp-"+i.options.viewport.type:null;i.options.useCanvas=i.options.enableOrientation||I.call(i),i.data={},i.elements={},e=i.elements.boundary=document.createElement("div"),n=i.elements.viewport=document.createElement("div"),t=i.elements.img=document.createElement("img"),r=i.elements.overlay=document.createElement("div"),i.options.useCanvas?(i.elements.canvas=document.createElement("canvas"),i.elements.preview=i.elements.canvas):i.elements.preview=t,f(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),o=i.options.boundary.width,a=i.options.boundary.height,p(e,{width:o+(isNaN(o)?"":"px"),height:a+(isNaN(a)?"":"px")}),f(n,"cr-viewport"),c&&f(n,c),p(n,{width:i.options.viewport.width+"px",height:i.options.viewport.height+"px"}),n.setAttribute("tabindex",0),f(i.elements.preview,"cr-image"),m(i.elements.preview,{alt:"preview","aria-grabbed":"false"}),f(r,"cr-overlay"),i.element.appendChild(e),e.appendChild(i.elements.preview),e.appendChild(n),e.appendChild(r),f(i.element,s),i.options.customClass&&f(i.element,i.options.customClass),O.call(this),i.options.enableZoom&&F.call(i),i.options.enableResize&&E.call(i)}function I(){return this.options.enableExif&&window.EXIF}function E(){var e,t,n,o,a,i,s,c=this,l=document.createElement("div"),u=!1,A=50;function h(i){if((void 0===i.button||0===i.button)&&(i.preventDefault(),!u)){var s=c.elements.overlay.getBoundingClientRect();if(u=!0,t=i.pageX,n=i.pageY,e=-1!==i.currentTarget.className.indexOf("vertical")?"v":"h",o=s.width,a=s.height,i.touches){var l=i.touches[0];t=l.pageX,n=l.pageY}window.addEventListener("mousemove",d),window.addEventListener("touchmove",d),window.addEventListener("mouseup",g),window.addEventListener("touchend",g),document.body.style[r]="none"}}function d(r){var i=r.pageX,s=r.pageY;if(r.preventDefault(),r.touches){var u=r.touches[0];i=u.pageX,s=u.pageY}var h=i-t,d=s-n,f=c.options.viewport.height+d,g=c.options.viewport.width+h;"v"===e&&f>=A&&f<=a?(p(l,{height:f+"px"}),c.options.boundary.height+=d,p(c.elements.boundary,{height:c.options.boundary.height+"px"}),c.options.viewport.height+=d,p(c.elements.viewport,{height:c.options.viewport.height+"px"})):"h"===e&&g>=A&&g<=o&&(p(l,{width:g+"px"}),c.options.boundary.width+=h,p(c.elements.boundary,{width:c.options.boundary.width+"px"}),c.options.viewport.width+=h,p(c.elements.viewport,{width:c.options.viewport.width+"px"})),R.call(c),Q.call(c),L.call(c),D.call(c),n=s,t=i}function g(){u=!1,window.removeEventListener("mousemove",d),window.removeEventListener("touchmove",d),window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g),document.body.style[r]=""}f(l,"cr-resizer"),p(l,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(f(i=document.createElement("div"),"cr-resizer-vertical"),l.appendChild(i)),this.options.resizeControls.width&&(f(s=document.createElement("div"),"cr-resizer-horisontal"),l.appendChild(s)),i&&(i.addEventListener("mousedown",h),i.addEventListener("touchstart",h)),s&&(s.addEventListener("mousedown",h),s.addEventListener("touchstart",h)),this.elements.boundary.appendChild(l)}function N(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=Y(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function F(){var e=this,t=e.elements.zoomerWrap=document.createElement("div"),n=e.elements.zoomer=document.createElement("input");function r(){T.call(e,{value:parseFloat(n.value),origin:new C(e.elements.preview),viewportRect:e.elements.viewport.getBoundingClientRect(),transform:x.parse(e.elements.preview)})}function o(t){var n,o;if("ctrl"===e.options.mouseWheelZoom&&!0!==t.ctrlKey)return 0;n=t.wheelDelta?t.wheelDelta/1200:t.deltaY?t.deltaY/1060:t.detail?t.detail/-60:0,o=e._currentZoom+n*e._currentZoom,t.preventDefault(),N.call(e,o),r.call(e)}f(t,"cr-slider-wrap"),f(n,"cr-slider"),n.type="range",n.step="0.0001",n.value="1",n.style.display=e.options.showZoomer?"":"none",n.setAttribute("aria-label","zoom"),e.element.appendChild(t),t.appendChild(n),e._currentZoom=1,e.elements.zoomer.addEventListener("input",r),e.elements.zoomer.addEventListener("change",r),e.options.mouseWheelZoom&&(e.elements.boundary.addEventListener("mousewheel",o),e.elements.boundary.addEventListener("DOMMouseScroll",o))}function T(e){var r=this,o=e?e.transform:x.parse(r.elements.preview),a=e?e.viewportRect:r.elements.viewport.getBoundingClientRect(),i=e?e.origin:new C(r.elements.preview);function s(){var e={};e[n]=o.toString(),e[t]=i.toString(),p(r.elements.preview,e)}if(r._currentZoom=e?e.value:r._currentZoom,o.scale=r._currentZoom,r.elements.zoomer.setAttribute("aria-valuenow",r._currentZoom),s(),r.options.enforceBoundary){var c=_.call(r,a),l=c.translate,u=c.origin;o.x>=l.maxX&&(i.x=u.minX,o.x=l.maxX),o.x<=l.minX&&(i.x=u.maxX,o.x=l.minX),o.y>=l.maxY&&(i.y=u.minY,o.y=l.maxY),o.y<=l.minY&&(i.y=u.maxY,o.y=l.minY)}s(),U.call(r),D.call(r)}function _(e){var t=this,n=t._currentZoom,r=e.width,o=e.height,a=t.elements.boundary.clientWidth/2,i=t.elements.boundary.clientHeight/2,s=t.elements.preview.getBoundingClientRect(),c=s.width,l=s.height,u=r/2,A=o/2,h=-1*(u/n-a),d=-1*(A/n-i),p=1/n*u,f=1/n*A;return{translate:{maxX:h,minX:h-(c*(1/n)-r*(1/n)),maxY:d,minY:d-(l*(1/n)-o*(1/n))},origin:{maxX:c*(1/n)-p,minX:p,maxY:l*(1/n)-f,minY:f}}}function L(e){var r=this,o=r._currentZoom,a=r.elements.preview.getBoundingClientRect(),i=r.elements.viewport.getBoundingClientRect(),s=x.parse(r.elements.preview.style[n]),c=new C(r.elements.preview),l=i.top-a.top+i.height/2,u=i.left-a.left+i.width/2,A={},h={};if(e){var d=c.x,f=c.y,g=s.x,m=s.y;A.y=d,A.x=f,s.y=g,s.x=m}else A.y=l/o,A.x=u/o,h.y=(A.y-c.y)*(1-o),h.x=(A.x-c.x)*(1-o),s.x-=h.x,s.y-=h.y;var y={};y[t]=A.x+"px "+A.y+"px",y[n]=s.toString(),p(r.elements.preview,y)}function O(){var e,t,o,a,i,s=this,c=!1;function l(e,t){var n=s.elements.preview.getBoundingClientRect(),r=i.y+t,o=i.x+e;s.options.enforceBoundary?(a.top>n.top+t&&a.bottom<n.bottom+t&&(i.y=r),a.left>n.left+e&&a.right<n.right+e&&(i.x=o)):(i.y=r,i.x=o)}function u(e){s.elements.preview.setAttribute("aria-grabbed",e),s.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function A(e){var t,n=37,o=38,c=39,l=40;if(!e.shiftKey||e.keyCode!==o&&e.keyCode!==l){if(s.options.enableKeyMovement&&e.keyCode>=37&&e.keyCode<=40){e.preventDefault();var u=A(e.keyCode);i=x.parse(s.elements.preview),document.body.style[r]="none",a=s.elements.viewport.getBoundingClientRect(),h(u)}}else t=e.keyCode===o?parseFloat(s.elements.zoomer.value)+parseFloat(s.elements.zoomer.step):parseFloat(s.elements.zoomer.value)-parseFloat(s.elements.zoomer.step),s.setZoom(t);function A(e){switch(e){case n:return[1,0];case o:return[0,1];case c:return[-1,0];case l:return[0,-1]}}}function h(e){var t={};l(e[0],e[1]),t[n]=i.toString(),p(s.elements.preview,t),R.call(s),document.body.style[r]="",L.call(s),D.call(s),o=0}function f(n){if((void 0===n.button||0===n.button)&&(n.preventDefault(),!c)){if(c=!0,e=n.pageX,t=n.pageY,n.touches){var o=n.touches[0];e=o.pageX,t=o.pageY}u(c),i=x.parse(s.elements.preview),window.addEventListener("mousemove",g),window.addEventListener("touchmove",g),window.addEventListener("mouseup",m),window.addEventListener("touchend",m),document.body.style[r]="none",a=s.elements.viewport.getBoundingClientRect()}}function g(r){r.preventDefault();var a=r.pageX,c=r.pageY;if(r.touches){var u=r.touches[0];a=u.pageX,c=u.pageY}var A=a-e,h=c-t,f={};if("touchmove"===r.type&&r.touches.length>1){var g=r.touches[0],m=r.touches[1],y=Math.sqrt((g.pageX-m.pageX)*(g.pageX-m.pageX)+(g.pageY-m.pageY)*(g.pageY-m.pageY));o||(o=y/s._currentZoom);var v=y/o;return N.call(s,v),void d(s.elements.zoomer)}l(A,h),f[n]=i.toString(),p(s.elements.preview,f),R.call(s),t=c,e=a}function m(){u(c=!1),window.removeEventListener("mousemove",g),window.removeEventListener("touchmove",g),window.removeEventListener("mouseup",m),window.removeEventListener("touchend",m),document.body.style[r]="",L.call(s),D.call(s),o=0}s.elements.overlay.addEventListener("mousedown",f),s.elements.viewport.addEventListener("keydown",A),s.elements.overlay.addEventListener("touchstart",f)}function R(){if(this.elements){var e=this,t=e.elements.boundary.getBoundingClientRect(),n=e.elements.preview.getBoundingClientRect();p(e.elements.overlay,{width:n.width+"px",height:n.height+"px",top:n.top-t.top+"px",left:n.left-t.left+"px"})}}C.prototype.toString=function(){return this.x+"px "+this.y+"px"};var U=h(R,500);function D(){var e,t=this,n=t.get();P.call(t)&&(t.options.update.call(t,n),t.$&&"undefined"===typeof Prototype?t.$(t.element).trigger("update.croppie",n):(window.CustomEvent?e=new CustomEvent("update",{detail:n}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,n),t.element.dispatchEvent(e)))}function P(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function M(){var e,r=this,o=1,a={},i=r.elements.preview,s=new x(0,0,o),c=new C;P.call(r)&&!r.data.bound&&(r.data.bound=!0,a[n]=s.toString(),a[t]=c.toString(),a.opacity=1,p(i,a),e=r.elements.preview.getBoundingClientRect(),r._originalImageWidth=e.width,r._originalImageHeight=e.height,r.data.orientation=I.call(r)?k(r.elements.img):r.data.orientation,r.options.enableZoom?Q.call(r,!0):r._currentZoom=o,s.scale=r._currentZoom,a[n]=s.toString(),p(i,a),r.data.points.length?H.call(r,r.data.points):z.call(r),L.call(r),R.call(r))}function Q(e){var t,n,r,o,a=this,i=Math.max(a.options.minZoom,0)||0,s=a.options.maxZoom||1.5,c=a.elements.zoomer,l=parseFloat(c.value),u=a.elements.boundary.getBoundingClientRect(),A=b(a.elements.img,a.data.orientation),h=a.elements.viewport.getBoundingClientRect();a.options.enforceBoundary&&(r=h.width/A.width,o=h.height/A.height,i=Math.max(r,o)),i>=s&&(s=i+1),c.min=Y(i,4),c.max=Y(s,4),!e&&(l<c.min||l>c.max)?N.call(a,l<c.min?c.min:c.max):e&&(n=Math.max(u.width/A.width,u.height/A.height),t=null!==a.data.boundZoom?a.data.boundZoom:n,N.call(a,t)),d(c)}function H(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var r=this,o=e[2]-e[0],a=r.elements.viewport.getBoundingClientRect(),i=r.elements.boundary.getBoundingClientRect(),s={left:a.left-i.left,top:a.top-i.top},c=a.width/o,l=e[1],u=e[0],A=-1*e[1]+s.top,h=-1*e[0]+s.left,d={};d[t]=u+"px "+l+"px",d[n]=new x(h,A,c).toString(),p(r.elements.preview,d),N.call(r,c),r._currentZoom=c}function z(){var e=this,t=e.elements.preview.getBoundingClientRect(),r=e.elements.viewport.getBoundingClientRect(),o=e.elements.boundary.getBoundingClientRect(),a=r.left-o.left,i=r.top-o.top,s=a-(t.width-r.width)/2,c=i-(t.height-r.height)/2,l=new x(s,c,e._currentZoom);p(e.elements.preview,n,l.toString())}function V(e){var t=this,n=t.elements.canvas,r=t.elements.img;n.getContext("2d").clearRect(0,0,n.width,n.height),n.width=r.width,n.height=r.height,B(n,r,t.options.enableOrientation&&e||k(r))}function j(e){var t=this,n=e.points,r=y(n[0]),o=y(n[1]),a=y(n[2])-r,i=y(n[3])-o,s=e.circle,c=document.createElement("canvas"),l=c.getContext("2d"),u=e.outputWidth||a,A=e.outputHeight||i;c.width=u,c.height=A,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,u,A));var h=r,d=o,p=a,f=i,g=0,m=0,v=u,b=A;return r<0&&(h=0,g=Math.abs(r)/a*u),p+h>t._originalImageWidth&&(v=(p=t._originalImageWidth-h)/a*u),o<0&&(d=0,m=Math.abs(o)/i*A),f+d>t._originalImageHeight&&(b=(f=t._originalImageHeight-d)/i*A),l.drawImage(this.elements.preview,h,d,p,f,g,m,v,b),s&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(c.width/2,c.height/2,c.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),c}function W(e){var t=e.points,n=document.createElement("div"),r=document.createElement("img"),o=t[2]-t[0],a=t[3]-t[1];return f(n,"croppie-result"),n.appendChild(r),p(r,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),r.src=e.url,p(n,{width:o+"px",height:a+"px"}),n}function K(e){return j.call(this,e).toDataURL(e.format,e.quality)}function G(e){var t=this;return new Promise((function(n){j.call(t,e).toBlob((function(e){n(e)}),e.format,e.quality)}))}function q(e){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,(function(t){e.classList.add(t)})),this.elements.img.parentNode.replaceChild(e,this.elements.img),this.elements.preview=e),this.elements.img=e}function X(e,t){var n,r=this,o=[],a=null,i=I.call(r);if("string"===typeof e)n=e,e={};else if(Array.isArray(e))o=e.slice();else{if("undefined"===typeof e&&r.data.url)return M.call(r),D.call(r),null;n=e.url,o=e.points||[],a="undefined"===typeof e.zoom?null:e.zoom}return r.data.bound=!1,r.data.url=n||r.data.url,r.data.boundZoom=a,v(n,i).then((function(n){if(q.call(r,n),o.length)r.options.relative&&(o=[o[0]*n.naturalWidth/100,o[1]*n.naturalHeight/100,o[2]*n.naturalWidth/100,o[3]*n.naturalHeight/100]);else{var a,i,s=b(n),c=r.elements.viewport.getBoundingClientRect(),l=c.width/c.height;s.width/s.height>l?a=(i=s.height)*l:(a=s.width,i=s.height/l);var u=(s.width-a)/2,A=(s.height-i)/2,h=u+a,d=A+i;r.data.points=[u,A,h,d]}r.data.orientation=e.orientation||1,r.data.points=o.map((function(e){return parseFloat(e)})),r.options.useCanvas&&V.call(r,r.data.orientation),M.call(r),D.call(r),t&&t()}))}function Y(e,t){return parseFloat(e).toFixed(t||0)}function Z(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),r=n.left-t.left,o=n.top-t.top,a=(n.width-e.elements.viewport.offsetWidth)/2,i=(n.height-e.elements.viewport.offsetHeight)/2,s=r+e.elements.viewport.offsetWidth+a,c=o+e.elements.viewport.offsetHeight+i,l=e._currentZoom;(l===1/0||isNaN(l))&&(l=1);var u=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return r=Math.max(u,r/l),o=Math.max(u,o/l),s=Math.max(u,s/l),c=Math.max(u,c/l),{points:[Y(r),Y(o),Y(s),Y(c)],zoom:l,orientation:e.data.orientation}}var J={type:"canvas",format:"png",quality:1},$=["jpeg","webp","png"];function ee(e){var t=this,n=Z.call(t),r=u(A(J),A(e)),o="string"===typeof e?e:r.type||"base64",a=r.size||"viewport",i=r.format,s=r.quality,c=r.backgroundColor,l="boolean"===typeof r.circle?r.circle:"circle"===t.options.viewport.type,h=t.elements.viewport.getBoundingClientRect(),d=h.width/h.height;return"viewport"===a?(n.outputWidth=h.width,n.outputHeight=h.height):"object"===typeof a&&(a.width&&a.height?(n.outputWidth=a.width,n.outputHeight=a.height):a.width?(n.outputWidth=a.width,n.outputHeight=a.width/d):a.height&&(n.outputWidth=a.height*d,n.outputHeight=a.height)),$.indexOf(i)>-1&&(n.format="image/"+i,n.quality=s),n.circle=l,n.url=t.data.url,n.backgroundColor=c,new Promise((function(e){switch(o.toLowerCase()){case"rawcanvas":e(j.call(t,n));break;case"canvas":case"base64":e(K.call(t,n));break;case"blob":G.call(t,n).then(e);break;default:e(W.call(t,n))}}))}function te(){M.call(this)}function ne(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t=this,n=t.elements.canvas;if(t.data.orientation=l(t.data.orientation,e),B(n,t.elements.img,t.data.orientation),L.call(t,!0),Q.call(t),Math.abs(e)/90%2===1){var r=t._originalImageHeight,o=t._originalImageWidth;t._originalImageWidth=r,t._originalImageHeight=o}}function re(){var e=this;e.element.removeChild(e.elements.boundary),g(e.element,"croppie-container"),e.options.enableZoom&&e.element.removeChild(e.elements.zoomerWrap),delete e.elements}if("undefined"!==typeof window&&window.jQuery){var oe=window.jQuery;oe.fn.croppie=function(e){if("string"===typeof e){var t=Array.prototype.slice.call(arguments,1),n=oe(this).data("croppie");return"get"===e?n.get():"result"===e?n.result.apply(n,t):"bind"===e?n.bind.apply(n,t):this.each((function(){var n=oe(this).data("croppie");if(n){var r=n[e];if(!oe.isFunction(r))throw"Croppie "+e+" method not found";r.apply(n,t),"destroy"===e&&oe(this).removeData("croppie")}}))}return this.each((function(){var t=new ae(this,e);t.$=oe,oe(this).data("croppie",t)}))}}function ae(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=u(A(ae.defaults),t),"img"===this.element.tagName.toLowerCase()){var n=this.element;f(n,"cr-original-image"),m(n,{"aria-hidden":"true",alt:""});var r=document.createElement("div");this.element.parentNode.appendChild(r),r.appendChild(n),this.element=r,this.options.url=this.options.url||n.src}if(S.call(this),this.options.url){var o={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,X.call(this,o)}}return ae.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},ae.globals={translate:"translate3d"},u(ae.prototype,{bind:function(e,t){return X.call(this,e,t)},get:function(){var e=Z.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return ee.call(this,e)},refresh:function(){return te.call(this)},setZoom:function(e){N.call(this,e),d(this.elements.zoomer)},rotate:function(e){ne.call(this,e)},destroy:function(){return re.call(this)}}),ae},void 0===(o="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=o)},2618:(e,t,n)=>{var r;!function(){"use strict";var o=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:o,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},1132:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,o=t.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!a)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(o)return o(e,n).value}return e[n]};e.exports=function e(){var t,n,r,o,l,u,A=arguments[0],h=1,d=arguments.length,p=!1;for("boolean"===typeof A&&(p=A,A=arguments[1]||{},h=2),(null==A||"object"!==typeof A&&"function"!==typeof A)&&(A={});h<d;++h)if(null!=(t=arguments[h]))for(n in t)r=c(A,n),A!==(o=c(t,n))&&(p&&o&&(i(o)||(l=a(o)))?(l?(l=!1,u=r&&a(r)?r:[]):u=r&&i(r)?r:{},s(A,{name:n,newValue:e(p,u,o)})):"undefined"!==typeof o&&s(A,{name:n,newValue:o}));return A}},5498:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{c(r.next(e))}catch(Dt){a(Dt)}}function s(e){try{c(r.throw(e))}catch(Dt){a(Dt)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(Dt){a=[6,Dt],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,o){return new e(this.left+t,this.top+n,this.width+r,this.height+o)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),s=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},c=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),o=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,o)},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&o)<<10)+(1023&a)+65536):(t.push(o),n--)}else t.push(o)}return t},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],o=-1,a="";++o<n;){var i=e[o];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(o+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),d=0;d<A.length;d++)h[A.charCodeAt(d)]=d;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"===typeof Uint8Array?[]:new Uint8Array(256),g=0;g<p.length;g++)f[p.charCodeAt(g)]=g;for(var m=function(e){var t,n,r,o,a,i=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=f[e.charCodeAt(t)],r=f[e.charCodeAt(t+1)],o=f[e.charCodeAt(t+2)],a=f[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&a;return l},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},b=5,w=11,x=2,C=65536>>b,k=(1<<b)-1,B=C+(1024>>b)+32,S=65536>>w,I=(1<<w-b)-1,E=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},N=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},F=function(e,t){var n=m(e),r=Array.isArray(n)?v(n):new Uint32Array(n),o=Array.isArray(n)?y(n):new Uint16Array(n),a=24,i=E(o,a/2,r[4]/2),s=2===r[5]?E(o,(a+r[4])/2):N(r,Math.ceil((a+r[4])/4));return new T(r[0],r[1],r[2],r[3],i,s)},T=function(){function e(e,t,n,r,o,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=o,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>b])<<x)+(e&k),this.data[t];if(e<=65535)return t=((t=this.index[C+(e-55296>>b)])<<x)+(e&k),this.data[t];if(e<this.highStart)return t=B-S+(e>>w),t=this.index[t],t+=e>>b&I,t=((t=this.index[t])<<x)+(e&k),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L="undefined"===typeof Uint8Array?[]:new Uint8Array(256),O=0;O<_.length;O++)L[_.charCodeAt(O)]=O;var R=50,U=1,D=2,P=3,M=4,Q=5,H=7,z=8,V=9,j=10,W=11,K=12,G=13,q=14,X=15,Y=16,Z=17,J=18,$=19,ee=20,te=21,ne=22,re=23,oe=24,ae=25,ie=26,se=27,ce=28,le=29,ue=30,Ae=31,he=32,de=33,pe=34,fe=35,ge=36,me=37,ye=38,ve=39,be=40,we=41,xe=42,Ce=43,ke=[9001,65288],Be="!",Se="\xd7",Ie="\xf7",Ee=F("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Ne=[ue,ge],Fe=[U,D,P,Q],Te=[j,z],_e=[se,ie],Le=Fe.concat(Te),Oe=[ye,ve,be,pe,fe],Re=[X,G],Ue=function(e,t){void 0===t&&(t="strict");var n=[],r=[],o=[];return e.forEach((function(e,a){var i=Ee.get(e);if(i>R?(o.push(!0),i-=R):o.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(a),n.push(Y);if(i===M||i===W){if(0===a)return r.push(a),n.push(ue);var s=n[a-1];return-1===Le.indexOf(s)?(r.push(r[a-1]),n.push(s)):(r.push(a),n.push(ue))}return r.push(a),i===Ae?n.push("strict"===t?te:me):i===xe||i===le?n.push(ue):i===Ce?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(me):n.push(ue):void n.push(i)})),[r,n,o]},De=function(e,t,n,r){var o=r[n];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var a=n;a<=r.length;){if((c=r[++a])===t)return!0;if(c!==j)break}if(o===j)for(a=n;a>0;){var i=r[--a];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var s=n;s<=r.length;){var c;if((c=r[++s])===t)return!0;if(c!==j)break}if(i!==j)break}return!1},Pe=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==j)return r;n--}return 0},Me=function(e,t,n,r,o){if(0===n[r])return Se;var a=r-1;if(Array.isArray(o)&&!0===o[a])return Se;var i=a-1,s=a+1,c=t[a],l=i>=0?t[i]:0,u=t[s];if(c===D&&u===P)return Se;if(-1!==Fe.indexOf(c))return Be;if(-1!==Fe.indexOf(u))return Se;if(-1!==Te.indexOf(u))return Se;if(Pe(a,t)===z)return Ie;if(Ee.get(e[a])===W)return Se;if((c===he||c===de)&&Ee.get(e[s])===W)return Se;if(c===H||u===H)return Se;if(c===V)return Se;if(-1===[j,G,X].indexOf(c)&&u===V)return Se;if(-1!==[Z,J,$,oe,ce].indexOf(u))return Se;if(Pe(a,t)===ne)return Se;if(De(re,ne,a,t))return Se;if(De([Z,J],te,a,t))return Se;if(De(K,K,a,t))return Se;if(c===j)return Ie;if(c===re||u===re)return Se;if(u===Y||c===Y)return Ie;if(-1!==[G,X,te].indexOf(u)||c===q)return Se;if(l===ge&&-1!==Re.indexOf(c))return Se;if(c===ce&&u===ge)return Se;if(u===ee)return Se;if(-1!==Ne.indexOf(u)&&c===ae||-1!==Ne.indexOf(c)&&u===ae)return Se;if(c===se&&-1!==[me,he,de].indexOf(u)||-1!==[me,he,de].indexOf(c)&&u===ie)return Se;if(-1!==Ne.indexOf(c)&&-1!==_e.indexOf(u)||-1!==_e.indexOf(c)&&-1!==Ne.indexOf(u))return Se;if(-1!==[se,ie].indexOf(c)&&(u===ae||-1!==[ne,X].indexOf(u)&&t[s+1]===ae)||-1!==[ne,X].indexOf(c)&&u===ae||c===ae&&-1!==[ae,ce,oe].indexOf(u))return Se;if(-1!==[ae,ce,oe,Z,J].indexOf(u))for(var A=a;A>=0;){if((h=t[A])===ae)return Se;if(-1===[ce,oe].indexOf(h))break;A--}if(-1!==[se,ie].indexOf(u))for(A=-1!==[Z,J].indexOf(c)?i:a;A>=0;){var h;if((h=t[A])===ae)return Se;if(-1===[ce,oe].indexOf(h))break;A--}if(ye===c&&-1!==[ye,ve,pe,fe].indexOf(u)||-1!==[ve,pe].indexOf(c)&&-1!==[ve,be].indexOf(u)||-1!==[be,fe].indexOf(c)&&u===be)return Se;if(-1!==Oe.indexOf(c)&&-1!==[ee,ie].indexOf(u)||-1!==Oe.indexOf(u)&&c===se)return Se;if(-1!==Ne.indexOf(c)&&-1!==Ne.indexOf(u))return Se;if(c===oe&&-1!==Ne.indexOf(u))return Se;if(-1!==Ne.concat(ae).indexOf(c)&&u===ne&&-1===ke.indexOf(e[s])||-1!==Ne.concat(ae).indexOf(u)&&c===J)return Se;if(c===we&&u===we){for(var d=n[a],p=1;d>0&&t[--d]===we;)p++;if(p%2!==0)return Se}return c===he&&u===de?Se:Ie},Qe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Ue(e,t.lineBreak),r=n[0],o=n[1],a=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(o=o.map((function(e){return-1!==[ae,ue,xe].indexOf(e)?me:e})));var i="keep-all"===t.wordBreak?a.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[r,o,i]},He=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Be,this.start=n,this.end=r}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),ze=function(e,t){var n=l(e),r=Qe(n,t),o=r[0],a=r[1],i=r[2],s=n.length,c=0,u=0;return{next:function(){if(u>=s)return{done:!0,value:null};for(var e=Se;u<s&&(e=Me(n,a,o,++u,i))===Se;);if(e!==Se||u===s){var t=new He(n,e,c,u);return c=u,{value:t,done:!1}}return{done:!0,value:null}}}},Ve=1,je=2,We=4,Ke=8,Ge=10,qe=47,Xe=92,Ye=9,Ze=32,Je=34,$e=61,et=35,tt=36,nt=37,rt=39,ot=40,at=41,it=95,st=45,ct=33,lt=60,ut=62,At=64,ht=91,dt=93,pt=61,ft=123,gt=63,mt=125,yt=124,vt=126,bt=128,wt=65533,xt=42,Ct=43,kt=44,Bt=58,St=59,It=46,Et=0,Nt=8,Ft=11,Tt=14,_t=31,Lt=127,Ot=-1,Rt=48,Ut=97,Dt=101,Pt=102,Mt=117,Qt=122,Ht=65,zt=69,Vt=70,jt=85,Wt=90,Kt=function(e){return e>=Rt&&e<=57},Gt=function(e){return e>=55296&&e<=57343},qt=function(e){return Kt(e)||e>=Ht&&e<=Vt||e>=Ut&&e<=Pt},Xt=function(e){return e>=Ut&&e<=Qt},Yt=function(e){return e>=Ht&&e<=Wt},Zt=function(e){return Xt(e)||Yt(e)},Jt=function(e){return e>=bt},$t=function(e){return e===Ge||e===Ye||e===Ze},en=function(e){return Zt(e)||Jt(e)||e===it},tn=function(e){return en(e)||Kt(e)||e===st},nn=function(e){return e>=Et&&e<=Nt||e===Ft||e>=Tt&&e<=_t||e===Lt},rn=function(e,t){return e===Xe&&t!==Ge},on=function(e,t,n){return e===st?en(t)||rn(t,n):!!en(e)||!(e!==Xe||!rn(e,t))},an=function(e,t,n){return e===Ct||e===st?!!Kt(t)||t===It&&Kt(n):Kt(e===It?t:e)},sn=function(e){var t=0,n=1;e[t]!==Ct&&e[t]!==st||(e[t]===st&&(n=-1),t++);for(var r=[];Kt(e[t]);)r.push(e[t++]);var o=r.length?parseInt(u.apply(void 0,r),10):0;e[t]===It&&t++;for(var a=[];Kt(e[t]);)a.push(e[t++]);var i=a.length,s=i?parseInt(u.apply(void 0,a),10):0;e[t]!==zt&&e[t]!==Dt||t++;var c=1;e[t]!==Ct&&e[t]!==st||(e[t]===st&&(c=-1),t++);for(var l=[];Kt(e[t]);)l.push(e[t++]);var A=l.length?parseInt(u.apply(void 0,l),10):0;return n*(o+s*Math.pow(10,-i))*Math.pow(10,c*A)},cn={type:2},ln={type:3},un={type:4},An={type:13},hn={type:8},dn={type:21},pn={type:9},fn={type:10},gn={type:11},mn={type:12},yn={type:14},vn={type:23},bn={type:1},wn={type:25},xn={type:24},Cn={type:26},kn={type:27},Bn={type:28},Sn={type:29},In={type:31},En={type:32},Nn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==En;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Je:return this.consumeStringToken(Je);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var o=on(t,n,r)?je:Ve;return{type:5,value:this.consumeName(),flags:o}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),An;break;case rt:return this.consumeStringToken(rt);case ot:return cn;case at:return ln;case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),yn;break;case Ct:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case kt:return un;case st:var a=e,i=this.peekCodePoint(0),s=this.peekCodePoint(1);if(an(a,i,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(on(a,i,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===st&&s===ut)return this.consumeCodePoint(),this.consumeCodePoint(),xn;break;case It:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===xt)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===xt&&(c=this.consumeCodePoint())===qe)return this.consumeToken();if(c===Ot)return this.consumeToken()}break;case Bt:return Cn;case St:return kn;case lt:if(this.peekCodePoint(0)===ct&&this.peekCodePoint(1)===st&&this.peekCodePoint(2)===st)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case At:var l=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(on(l,A,h))return{type:7,value:this.consumeName()};break;case ht:return Bn;case Xe:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case dt:return Sn;case pt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),hn;break;case ft:return gn;case mt:return mn;case Mt:case jt:var d=this.peekCodePoint(0),p=this.peekCodePoint(1);return d!==Ct||!qt(p)&&p!==gt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;if(this.peekCodePoint(0)===yt)return this.consumeCodePoint(),dn;break;case vt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;break;case Ot:return En}return $t(e)?(this.consumeWhiteSpace(),In):Kt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===gt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(u.apply(void 0,e.map((function(e){return e===gt?Rt:e}))),16),end:parseInt(u.apply(void 0,e.map((function(e){return e===gt?Vt:e}))),16)};var r=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===st&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];qt(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(u.apply(void 0,o),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===ot?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ot?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ot)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Je){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ot||this.peekCodePoint(0)===at)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vn)}for(;;){var r=this.consumeCodePoint();if(r===Ot||r===at)return{type:22,value:u.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ot||this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vn);if(r===Je||r===rt||r===ot||nn(r))return this.consumeBadUrlRemnants(),vn;if(r===Xe){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),vn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===at||e===Ot)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=u.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Ot||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ge)return this._value.splice(0,n),bn;if(r===Xe){var o=this._value[n+1];o!==Ot&&void 0!==o&&(o===Ge?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,o)&&(t+=this.consumeStringSlice(n),t+=u(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=We,n=this.peekCodePoint(0);for(n!==Ct&&n!==st||e.push(this.consumeCodePoint());Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===It&&Kt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((n===zt||n===Dt)&&((r===Ct||r===st)&&Kt(o)||Kt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ke;Kt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[sn(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),o=this.peekCodePoint(1),a=this.peekCodePoint(2);return on(r,o,a)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=u(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=u(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Gt(n)||n>1114111?wt:n}return e===Ot?wt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=u(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=u(this.consumeEscapedCodePoint())}}},e}(),Fn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Nn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Mn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?En:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Tn=function(e){return 15===e.type},_n=function(e){return 17===e.type},Ln=function(e){return 20===e.type},On=function(e){return 0===e.type},Rn=function(e,t){return Ln(e)&&e.value===t},Un=function(e){return 31!==e.type},Dn=function(e){return 31!==e.type&&4!==e.type},Pn=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Mn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Qn=function(e){return 17===e.type||15===e.type},Hn=function(e){return 16===e.type||Qn(e)},zn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Vn={type:17,number:0,flags:We},jn={type:16,number:50,flags:We},Wn={type:16,number:100,flags:We},Kn=function(e,t,n){var r=e[0],o=e[1];return[Gn(r,t),Gn("undefined"!==typeof o?o:r,n)]},Gn=function(e,t){if(16===e.type)return e.number/100*t;if(Tn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Xn="grad",Yn="rad",Zn="turn",Jn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Xn:return Math.PI/200*t.number;case Yn:return t.number;case Zn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Xn||e.unit===Yn||e.unit===Zn)},er=function(e){switch(e.filter(Ln).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Vn,Vn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Vn,Wn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Wn,Wn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Wn,Vn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=ur[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),o=t.value.substring(1,2),a=t.value.substring(2,3);return ar(parseInt(r+r,16),parseInt(o+o,16),parseInt(a+a,16),1)}if(4===t.value.length){r=t.value.substring(0,1),o=t.value.substring(1,2),a=t.value.substring(2,3);var i=t.value.substring(3,4);return ar(parseInt(r+r,16),parseInt(o+o,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),o=t.value.substring(2,4),a=t.value.substring(4,6),ar(parseInt(r,16),parseInt(o,16),parseInt(a,16),1);if(8===t.value.length)return r=t.value.substring(0,2),o=t.value.substring(2,4),a=t.value.substring(4,6),i=t.value.substring(6,8),ar(parseInt(r,16),parseInt(o,16),parseInt(a,16),parseInt(i,16)/255)}if(20===t.type){var s=hr[t.value.toUpperCase()];if("undefined"!==typeof s)return s}return hr.TRANSPARENT}},rr=function(e){return 0===(255&e)},or=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,o=255&e>>24;return t<255?"rgba("+o+","+r+","+n+","+t/255+")":"rgb("+o+","+r+","+n+")"},ar=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r)<<0)>>>0},ir=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},sr=function(e,t){var n=t.filter(Dn);if(3===n.length){var r=n.map(ir),o=r[0],a=r[1],i=r[2];return ar(o,a,i,1)}if(4===n.length){var s=n.map(ir),c=(o=s[0],a=s[1],i=s[2],s[3]);return ar(o,a,i,c)}return 0};function cr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var lr=function(e,t){var n=t.filter(Dn),r=n[0],o=n[1],a=n[2],i=n[3],s=(17===r.type?tr(r.number):Jn.parse(e,r))/(2*Math.PI),c=Hn(o)?o.number/100:0,l=Hn(a)?a.number/100:0,u="undefined"!==typeof i&&Hn(i)?Gn(i,1):1;if(0===c)return ar(255*l,255*l,255*l,1);var A=l<=.5?l*(c+1):l+c-l*c,h=2*l-A,d=cr(h,A,s+1/3),p=cr(h,A,s),f=cr(h,A,s-1/3);return ar(255*d,255*p,255*f,u)},ur={hsl:lr,hsla:lr,rgb:sr,rgba:sr},Ar=function(e,t){return nr.parse(e,Fn.create(t).parseComponentValue())},hr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},dr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},pr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Hn(r)?{color:n,stop:r}:{color:n,stop:null}},gr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Vn),null===r.stop&&(r.stop=Wn);for(var o=[],a=0,i=0;i<e.length;i++){var s=e[i].stop;if(null!==s){var c=Gn(s,t);c>a?o.push(c):o.push(a),a=c}else o.push(null)}var l=null;for(i=0;i<o.length;i++){var u=o[i];if(null===u)null===l&&(l=i);else if(null!==l){for(var A=i-l,h=(u-o[l-1])/(A+1),d=1;d<=A;d++)o[l+d-1]=h*d;l=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,o[n]/t),0)}}))},mr=function(e,t,n){var r=t/2,o=n/2,a=Gn(e[0],t)-r,i=o-Gn(e[1],n);return(Math.atan2(i,a)+2*Math.PI)%(2*Math.PI)},yr=function(e,t,n){var r="number"===typeof e?e:mr(e,t,n),o=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),a=t/2,i=n/2,s=o/2,c=Math.sin(r-Math.PI/2)*s,l=Math.cos(r-Math.PI/2)*s;return[o,a-l,a+l,i-c,i+c]},vr=function(e,t){return Math.sqrt(e*e+t*t)},br=function(e,t,n,r,o){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var a=t[0],i=t[1],s=vr(n-a,r-i);return(o?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},wr=function(e,t,n,r,o){var a=0,i=0;switch(e.size){case 0:0===e.shape?a=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-o)):1===e.shape&&(a=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-o)));break;case 2:if(0===e.shape)a=i=Math.min(vr(t,n),vr(t,n-o),vr(t-r,n),vr(t-r,n-o));else if(1===e.shape){var s=Math.min(Math.abs(n),Math.abs(n-o))/Math.min(Math.abs(t),Math.abs(t-r)),c=br(r,o,t,n,!0),l=c[0],u=c[1];i=s*(a=vr(l-t,(u-n)/s))}break;case 1:0===e.shape?a=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-o)):1===e.shape&&(a=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-o)));break;case 3:if(0===e.shape)a=i=Math.max(vr(t,n),vr(t,n-o),vr(t-r,n),vr(t-r,n-o));else if(1===e.shape){s=Math.max(Math.abs(n),Math.abs(n-o))/Math.max(Math.abs(t),Math.abs(t-r));var A=br(r,o,t,n,!1);l=A[0],u=A[1],i=s*(a=vr(l-t,(u-n)/s))}}return Array.isArray(e.size)&&(a=Gn(e.size[0],r),i=2===e.size.length?Gn(e.size[1],o):a),[a,i]},xr=function(e,t){var n=tr(180),r=[];return Pn(t).forEach((function(t,o){if(0===o){var a=t[0];if(20===a.type&&-1!==["top","left","right","bottom"].indexOf(a.value))return void(n=er(t));if($n(a))return void(n=(Jn.parse(e,a)+tr(270))%tr(360))}var i=fr(e,t);r.push(i)})),{angle:n,stops:r,type:1}},Cr="closest-side",kr="farthest-side",Br="closest-corner",Sr="farthest-corner",Ir="circle",Er="ellipse",Nr="cover",Fr="contain",Tr=function(e,t){var n=0,r=3,o=[],a=[];return Pn(t).forEach((function(t,i){var s=!0;if(0===i?s=t.reduce((function(e,t){if(Ln(t))switch(t.value){case"center":return a.push(jn),!1;case"top":case"left":return a.push(Vn),!1;case"right":case"bottom":return a.push(Wn),!1}else if(Hn(t)||Qn(t))return a.push(t),!1;return e}),s):1===i&&(s=t.reduce((function(e,t){if(Ln(t))switch(t.value){case Ir:return n=0,!1;case Er:return n=1,!1;case Fr:case Cr:return r=0,!1;case kr:return r=1,!1;case Br:return r=2,!1;case Nr:case Sr:return r=3,!1}else if(Qn(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)),s){var c=fr(e,t);o.push(c)}})),{size:r,shape:n,stops:o,position:a,type:2}},_r=function(e){return 1===e.type},Lr=function(e){return 2===e.type},Or={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Dr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Rr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Dr[e.name])}var Ur,Dr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Pn(t).forEach((function(t,o){if(0===o){var a=t[0];if(20===a.type&&"to"===a.value)return void(n=er(t));if($n(a))return void(n=Jn.parse(e,a))}var i=fr(e,t);r.push(i)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":xr,"-ms-linear-gradient":xr,"-o-linear-gradient":xr,"-webkit-linear-gradient":xr,"radial-gradient":function(e,t){var n=0,r=3,o=[],a=[];return Pn(t).forEach((function(t,i){var s=!0;if(0===i){var c=!1;s=t.reduce((function(e,t){if(c)if(Ln(t))switch(t.value){case"center":return a.push(jn),e;case"top":case"left":return a.push(Vn),e;case"right":case"bottom":return a.push(Wn),e}else(Hn(t)||Qn(t))&&a.push(t);else if(Ln(t))switch(t.value){case Ir:return n=0,!1;case Er:return n=1,!1;case"at":return c=!0,!1;case Cr:return r=0,!1;case Nr:case kr:return r=1,!1;case Fr:case Br:return r=2,!1;case Sr:return r=3,!1}else if(Qn(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)}if(s){var l=fr(e,t);o.push(l)}})),{size:r,shape:n,stops:o,position:a,type:2}},"-moz-radial-gradient":Tr,"-ms-radial-gradient":Tr,"-o-radial-gradient":Tr,"-webkit-radial-gradient":Tr,"-webkit-gradient":function(e,t){var n=tr(180),r=[],o=1,a=0,i=3,s=[];return Pn(t).forEach((function(t,n){var a=t[0];if(0===n){if(Ln(a)&&"linear"===a.value)return void(o=1);if(Ln(a)&&"radial"===a.value)return void(o=2)}if(18===a.type)if("from"===a.name){var i=nr.parse(e,a.values[0]);r.push({stop:Vn,color:i})}else if("to"===a.name)i=nr.parse(e,a.values[0]),r.push({stop:Wn,color:i});else if("color-stop"===a.name){var s=a.values.filter(Dn);if(2===s.length){i=nr.parse(e,s[1]);var c=s[0];_n(c)&&r.push({stop:{type:16,number:100*c.number,flags:c.flags},color:i})}}})),1===o?{angle:(n+tr(180))%tr(360),stops:r,type:o}:{size:i,shape:a,stops:r,position:s,type:o}}},Pr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return Dn(e)&&Rr(e)})).map((function(t){return Or.parse(e,t)}))}},Mr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Qr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Pn(t).map((function(e){return e.filter(Hn)})).map(zn)}},Hr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Pn(t).map((function(e){return e.filter(Ln).map((function(e){return e.value})).join(" ")})).map(zr)}},zr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Ur||(Ur={}));var Vr,jr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Pn(t).map((function(e){return e.filter(Wr)}))}},Wr=function(e){return Ln(e)||Hn(e)},Kr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Gr=Kr("top"),qr=Kr("right"),Xr=Kr("bottom"),Yr=Kr("left"),Zr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return zn(t.filter(Hn))}}},Jr=Zr("top-left"),$r=Zr("top-right"),eo=Zr("bottom-right"),to=Zr("bottom-left"),no=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ro=no("top"),oo=no("right"),ao=no("bottom"),io=no("left"),so=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:0}}},co=so("top"),lo=so("right"),uo=so("bottom"),Ao=so("left"),ho={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},po={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fo={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).reduce((function(e,t){return e|go(t.value)}),0)}},go=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},mo={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yo={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Vr||(Vr={}));var vo,bo={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Vr.STRICT:Vr.NORMAL}},wo={name:"line-height",initialValue:"normal",prefix:!1,type:4},xo=function(e,t){return Ln(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Hn(e)?Gn(e,t):t},Co={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Or.parse(e,t)}},ko={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Bo={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},So=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Io=So("top"),Eo=So("right"),No=So("bottom"),Fo=So("left"),To={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},_o={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Lo=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Oo=Lo("top"),Ro=Lo("right"),Uo=Lo("bottom"),Do=Lo("left"),Po={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Mo={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Qo={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Rn(t[0],"none")?[]:Pn(t).map((function(t){for(var n={color:hr.TRANSPARENT,offsetX:Vn,offsetY:Vn,blur:Vn},r=0,o=0;o<t.length;o++){var a=t[o];Qn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:n.blur=a,r++):n.color=nr.parse(e,a)}return n}))}},Ho={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},zo={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Vo[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Vo={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var o=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],s=t[13];return t[14],t[15],16===t.length?[n,r,o,a,i,s]:null}},jo={type:16,number:50,flags:We},Wo=[jo,jo],Ko={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Hn);return 2!==n.length?Wo:[n[0],n[1]]}},Go={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(vo||(vo={}));for(var qo={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return vo.BREAK_ALL;case"keep-all":return vo.KEEP_ALL;default:return vo.NORMAL}}},Xo={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(_n(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Yo={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Zo={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:1}},Jo={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$o={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},ea={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},ta={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},na={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:Ln(t)&&"bold"===t.value?700:400}},ra={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ln).map((function(e){return e.value}))}},oa={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},aa=function(e,t){return 0!==(e&t)},ia={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},sa={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],o=t.filter(Un),a=0;a<o.length;a++){var i=o[a],s=o[a+1];if(20===i.type){var c=s&&_n(s)?s.number:1;r.push({counter:i.value,increment:c})}}return r}},ca={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Un),o=0;o<r.length;o++){var a=r[o],i=r[o+1];if(Ln(a)&&"none"!==a.value){var s=i&&_n(i)?i.number:0;n.push({counter:a.value,reset:s})}}return n}},la={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Tn).map((function(t){return Yo.parse(e,t)}))}},ua={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],o=t.filter(On);if(o.length%2!==0)return null;for(var a=0;a<o.length;a+=2){var i=o[a].value,s=o[a+1].value;r.push({open:i,close:s})}return r}},Aa=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},ha={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Rn(t[0],"none")?[]:Pn(t).map((function(t){for(var n={color:255,offsetX:Vn,offsetY:Vn,blur:Vn,spread:Vn,inset:!1},r=0,o=0;o<t.length;o++){var a=t[o];Rn(a,"inset")?n.inset=!0:Qn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:2===r?n.blur=a:n.spread=a,r++):n.color=nr.parse(e,a)}return n}))}},da={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Ln).forEach((function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}})),n.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r}},pa={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fa={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:0}},ga=function(){function e(e,t){var n,r;this.animationDuration=va(e,la,t.animationDuration),this.backgroundClip=va(e,dr,t.backgroundClip),this.backgroundColor=va(e,pr,t.backgroundColor),this.backgroundImage=va(e,Pr,t.backgroundImage),this.backgroundOrigin=va(e,Mr,t.backgroundOrigin),this.backgroundPosition=va(e,Qr,t.backgroundPosition),this.backgroundRepeat=va(e,Hr,t.backgroundRepeat),this.backgroundSize=va(e,jr,t.backgroundSize),this.borderTopColor=va(e,Gr,t.borderTopColor),this.borderRightColor=va(e,qr,t.borderRightColor),this.borderBottomColor=va(e,Xr,t.borderBottomColor),this.borderLeftColor=va(e,Yr,t.borderLeftColor),this.borderTopLeftRadius=va(e,Jr,t.borderTopLeftRadius),this.borderTopRightRadius=va(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=va(e,eo,t.borderBottomRightRadius),this.borderBottomLeftRadius=va(e,to,t.borderBottomLeftRadius),this.borderTopStyle=va(e,ro,t.borderTopStyle),this.borderRightStyle=va(e,oo,t.borderRightStyle),this.borderBottomStyle=va(e,ao,t.borderBottomStyle),this.borderLeftStyle=va(e,io,t.borderLeftStyle),this.borderTopWidth=va(e,co,t.borderTopWidth),this.borderRightWidth=va(e,lo,t.borderRightWidth),this.borderBottomWidth=va(e,uo,t.borderBottomWidth),this.borderLeftWidth=va(e,Ao,t.borderLeftWidth),this.boxShadow=va(e,ha,t.boxShadow),this.color=va(e,ho,t.color),this.direction=va(e,po,t.direction),this.display=va(e,fo,t.display),this.float=va(e,mo,t.cssFloat),this.fontFamily=va(e,ea,t.fontFamily),this.fontSize=va(e,ta,t.fontSize),this.fontStyle=va(e,oa,t.fontStyle),this.fontVariant=va(e,ra,t.fontVariant),this.fontWeight=va(e,na,t.fontWeight),this.letterSpacing=va(e,yo,t.letterSpacing),this.lineBreak=va(e,bo,t.lineBreak),this.lineHeight=va(e,wo,t.lineHeight),this.listStyleImage=va(e,Co,t.listStyleImage),this.listStylePosition=va(e,ko,t.listStylePosition),this.listStyleType=va(e,Bo,t.listStyleType),this.marginTop=va(e,Io,t.marginTop),this.marginRight=va(e,Eo,t.marginRight),this.marginBottom=va(e,No,t.marginBottom),this.marginLeft=va(e,Fo,t.marginLeft),this.opacity=va(e,Zo,t.opacity);var o=va(e,To,t.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=va(e,_o,t.overflowWrap),this.paddingTop=va(e,Oo,t.paddingTop),this.paddingRight=va(e,Ro,t.paddingRight),this.paddingBottom=va(e,Uo,t.paddingBottom),this.paddingLeft=va(e,Do,t.paddingLeft),this.paintOrder=va(e,da,t.paintOrder),this.position=va(e,Mo,t.position),this.textAlign=va(e,Po,t.textAlign),this.textDecorationColor=va(e,Jo,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=va(e,$o,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=va(e,Qo,t.textShadow),this.textTransform=va(e,Ho,t.textTransform),this.transform=va(e,zo,t.transform),this.transformOrigin=va(e,Ko,t.transformOrigin),this.visibility=va(e,Go,t.visibility),this.webkitTextStrokeColor=va(e,pa,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=va(e,fa,t.webkitTextStrokeWidth),this.wordBreak=va(e,qo,t.wordBreak),this.zIndex=va(e,Xo,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return aa(this.display,4)||aa(this.display,33554432)||aa(this.display,268435456)||aa(this.display,536870912)||aa(this.display,67108864)||aa(this.display,134217728)},e}(),ma=function(){function e(e,t){this.content=va(e,ia,t.content),this.quotes=va(e,ua,t.quotes)}return e}(),ya=function(){function e(e,t){this.counterIncrement=va(e,sa,t.counterIncrement),this.counterReset=va(e,ca,t.counterReset)}return e}(),va=function(e,t,n){var r=new Nn,o=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(o);var a=new Fn(r.read());switch(t.type){case 2:var i=a.parseComponentValue();return t.parse(e,Ln(i)?i.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return Jn.parse(e,a.parseComponentValue());case"color":return nr.parse(e,a.parseComponentValue());case"image":return Or.parse(e,a.parseComponentValue());case"length":var s=a.parseComponentValue();return Qn(s)?s:Vn;case"length-percentage":var c=a.parseComponentValue();return Hn(c)?c:Vn;case"time":return Yo.parse(e,a.parseComponentValue())}}},ba="data-html2canvas-debug",wa=function(e){switch(e.getAttribute(ba)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xa=function(e,t){var n=wa(e);return 1===n||t===n},Ca=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,xa(t,3),this.styles=new ga(e,window.getComputedStyle(t,null)),us(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=s(this.context,t),xa(t,4)&&(this.flags|=16)}return e}(),ka="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sa="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ia=0;Ia<Ba.length;Ia++)Sa[Ba.charCodeAt(Ia)]=Ia;for(var Ea=function(e){var t,n,r,o,a,i=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var l="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=Sa[e.charCodeAt(t)],r=Sa[e.charCodeAt(t+1)],o=Sa[e.charCodeAt(t+2)],a=Sa[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&a;return l},Na=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Fa=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Ta=5,_a=11,La=2,Oa=65536>>Ta,Ra=(1<<Ta)-1,Ua=Oa+(1024>>Ta)+32,Da=65536>>_a,Pa=(1<<_a-Ta)-1,Ma=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Qa=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Ha=function(e,t){var n=Ea(e),r=Array.isArray(n)?Fa(n):new Uint32Array(n),o=Array.isArray(n)?Na(n):new Uint16Array(n),a=24,i=Ma(o,a/2,r[4]/2),s=2===r[5]?Ma(o,(a+r[4])/2):Qa(r,Math.ceil((a+r[4])/4));return new za(r[0],r[1],r[2],r[3],i,s)},za=function(){function e(e,t,n,r,o,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=o,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Ta])<<La)+(e&Ra),this.data[t];if(e<=65535)return t=((t=this.index[Oa+(e-55296>>Ta)])<<La)+(e&Ra),this.data[t];if(e<this.highStart)return t=Ua-Da+(e>>_a),t=this.index[t],t+=e>>Ta&Pa,t=((t=this.index[t])<<La)+(e&Ra),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ja="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Wa=0;Wa<Va.length;Wa++)ja[Va.charCodeAt(Wa)]=Wa;var Ka,Ga=1,qa=2,Xa=3,Ya=4,Za=5,Ja=7,$a=8,ei=9,ti=10,ni=11,ri=12,oi=13,ai=14,ii=15,si=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&o)<<10)+(1023&a)+65536):(t.push(o),n--)}else t.push(o)}return t},ci=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],o=-1,a="";++o<n;){var i=e[o];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(o+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},li=Ha(ka),ui="\xd7",Ai="\xf7",hi=function(e){return li.get(e)},di=function(e,t,n){var r=n-2,o=t[r],a=t[n-1],i=t[n];if(a===qa&&i===Xa)return ui;if(a===qa||a===Xa||a===Ya)return Ai;if(i===qa||i===Xa||i===Ya)return Ai;if(a===$a&&-1!==[$a,ei,ni,ri].indexOf(i))return ui;if((a===ni||a===ei)&&(i===ei||i===ti))return ui;if((a===ri||a===ti)&&i===ti)return ui;if(i===oi||i===Za)return ui;if(i===Ja)return ui;if(a===Ga)return ui;if(a===oi&&i===ai){for(;o===Za;)o=t[--r];if(o===ai)return ui}if(a===ii&&i===ii){for(var s=0;o===ii;)s++,o=t[--r];if(s%2===0)return ui}return Ai},pi=function(e){var t=si(e),n=t.length,r=0,o=0,a=t.map(hi);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=ui;r<n&&(e=di(t,a,++r))===ui;);if(e!==ui||r===n){var i=ci.apply(null,t.slice(o,r));return o=r,{value:i,done:!1}}return{done:!0,value:null}}}},fi=function(e){for(var t,n=pi(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},gi=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var o=n.getBoundingClientRect(),a=Math.round(o.height);if(e.body.removeChild(r),a===t)return!0}}return!1},mi=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,o=l(r.data).map((function(e){return u(e)})),a=0,i={},s=o.every((function(e,t){n.setStart(r,a),n.setEnd(r,a+e.length);var o=n.getBoundingClientRect();a+=e.length;var s=o.x>i.x||o.y>i.y;return i=o,0===t||s}));return e.body.removeChild(t),s},yi=function(){return"undefined"!==typeof(new Image).crossOrigin},vi=function(){return"string"===typeof(new XMLHttpRequest).responseType},bi=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Dt){return!1}return!0},wi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},xi=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var o=new Image,a=t.toDataURL();o.src=a;var i=Ci(n,n,0,0,o);return r.fillStyle="red",r.fillRect(0,0,n,n),ki(i).then((function(t){r.drawImage(t,0,0);var o=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+a+")",i.style.height=n+"px",wi(o)?ki(Ci(n,n,0,0,i)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),wi(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},Ci=function(e,t,n,r,o){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(s),s.appendChild(o),i},ki=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Bi={get SUPPORT_RANGE_BOUNDS(){var e=gi(document);return Object.defineProperty(Bi,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Bi.SUPPORT_RANGE_BOUNDS&&mi(document);return Object.defineProperty(Bi,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=bi(document);return Object.defineProperty(Bi,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?xi(document):Promise.resolve(!1);return Object.defineProperty(Bi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=yi();return Object.defineProperty(Bi,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=vi();return Object.defineProperty(Bi,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Bi,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(Bi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Si=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Ii=function(e,t,n,r){var o=_i(t,n),a=[],s=0;return o.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(Bi.SUPPORT_RANGE_BOUNDS){var o=Ni(r,s,t.length).getClientRects();if(o.length>1){var c=Fi(t),l=0;c.forEach((function(t){a.push(new Si(t,i.fromDOMRectList(e,Ni(r,l+s,t.length).getClientRects()))),l+=t.length}))}else a.push(new Si(t,i.fromDOMRectList(e,o)))}else{var u=r.splitText(t.length);a.push(new Si(t,Ei(e,r))),r=u}else Bi.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));s+=t.length})),a},Ei=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var o=t.parentNode;if(o){o.replaceChild(r,t);var a=s(e,r);return r.firstChild&&o.replaceChild(r.firstChild,r),a}}return i.EMPTY},Ni=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(e,t),o.setEnd(e,t+n),o},Fi=function(e){if(Bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return fi(e)},Ti=function(e,t){if(Bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return Oi(e,t)},_i=function(e,t){return 0!==t.letterSpacing?Fi(e):Ti(e,t)},Li=[32,160,4961,65792,65793,4153,4241],Oi=function(e,t){for(var n,r=ze(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),o=[],a=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach((function(e){-1===Li.indexOf(e)?r+=u(e):(r.length&&o.push(r),o.push(u(e)),r="")})),r.length&&o.push(r)}};!(n=r.next()).done;)a();return o},Ri=function(){function e(e,t,n){this.text=Ui(t.data,n.textTransform),this.textBounds=Ii(e,this.text,n,t)}return e}(),Ui=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Di,Pi);case 2:return e.toUpperCase();default:return e}},Di=/(^|\s|:|-|\(|\))([a-z])/g,Pi=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Mi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(Ca),Qi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(Ca),Hi=function(e){function n(t,n){var r=e.call(this,t,n)||this,o=new XMLSerializer,a=s(t,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(Ca),zi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Ca),Vi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(Ca),ji=[{type:15,flags:0,unit:"px",number:3}],Wi=[{type:16,flags:0,number:50}],Ki=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Gi=function(e){var t=e.type===Yi?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},qi="checkbox",Xi="radio",Yi="password",Zi=707406591,Ji=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Gi(n),r.type!==qi&&r.type!==Xi||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Ki(r.bounds)),r.type){case qi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=ji;break;case Xi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Wi}return r}return t(n,e),n}(Ca),$i=function(e){function n(t,n){var r=e.call(this,t,n)||this,o=n.options[n.selectedIndex||0];return r.value=o&&o.text||"",r}return t(n,e),n}(Ca),es=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Ca),ts=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=as(t,n.contentWindow.document.documentElement);var o=n.contentWindow.document.documentElement?Ar(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hr.TRANSPARENT,a=n.contentWindow.document.body?Ar(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):hr.TRANSPARENT;r.backgroundColor=rr(o)?rr(a)?r.styles.backgroundColor:a:o}}catch(Dt){}return r}return t(n,e),n}(Ca),ns=["OL","UL","MENU"],rs=function(e,t,n,r){for(var o=t.firstChild,a=void 0;o;o=a)if(a=o.nextSibling,cs(o)&&o.data.trim().length>0)n.textNodes.push(new Ri(e,o,n.styles));else if(ls(o))if(Ss(o)&&o.assignedNodes)o.assignedNodes().forEach((function(t){return rs(e,t,n,r)}));else{var i=os(e,o);i.styles.isVisible()&&(is(o,i,r)?i.flags|=4:ss(i.styles)&&(i.flags|=2),-1!==ns.indexOf(o.tagName)&&(i.flags|=8),n.elements.push(i),o.slot,o.shadowRoot?rs(e,o.shadowRoot,i,r):ks(o)||gs(o)||Bs(o)||rs(e,o,i,r))}},os=function(e,t){return bs(t)?new Mi(e,t):ys(t)?new Qi(e,t):gs(t)?new Hi(e,t):hs(t)?new zi(e,t):ds(t)?new Vi(e,t):ps(t)?new Ji(e,t):Bs(t)?new $i(e,t):ks(t)?new es(e,t):ws(t)?new ts(e,t):new Ca(e,t)},as=function(e,t){var n=os(e,t);return n.flags|=4,rs(e,t,n,n),n},is=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||ms(e)&&n.styles.isTransparent()},ss=function(e){return e.isPositioned()||e.isFloating()},cs=function(e){return e.nodeType===Node.TEXT_NODE},ls=function(e){return e.nodeType===Node.ELEMENT_NODE},us=function(e){return ls(e)&&"undefined"!==typeof e.style&&!As(e)},As=function(e){return"object"===typeof e.className},hs=function(e){return"LI"===e.tagName},ds=function(e){return"OL"===e.tagName},ps=function(e){return"INPUT"===e.tagName},fs=function(e){return"HTML"===e.tagName},gs=function(e){return"svg"===e.tagName},ms=function(e){return"BODY"===e.tagName},ys=function(e){return"CANVAS"===e.tagName},vs=function(e){return"VIDEO"===e.tagName},bs=function(e){return"IMG"===e.tagName},ws=function(e){return"IFRAME"===e.tagName},xs=function(e){return"STYLE"===e.tagName},Cs=function(e){return"SCRIPT"===e.tagName},ks=function(e){return"TEXTAREA"===e.tagName},Bs=function(e){return"SELECT"===e.tagName},Ss=function(e){return"SLOT"===e.tagName},Is=function(e){return e.tagName.indexOf("-")>0},Es=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,o=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(o=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var a=[];return o&&r.forEach((function(e){var n=t.counters[e.counter];a.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),a},e}(),Ns={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fs={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Ts={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},_s={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Ls=function(e,t,n,r,o,a){return e<t||e>n?Ks(e,o,a.length>0):r.integers.reduce((function(t,n,o){for(;e>=n;)e-=n,t+=r.values[o];return t}),"")+a},Os=function(e,t,n,r){var o="";do{n||e--,o=r(e)+o,e/=t}while(e*t>=t);return o},Rs=function(e,t,n,r,o){var a=n-t+1;return(e<0?"-":"")+(Os(Math.abs(e),a,r,(function(e){return u(Math.floor(e%a)+t)}))+o)},Us=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Os(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},Ds=1,Ps=2,Ms=4,Qs=8,Hs=function(e,t,n,r,o,a){if(e<-9999||e>9999)return Ks(e,4,o.length>0);var i=Math.abs(e),s=o;if(0===i)return t[0]+s;for(var c=0;i>0&&c<=4;c++){var l=i%10;0===l&&aa(a,Ds)&&""!==s?s=t[l]+s:l>1||1===l&&0===c||1===l&&1===c&&aa(a,Ps)||1===l&&1===c&&aa(a,Ms)&&e>100||1===l&&c>1&&aa(a,Qs)?s=t[l]+(c>0?n[c-1]:"")+s:1===l&&c>0&&(s=n[c-1]+s),i=Math.floor(i/10)}return(e<0?r:"")+s},zs="\u5341\u767e\u5343\u842c",Vs="\u62fe\u4f70\u4edf\u842c",js="\u30de\u30a4\u30ca\u30b9",Ws="\ub9c8\uc774\ub108\uc2a4",Ks=function(e,t,n){var r=n?". ":"",o=n?"\u3001":"",a=n?", ":"",i=n?" ":"";switch(t){case 0:return"\u2022"+i;case 1:return"\u25e6"+i;case 2:return"\u25fe"+i;case 5:var s=Rs(e,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return Us(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",o);case 6:return Ls(e,1,3999,Ns,3,r).toLowerCase();case 7:return Ls(e,1,3999,Ns,3,r);case 8:return Rs(e,945,969,!1,r);case 9:return Rs(e,97,122,!1,r);case 10:return Rs(e,65,90,!1,r);case 11:return Rs(e,1632,1641,!0,r);case 12:case 49:return Ls(e,1,9999,Fs,3,r);case 35:return Ls(e,1,9999,Fs,3,r).toLowerCase();case 13:return Rs(e,2534,2543,!0,r);case 14:case 30:return Rs(e,6112,6121,!0,r);case 15:return Us(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",o);case 16:return Us(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",o);case 17:case 48:return Hs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",zs,"\u8ca0",o,Ps|Ms|Qs);case 47:return Hs(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Vs,"\u8ca0",o,Ds|Ps|Ms|Qs);case 42:return Hs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",zs,"\u8d1f",o,Ps|Ms|Qs);case 41:return Hs(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Vs,"\u8d1f",o,Ds|Ps|Ms|Qs);case 26:return Hs(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",js,o,0);case 25:return Hs(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",js,o,Ds|Ps|Ms);case 31:return Hs(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Ws,a,Ds|Ps|Ms);case 33:return Hs(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Ws,a,0);case 32:return Hs(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Ws,a,Ds|Ps|Ms);case 18:return Rs(e,2406,2415,!0,r);case 20:return Ls(e,1,19999,_s,3,r);case 21:return Rs(e,2790,2799,!0,r);case 22:return Rs(e,2662,2671,!0,r);case 22:return Ls(e,1,10999,Ts,3,r);case 23:return Us(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Us(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Rs(e,3302,3311,!0,r);case 28:return Us(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",o);case 29:return Us(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",o);case 34:return Rs(e,3792,3801,!0,r);case 37:return Rs(e,6160,6169,!0,r);case 38:return Rs(e,4160,4169,!0,r);case 39:return Rs(e,2918,2927,!0,r);case 40:return Rs(e,1776,1785,!0,r);case 43:return Rs(e,3046,3055,!0,r);case 44:return Rs(e,3174,3183,!0,r);case 45:return Rs(e,3664,3673,!0,r);case 46:return Rs(e,3872,3881,!0,r);default:return Rs(e,48,57,!0,r)}},Gs="data-html2canvas-ignore",qs=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Es,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,a=Ys(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,c=a.contentWindow,l=c.document,u=$s(a).then((function(){return r(n,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(oc),c&&(c.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||c.scrollY===t.top&&c.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-t.left,c.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Js(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then((function(){return e(l,n)})).then((function(){return a}))]:[2,a]}}))}))}));return l.open(),l.write(nc(document.doctype)+"<html></html>"),rc(this.referenceElement.ownerDocument,i,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},e.prototype.createElementClone=function(e){if(xa(e,2),ys(e))return this.createCanvasClone(e);if(vs(e))return this.createVideoClone(e);if(xs(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return bs(t)&&(bs(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Is(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tc(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Dt){if(this.context.logger.error("Unable to access cssRules property",Dt),"SecurityError"!==Dt.name)throw Dt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Dt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var o=e.getContext("2d"),a=r.getContext("2d");if(a)if(!this.options.allowTaint&&o)a.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var s=i.getContextAttributes();!1===(null===s||void 0===s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return r}catch(Dt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Dt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){ls(t)&&(Cs(t)||t.hasAttribute(Gs)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&ls(t)&&xs(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(ls(o)&&Ss(o)&&"function"===typeof o.assignedNodes){var a=o.assignedNodes();a.length&&a.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,o,n)},e.prototype.cloneNode=function(e,t){if(cs(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&ls(e)&&(us(e)||As(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var o=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&us(r)&&(this.clonedReferenceElement=r),ms(r)&&uc(r);var s=this.counters.parse(new ya(this.context,o)),c=this.resolvePseudoContent(e,r,a,Ka.BEFORE);Is(e)&&(t=!0),vs(e)||this.cloneChildNodes(e,r,t),c&&r.insertBefore(c,r.firstChild);var l=this.resolvePseudoContent(e,r,i,Ka.AFTER);return l&&r.appendChild(l),this.counters.pop(s),(o&&(this.options.copyStyles||As(e))&&!ws(e)||t)&&tc(o,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(ks(e)||Bs(e))&&(ks(r)||Bs(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var o=this;if(n){var a=n.content,i=t.ownerDocument;if(i&&a&&"none"!==a&&"-moz-alt-content"!==a&&"none"!==n.display){this.counters.parse(new ya(this.context,n));var s=new ma(this.context,n),c=i.createElement("html2canvaspseudoelement");tc(n,c),s.content.forEach((function(t){if(0===t.type)c.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",c.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Ln);r.length&&c.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var a=t.values.filter(Dn),l=a[0],u=a[1];if(l&&Ln(l)){var A=o.counters.getCounterValue(l.value),h=u&&Ln(u)?Bo.parse(o.context,u.value):3;c.appendChild(i.createTextNode(Ks(A,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(Dn),p=(l=d[0],d[1]);if(u=d[2],l&&Ln(l)){var f=o.counters.getCounterValues(l.value),g=u&&Ln(u)?Bo.parse(o.context,u.value):3,m=p&&0===p.type?p.value:"",y=f.map((function(e){return Ks(e,g,!1)})).join(m);c.appendChild(i.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":c.appendChild(i.createTextNode(Aa(s.quotes,o.quoteDepth++,!0)));break;case"close-quote":c.appendChild(i.createTextNode(Aa(s.quotes,--o.quoteDepth,!1)));break;default:c.appendChild(i.createTextNode(t.value))}})),c.className=sc+" "+cc;var l=r===Ka.BEFORE?" "+sc:" "+cc;return As(t)?t.className.baseValue+=l:t.className+=l,c}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Ka||(Ka={}));var Xs,Ys=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Gs,"true"),e.body.appendChild(n),n},Zs=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},Js=function(e){return Promise.all([].slice.call(e.images,0).map(Zs))},$s=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var o=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){o.body.childNodes.length>0&&"complete"===o.readyState&&(clearInterval(n),t(e))}),50)}}))},ec=["all","d","content"],tc=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===ec.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nc=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rc=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},oc=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},ac=":before",ic=":after",sc="___html2canvas___pseudoelement_before",cc="___html2canvas___pseudoelement_after",lc='{\n    content: "" !important;\n    display: none !important;\n}',uc=function(e){Ac(e,"."+sc+ac+lc+"\n         ."+cc+ic+lc)},Ac=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},hc=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),dc=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:bc(e)||mc(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,i=this;return o(this,(function(o){switch(o.label){case 0:return t=hc.isSameOrigin(e),n=!yc(e)&&!0===this._options.useCORS&&Bi.SUPPORT_CORS_IMAGES&&!t,r=!yc(e)&&!t&&!bc(e)&&"string"===typeof this._options.proxy&&Bi.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||yc(e)||bc(e)||r||n?(a=e,r?[4,this.proxy(a)]:[3,2]):[2];case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(vc(a)||n)&&(r.crossOrigin="anonymous"),r.src=a,!0===r.complete&&setTimeout((function(){return e(r)}),500),i._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")}),i._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(o,a){var i=Bi.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===i)o(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return o(e.result)}),!1),e.addEventListener("error",(function(e){return a(e)}),!1),e.readAsDataURL(s.response)}else a("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&s instanceof XMLHttpRequest&&(s.responseType=i),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return a("Timed out ("+l+"ms) proxying "+r)}}s.send()}))},e}(),pc=/^data:image\/svg\+xml/i,fc=/^data:image\/.*;base64,/i,gc=/^data:image\/.*/i,mc=function(e){return Bi.SUPPORT_SVG_DRAWING||!wc(e)},yc=function(e){return gc.test(e)},vc=function(e){return fc.test(e)},bc=function(e){return"blob"===e.substr(0,4)},wc=function(e){return"svg"===e.substr(-3).toLowerCase()||pc.test(e)},xc=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Cc=function(e,t,n){return new xc(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},kc=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Cc(this.start,this.startControl,t),o=Cc(this.startControl,this.endControl,t),a=Cc(this.endControl,this.end,t),i=Cc(r,o,t),s=Cc(o,a,t),c=Cc(i,s,t);return n?new e(this.start,r,i,c):new e(c,s,a,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Bc=function(e){return 1===e.type},Sc=function(){function e(e){var t=e.styles,n=e.bounds,r=Kn(t.borderTopLeftRadius,n.width,n.height),o=r[0],a=r[1],i=Kn(t.borderTopRightRadius,n.width,n.height),s=i[0],c=i[1],l=Kn(t.borderBottomRightRadius,n.width,n.height),u=l[0],A=l[1],h=Kn(t.borderBottomLeftRadius,n.width,n.height),d=h[0],p=h[1],f=[];f.push((o+s)/n.width),f.push((d+u)/n.width),f.push((a+p)/n.height),f.push((c+A)/n.height);var g=Math.max.apply(Math,f);g>1&&(o/=g,a/=g,s/=g,c/=g,u/=g,A/=g,d/=g,p/=g);var m=n.width-s,y=n.height-A,v=n.width-u,b=n.height-p,w=t.borderTopWidth,x=t.borderRightWidth,C=t.borderBottomWidth,k=t.borderLeftWidth,B=Gn(t.paddingTop,e.bounds.width),S=Gn(t.paddingRight,e.bounds.width),I=Gn(t.paddingBottom,e.bounds.width),E=Gn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||a>0?Ic(n.left+k/3,n.top+w/3,o-k/3,a-w/3,Xs.TOP_LEFT):new xc(n.left+k/3,n.top+w/3),this.topRightBorderDoubleOuterBox=o>0||a>0?Ic(n.left+m,n.top+w/3,s-x/3,c-w/3,Xs.TOP_RIGHT):new xc(n.left+n.width-x/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=u>0||A>0?Ic(n.left+v,n.top+y,u-x/3,A-C/3,Xs.BOTTOM_RIGHT):new xc(n.left+n.width-x/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?Ic(n.left+k/3,n.top+b,d-k/3,p-C/3,Xs.BOTTOM_LEFT):new xc(n.left+k/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=o>0||a>0?Ic(n.left+2*k/3,n.top+2*w/3,o-2*k/3,a-2*w/3,Xs.TOP_LEFT):new xc(n.left+2*k/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=o>0||a>0?Ic(n.left+m,n.top+2*w/3,s-2*x/3,c-2*w/3,Xs.TOP_RIGHT):new xc(n.left+n.width-2*x/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=u>0||A>0?Ic(n.left+v,n.top+y,u-2*x/3,A-2*C/3,Xs.BOTTOM_RIGHT):new xc(n.left+n.width-2*x/3,n.top+n.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?Ic(n.left+2*k/3,n.top+b,d-2*k/3,p-2*C/3,Xs.BOTTOM_LEFT):new xc(n.left+2*k/3,n.top+n.height-2*C/3),this.topLeftBorderStroke=o>0||a>0?Ic(n.left+k/2,n.top+w/2,o-k/2,a-w/2,Xs.TOP_LEFT):new xc(n.left+k/2,n.top+w/2),this.topRightBorderStroke=o>0||a>0?Ic(n.left+m,n.top+w/2,s-x/2,c-w/2,Xs.TOP_RIGHT):new xc(n.left+n.width-x/2,n.top+w/2),this.bottomRightBorderStroke=u>0||A>0?Ic(n.left+v,n.top+y,u-x/2,A-C/2,Xs.BOTTOM_RIGHT):new xc(n.left+n.width-x/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=d>0||p>0?Ic(n.left+k/2,n.top+b,d-k/2,p-C/2,Xs.BOTTOM_LEFT):new xc(n.left+k/2,n.top+n.height-C/2),this.topLeftBorderBox=o>0||a>0?Ic(n.left,n.top,o,a,Xs.TOP_LEFT):new xc(n.left,n.top),this.topRightBorderBox=s>0||c>0?Ic(n.left+m,n.top,s,c,Xs.TOP_RIGHT):new xc(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||A>0?Ic(n.left+v,n.top+y,u,A,Xs.BOTTOM_RIGHT):new xc(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||p>0?Ic(n.left,n.top+b,d,p,Xs.BOTTOM_LEFT):new xc(n.left,n.top+n.height),this.topLeftPaddingBox=o>0||a>0?Ic(n.left+k,n.top+w,Math.max(0,o-k),Math.max(0,a-w),Xs.TOP_LEFT):new xc(n.left+k,n.top+w),this.topRightPaddingBox=s>0||c>0?Ic(n.left+Math.min(m,n.width-x),n.top+w,m>n.width+x?0:Math.max(0,s-x),Math.max(0,c-w),Xs.TOP_RIGHT):new xc(n.left+n.width-x,n.top+w),this.bottomRightPaddingBox=u>0||A>0?Ic(n.left+Math.min(v,n.width-k),n.top+Math.min(y,n.height-C),Math.max(0,u-x),Math.max(0,A-C),Xs.BOTTOM_RIGHT):new xc(n.left+n.width-x,n.top+n.height-C),this.bottomLeftPaddingBox=d>0||p>0?Ic(n.left+k,n.top+Math.min(b,n.height-C),Math.max(0,d-k),Math.max(0,p-C),Xs.BOTTOM_LEFT):new xc(n.left+k,n.top+n.height-C),this.topLeftContentBox=o>0||a>0?Ic(n.left+k+E,n.top+w+B,Math.max(0,o-(k+E)),Math.max(0,a-(w+B)),Xs.TOP_LEFT):new xc(n.left+k+E,n.top+w+B),this.topRightContentBox=s>0||c>0?Ic(n.left+Math.min(m,n.width+k+E),n.top+w+B,m>n.width+k+E?0:s-k+E,c-(w+B),Xs.TOP_RIGHT):new xc(n.left+n.width-(x+S),n.top+w+B),this.bottomRightContentBox=u>0||A>0?Ic(n.left+Math.min(v,n.width-(k+E)),n.top+Math.min(y,n.height+w+B),Math.max(0,u-(x+S)),A-(C+I),Xs.BOTTOM_RIGHT):new xc(n.left+n.width-(x+S),n.top+n.height-(C+I)),this.bottomLeftContentBox=d>0||p>0?Ic(n.left+k+E,n.top+b,Math.max(0,d-(k+E)),p-(C+I),Xs.BOTTOM_LEFT):new xc(n.left+k+E,n.top+n.height-(C+I))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Xs||(Xs={}));var Ic=function(e,t,n,r,o){var a=(Math.sqrt(2)-1)/3*4,i=n*a,s=r*a,c=e+n,l=t+r;switch(o){case Xs.TOP_LEFT:return new kc(new xc(e,l),new xc(e,l-s),new xc(c-i,t),new xc(c,t));case Xs.TOP_RIGHT:return new kc(new xc(e,t),new xc(e+i,t),new xc(c,l-s),new xc(c,l));case Xs.BOTTOM_RIGHT:return new kc(new xc(c,t),new xc(c,t+s),new xc(e+i,l),new xc(e,l));case Xs.BOTTOM_LEFT:default:return new kc(new xc(c,l),new xc(c-i,l),new xc(e,t+s),new xc(e,t))}},Ec=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Nc=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Fc=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Tc=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),_c=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Lc=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Oc=function(e){return 0===e.type},Rc=function(e){return 1===e.type},Uc=function(e){return 2===e.type},Dc=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},Pc=function(e,t,n,r,o){return e.map((function(e,a){switch(a){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+o);case 3:return e.add(t,n+o)}return e}))},Mc=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Qc=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Sc(this.container),this.container.styles.opacity<1&&this.effects.push(new Lc(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new Tc(n,r,o))}if(0!==this.container.styles.overflowX){var a=Ec(this.curves),i=Fc(this.curves);Dc(a,i)?this.effects.push(new _c(a,6)):(this.effects.push(new _c(a,2)),this.effects.push(new _c(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var o=n.effects.filter((function(e){return!Rc(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,o),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var a=Ec(n.curves),i=Fc(n.curves);Dc(a,i)||r.unshift(new _c(i,6))}}else r.unshift.apply(r,o);n=n.parent}return r.filter((function(t){return aa(t.target,e)}))},e}(),Hc=function(e,t,n,r){e.container.elements.forEach((function(o){var a=aa(o.flags,4),i=aa(o.flags,2),s=new Qc(o,e);aa(o.styles.display,2048)&&r.push(s);var c=aa(o.flags,8)?[]:r;if(a||i){var l=a||o.styles.isPositioned()?n:t,u=new Mc(s);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var A=o.styles.zIndex.order;if(A<0){var h=0;l.negativeZIndex.some((function(e,t){return A>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),l.negativeZIndex.splice(h,0,u)}else if(A>0){var d=0;l.positiveZIndex.some((function(e,t){return A>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),l.positiveZIndex.splice(d,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else o.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);Hc(s,u,a?u:n,c)}else o.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),Hc(s,t,n,c);aa(o.flags,8)&&zc(o,c)}))},zc=function(e,t){for(var n=e instanceof Vi?e.start:1,r=e instanceof Vi&&e.reversed,o=0;o<t.length;o++){var a=t[o];a.container instanceof zi&&"number"===typeof a.container.value&&0!==a.container.value&&(n=a.container.value),a.listValue=Ks(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},Vc=function(e){var t=new Qc(e,null),n=new Mc(t),r=[];return Hc(t,n,n,r),zc(t.container,r),n},jc=function(e,t){switch(t){case 0:return Xc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Wc=function(e,t){switch(t){case 0:return Xc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Kc=function(e,t){switch(t){case 0:return Xc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Gc=function(e,t){switch(t){case 0:return qc(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return qc(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return qc(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return qc(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},qc=function(e,t){var n=[];return Bc(e)?n.push(e.subdivide(.5,!1)):n.push(e),Bc(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xc=function(e,t,n,r){var o=[];return Bc(e)?o.push(e.subdivide(.5,!1)):o.push(e),Bc(n)?o.push(n.subdivide(.5,!0)):o.push(n),Bc(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),Bc(t)?o.push(t.subdivide(.5,!1).reverse()):o.push(t),o},Yc=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Zc=function(e){var t=e.styles,n=e.bounds,r=Gn(t.paddingLeft,n.width),o=Gn(t.paddingRight,n.width),a=Gn(t.paddingTop,n.width),i=Gn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+o),-(t.borderTopWidth+t.borderBottomWidth+a+i))},Jc=function(e,t){return 0===e?t.bounds:2===e?Zc(t):Yc(t)},$c=function(e,t){return 0===e?t.bounds:2===e?Zc(t):Yc(t)},el=function(e,t,n){var r=Jc(ol(e.styles.backgroundOrigin,t),e),o=$c(ol(e.styles.backgroundClip,t),e),a=rl(ol(e.styles.backgroundSize,t),n,r),i=a[0],s=a[1],c=Kn(ol(e.styles.backgroundPosition,t),r.width-i,r.height-s);return[al(ol(e.styles.backgroundRepeat,t),c,a,r,o),Math.round(r.left+c[0]),Math.round(r.top+c[1]),i,s]},tl=function(e){return Ln(e)&&e.value===Ur.AUTO},nl=function(e){return"number"===typeof e},rl=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=e[0],s=e[1];if(!i)return[0,0];if(Hn(i)&&s&&Hn(s))return[Gn(i,n.width),Gn(s,n.height)];var c=nl(a);if(Ln(i)&&(i.value===Ur.CONTAIN||i.value===Ur.COVER))return nl(a)?n.width/n.height<a!==(i.value===Ur.COVER)?[n.width,n.width/a]:[n.height*a,n.height]:[n.width,n.height];var l=nl(r),u=nl(o),A=l||u;if(tl(i)&&(!s||tl(s)))return l&&u?[r,o]:c||A?A&&c?[l?r:o*a,u?o:r/a]:[l?r:n.width,u?o:n.height]:[n.width,n.height];if(c){var h=0,d=0;return Hn(i)?h=Gn(i,n.width):Hn(s)&&(d=Gn(s,n.height)),tl(i)?h=d*a:s&&!tl(s)||(d=h/a),[h,d]}var p=null,f=null;if(Hn(i)?p=Gn(i,n.width):s&&Hn(s)&&(f=Gn(s,n.height)),null===p||s&&!tl(s)||(f=l&&u?p/r*o:n.height),null!==f&&tl(i)&&(p=l&&u?f/o*r:n.width),null!==p&&null!==f)return[p,f];throw new Error("Unable to calculate background-size for element")},ol=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},al=function(e,t,n,r,o){var a=t[0],i=t[1],s=n[0],c=n[1];switch(e){case 2:return[new xc(Math.round(r.left),Math.round(r.top+i)),new xc(Math.round(r.left+r.width),Math.round(r.top+i)),new xc(Math.round(r.left+r.width),Math.round(c+r.top+i)),new xc(Math.round(r.left),Math.round(c+r.top+i))];case 3:return[new xc(Math.round(r.left+a),Math.round(r.top)),new xc(Math.round(r.left+a+s),Math.round(r.top)),new xc(Math.round(r.left+a+s),Math.round(r.height+r.top)),new xc(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new xc(Math.round(r.left+a),Math.round(r.top+i)),new xc(Math.round(r.left+a+s),Math.round(r.top+i)),new xc(Math.round(r.left+a+s),Math.round(r.top+i+c)),new xc(Math.round(r.left+a),Math.round(r.top+i+c))];default:return[new xc(Math.round(o.left),Math.round(o.top)),new xc(Math.round(o.left+o.width),Math.round(o.top)),new xc(Math.round(o.left+o.width),Math.round(o.height+o.top)),new xc(Math.round(o.left),Math.round(o.height+o.top))]}},il="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",sl="Hidden Text",cl=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),o=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),r.src=il,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=t,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(sl)),n.appendChild(o),n.appendChild(r);var i=r.offsetTop-o.offsetTop+2;n.removeChild(o),n.appendChild(this._document.createTextNode(sl)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:i,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),ll=function(){function e(e,t){this.context=e,this.options=t}return e}(),ul=1e4,Al=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new cl(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),Uc(e)&&(this.ctx.globalAlpha=e.opacity),Oc(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Rc(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return aa(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Fi(e.text).reduce((function(t,o){return r.ctx.fillText(o,t,e.bounds.top+n),t+r.ctx.measureText(o).width}),e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=gl(e.fontFamily).join(", "),r=Tn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,i,s,c,l,u,A=this;return o(this,(function(o){return n=this.createFontStyle(t),r=n[0],a=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(a,i),c=s.baseline,l=s.middle,u=t.paintOrder,e.textBounds.forEach((function(e){u.forEach((function(n){switch(n){case 0:A.ctx.fillStyle=or(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,c);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){A.ctx.shadowColor=or(n.color),A.ctx.shadowOffsetX=n.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=n.offsetY.number*A.options.scale,A.ctx.shadowBlur=n.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,c)})),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=or(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+c),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=or(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+c)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Zc(e),o=Fc(t);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,a,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w;return o(this,(function(o){switch(o.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,a=t.styles,s=0,c=t.textNodes,o.label=1;case 1:return s<c.length?(l=c[s],[4,this.renderTextNode(l,a)]):[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:if(!(t instanceof Mi))return[3,8];o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return y=o.sent(),this.renderReplacedElement(t,r,y),[3,8];case 7:return o.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Qi&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Hi))return[3,12];o.label=9;case 9:return o.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return y=o.sent(),this.renderReplacedElement(t,r,y),[3,12];case 11:return o.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ts&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=o.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),o.label=14;case 14:if(t instanceof Ji&&(A=Math.min(t.bounds.width,t.bounds.height),t.type===qi?t.checked&&(this.ctx.save(),this.path([new xc(t.bounds.left+.39363*A,t.bounds.top+.79*A),new xc(t.bounds.left+.16*A,t.bounds.top+.5549*A),new xc(t.bounds.left+.27347*A,t.bounds.top+.44071*A),new xc(t.bounds.left+.39694*A,t.bounds.top+.5649*A),new xc(t.bounds.left+.72983*A,t.bounds.top+.23*A),new xc(t.bounds.left+.84*A,t.bounds.top+.34085*A),new xc(t.bounds.left+.39363*A,t.bounds.top+.79*A)]),this.ctx.fillStyle=or(Zi),this.ctx.fill(),this.ctx.restore()):t.type===Xi&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+A/2,t.bounds.top+A/2,A/4,0,2*Math.PI,!0),this.ctx.fillStyle=or(Zi),this.ctx.fill(),this.ctx.restore())),hl(t)&&t.value.length){switch(h=this.createFontStyle(a),b=h[0],d=h[1],p=this.fontMetrics.getMetrics(b,d).baseline,this.ctx.font=b,this.ctx.fillStyle=or(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pl(t.styles.textAlign),w=Zc(t),f=0,t.styles.textAlign){case 1:f+=w.width/2;break;case 2:f+=w.width}g=w.add(f,0,0,-w.height/2+1),this.ctx.save(),this.path([new xc(w.left,w.top),new xc(w.left+w.width,w.top),new xc(w.left+w.width,w.top+w.height),new xc(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Si(t.value,g),a.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!aa(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(m=t.styles.listStyleImage).type)return[3,18];y=void 0,v=m.url,o.label=15;case 15:return o.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return y=o.sent(),this.ctx.drawImage(y,t.bounds.left-(y.width+10),t.bounds.top),[3,18];case 17:return o.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(b=this.createFontStyle(a)[0],this.ctx.font=b,this.ctx.fillStyle=or(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new i(t.bounds.left,t.bounds.top+Gn(t.styles.paddingTop,t.bounds.width),t.bounds.width,xo(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Si(e.listValue,w),a.letterSpacing,xo(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),o.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,i,s,c,l,u,A,h,d,p,f,g;return o(this,(function(o){switch(o.label){case 0:return aa(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:o.sent(),t=0,n=e.negativeZIndex,o.label=2;case 2:return t<n.length?(g=n[t],[4,this.renderStack(g)]):[3,5];case 3:o.sent(),o.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:o.sent(),r=0,a=e.nonInlineLevel,o.label=7;case 7:return r<a.length?(g=a[r],[4,this.renderNode(g)]):[3,10];case 8:o.sent(),o.label=9;case 9:return r++,[3,7];case 10:i=0,s=e.nonPositionedFloats,o.label=11;case 11:return i<s.length?(g=s[i],[4,this.renderStack(g)]):[3,14];case 12:o.sent(),o.label=13;case 13:return i++,[3,11];case 14:c=0,l=e.nonPositionedInlineLevel,o.label=15;case 15:return c<l.length?(g=l[c],[4,this.renderStack(g)]):[3,18];case 16:o.sent(),o.label=17;case 17:return c++,[3,15];case 18:u=0,A=e.inlineLevel,o.label=19;case 19:return u<A.length?(g=A[u],[4,this.renderNode(g)]):[3,22];case 20:o.sent(),o.label=21;case 21:return u++,[3,19];case 22:h=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,o.label=23;case 23:return h<d.length?(g=d[h],[4,this.renderStack(g)]):[3,26];case 24:o.sent(),o.label=25;case 25:return h++,[3,23];case 26:p=0,f=e.positiveZIndex,o.label=27;case 27:return p<f.length?(g=f[p],[4,this.renderStack(g)]):[3,30];case 28:o.sent(),o.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=Bc(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Bc(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var o=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return o.width=Math.max(1,t),o.height=Math.max(1,n),o.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),o},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,i,s;return o(this,(function(c){switch(c.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var a,i,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w,x,C,k,B,S,I,E,N,F,T,_,L,O,R;return o(this,(function(o){switch(o.label){case 0:if(0!==n.type)return[3,5];a=void 0,i=n.url,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return a=o.sent(),[3,4];case 3:return o.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return a&&(s=el(e,t,[a.width,a.height,a.width/a.height]),b=s[0],S=s[1],I=s[2],C=s[3],k=s[4],y=r.ctx.createPattern(r.resizeImage(a,C,k),"repeat"),r.renderRepeat(b,y,S,I)),[3,6];case 5:_r(n)?(c=el(e,t,[null,null,null]),b=c[0],S=c[1],I=c[2],C=c[3],k=c[4],l=yr(n.angle,C,k),u=l[0],A=l[1],h=l[2],d=l[3],p=l[4],(f=document.createElement("canvas")).width=C,f.height=k,g=f.getContext("2d"),m=g.createLinearGradient(A,d,h,p),gr(n.stops,u).forEach((function(e){return m.addColorStop(e.stop,or(e.color))})),g.fillStyle=m,g.fillRect(0,0,C,k),C>0&&k>0&&(y=r.ctx.createPattern(f,"repeat"),r.renderRepeat(b,y,S,I))):Lr(n)&&(v=el(e,t,[null,null,null]),b=v[0],w=v[1],x=v[2],C=v[3],k=v[4],B=0===n.position.length?[jn]:n.position,S=Gn(B[0],C),I=Gn(B[B.length-1],k),E=wr(n,S,I,C,k),N=E[0],F=E[1],N>0&&F>0&&(T=r.ctx.createRadialGradient(w+S,x+I,0,w+S,x+I,N),gr(n.stops,2*N).forEach((function(e){return T.addColorStop(e.stop,or(e.color))})),r.path(b),r.ctx.fillStyle=T,N!==F?(_=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,R=1/(O=F/N),r.ctx.save(),r.ctx.translate(_,L),r.ctx.transform(1,0,0,O,0,0),r.ctx.translate(-_,-L),r.ctx.fillRect(w,R*(x-L)+L,C,k*R),r.ctx.restore()):r.ctx.fill())),o.label=6;case 6:return t--,[2]}}))},r=this,a=0,i=e.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<i.length?(s=i[a],[5,n(s)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){return this.path(jc(n,t)),this.ctx.fillStyle=or(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,a){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,a)]:[3,2];case 1:return o.sent(),[2];case 2:return r=Wc(a,n),this.path(r),this.ctx.fillStyle=or(e),this.ctx.fill(),i=Kc(a,n),this.path(i),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,i,s,c,l,u=this;return o(this,(function(o){switch(o.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],a=dl(ol(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=or(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:o.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){u.ctx.save();var n=Ec(e.curves),r=t.inset?0:ul,o=Pc(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(o)):(u.mask(n),u.ctx.clip(),u.path(o)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=or(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?or(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()})),o.label=2;case 2:i=0,s=0,c=r,o.label=3;case 3:return s<c.length?0!==(l=c[s]).style&&!rr(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return o.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,i,e.curves,3)];case 6:return o.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,i,e.curves)];case 8:return o.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,i,e.curves)];case 10:o.sent(),o.label=11;case 11:i++,o.label=12;case 12:return s++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,a,i){return r(this,void 0,void 0,(function(){var r,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w;return o(this,(function(o){return this.ctx.save(),r=Gc(a,n),s=jc(a,n),2===i&&(this.path(s),this.ctx.clip()),Bc(s[0])?(c=s[0].start.x,l=s[0].start.y):(c=s[0].x,l=s[0].y),Bc(s[1])?(u=s[1].end.x,A=s[1].end.y):(u=s[1].x,A=s[1].y),h=0===n||2===n?Math.abs(c-u):Math.abs(l-A),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(s.slice(0,2)),d=t<3?3*t:2*t,p=t<3?2*t:t,3===i&&(d=t,p=t),f=!0,h<=2*d?f=!1:h<=2*d+p?(d*=g=h/(2*d+p),p*=g):(m=Math.floor((h+p)/(d+p)),y=(h-m*d)/(m-1),p=(v=(h-(m+1)*d)/m)<=0||Math.abs(p-y)<Math.abs(p-v)?y:v),f&&(3===i?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=or(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Bc(s[0])&&(b=s[3],w=s[0],this.ctx.beginPath(),this.formatPath([new xc(b.end.x,b.end.y),new xc(w.start.x,w.start.y)]),this.ctx.stroke()),Bc(s[1])&&(b=s[1],w=s[2],this.ctx.beginPath(),this.formatPath([new xc(b.end.x,b.end.y),new xc(w.start.x,w.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Vc(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(ll),hl=function(e){return e instanceof es||e instanceof $i||e instanceof Ji&&e.type!==Xi&&e.type!==qi},dl=function(e,t){switch(e){case 0:return Ec(t);case 2:return Nc(t);default:return Fc(t)}},pl=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},fl=["-apple-system","system-ui"],gl=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===fl.indexOf(e)})):e},ml=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=Ci(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,yl(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(ll),yl=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},vl=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,a([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),bl=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new vl({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new dc(this,t)}return e.instanceCount=1,e}(),wl=function(e,t){return void 0===t&&(t={}),xl(e,t)};"undefined"!==typeof window&&hc.setContext(window);var xl=function(e,t){return r(void 0,void 0,void 0,(function(){var r,a,l,u,A,h,d,p,f,g,m,y,v,b,w,x,C,k,B,S,I,E,N,F,T,_,L,O,R,U,D,P,M,Q,H,z,V,j;return o(this,(function(o){switch(o.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return l={allowTaint:null!==(E=t.allowTaint)&&void 0!==E&&E,imageTimeout:null!==(N=t.imageTimeout)&&void 0!==N?N:15e3,proxy:t.proxy,useCORS:null!==(F=t.useCORS)&&void 0!==F&&F},u=n({logging:null===(T=t.logging)||void 0===T||T,cache:t.cache},l),A={windowWidth:null!==(_=t.windowWidth)&&void 0!==_?_:a.innerWidth,windowHeight:null!==(L=t.windowHeight)&&void 0!==L?L:a.innerHeight,scrollX:null!==(O=t.scrollX)&&void 0!==O?O:a.pageXOffset,scrollY:null!==(R=t.scrollY)&&void 0!==R?R:a.pageYOffset},h=new i(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),d=new bl(u,h),p=null!==(U=t.foreignObjectRendering)&&void 0!==U&&U,f={allowTaint:null!==(D=t.allowTaint)&&void 0!==D&&D,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:p,copyStyles:p},d.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),g=new qs(d,e,f),(m=g.clonedReferenceElement)?[4,g.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=o.sent(),v=ms(m)||fs(m)?c(m.ownerDocument):s(d,m),b=v.width,w=v.height,x=v.left,C=v.top,k=Cl(d,m,t.backgroundColor),B={canvas:t.canvas,backgroundColor:k,scale:null!==(M=null!==(P=t.scale)&&void 0!==P?P:a.devicePixelRatio)&&void 0!==M?M:1,x:(null!==(Q=t.x)&&void 0!==Q?Q:0)+x,y:(null!==(H=t.y)&&void 0!==H?H:0)+C,width:null!==(z=t.width)&&void 0!==z?z:Math.ceil(b),height:null!==(V=t.height)&&void 0!==V?V:Math.ceil(w)},p?(d.logger.debug("Document cloned, using foreign object rendering"),[4,new ml(d,B).render(m)]):[3,3];case 2:return S=o.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+x+","+C+" with size "+b+"x"+w+" using computed rendering"),d.logger.debug("Starting DOM parsing"),I=as(d,m),k===I.styles.backgroundColor&&(I.styles.backgroundColor=hr.TRANSPARENT),d.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new Al(d,B).render(I)];case 4:S=o.sent(),o.label=5;case 5:return(null===(j=t.removeContainer)||void 0===j||j)&&(qs.destroy(y)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,S]}}))}))},Cl=function(e,t,n){var r=t.ownerDocument,o=r.documentElement?Ar(e,getComputedStyle(r.documentElement).backgroundColor):hr.TRANSPARENT,a=r.body?Ar(e,getComputedStyle(r.body).backgroundColor):hr.TRANSPARENT,i="string"===typeof n?Ar(e,n):null===n?hr.TRANSPARENT:4294967295;return t===r.documentElement?rr(o)?rr(a)?i:a:o:i};return wl}()},1065:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,c=/^\s+|\s+$/g,l="";function u(e){return e?e.replace(c,l):l}e.exports=function(e,c){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];c=c||{};var A=1,h=1;function d(e){var t=e.match(n);t&&(A+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function p(){var e={line:A,column:h};return function(t){return t.position=new f(e),v(),t}}function f(e){this.start=e,this.end={line:A,column:h},this.source=c.source}f.prototype.content=e;var g=[];function m(t){var n=new Error(c.source+":"+A+":"+h+": "+t);if(n.reason=t,n.filename=c.source,n.line=A,n.column=h,n.source=e,!c.silent)throw n;g.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return d(r),e=e.slice(r.length),n}}function v(){y(r)}function b(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return m("End of comment missing");var r=e.slice(2,n-2);return h+=2,d(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function x(){var e=p(),n=y(o);if(n){if(w(),!y(a))return m("property missing ':'");var r=y(i),c=e({type:"declaration",property:u(n[0].replace(t,l)),value:r?u(r[0].replace(t,l)):l});return y(s),c}}return v(),function(){var e,t=[];for(b(t);e=x();)!1!==e&&(t.push(e),b(t));return t}()}},888:(e,t,n)=>{"use strict";var r=n(9047);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},2007:(e,t,n)=>{e.exports=n(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4501:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),A=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case i:case h:case d:return e;default:switch(e=e&&e.$$typeof){case u:case l:case A:case f:case p:case c:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return m(e)===a},t.isMemo=function(e){return m(e)===p}},3873:(e,t,n)=>{"use strict";e.exports=n(4501)},4463:(e,t,n)=>{"use strict";var r=n(2791),o=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function f(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!A.call(p,e)||!A.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var U,D=Object.assign;function P(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var M=!1;function Q(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var c="\n"+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=s);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function H(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 1:return e=Q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case x:return"Portal";case B:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case F:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){Z(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ae(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,Ae=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ce=null,ke=null;function Be(e){if(e=bo(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=xo(t),xe(e.stateNode,e.type,t))}}function Se(e){Ce?ke?ke.push(e):ke=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=ke;if(ke=Ce=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function Ee(e,t){return e(t)}function Ne(){}var Fe=!1;function Te(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Ee(e,t,n)}finally{Fe=!1,(null!==Ce||null!==ke)&&(Ne(),Ie())}}function _e(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Le=!1}function Re(e,t,n,r,o,a,i,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Ue=!1,De=null,Pe=!1,Me=null,Qe={onError:function(e){Ue=!0,De=e}};function He(e,t,n,r,o,a,i,s,c){Ue=!1,De=null,Re.apply(Qe,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return je(o),e;if(i===r)return je(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=o.unstable_scheduleCallback,qe=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Ze=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=At(s):0!==(a&=i)&&(r=At(a))}else 0!==(i=n&~o)?r=At(i):0!==a&&(r=At(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Ct,kt,Bt,St=!1,It=[],Et=null,Nt=null,Ft=null,Tt=new Map,_t=new Map,Lt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Ut(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Dt(e){var t=vo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Bt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Mt(e,t,n){Pt(e)&&n.delete(t)}function Qt(){St=!1,null!==Et&&Pt(Et)&&(Et=null),null!==Nt&&Pt(Nt)&&(Nt=null),null!==Ft&&Pt(Ft)&&(Ft=null),Tt.forEach(Mt),_t.forEach(Mt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Qt)))}function zt(e){function t(t){return Ht(t,e)}if(0<It.length){Ht(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ht(Et,e),null!==Nt&&Ht(Nt,e),null!==Ft&&Ht(Ft,e),Tt.forEach(t),_t.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Lt.shift()}var Vt=b.ReactCurrentBatchConfig,jt=!0;function Wt(e,t,n,r){var o=vt,a=Vt.transition;Vt.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=o,Vt.transition=a}}function Kt(e,t,n,r){var o=vt,a=Vt.transition;Vt.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=o,Vt.transition=a}}function Gt(e,t,n,r){if(jt){var o=Xt(e,t,n,r);if(null===o)jr(e,t,r,qt,n),Rt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Et=Ut(Et,e,t,n,r,o),!0;case"dragenter":return Nt=Ut(Nt,e,t,n,r,o),!0;case"mouseover":return Ft=Ut(Ft,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Tt.set(a,Ut(Tt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,_t.set(a,Ut(_t.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&jr(e,t,r,qt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else jr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=vo(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,o="value"in Zt?Zt.value:Zt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),An=D({},ln,{view:0,detail:0}),hn=on(An),dn=D({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(dn),fn=on(D({},dn,{dataTransfer:0})),gn=on(D({},An,{relatedTarget:0})),mn=on(D({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(yn),bn=on(D({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Bn(){return kn}var Sn=D({},An,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Sn),En=on(D({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(D({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn})),Fn=on(D({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=D({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_n=on(Tn),Ln=[9,13,27,32],On=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Un=u&&"TextEvent"in window&&!Rn,Dn=u&&(!On||Rn&&8<Rn&&11>=Rn),Pn=String.fromCharCode(32),Mn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function qn(e){Pr(e,0)}function Xn(e){if(G(wo(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Wn(t,Gn,e,we(e)),Te(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function ar(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!A.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function Ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ar(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=ur(n,a);var i=ur(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},kr={};function Br(e){if(Cr[e])return Cr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Cr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Br("animationend"),Ir=Br("animationiteration"),Er=Br("animationstart"),Nr=Br("transitionend"),Fr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Fr.set(e,t),c(t,[e])}for(var Lr=0;Lr<Tr.length;Lr++){var Or=Tr[Lr];_r(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}_r(Sr,"onAnimationEnd"),_r(Ir,"onAnimationIteration"),_r(Er,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,c,l){if(He.apply(this,arguments),Ue){if(!Ue)throw Error(a(198));var u=De;Ue=!1,De=null,Pe||(Pe=!0,Me=u)}}(r,t,void 0,e),e.currentTarget=null}function Pr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&o.isPropagationStopped())break e;Dr(o,s,l),a=c}else for(i=0;i<r.length;i++){if(c=(s=r[i]).instance,l=s.currentTarget,s=s.listener,c!==a&&o.isPropagationStopped())break e;Dr(o,s,l),a=c}}}if(Pe)throw e=Me,Pe=!1,Me=null,e}function Mr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Hr]){e[Hr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Ur.has(t)||Qr(t,!1,e),Qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Qr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var o=Wt;break;case 4:o=Kt;break;default:o=Gt}n=o.bind(null,t,n,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=vo(s)))return;if(5===(c=i.tag)||6===c){r=a=i;continue e}s=s.parentNode}}r=r.return}Te((function(){var r=a,o=we(n),i=[];e:{var s=Fr.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=In;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case Sr:case Ir:case Er:c=mn;break;case Nr:c=Fn;break;case"scroll":c=hn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=En}var u=0!==(4&t),A=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var d,p=r;null!==p;){var f=(d=p).stateNode;if(5===d.tag&&null!==f&&(d=f,null!==h&&(null!=(f=_e(p,h))&&u.push(Wr(p,f,d)))),A)break;p=p.return}0<u.length&&(s=new c(s,l,null,n,o),i.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vo(l)&&!l[fo])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vo(l):null)&&(l!==(A=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,f="onPointerLeave",h="onPointerEnter",p="pointer"),A=null==c?s:wo(c),d=null==l?s:wo(l),(s=new u(f,p+"leave",c,n,o)).target=A,s.relatedTarget=d,f=null,vo(o)===r&&((u=new u(h,p+"enter",l,n,o)).target=d,u.relatedTarget=A,f=u),A=f,c&&l)e:{for(h=l,p=0,d=u=c;d;d=Gr(d))p++;for(d=0,f=h;f;f=Gr(f))d++;for(;0<p-d;)u=Gr(u),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==c&&qr(i,s,c,u,!1),null!==l&&null!==A&&qr(i,A,l,u,!0)}if("select"===(c=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Yn;else if(jn(s))if(Zn)g=ir;else{g=or;var m=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(i,g,n,o):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?wo(r):window,e){case"focusin":(jn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,o);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(i,n,o)}var y;if(On)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zn?Qn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==v?"onCompositionEnd"===v&&zn&&(y=en()):(Jt="value"in(Zt=o)?Zt.value:Zt.textContent,zn=!0)),0<(m=Kr(r,v)).length&&(v=new bn(v,e,null,n,o),i.push({event:v,listeners:m}),y?v.data=y:null!==(y=Hn(n))&&(v.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Mn=!0,Pn);case"textInput":return(e=t.data)===Pn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Qn(e,t)?(e=en(),$t=Jt=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=y))}Pr(i,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=_e(e,n))&&r.unshift(Wr(e,a,o)),null!=(a=_e(e,t))&&r.push(Wr(e,a,o))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=_e(n,a))&&i.unshift(Wr(n,c,s)):o||null!=(c=_e(n,a))&&i.push(Wr(n,c,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function $r(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function co(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),ho="__reactFiber$"+Ao,po="__reactProps$"+Ao,fo="__reactContainer$"+Ao,go="__reactEvents$"+Ao,mo="__reactListeners$"+Ao,yo="__reactHandles$"+Ao;function vo(e){var t=e[ho];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[ho]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[ho])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[ho]||e[fo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xo(e){return e[po]||null}var Co=[],ko=-1;function Bo(e){return{current:e}}function So(e){0>ko||(e.current=Co[ko],Co[ko]=null,ko--)}function Io(e,t){ko++,Co[ko]=e.current,e.current=t}var Eo={},No=Bo(Eo),Fo=Bo(!1),To=Eo;function _o(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oo(){So(Fo),So(No)}function Ro(e,t,n){if(No.current!==Eo)throw Error(a(168));Io(No,t),Io(Fo,n)}function Uo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,V(e)||"Unknown",o));return D({},n,r)}function Do(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,To=No.current,Io(No,e),Io(Fo,Fo.current),!0}function Po(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Uo(e,t,To),r.__reactInternalMemoizedMergedChildContext=e,So(Fo),So(No),Io(No,e)):So(Fo),Io(Fo,n)}var Mo=null,Qo=!1,Ho=!1;function zo(e){null===Mo?Mo=[e]:Mo.push(e)}function Vo(){if(!Ho&&null!==Mo){Ho=!0;var e=0,t=vt;try{var n=Mo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mo=null,Qo=!1}catch(o){throw null!==Mo&&(Mo=Mo.slice(e+1)),Ge($e,Vo),o}finally{vt=t,Ho=!1}}return null}var jo=[],Wo=0,Ko=null,Go=0,qo=[],Xo=0,Yo=null,Zo=1,Jo="";function $o(e,t){jo[Wo++]=Go,jo[Wo++]=Ko,Ko=e,Go=t}function ea(e,t,n){qo[Xo++]=Zo,qo[Xo++]=Jo,qo[Xo++]=Yo,Yo=e;var r=Zo;e=Jo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Zo=1<<32-it(t)+o|n<<o|r,Jo=a+e}else Zo=1<<a|n<<o|r,Jo=e}function ta(e){null!==e.return&&($o(e,1),ea(e,1,0))}function na(e){for(;e===Ko;)Ko=jo[--Wo],jo[Wo]=null,Go=jo[--Wo],jo[Wo]=null;for(;e===Yo;)Yo=qo[--Xo],qo[Xo]=null,Jo=qo[--Xo],qo[Xo]=null,Zo=qo[--Xo],qo[Xo]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=_l(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ca(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yo?{id:Zo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_l(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(aa){var t=oa;if(t){var n=t;if(!ca(e,t)){if(la(e))throw Error(a(418));t=lo(n.nextSibling);var r=ra;t&&ca(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function Aa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return Aa(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(la(e))throw da(),Error(a(418));for(;t;)sa(e,t),t=lo(t.nextSibling)}if(Aa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?lo(e.stateNode.nextSibling):null;return!0}function da(){for(var e=oa;e;)e=lo(e.nextSibling)}function pa(){oa=ra=null,aa=!1}function fa(e){null===ia?ia=[e]:ia.push(e)}var ga=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Bo(null),va=null,ba=null,wa=null;function xa(){wa=ba=va=null}function Ca(e){var t=ya.current;So(ya),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ba(e,t){va=e,wa=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===va)throw Error(a(308));ba=e,va.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ia=null;function Ea(e){null===Ia?Ia=[e]:Ia.push(e)}function Na(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ea(t)):(n.next=o.next,o.next=n),t.interleaved=n,Fa(e,r)}function Fa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ta=!1;function _a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Fa(e,n)}return null===(o=r.interleaved)?(t.next=t,Ea(r)):(t.next=o.next,o.next=t),r.interleaved=t,Fa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pa(e,t,n,r){var o=e.updateQueue;Ta=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===i?a=l:i.next=l,i=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==a){var A=o.baseState;for(i=0,u=l=c=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,f=s;switch(h=t,d=n,f.tag){case 1:if("function"===typeof(p=f.payload)){A=p.call(d,A,h);break e}A=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(d,A,h):p)||void 0===h)break e;A=D({},A,h);break e;case 2:Ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=d,c=A):u=u.next=d,i|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(c=A),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Dc|=i,e.lanes=i,e.memoizedState=A}}function Ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Qa=(new r.Component).refs;function Ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),o=nl(e),a=Oa(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,o))&&(rl(t,e,o,r),Ua(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),o=nl(e),a=Oa(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,o))&&(rl(t,e,o,r),Ua(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),o=Oa(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ra(e,o,r))&&(rl(t,e,r,n),Ua(t,e,r))}};function Va(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(o,a))}function ja(e,t,n){var r=!1,o=Eo,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(o=Lo(t)?To:No.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?_o(e,o):Eo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Qa,_a(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Sa(a):(a=Lo(t)?To:No.current,o.context=_o(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ha(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&za.enqueueReplaceState(o,o.state,null),Pa(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===Qa&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Pl(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===C?A(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===_&&Xa(a)===t.type)?((r=o(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Rl(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ml(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function A(e,t,n,r,a){return null===t||7!==t.tag?((t=Ul(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Pl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rl(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case x:return(t=Ml(t,e.mode,n)).return=e,t;case _:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ul(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?l(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null;case _:return d(e,t,(o=n._init)(n._payload),r)}if(te(n)||R(n))return null!==o?null:A(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case _:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||R(r))return A(t,e=e.get(n)||null,r,o,null);qa(t,r)}return null}function f(o,a,s,c){for(var l=null,u=null,A=a,f=a=0,g=null;null!==A&&f<s.length;f++){A.index>f?(g=A,A=null):g=A.sibling;var m=d(o,A,s[f],c);if(null===m){null===A&&(A=g);break}e&&A&&null===m.alternate&&t(o,A),a=i(m,a,f),null===u?l=m:u.sibling=m,u=m,A=g}if(f===s.length)return n(o,A),aa&&$o(o,f),l;if(null===A){for(;f<s.length;f++)null!==(A=h(o,s[f],c))&&(a=i(A,a,f),null===u?l=A:u.sibling=A,u=A);return aa&&$o(o,f),l}for(A=r(o,A);f<s.length;f++)null!==(g=p(A,o,f,s[f],c))&&(e&&null!==g.alternate&&A.delete(null===g.key?f:g.key),a=i(g,a,f),null===u?l=g:u.sibling=g,u=g);return e&&A.forEach((function(e){return t(o,e)})),aa&&$o(o,f),l}function g(o,s,c,l){var u=R(c);if("function"!==typeof u)throw Error(a(150));if(null==(c=u.call(c)))throw Error(a(151));for(var A=u=null,f=s,g=s=0,m=null,y=c.next();null!==f&&!y.done;g++,y=c.next()){f.index>g?(m=f,f=null):m=f.sibling;var v=d(o,f,y.value,l);if(null===v){null===f&&(f=m);break}e&&f&&null===v.alternate&&t(o,f),s=i(v,s,g),null===A?u=v:A.sibling=v,A=v,f=m}if(y.done)return n(o,f),aa&&$o(o,g),u;if(null===f){for(;!y.done;g++,y=c.next())null!==(y=h(o,y.value,l))&&(s=i(y,s,g),null===A?u=y:A.sibling=y,A=y);return aa&&$o(o,g),u}for(f=r(o,f);!y.done;g++,y=c.next())null!==(y=p(f,o,g,y.value,l))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),s=i(y,s,g),null===A?u=y:A.sibling=y,A=y);return e&&f.forEach((function(e){return t(o,e)})),aa&&$o(o,g),u}return function e(r,a,i,c){if("object"===typeof i&&null!==i&&i.type===C&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var l=i.key,u=a;null!==u;){if(u.key===l){if((l=i.type)===C){if(7===u.tag){n(r,u.sibling),(a=o(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===_&&Xa(l)===u.type){n(r,u.sibling),(a=o(u,i.props)).ref=Ga(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===C?((a=Ul(i.props.children,r.mode,c,i.key)).return=r,r=a):((c=Rl(i.type,i.key,i.props,null,r.mode,c)).ref=Ga(r,a,i),c.return=r,r=c)}return s(r);case x:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ml(i,r.mode,c)).return=r,r=a}return s(r);case _:return e(r,a,(u=i._init)(i._payload),c)}if(te(i))return f(r,a,i,c);if(R(i))return g(r,a,i,c);qa(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Pl(i,r.mode,c)).return=r,r=a),s(r)):n(r,a)}}var Za=Ya(!0),Ja=Ya(!1),$a={},ei=Bo($a),ti=Bo($a),ni=Bo($a);function ri(e){if(e===$a)throw Error(a(174));return e}function oi(e,t){switch(Io(ni,t),Io(ti,e),Io(ei,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}So(ei),Io(ei,t)}function ai(){So(ei),So(ti),So(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=ce(t,e.type);t!==n&&(Io(ti,e),Io(ei,n))}function si(e){ti.current===e&&(So(ei),So(ti))}var ci=Bo(0);function li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=[];function Ai(){for(var e=0;e<ui.length;e++)ui[e]._workInProgressVersionPrimary=null;ui.length=0}var hi=b.ReactCurrentDispatcher,di=b.ReactCurrentBatchConfig,pi=0,fi=null,gi=null,mi=null,yi=!1,vi=!1,bi=0,wi=0;function xi(){throw Error(a(321))}function Ci(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ki(e,t,n,r,o,i){if(pi=i,fi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hi.current=null===e||null===e.memoizedState?ss:cs,e=n(r,o),vi){i=0;do{if(vi=!1,bi=0,25<=i)throw Error(a(301));i+=1,mi=gi=null,t.updateQueue=null,hi.current=ls,e=n(r,o)}while(vi)}if(hi.current=is,t=null!==gi&&null!==gi.next,pi=0,mi=gi=fi=null,yi=!1,t)throw Error(a(300));return e}function Bi(){var e=0!==bi;return bi=0,e}function Si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mi?fi.memoizedState=mi=e:mi=mi.next=e,mi}function Ii(){if(null===gi){var e=fi.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var t=null===mi?fi.memoizedState:mi.next;if(null!==t)mi=t,gi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===mi?fi.memoizedState=mi=e:mi=mi.next=e}return mi}function Ei(e,t){return"function"===typeof t?t(e):t}function Ni(e){var t=Ii(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=gi,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var c=s=null,l=null,u=i;do{var A=u.lane;if((pi&A)===A)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:A,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=r):l=l.next=h,fi.lanes|=A,Dc|=A}u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=c,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,fi.lanes|=i,Dc|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fi(e){var t=Ii(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(bs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ti(){}function _i(e,t){var n=fi,r=Ii(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,bs=!0),r=r.queue,ji(Ri.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==mi&&1&mi.memoizedState.tag){if(n.flags|=2048,Mi(9,Oi.bind(null,n,r,o,t),void 0,null),null===Fc)throw Error(a(349));0!==(30&pi)||Li(n,t,o)}return o}function Li(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fi.updateQueue)?(t={lastEffect:null,stores:null},fi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oi(e,t,n,r){t.value=n,t.getSnapshot=r,Ui(t)&&Di(e)}function Ri(e,t,n){return n((function(){Ui(t)&&Di(e)}))}function Ui(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Di(e){var t=Fa(e,1);null!==t&&rl(t,e,1,-1)}function Pi(e){var t=Si();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,fi,e),[t.memoizedState,e]}function Mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fi.updateQueue)?(t={lastEffect:null,stores:null},fi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Qi(){return Ii().memoizedState}function Hi(e,t,n,r){var o=Si();fi.flags|=e,o.memoizedState=Mi(1|t,n,void 0,void 0===r?null:r)}function zi(e,t,n,r){var o=Ii();r=void 0===r?null:r;var a=void 0;if(null!==gi){var i=gi.memoizedState;if(a=i.destroy,null!==r&&Ci(r,i.deps))return void(o.memoizedState=Mi(t,n,a,r))}fi.flags|=e,o.memoizedState=Mi(1|t,n,a,r)}function Vi(e,t){return Hi(8390656,8,e,t)}function ji(e,t){return zi(2048,8,e,t)}function Wi(e,t){return zi(4,2,e,t)}function Ki(e,t){return zi(4,4,e,t)}function Gi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,Gi.bind(null,t,e),n)}function Xi(){}function Yi(e,t){var n=Ii();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ci(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zi(e,t){var n=Ii();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ci(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ji(e,t,n){return 0===(21&pi)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=ft(),fi.lanes|=n,Dc|=n,e.baseState=!0),t)}function $i(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=di.transition;di.transition={};try{e(!1),t()}finally{vt=n,di.transition=r}}function es(){return Ii().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))os(t,n);else if(null!==(n=Na(e,t,n,r))){rl(n,e,r,tl()),as(n,t,r)}}function ns(e,t,n){var r=nl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))os(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var c=t.interleaved;return null===c?(o.next=o,Ea(t)):(o.next=c.next,c.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Na(e,t,o,r))&&(rl(n,e,r,o=tl()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===fi||null!==t&&t===fi}function os(e,t){vi=yi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var is={readContext:Sa,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Si().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Vi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hi(4194308,4,Gi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hi(4,2,e,t)},useMemo:function(e,t){var n=Si();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Si();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,fi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Si().memoizedState=e},useState:Pi,useDebugValue:Xi,useDeferredValue:function(e){return Si().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=$i.bind(null,e[1]),Si().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fi,o=Si();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Fc)throw Error(a(349));0!==(30&pi)||Li(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Vi(Ri.bind(null,r,i,e),[e]),r.flags|=2048,Mi(9,Oi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Si(),t=Fc.identifierPrefix;if(aa){var n=Jo;t=":"+t+"R"+(n=(Zo&~(1<<32-it(Zo)-1)).toString(32)+n),0<(n=bi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Yi,useContext:Sa,useEffect:ji,useImperativeHandle:qi,useInsertionEffect:Wi,useLayoutEffect:Ki,useMemo:Zi,useReducer:Ni,useRef:Qi,useState:function(){return Ni(Ei)},useDebugValue:Xi,useDeferredValue:function(e){return Ji(Ii(),gi.memoizedState,e)},useTransition:function(){return[Ni(Ei)[0],Ii().memoizedState]},useMutableSource:Ti,useSyncExternalStore:_i,useId:es,unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:Yi,useContext:Sa,useEffect:ji,useImperativeHandle:qi,useInsertionEffect:Wi,useLayoutEffect:Ki,useMemo:Zi,useReducer:Fi,useRef:Qi,useState:function(){return Fi(Ei)},useDebugValue:Xi,useDeferredValue:function(e){var t=Ii();return null===gi?t.memoizedState=e:Ji(t,gi.memoizedState,e)},useTransition:function(){return[Fi(Ei)[0],Ii().memoizedState]},useMutableSource:Ti,useSyncExternalStore:_i,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function As(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Kc=r),hs(0,t)},n}function fs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vs=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Za(t,e.child,n,r)}function xs(e,t,n,r,o){n=n.render;var a=t.ref;return Ba(t,o),r=ki(e,t,n,r,a,o),n=Bi(),null===e||bs?(aa&&n&&ta(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Cs(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Ll(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return Is(e,t,n,r,o)}function Bs(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Oc,Lc),Lc|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Oc,Lc),Lc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Io(Oc,Lc),Lc|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Io(Oc,Lc),Lc|=r;return ws(e,t,o,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,o){var a=Lo(n)?To:No.current;return a=_o(t,a),Ba(t,o),n=ki(e,t,n,r,a,o),r=Bi(),null===e||bs?(aa&&r&&ta(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Es(e,t,n,r,o){if(Lo(n)){var a=!0;Do(t)}else a=!1;if(Ba(t,o),null===t.stateNode)js(e,t),ja(t,n,r),Ka(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var c=i.context,l=n.contextType;"object"===typeof l&&null!==l?l=Sa(l):l=_o(t,l=Lo(n)?To:No.current);var u=n.getDerivedStateFromProps,A="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;A||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||c!==l)&&Wa(t,i,r,l),Ta=!1;var h=t.memoizedState;i.state=h,Pa(t,r,i,o),c=t.memoizedState,s!==r||h!==c||Fo.current||Ta?("function"===typeof u&&(Ha(t,n,u,r),c=t.memoizedState),(s=Ta||Va(t,n,s,r,h,c,l))?(A||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=l,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,La(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),i.props=l,A=t.pendingProps,h=i.context,"object"===typeof(c=n.contextType)&&null!==c?c=Sa(c):c=_o(t,c=Lo(n)?To:No.current);var d=n.getDerivedStateFromProps;(u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==A||h!==c)&&Wa(t,i,r,c),Ta=!1,h=t.memoizedState,i.state=h,Pa(t,r,i,o);var p=t.memoizedState;s!==A||h!==p||Fo.current||Ta?("function"===typeof d&&(Ha(t,n,d,r),p=t.memoizedState),(l=Ta||Va(t,n,l,r,h,p,c)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=c,r=l):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,o)}function Ns(e,t,n,r,o,a){Ss(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Po(t,n,!1),Ws(e,t,a);r=t.stateNode,vs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Za(t,e.child,null,a),t.child=Za(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,o&&Po(t,n,!0),t.child}function Fs(e){var t=e.stateNode;t.pendingContext?Ro(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ro(0,t.context,!1),oi(e,t.containerInfo)}function Ts(e,t,n,r,o){return pa(),fa(o),t.flags|=256,ws(e,t,n,r),t.child}var _s,Ls,Os,Rs,Us={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ps(e,t,n){var r,o=t.pendingProps,i=ci.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Io(ci,1&i),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=o.children,e=o.fallback,s?(o=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Dl(c,o,0,null),e=Ul(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Us,e):Ms(t,c));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Qs(e,t,s,r=As(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Dl({mode:"visible",children:r.children},o,0,null),(i=Ul(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Za(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Us,i);if(0===(1&t.mode))return Qs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var c=r.dgst;return r=c,Qs(e,t,s,r=As(i=Error(a(419)),r,void 0))}if(c=0!==(s&e.childLanes),bs||c){if(null!==(r=Fc)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Fa(e,o),rl(r,e,o,-1))}return gl(),Qs(e,t,s,r=As(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=El.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=lo(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(qo[Xo++]=Zo,qo[Xo++]=Jo,qo[Xo++]=Yo,Zo=e.id,Jo=e.overflow,Yo=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,c,o,r,i,n);if(s){s=o.fallback,c=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&c)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ol(i,l)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Ol(r,s):(s=Ul(s,c,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,c=null===(c=e.child.memoizedState)?Ds(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Us,o}return e=(s=e.child).sibling,o=Ol(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ms(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qs(e,t,n,r){return null!==r&&fa(r),Za(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function zs(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Vs(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ci.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Io(ci,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===li(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),zs(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===li(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Lo(t.type)&&Oo(),Gs(t),null;case 3:return r=t.stateNode,ai(),So(Fo),So(No),Ai(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(sl(ia),ia=null))),Ls(e,t),Gs(t),null;case 5:si(t);var o=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=ri(ei.current),ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ho]=t,r[po]=i,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(o=0;o<Rr.length;o++)Mr(Rr[o],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":Y(r,i),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mr("invalid",r);break;case"textarea":oe(r,i),Mr("invalid",r)}for(var c in ye(n,i),o=null,i)if(i.hasOwnProperty(c)){var l=i[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Mr("scroll",r)}switch(n){case"input":K(r),$(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[ho]=t,e[po]=r,_s(e,t,!1,!1),t.stateNode=e;e:{switch(c=ve(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),o=r;break;case"iframe":case"object":case"embed":Mr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Rr.length;o++)Mr(Rr[o],e);o=r;break;case"source":Mr("error",e),o=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),o=r;break;case"details":Mr("toggle",e),o=r;break;case"input":Y(e,r),o=X(e,r),Mr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=D({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Mr("invalid",e)}for(i in ye(n,o),l=o)if(l.hasOwnProperty(i)){var u=l[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&Ae(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Mr("scroll",e):null!=u&&v(e,i,u,c))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ri(ni.current),ri(ei.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[ho]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ho]=t,t.stateNode=r}return Gs(t),null;case 13:if(So(ci),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))da(),pa(),t.flags|=98560,i=!1;else if(i=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ho]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else null!==ia&&(sl(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ci.current)?0===Rc&&(Rc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ai(),Ls(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Ca(t.type._context),Gs(t),null;case 19:if(So(ci),null===(i=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(c=i.rendering))if(r)Ks(i,!1);else{if(0!==Rc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=li(e))){for(t.flags|=128,Ks(i,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(c=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,e=c.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Io(ci,1&ci.current|2),t.child}e=e.sibling}null!==i.tail&&Ze()>Vc&&(t.flags|=128,r=!0,Ks(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=li(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(i,!0),null===i.tail&&"hidden"===i.tailMode&&!c.alternate&&!aa)return Gs(t),null}else 2*Ze()-i.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,r=!0,Ks(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=i.last)?n.sibling=c:t.child=c,i.last=c)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ze(),t.sibling=null,n=ci.current,Io(ci,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Lc)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(na(t),t.tag){case 1:return Lo(t.type)&&Oo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ai(),So(Fo),So(No),Ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return si(t),null;case 13:if(So(ci),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return So(ci),null;case 4:return ai(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}_s=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ri(ei.current);var a,i=null;switch(n){case"input":o=X(e,o),r=X(e,r),i=[];break;case"select":o=D({},o,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var c=o[u];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(i=i||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(i=i||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Mr("scroll",e),i||c===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Zs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Bl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Bl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&tc(t,n,a)}o=o.next}while(o!==r)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[go],delete t[mo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var Ac=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Zs||ec(n,t);case 6:var r=Ac,o=hc;Ac=null,dc(e,t,n),hc=o,null!==(Ac=r)&&(hc?(e=Ac,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Ac.removeChild(n.stateNode));break;case 18:null!==Ac&&(hc?(e=Ac,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),zt(e)):co(Ac,n.stateNode));break;case 4:r=Ac,o=hc,Ac=n.stateNode.containerInfo,hc=!0,dc(e,t,n),Ac=r,hc=o;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&tc(n,t,i),o=o.next}while(o!==r)}dc(e,t,n);break;case 1:if(!Zs&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Bl(n,t,s)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,dc(e,t,n),Zs=r):dc(e,t,n);break;default:dc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:Ac=c.stateNode,hc=!1;break e;case 3:case 4:Ac=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===Ac)throw Error(a(160));pc(i,s,o),Ac=null,hc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(u){Bl(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{rc(3,e,e.return),oc(3,e)}catch(g){Bl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Bl(e,e.return,g)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Bl(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===i.type&&null!=i.name&&Z(o,i),ve(c,s);var u=ve(c,i);for(s=0;s<l.length;s+=2){var A=l[s],h=l[s+1];"style"===A?ge(o,h):"dangerouslySetInnerHTML"===A?Ae(o,h):"children"===A?he(o,h):v(o,A,h,u)}switch(c){case"input":J(o,i);break;case"textarea":ae(o,i);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(o,!!i.multiple,p,!1):d!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[po]=i}catch(g){Bl(e,e.return,g)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(g){Bl(e,e.return,g)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Bl(e,e.return,g)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(zc=Ze())),4&r&&fc(e);break;case 22:if(A=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(u=Zs)||A,gc(t,e),Zs=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!A&&0!==(1&e.mode))for($s=e,A=e.child;null!==A;){for(h=$s=A;null!==$s;){switch(p=(d=$s).child,d.tag){case 0:case 11:case 14:case 15:rc(4,d,d.return);break;case 1:ec(d,d.return);var f=d.stateNode;if("function"===typeof f.componentWillUnmount){r=d,n=d.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Bl(r,n,g)}}break;case 5:ec(d,d.return);break;case 22:if(null!==d.memoizedState){xc(h);continue}}null!==p?(p.return=d,$s=p):xc(h)}A=A.sibling}e:for(A=null,h=e;;){if(5===h.tag){if(null===A){A=h;try{o=h.stateNode,u?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(c=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=fe("display",s))}catch(g){Bl(e,e.return,g)}}}else if(6===h.tag){if(null===A)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Bl(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;A===h&&(A=null),h=h.return}A===h&&(A=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gc(t,e),yc(e),4&r&&fc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),uc(e,cc(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;lc(e,cc(e),i);break;default:throw Error(a(161))}}catch(s){Bl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){$s=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var o=$s,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Ys;if(!i){var s=o.alternate,c=null!==s&&null!==s.memoizedState||Zs;s=Ys;var l=Zs;if(Ys=i,(Zs=c)&&!l)for($s=o;null!==$s;)c=(i=$s).child,22===i.tag&&null!==i.memoizedState?Cc(o):null!==c?(c.return=i,$s=c):Cc(o);for(;null!==a;)$s=a,bc(a,t,n),a=a.sibling;$s=o,Ys=s,Zs=l}wc(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,$s=a):wc(e)}}function wc(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||oc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ma(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ma(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var A=u.memoizedState;if(null!==A){var h=A.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Zs||512&t.flags&&ac(t)}catch(d){Bl(t,t.return,d)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function xc(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Cc(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oc(4,t)}catch(c){Bl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(c){Bl(t,o,c)}}var a=t.return;try{ac(t)}catch(c){Bl(t,a,c)}break;case 5:var i=t.return;try{ac(t)}catch(c){Bl(t,i,c)}}}catch(c){Bl(t,t.return,c)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var kc,Bc=Math.ceil,Sc=b.ReactCurrentDispatcher,Ic=b.ReactCurrentOwner,Ec=b.ReactCurrentBatchConfig,Nc=0,Fc=null,Tc=null,_c=0,Lc=0,Oc=Bo(0),Rc=0,Uc=null,Dc=0,Pc=0,Mc=0,Qc=null,Hc=null,zc=0,Vc=1/0,jc=null,Wc=!1,Kc=null,Gc=null,qc=!1,Xc=null,Yc=0,Zc=0,Jc=null,$c=-1,el=0;function tl(){return 0!==(6&Nc)?Ze():-1!==$c?$c:$c=Ze()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==_c?_c&-_c:null!==ga.transition?(0===el&&(el=ft()),el):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,n,r){if(50<Zc)throw Zc=0,Jc=null,Error(a(185));mt(e,n,r),0!==(2&Nc)&&e===Fc||(e===Fc&&(0===(2&Nc)&&(Pc|=n),4===Rc&&cl(e,_c)),ol(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(Vc=Ze()+500,Qo&&Vo()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,c=o[i];-1===c?0!==(s&n)&&0===(s&r)||(o[i]=dt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Fc?_c:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Qo=!0,zo(e)}(ll.bind(null,e)):zo(ll.bind(null,e)),io((function(){0===(6&Nc)&&Vo()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Fl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if($c=-1,el=0,0!==(6&Nc))throw Error(a(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=ht(e,e===Fc?_c:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var o=Nc;Nc|=2;var i=fl();for(Fc===e&&_c===t||(jc=null,Vc=Ze()+500,dl(e,t));;)try{vl();break}catch(c){pl(e,c)}xa(),Sc.current=i,Nc=o,null!==Tc?t=0:(Fc=null,_c=0,t=Rc)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t)throw n=Uc,dl(e,0),cl(e,r),ol(e,Ze()),n;if(6===t)cl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,r))&&(0!==(i=pt(e))&&(r=i,t=il(e,i))),1===t))throw n=Uc,dl(e,0),cl(e,r),ol(e,Ze()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xl(e,Hc,jc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=zc+500-Ze())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xl.bind(null,e,Hc,jc),t);break}xl(e,Hc,jc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bc(r/1960))-r)){e.timeoutHandle=ro(xl.bind(null,e,Hc,jc),r);break}xl(e,Hc,jc);break;default:throw Error(a(329))}}}return ol(e,Ze()),e.callbackNode===n?al.bind(null,e):null}function il(e,t){var n=Qc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Hc,Hc=n,null!==t&&sl(t)),e}function sl(e){null===Hc?Hc=e:Hc.push.apply(Hc,e)}function cl(e,t){for(t&=~Mc,t&=~Pc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(a(327));Cl();var t=ht(e,0);if(0===(1&t))return ol(e,Ze()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Uc,dl(e,0),cl(e,t),ol(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Hc,jc),ol(e,Ze()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(Vc=Ze()+500,Qo&&Vo())}}function Al(e){null!==Xc&&0===Xc.tag&&0===(6&Nc)&&Cl();var t=Nc;Nc|=1;var n=Ec.transition,r=vt;try{if(Ec.transition=null,vt=1,e)return e()}finally{vt=r,Ec.transition=n,0===(6&(Nc=t))&&Vo()}}function hl(){Lc=Oc.current,So(Oc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tc)for(n=Tc.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oo();break;case 3:ai(),So(Fo),So(No),Ai();break;case 5:si(r);break;case 4:ai();break;case 13:case 19:So(ci);break;case 10:Ca(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Fc=e,Tc=e=Ol(e.current,null),_c=Lc=t,Rc=0,Uc=null,Mc=Pc=Dc=0,Hc=Qc=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Ia=null}return e}function pl(e,t){for(;;){var n=Tc;try{if(xa(),hi.current=is,yi){for(var r=fi.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}yi=!1}if(pi=0,mi=gi=fi=null,vi=!1,bi=0,Ic.current=null,null===n||null===n.return){Rc=1,Uc=t,Tc=null;break}e:{var i=e,s=n.return,c=n,l=t;if(t=_c,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,A=c,h=A.tag;if(0===(1&A.mode)&&(0===h||11===h||15===h)){var d=A.alternate;d?(A.updateQueue=d.updateQueue,A.memoizedState=d.memoizedState,A.lanes=d.lanes):(A.updateQueue=null,A.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,c,0,t),1&p.mode&&gs(i,u,t),l=u;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(l),t.updateQueue=g}else f.add(l);break e}if(0===(1&t)){gs(i,u,t),gl();break e}l=Error(a(426))}else if(aa&&1&c.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,c,0,t),fa(us(l,c));break e}}i=l=us(l,c),4!==Rc&&(Rc=2),null===Qc?Qc=[i]:Qc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Da(i,ps(0,l,t));break e;case 1:c=l;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Gc||!Gc.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Da(i,fs(i,c,t));break e}}i=i.return}while(null!==i)}wl(n)}catch(b){t=b,Tc===n&&null!==n&&(Tc=n=n.return);continue}break}}function fl(){var e=Sc.current;return Sc.current=is,null===e?is:e}function gl(){0!==Rc&&3!==Rc&&2!==Rc||(Rc=4),null===Fc||0===(268435455&Dc)&&0===(268435455&Pc)||cl(Fc,_c)}function ml(e,t){var n=Nc;Nc|=2;var r=fl();for(Fc===e&&_c===t||(jc=null,dl(e,t));;)try{yl();break}catch(o){pl(e,o)}if(xa(),Nc=n,Sc.current=r,null!==Tc)throw Error(a(261));return Fc=null,_c=0,Rc}function yl(){for(;null!==Tc;)bl(Tc)}function vl(){for(;null!==Tc&&!Xe();)bl(Tc)}function bl(e){var t=kc(e.alternate,e,Lc);e.memoizedProps=e.pendingProps,null===t?wl(e):Tc=t,Ic.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Lc)))return void(Tc=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Tc=n);if(null===e)return Rc=6,void(Tc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tc=t);Tc=t=e}while(null!==t);0===Rc&&(Rc=5)}function xl(e,t,n){var r=vt,o=Ec.transition;try{Ec.transition=null,vt=1,function(e,t,n,r){do{Cl()}while(null!==Xc);if(0!==(6&Nc))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Fc&&(Tc=Fc=null,_c=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qc||(qc=!0,Fl(tt,(function(){return Cl(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Ec.transition,Ec.transition=null;var s=vt;vt=1;var c=Nc;Nc|=4,Ic.current=null,function(e,t){if(eo=jt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,c=-1,l=-1,u=0,A=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==i||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++u===o&&(c=s),d===i&&++A===r&&(l=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},jt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,m=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ma(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Bl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}f=nc,nc=!1}(e,n),mc(n,e),pr(to),jt=!!eo,to=eo=null,e.current=n,vc(n,e,o),Ye(),Nc=c,vt=s,Ec.transition=i}else e.current=n;if(qc&&(qc=!1,Xc=e,Yc=o),i=e.pendingLanes,0===i&&(Gc=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Wc)throw Wc=!1,e=Kc,Kc=null,e;0!==(1&Yc)&&0!==e.tag&&Cl(),i=e.pendingLanes,0!==(1&i)?e===Jc?Zc++:(Zc=0,Jc=e):Zc=0,Vo()}(e,t,n,r)}finally{Ec.transition=o,vt=r}return null}function Cl(){if(null!==Xc){var e=bt(Yc),t=Ec.transition,n=vt;try{if(Ec.transition=null,vt=16>e?16:e,null===Xc)var r=!1;else{if(e=Xc,Xc=null,Yc=0,0!==(6&Nc))throw Error(a(331));var o=Nc;for(Nc|=4,$s=e.current;null!==$s;){var i=$s,s=i.child;if(0!==(16&$s.flags)){var c=i.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for($s=u;null!==$s;){var A=$s;switch(A.tag){case 0:case 11:case 15:rc(8,A,i)}var h=A.child;if(null!==h)h.return=A,$s=h;else for(;null!==$s;){var d=(A=$s).sibling,p=A.return;if(ic(A),A===u){$s=null;break}if(null!==d){d.return=p,$s=d;break}$s=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}$s=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,$s=s;else e:for(;null!==$s;){if(0!==(2048&(i=$s).flags))switch(i.tag){case 0:case 11:case 15:rc(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,$s=y;break e}$s=i.return}}var v=e.current;for($s=v;null!==$s;){var b=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,$s=b;else e:for(s=v;null!==$s;){if(0!==(2048&(c=$s).flags))try{switch(c.tag){case 0:case 11:case 15:oc(9,c)}}catch(x){Bl(c,c.return,x)}if(c===s){$s=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,$s=w;break e}$s=c.return}}if(Nc=o,Vo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(x){}r=!0}return r}finally{vt=n,Ec.transition=t}}return!1}function kl(e,t,n){e=Ra(e,t=ps(0,t=us(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),ol(e,t))}function Bl(e,t,n){if(3===e.tag)kl(e,e,n);else for(;null!==t;){if(3===t.tag){kl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gc||!Gc.has(r))){t=Ra(t,e=fs(t,e=us(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),ol(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Fc===e&&(_c&n)===n&&(4===Rc||3===Rc&&(130023424&_c)===_c&&500>Ze()-zc?dl(e,0):Mc|=n),ol(e,t)}function Il(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Fa(e,t))&&(mt(e,t,n),ol(e,n))}function El(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Il(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Il(e,n)}function Fl(e,t){return Ge(e,t)}function Tl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _l(e,t,n,r){return new Tl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=_l(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Ll(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Ul(n.children,o,i,t);case k:s=8,o|=8;break;case B:return(e=_l(12,n,t,2|o)).elementType=B,e.lanes=i,e;case N:return(e=_l(13,n,t,o)).elementType=N,e.lanes=i,e;case F:return(e=_l(19,n,t,o)).elementType=F,e.lanes=i,e;case L:return Dl(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case I:s=9;break e;case E:s=11;break e;case T:s=14;break e;case _:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=_l(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Ul(e,t,n,r){return(e=_l(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=_l(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Pl(e,t,n){return(e=_l(6,e,null,t)).lanes=n,e}function Ml(e,t,n){return(t=_l(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hl(e,t,n,r,o,a,i,s,c){return e=new Ql(e,t,n,s,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=_l(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_a(a),e}function zl(e){if(!e)return Eo;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Lo(n))return Uo(e,n,t)}return t}function Vl(e,t,n,r,o,a,i,s,c){return(e=Hl(n,r,!0,e,0,a,0,s,c)).context=zl(null),n=e.current,(a=Oa(r=tl(),o=nl(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,o),e.current.lanes=o,mt(e,o,r),ol(e,r),e}function jl(e,t,n,r){var o=t.current,a=tl(),i=nl(o);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(o,t,i))&&(rl(e,o,i,a),Ua(e,o,i)),i}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fo.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Fs(t),pa();break;case 5:ii(t);break;case 1:Lo(t.type)&&Do(t);break;case 4:oi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Io(ya,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Io(ci,1&ci.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ps(e,t,n):(Io(ci,1&ci.current),null!==(e=Ws(e,t,n))?e.sibling:null);Io(ci,1&ci.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(ci,ci.current),r)break;return null;case 22:case 23:return t.lanes=0,Bs(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,aa&&0!==(1048576&t.flags)&&ea(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;js(e,t),e=t.pendingProps;var o=_o(t,No.current);Ba(t,n),o=ki(null,t,r,e,o,n);var i=Bi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(i=!0,Do(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,_a(t),o.updater=za,t.stateNode=o,o._reactInternals=t,Ka(t,r,e,n),t=Ns(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(js(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=ma(r,e),o){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:ma(r,o),n);case 1:return r=t.type,o=t.pendingProps,Es(e,t,r,o=t.elementType===r?o:ma(r,o),n);case 3:e:{if(Fs(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,La(e,t),Pa(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ts(e,t,r,n,o=us(Error(a(423)),t));break e}if(r!==o){t=Ts(e,t,r,n,o=us(Error(a(424)),t));break e}for(oa=lo(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===o){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&ua(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ps(e,t,n);case 4:return oi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Za(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xs(e,t,r,o=t.elementType===r?o:ma(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Io(ya,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Fo.current){t=Ws(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var c=i.dependencies;if(null!==c){s=i.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=Oa(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var A=(u=u.shared).pending;null===A?l.next=l:(l.next=A.next,A.next=l),u.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ka(i.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ka(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ba(t,n),r=r(o=Sa(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=ma(r=t.type,t.pendingProps),Cs(e,t,r,o=ma(r.type,o),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ma(r,o),js(e,t),t.tag=1,Lo(r)?(e=!0,Do(t)):e=!1,Ba(t,n),ja(t,r,o),Ka(t,r,o,n),Ns(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Bs(e,t,n)}throw Error(a(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function eu(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var s=o;o=function(){var e=Wl(i);s.call(e)}}jl(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Wl(i);a.call(e)}}var i=Vl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=i,e[fo]=i.current,zr(8===e.nodeType?e.parentNode:e),Al(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Wl(c);s.call(e)}}var c=Hl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=c,e[fo]=c.current,zr(8===e.nodeType?e.parentNode:e),Al((function(){jl(t,c,n,r)})),c}(n,t,e,o,r);return Wl(i)}Yl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));jl(e,t,null,null)},Yl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Al((function(){jl(null,e,null,null)})),t[fo]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(yt(t,1|n),ol(t,Ze()),0===(6&Nc)&&(Vc=Ze()+500,Vo()))}break;case 13:Al((function(){var t=Fa(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Gl(e,1)}},xt=function(e){if(13===e.tag){var t=Fa(e,134217728);if(null!==t)rl(t,e,134217728,tl());Gl(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nl(e),n=Fa(e,t);if(null!==n)rl(n,e,t,tl());Gl(e,t)}},kt=function(){return vt},Bt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=xo(r);if(!o)throw Error(a(90));G(r),J(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=ul,Ne=Al;var tu={usingClientEntryPoint:!1,Events:[bo,wo,xo,Se,Ie,ul]},nu={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),at=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zl(e))throw Error(a(299));var n=!1,r="",o=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Hl(e,1,!1,null,0,n,0,r,o),e[fo]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return Al(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,o,0,i,s),e[fo]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(Al((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fo]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},3688:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function a(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==s){var c=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+c+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>i}),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},2240:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2791),i=p(a),s=p(n(4164)),c=p(n(2007)),l=p(n(4334)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5858)),A=n(3663),h=p(A),d=n(3688);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var g=t.portalClassName="ReactModalPortal",m=t.bodyOpenClassName="ReactModal__Body--open",y=A.canUseDOM&&void 0!==s.default.createPortal,v=function(e){return document.createElement(e)},b=function(){return y?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var x=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return n=o=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.removePortal=function(){!y&&s.default.unmountComponentAtNode(o.node);var e=w(o.props.parentSelector);e&&e.contains(o.node)?e.removeChild(o.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},o.portalRef=function(e){o.portal=e},o.renderPortal=function(e){var n=b()(o,i.default.createElement(l.default,r({defaultStyles:t.defaultStyles},e)),o.node);o.portalRef(n)},f(o,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){A.canUseDOM&&(y||(this.node=v("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!y&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(A.canUseDOM){var r=this.props,o=r.isOpen,a=r.portalClassName;e.portalClassName!==a&&(this.node.className=a);var i=n.prevParent,s=n.nextParent;s!==i&&(i.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||o)&&!y&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(A.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return A.canUseDOM&&y?(!this.node&&y&&(this.node=v("div")),b()(i.default.createElement(l.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){u.setElement(e)}}]),t}(a.Component);x.propTypes={isOpen:c.default.bool.isRequired,style:c.default.shape({content:c.default.object,overlay:c.default.object}),portalClassName:c.default.string,bodyOpenClassName:c.default.string,htmlOpenClassName:c.default.string,className:c.default.oneOfType([c.default.string,c.default.shape({base:c.default.string.isRequired,afterOpen:c.default.string.isRequired,beforeClose:c.default.string.isRequired})]),overlayClassName:c.default.oneOfType([c.default.string,c.default.shape({base:c.default.string.isRequired,afterOpen:c.default.string.isRequired,beforeClose:c.default.string.isRequired})]),appElement:c.default.oneOfType([c.default.instanceOf(h.default),c.default.instanceOf(A.SafeHTMLCollection),c.default.instanceOf(A.SafeNodeList),c.default.arrayOf(c.default.instanceOf(h.default))]),onAfterOpen:c.default.func,onRequestClose:c.default.func,closeTimeoutMS:c.default.number,ariaHideApp:c.default.bool,shouldFocusAfterRender:c.default.bool,shouldCloseOnOverlayClick:c.default.bool,shouldReturnFocusAfterClose:c.default.bool,preventScroll:c.default.bool,parentSelector:c.default.func,aria:c.default.object,data:c.default.object,role:c.default.string,contentLabel:c.default.string,shouldCloseOnEsc:c.default.bool,overlayRef:c.default.func,contentRef:c.default.func,id:c.default.string,overlayElement:c.default.func,contentElement:c.default.func},x.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:m,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return i.default.createElement("div",e,t)},contentElement:function(e,t){return i.default.createElement("div",e,t)}},x.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,d.polyfill)(x),t.default=x},4334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2791),s=g(n(2007)),c=f(n(8844)),l=g(n(870)),u=f(n(5858)),A=f(n(6554)),h=n(3663),d=g(h),p=g(n(8484));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}n(5670);var m={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,o=e.htmlOpenClassName,a=e.bodyOpenClassName,i=e.parentSelector,s=i&&i().ownerDocument||document;a&&A.remove(s.body,a),o&&A.remove(s.getElementsByTagName("html")[0],o),r&&y>0&&0===(y-=1)&&u.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(c.returnFocus(n.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(c.setupScopedFocus(n.node),c.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,l.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":o(t))?t:{base:m[e],afterOpen:m[e]+"--after-open",beforeClose:m[e]+"--before-close"},a=r.base;return n.state.afterOpen&&(a=a+" "+r.afterOpen),n.state.beforeClose&&(a=a+" "+r.beforeClose),"string"===typeof t&&t?a+" "+t:a},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,o=e.bodyOpenClassName,a=e.parentSelector,i=a&&a().ownerDocument||document;o&&A.add(i.body,o),r&&A.add(i.getElementsByTagName("html")[0],r),n&&(y+=1,u.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,o=e.overlayClassName,a=e.defaultStyles,i=e.children,s=n?{}:a.content,c=o?{}:a.overlay;if(this.shouldBeClosed())return null;var l={ref:this.setOverlayRef,className:this.buildClassName("overlay",o),style:r({},c,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},u=r({id:t,ref:this.setContentRef,style:r({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),A=this.props.contentElement(u,i);return this.props.overlayElement(l,A)}}]),t}(i.Component);v.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},v.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(d.default),s.default.instanceOf(h.SafeHTMLCollection),s.default.instanceOf(h.SafeNodeList),s.default.arrayOf(s.default.instanceOf(d.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=v,e.exports=t.default},5858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(e){return e.removeAttribute("aria-hidden")})));s=null},t.log=function(){0},t.assertNodeList=c,t.setElement=function(e){var t=e;if("string"===typeof t&&i.canUseDOM){var n=document.querySelectorAll(t);c(n,t),t=n}return s=t||s},t.validateElement=l,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=l(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=l(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){s=null};var r,o=n(2391),a=(r=o)&&r.__esModule?r:{default:r},i=n(3663);var s=null;function c(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){var t=e||s;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,a.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},5670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[i,s],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}i=s=null,c=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(c.length);for(var e=[i,s],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,o=n(8484),a=(r=o)&&r.__esModule?r:{default:r};var i=void 0,s=void 0,c=[];function l(){0!==c.length&&c[c.length-1].focusContent()}a.default.subscribe((function(e,t){i||s||((i=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",l),(s=i.cloneNode()).addEventListener("focus",l)),(c=t).length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(i.parentElement&&i.parentElement.removeChild(i),s.parentElement&&s.parentElement.removeChild(s))}))},6554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)o(e,n[t]);var a=document.body;for(var i in r)o(a,r[i]);n={},r={}},t.log=function(){0};var n={},r={};function o(e,t){e.classList.remove(t)}t.add=function(e,t){return o=e.classList,a="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(a,e),o.add(e)}));var o,a},t.remove=function(e,t){return o=e.classList,a="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(a,e),0===a[e]&&o.remove(e)}));var o,a}},8844:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){i=[]},t.log=function(){0},t.handleBlur=l,t.handleFocus=u,t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==i.length&&(t=i.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){i.length>0&&i.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",l,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",l),document.attachEvent("onFocus",u))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",l),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",l),document.detachEvent("onFocus",u))};var r,o=n(9750),a=(r=o)&&r.__esModule?r:{default:r};var i=[],s=null,c=!1;function l(){c=!0}function u(){if(c){if(c=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,a.default)(s)[0]||s).focus()}),0)}}},8484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},3663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,o=n(2618);var a=((r=o)&&r.__esModule?r:{default:r}).default,i=a.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=a.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=a.canUseDOM?window.NodeList:{},t.canUseDOM=a.canUseDOM;t.default=i},870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,o=t.shiftKey,s=n[0],c=n[n.length-1],l=i();if(e===l){if(!o)return;r=c}c!==l||o||(r=s);s===l&&o&&(r=c);if(r)return t.preventDefault(),void r.focus();var u=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==u||"Chrome"==u[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var A=n.indexOf(l);A>-1&&(A+=o?-1:1);if("undefined"===typeof(r=n[A]))return t.preventDefault(),void(r=o?c:s).focus();t.preventDefault(),r.focus()};var r,o=n(9750),a=(r=o)&&r.__esModule?r:{default:r};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?i(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},9750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(s)};var n="none",r="contents",o=/input|select|textarea|button|object|iframe/;function a(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var o=window.getComputedStyle(e),a=o.getPropertyValue("display");return t?a!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,o):a===n}catch(i){return console.warn("Failed to inspect element style"),!1}}function i(e,t){var n=e.nodeName.toLowerCase();return(o.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),a(t))return!1;t=t.parentNode}return!0}(e)}function s(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&i(e,!n)}e.exports=t.default},7948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2240),a=(r=o)&&r.__esModule?r:{default:r};t.default=a.default,e.exports=t.default},6374:(e,t,n)=>{"use strict";var r=n(2791),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=v.prototype=new y;b.constructor=v,f(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)x.call(t,o)&&!k.hasOwnProperty(o)&&(a[o]=t[o]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===a[o]&&(a[o]=c[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:C.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return i=i(c=e),e=""===a?"."+E(c,0):a,w(i)?(o="",null!=e&&(o=e.replace(I,"$&/")+"/"),N(i,t,o,"",(function(e){return e}))):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(I,"$&/")+"/")+e)),t.push(i)),1;if(c=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var u=a+E(s=e[l],l);c+=N(s,t,o,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=N(s=s.value,t,o,u=a+E(s,l++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function F(e,t,n){if(null==e)return e;var r=[],o=0;return N(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},L={transition:null},O={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};t.Children={map:F,forEach:function(e,t,n){F(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return F(e,(function(){t++})),t},toArray:function(e){return F(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=o,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=f({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)x.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:A,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,n){return _.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,n){return _.current.useReducer(e,t,n)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.current.useTransition()},t.version="18.2.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>a(c,n))l<o&&0>a(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>a(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],A=1,h=null,d=3,p=!1,f=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function w(e){if(g=!1,b(e),!f)if(null!==r(l))f=!0,L(x);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function x(e,n){f=!1,g&&(g=!1,y(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!N());){var i=h.callback;if("function"===typeof i){h.callback=null,d=h.priorityLevel;var s=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&o(l),b(n)}else o(l);h=r(l)}if(null!==h)var c=!0;else{var A=r(u);null!==A&&O(w,A.startTime-n),c=!1}return c}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,k=!1,B=null,S=-1,I=5,E=-1;function N(){return!(t.unstable_now()-E<I)}function F(){if(null!==B){var e=t.unstable_now();E=e;var n=!0;try{n=B(!0,e)}finally{n?C():(k=!1,B=null)}}else k=!1}if("function"===typeof v)C=function(){v(F)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,_=T.port2;T.port1.onmessage=F,C=function(){_.postMessage(null)}}else C=function(){m(F,0)};function L(e){B=e,k||(k=!0,C())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:A++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(l)&&e===r(u)&&(g?(y(S),S=-1):g=!0,O(w,a-i))):(e.sortIndex=s,n(l,e),f||p||(f=!0,L(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},6699:(e,t,n)=>{var r=n(2501),o=n(9112),a=n(2132),i=n(890),s=n(4113),c=n(1725),l=n(3411);l.alea=r,l.xor128=o,l.xorwow=a,l.xorshift7=i,l.xor4096=s,l.tychei=c,e.exports=l},2501:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function c(e,t){var n=new i(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.alea=c}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.tychei=c}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor128=c}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),o=0,a=-32;a<c;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xor4096=c}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function c(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorshift7=c}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function c(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=c:n.amdD&&n.amdO?void 0===(r=function(){return c}.call(t,n,t,o))||(o.exports=r):this.xorwow=c}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(o,a,i){var s,c=256,l=i.pow(c,6),u=i.pow(2,52),A=2*u,h=c-1;function d(e,t,n){var r=[],h=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(c):(e=new Uint8Array(c),(o.crypto||o.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=o.navigator,n=t&&t.plugins;return[+new Date,o,n,o.screen,y(a)]}}():e,3),r),d=new p(r),v=function(){for(var e=d.g(6),t=l,n=0;e<u;)e=(e+n)*c,t*=c,n=d.g(1);for(;e>=A;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|d.g(4)},v.quick=function(){return d.g(4)/4294967296},v.double=v,m(y(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&f(r,d),e.state=function(){return f(d,{})}),n?(i.random=e,t):e})(v,h,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<c;)i[o]=o++;for(o=0;o<c;o++)i[o]=i[a=h&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=h&o+1],n=n*c+i[h&(i[o]=i[a=h&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(c)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==o?e:e+"\0"}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[h&o]=h&(n^=19*t[h&o])+r.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(m(i.random(),a),e.exports){e.exports=d;try{s=n(5042)}catch(v){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},3009:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1065));t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,o.default)(e),a="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,o=e.value;a?t(r,o,e):o&&((n=n||{})[r]=o)}})),n}},2391:e=>{"use strict";var t=function(){};e.exports=t},5410:()=>{},8628:()=>{},1601:()=>{},7792:()=>{},4977:()=>{},5042:()=>{},1418:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},5861:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>o})},4942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9142);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1002);function o(e){var t=function(e,t){if("object"!=(0,r.Z)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.Z)(t)?t:String(t)}},1002:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{513:"18f2aefa",703:"8f6a6bb7",787:"9ff985ea"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="thietchancra2:";n.l=(r,o,a,i)=>{if(e[r])e[r].push(o);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var A=l[u];if(A.getAttribute("src")==r||A.getAttribute("data-webpack")==t+a){s=A;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(d);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/Hachicunstudent/",(()=>{var e={179:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=a);var i=n.p+n.u(t),s=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,a,i=r[0],s=r[1],c=r[2],l=0;if(i.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)c(n)}for(t&&t(r);l<i.length;l++)a=i[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkthietchancra2=self.webpackChunkthietchancra2||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{CompositeArrayBuffer:()=>Qk,browserFiles:()=>OS,browserHTTPRequest:()=>VS,concatenateArrayBuffers:()=>aB,copyModel:()=>jB,decodeWeights:()=>Yk,decodeWeightsStream:()=>tB,encodeWeights:()=>Xk,fromMemory:()=>GS,fromMemorySync:()=>qS,getLoadHandlers:()=>gB,getModelArtifactsForJSON:()=>lB,getModelArtifactsForJSONSync:()=>cB,getModelArtifactsInfoForJSON:()=>uB,getSaveHandlers:()=>fB,getWeightSpecs:()=>AB,http:()=>zS,isHTTPScheme:()=>QS,listModels:()=>zB,loadWeights:()=>DS,moveModel:()=>WB,registerLoadRouter:()=>pB,registerSaveRouter:()=>dB,removeModel:()=>VB,weightsLoaderFactory:()=>PS,withSaveHandler:()=>XS,withSaveHandlerSync:()=>YS});var t={};n.r(t),n.d(t,{assertParamsValid:()=>aI,computeFlatOffset:()=>yI,computeOutShape:()=>sI,getNormalizedAxes:()=>AI,isSliceContinous:()=>mI,maskToAxes:()=>iI,parseSliceParams:()=>vI,sliceInfo:()=>bI,startForAxis:()=>fI,startIndicesWithElidedDims:()=>hI,stopForAxis:()=>gI,stopIndicesWithElidedDims:()=>dI,stridesForAxis:()=>pI,stridesWithElidedDims:()=>cI});var r={};n.r(r),n.d(r,{conv2d:()=>LT,depthwiseConv2d:()=>UT,matMul:()=>DT});var o={};n.r(o),n.d(o,{collectGatherOpShapeInfo:()=>qL,computeOutShape:()=>GL,segOpComputeOptimalWindowSize:()=>KL});var a={};n.r(a),n.d(a,{ERF_A1:()=>uL,ERF_A2:()=>AL,ERF_A3:()=>hL,ERF_A4:()=>dL,ERF_A5:()=>pL,ERF_P:()=>lL,PARALLELIZE_THRESHOLD:()=>J_,RowPartitionType:()=>G_,SELU_SCALE:()=>cL,SELU_SCALEALPHA:()=>sL,applyActivation:()=>TT,assertAndGetBroadcastShape:()=>kS,assertAxesAreInnerMostDims:()=>GE,assertParamsConsistent:()=>W_,assignToTypedArray:()=>bL,axesAreInnerMostDims:()=>VE,calculateShapes:()=>sT,checkEinsumDimSizes:()=>NL,checkPadOnDimRoundingMode:()=>qI,combineLocations:()=>jE,combineRaggedTensorToTensorShapes:()=>q_,complexWithEvenIndex:()=>mL,complexWithOddIndex:()=>yL,computeConv2DInfo:()=>DI,computeConv3DInfo:()=>PI,computeDefaultPad:()=>MI,computeDilation2DInfo:()=>OI,computeOptimalWindowSize:()=>$_,computeOutAndReduceShapes:()=>WE,computeOutShape:()=>K_,computePool2DInfo:()=>RI,computePool3DInfo:()=>UI,convertConv2DDataFormat:()=>GI,decodeEinsumEquation:()=>IL,eitherStridesOrDilationsAreOne:()=>WI,expandShapeToKeepDim:()=>KE,exponent:()=>xL,exponents:()=>wL,fromStringArrayToUint8:()=>YL,fromUint8ToStringArray:()=>XL,getAxesPermutation:()=>qE,getBroadcastDims:()=>xS,getComplexWithIndex:()=>vL,getEinsumComputePath:()=>FL,getEinsumPermutation:()=>EL,getFusedBiasGradient:()=>FT,getFusedDyActivation:()=>NT,getImageCenter:()=>eL,getInnerMostAxes:()=>YE,getPermuted:()=>nL,getRaggedRank:()=>Y_,getReductionAxes:()=>CS,getReshaped:()=>tL,getReshapedPermuted:()=>rL,getRowPartitionTypesHelper:()=>X_,getSliceBeginCoords:()=>oL,getSliceSize:()=>aL,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>OL,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>RL,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>UL,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>ML,getSparseReshapeInputOutputMismatchErrorMessage:()=>HL,getSparseReshapeInputOutputMultipleErrorMessage:()=>QL,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>DL,getSparseReshapeNegativeOutputDimErrorMessage:()=>PL,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>WL,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>zL,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>VL,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>jL,getUndoAxesPermutation:()=>XE,isIdentityPermutation:()=>TL,log:()=>uC,mergeRealAndImagArrays:()=>fL,prepareAndValidate:()=>iL,prepareSplitSize:()=>LL,segment_util:()=>o,shouldFuse:()=>_T,slice_util:()=>t,splitRealAndImagArrays:()=>gL,stridesOrDilationsArePositive:()=>KI,tupleValuesAreOne:()=>jI,upcastType:()=>Ak,validateDefaultValueShape:()=>Z_,validateInput:()=>iT,validateUpdateShape:()=>aT,warn:()=>lC});var i={};n.r(i),n.d(i,{json:()=>KH});var s={};n.r(s),n.d(s,{json:()=>GH});var c={};n.r(c),n.d(c,{json:()=>qH});var l={};n.r(l),n.d(l,{json:()=>XH});var u={};n.r(u),n.d(u,{json:()=>YH});var A={};n.r(A),n.d(A,{json:()=>ZH});var h={};n.r(h),n.d(h,{json:()=>JH});var d={};n.r(d),n.d(d,{json:()=>$H});var p={};n.r(p),n.d(p,{json:()=>ez});var f={};n.r(f),n.d(f,{json:()=>tz});var g={};n.r(g),n.d(g,{json:()=>nz});var m={};n.r(m),n.d(m,{json:()=>rz});var y={};n.r(y),n.d(y,{json:()=>oz});var v={};n.r(v),n.d(v,{json:()=>az});var b={};n.r(b),n.d(b,{json:()=>iz});var w={};n.r(w),n.d(w,{json:()=>sz});var x={};n.r(x),n.d(x,{json:()=>cz});var C={};n.r(C),n.d(C,{json:()=>lz});var k={};n.r(k),n.d(k,{json:()=>uz});var B={};n.r(B),n.d(B,{OP_SCOPE_SUFFIX:()=>Ok,abs:()=>wS,acos:()=>xI,acosh:()=>CI,add:()=>eS,addN:()=>kI,all:()=>BI,any:()=>SI,argMax:()=>II,argMin:()=>EI,asin:()=>NI,asinh:()=>FI,atan:()=>TI,atan2:()=>_I,atanh:()=>LI,avgPool:()=>YI,avgPool3d:()=>ZI,basicLSTMCell:()=>rE,batchNorm:()=>aE,batchNorm2d:()=>iE,batchNorm3d:()=>sE,batchNorm4d:()=>cE,batchToSpaceND:()=>oE,bincount:()=>lE,bitwiseAnd:()=>uE,booleanMaskAsync:()=>yT,broadcastArgs:()=>AE,broadcastTo:()=>hE,buffer:()=>YB,cast:()=>ZB,ceil:()=>dE,clipByValue:()=>pE,clone:()=>JB,complex:()=>Uk,concat:()=>JI,concat1d:()=>fE,concat2d:()=>gE,concat3d:()=>mE,concat4d:()=>yE,conv1d:()=>bE,conv2d:()=>vE,conv2dTranspose:()=>xE,conv3d:()=>CE,conv3dTranspose:()=>BE,cos:()=>SE,cosh:()=>IE,cosineWindow:()=>ST,cumprod:()=>EE,cumsum:()=>NE,denseBincount:()=>FE,depthToSpace:()=>TE,depthwiseConv2d:()=>_E,diag:()=>LE,dilation2d:()=>OE,div:()=>nS,divNoNan:()=>DE,dot:()=>PE,dropout:()=>kT,einsum:()=>ME,elu:()=>QE,enclosingPowerOfTwo:()=>BT,ensureShape:()=>HE,equal:()=>RE,erf:()=>zE,euclideanNorm:()=>nN,exp:()=>rN,expandDims:()=>oN,expm1:()=>aN,eye:()=>sN,fft:()=>VF,fill:()=>gS,floor:()=>cN,floorDiv:()=>tS,fused:()=>r,gather:()=>lN,gatherND:()=>CT,greater:()=>uN,greaterEqual:()=>AN,ifft:()=>jF,imag:()=>hN,image:()=>D_,inTopKAsync:()=>IT,irfft:()=>WF,isFinite:()=>dN,isInf:()=>pN,isNaN:()=>fN,leakyRelu:()=>gN,less:()=>mN,lessEqual:()=>yN,linalg:()=>P_,linspace:()=>vN,localResponseNormalization:()=>bN,log:()=>wN,log1p:()=>xN,logSigmoid:()=>BN,logSoftmax:()=>SN,logSumExp:()=>IN,logicalAnd:()=>EN,logicalNot:()=>NN,logicalOr:()=>FN,logicalXor:()=>TN,losses:()=>M_,lowerBound:()=>ON,matMul:()=>$I,max:()=>ZE,maxPool:()=>RN,maxPool3d:()=>UN,maxPoolWithArgmax:()=>DN,maximum:()=>BS,mean:()=>PN,meshgrid:()=>HN,min:()=>JE,minimum:()=>zN,mirrorPad:()=>VN,mod:()=>jN,moments:()=>WN,movingAverage:()=>bT,mul:()=>rS,multiRNNCell:()=>KN,multinomial:()=>GN,neg:()=>CN,norm:()=>tN,notEqual:()=>qN,oneHot:()=>XN,ones:()=>QN,onesLike:()=>YN,op:()=>Rk,outerProduct:()=>ZN,pad:()=>JN,pad1d:()=>$N,pad2d:()=>eF,pad3d:()=>tF,pad4d:()=>nF,pool:()=>oF,pow:()=>yS,prelu:()=>aF,print:()=>$B,prod:()=>iF,raggedGather:()=>sF,raggedRange:()=>cF,raggedTensorToTensor:()=>lF,rand:()=>uF,randomGamma:()=>fF,randomNormal:()=>gF,randomStandardNormal:()=>mF,randomUniform:()=>yF,randomUniformInt:()=>vF,range:()=>bF,real:()=>wF,reciprocal:()=>xF,relu:()=>CF,relu6:()=>kF,reshape:()=>XI,reverse:()=>BF,reverse1d:()=>SF,reverse2d:()=>IF,reverse3d:()=>EF,reverse4d:()=>NF,rfft:()=>GF,round:()=>FF,rsqrt:()=>TF,scalar:()=>cS,scatterND:()=>wT,searchSorted:()=>LN,selu:()=>_F,separableConv2d:()=>LF,setdiff1dAsync:()=>OF,sigmoid:()=>eE,sign:()=>RF,signal:()=>U_,sin:()=>UF,sinh:()=>DF,slice:()=>tE,slice1d:()=>PF,slice2d:()=>MF,slice3d:()=>QF,slice4d:()=>HF,softmax:()=>zF,softplus:()=>kN,spaceToBatchND:()=>rF,sparse:()=>Q_,sparseToDense:()=>xT,spectral:()=>R_,split:()=>KF,sqrt:()=>oS,square:()=>aS,squaredDifference:()=>qF,squeeze:()=>XF,stack:()=>YF,step:()=>ZF,stridedSlice:()=>JF,string:()=>H_,sub:()=>vS,sum:()=>$E,tan:()=>$F,tanh:()=>nE,tensor:()=>Pk,tensor1d:()=>eT,tensor2d:()=>tT,tensor3d:()=>ZS,tensor4d:()=>nT,tensor5d:()=>rT,tensor6d:()=>oT,tensorScatterUpdate:()=>cT,tile:()=>iN,topk:()=>lT,transpose:()=>vT,truncatedNormal:()=>uT,unique:()=>AT,unsortedSegmentSum:()=>hT,unstack:()=>dT,upperBound:()=>pT,variable:()=>fT,where:()=>UE,whereAsync:()=>mT,zeros:()=>MN,zerosLike:()=>iS});var S={};n.r(S),n.d(S,{addImpl:()=>Aj,bincountImpl:()=>rW,bincountReduceImpl:()=>oW,bitwiseAndImpl:()=>iW,castImpl:()=>ij,ceilImpl:()=>uW,concatImpl:()=>gW,equalImpl:()=>eK,expImpl:()=>AK,expm1Impl:()=>gK,floorImpl:()=>LK,gatherNdImpl:()=>HK,gatherV2Impl:()=>VK,greaterEqualImpl:()=>qK,greaterImpl:()=>WK,lessEqualImpl:()=>sG,lessImpl:()=>oG,linSpaceImpl:()=>uG,logImpl:()=>hG,maxImpl:()=>IG,maximumImpl:()=>FG,minimumImpl:()=>QG,multiplyImpl:()=>KW,negImpl:()=>YG,notEqualImpl:()=>oq,prodImpl:()=>mq,raggedGatherImpl:()=>xq,raggedRangeImpl:()=>Bq,raggedTensorToTensorImpl:()=>Tq,rangeImpl:()=>Lq,rsqrtImpl:()=>Wq,scatterImpl:()=>qq,sigmoidImpl:()=>ZV,simpleAbsImpl:()=>bj,sliceImpl:()=>$j,sparseFillEmptyRowsImpl:()=>pX,sparseReshapeImpl:()=>gX,sparseSegmentReductionImpl:()=>yX,sqrtImpl:()=>CX,staticRegexReplaceImpl:()=>FX,stridedSliceImpl:()=>RX,stringNGramsImpl:()=>PX,stringSplitImpl:()=>HX,stringToHashBucketFastImpl:()=>VX,subImpl:()=>xK,tileImpl:()=>XX,topKImpl:()=>$X,transposeImpl:()=>Ij,uniqueImpl:()=>iY});var I={};n.r(I),n.d(I,{boolean:()=>ate,booleanish:()=>ite,commaOrSpaceSeparated:()=>Ate,commaSeparated:()=>ute,number:()=>cte,overloadedBoolean:()=>ste,spaceSeparated:()=>lte});var E={};n.r(E),n.d(E,{attentionMarkers:()=>Wre,contentInitial:()=>Mre,disable:()=>Kre,document:()=>Pre,flow:()=>Hre,flowInitial:()=>Qre,insideSpan:()=>jre,string:()=>zre,text:()=>Vre});var N,F=n(2791),T=n.t(F,2),_=n(1250),L=n(4164),O=n.t(L,2);function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(N||(N={}));const U="popstate";function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function M(e,t){return{usr:e.state,key:e.key,idx:t}}function Q(e,t,n,r){return void 0===n&&(n=null),R({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?z(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function H(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function z(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function V(e,t,n,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s=N.Pop,c=null,l=u();function u(){return(i.state||{idx:null}).idx}function A(){s=N.Pop;let e=u(),t=null==e?null:e-l;l=e,c&&c({action:s,location:d.location,delta:t})}function h(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:H(e);return D(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==l&&(l=0,i.replaceState(R({},i.state,{idx:l}),""));let d={get action(){return s},get location(){return e(o,i)},listen(e){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(U,A),c=e,()=>{o.removeEventListener(U,A),c=null}},createHref:e=>t(o,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=N.Push;let r=Q(d.location,e,t);n&&n(r,e),l=u()+1;let A=M(r,l),h=d.createHref(r);try{i.pushState(A,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;o.location.assign(h)}a&&c&&c({action:s,location:d.location,delta:1})},replace:function(e,t){s=N.Replace;let r=Q(d.location,e,t);n&&n(r,e),l=u();let o=M(r,l),A=d.createHref(r);i.replaceState(o,"",A),a&&c&&c({action:s,location:d.location,delta:0})},go:e=>i.go(e)};return d}var j;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(j||(j={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function W(e,t,n){void 0===n&&(n="/");let r=ae(("string"===typeof t?z(t):t).pathname||"/",n);if(null==r)return null;let o=K(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let i=0;null==a&&i<o.length;++i)a=ne(o[i],oe(r));return a}function K(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(D(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let s=ue([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),K(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:te(s,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of G(e.path))o(e,t,r);else o(e,t)})),t}function G(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let i=G(r.join("/")),s=[];return s.push(...i.map((e=>""===e?a:[a,e].join("/")))),o&&s.push(...i),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const q=/^:[\w-]+$/,X=3,Y=2,Z=1,J=10,$=-2,ee=e=>"*"===e;function te(e,t){let n=e.split("/"),r=n.length;return n.some(ee)&&(r+=$),t&&(r+=Y),n.filter((e=>!ee(e))).reduce(((e,t)=>e+(q.test(t)?X:""===t?Z:J)),r)}function ne(e,t){let{routesMeta:n}=e,r={},o="/",a=[];for(let i=0;i<n.length;++i){let e=n[i],s=i===n.length-1,c="/"===o?t:t.slice(o.length)||"/",l=re({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;a.push({params:r,pathname:ue([o,l.pathname]),pathnameBase:Ae(ue([o,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(o=ue([o,l.pathnameBase]))}return a}function re(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let a=new RegExp(o,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1),c=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=o&&!c?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c||"",r),e}),{});return{params:c,pathname:a,pathnameBase:i,pattern:e}}function oe(e){try{return decodeURI(e)}catch(t){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ae(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ie(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function se(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ce(e,t){let n=se(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function le(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=z(e):(o=R({},e),D(!o.pathname||!o.pathname.includes("?"),ie("?","pathname","search",o)),D(!o.pathname||!o.pathname.includes("#"),ie("#","pathname","hash",o)),D(!o.search||!o.search.includes("#"),ie("#","search","hash",o)));let a,i=""===e||""===o.pathname,s=i?"/":o.pathname;if(null==s)a=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?z(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:he(r),hash:de(o)}}(o,a),l=s&&"/"!==s&&s.endsWith("/"),u=(i||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!u||(c.pathname+="/"),c}const ue=e=>e.join("/").replace(/\/\/+/g,"/"),Ae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),he=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",de=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function pe(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const fe=["post","put","patch","delete"],ge=(new Set(fe),["get",...fe]);new Set(ge),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}const ye=F.createContext(null);const ve=F.createContext(null);const be=F.createContext(null);const we=F.createContext(null);const xe=F.createContext({outlet:null,matches:[],isDataRoute:!1});const Ce=F.createContext(null);function ke(){return null!=F.useContext(we)}function Be(){return ke()||D(!1),F.useContext(we).location}function Se(e){F.useContext(be).static||F.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=F.useContext(xe);return e?function(){let{router:e}=Ue(Oe.UseNavigateStable),t=Pe(Re.UseNavigateStable),n=F.useRef(!1);Se((()=>{n.current=!0}));let r=F.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,me({fromRouteId:t},o)))}),[e,t]);return r}():function(){ke()||D(!1);let e=F.useContext(ye),{basename:t,future:n,navigator:r}=F.useContext(be),{matches:o}=F.useContext(xe),{pathname:a}=Be(),i=JSON.stringify(ce(o,n.v7_relativeSplatPath)),s=F.useRef(!1);Se((()=>{s.current=!0}));let c=F.useCallback((function(n,o){if(void 0===o&&(o={}),!s.current)return;if("number"===typeof n)return void r.go(n);let c=le(n,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(c.pathname="/"===c.pathname?t:ue([t,c.pathname])),(o.replace?r.replace:r.push)(c,o.state,o)}),[t,r,i,a,e]);return c}()}function Ee(e,t,n,r){ke()||D(!1);let{navigator:o}=F.useContext(be),{matches:a}=F.useContext(xe),i=a[a.length-1],s=i?i.params:{},c=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let l,u=Be();if(t){var A;let e="string"===typeof t?z(t):t;"/"===c||(null==(A=e.pathname)?void 0:A.startsWith(c))||D(!1),l=e}else l=u;let h=l.pathname||"/",d=W(e,{pathname:"/"===c?h:h.slice(c.length)||"/"});let p=Le(d&&d.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ue([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ue([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&p?F.createElement(we.Provider,{value:{location:me({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:N.Pop}},p):p}function Ne(){let e=function(){var e;let t=F.useContext(Ce),n=De(Re.UseRouteError),r=Pe(Re.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=pe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:o},n):null,null)}const Fe=F.createElement(Ne,null);class Te extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?F.createElement(xe.Provider,{value:this.props.routeContext},F.createElement(Ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _e(e){let{routeContext:t,match:n,children:r}=e,o=F.useContext(ye);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(xe.Provider,{value:t},r)}function Le(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}let i=e,s=null==(o=n)?void 0:o.errors;if(null!=s){let e=i.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||D(!1),i=i.slice(0,Math.min(i.length,e+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let e=i[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=u),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){c=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight(((e,r,o)=>{let a,u=!1,A=null,h=null;var d;n&&(a=s&&r.route.id?s[r.route.id]:void 0,A=r.route.errorElement||Fe,c&&(l<0&&0===o?(d="route-fallback",!1||Me[d]||(Me[d]=!0),u=!0,h=null):l===o&&(u=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,o+1)),f=()=>{let t;return t=a?A:u?h:r.route.Component?F.createElement(r.route.Component,null):r.route.element?r.route.element:e,F.createElement(_e,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?F.createElement(Te,{location:n.location,revalidation:n.revalidation,component:A,error:a,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()}),null)}var Oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Oe||{}),Re=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Re||{});function Ue(e){let t=F.useContext(ye);return t||D(!1),t}function De(e){let t=F.useContext(ve);return t||D(!1),t}function Pe(e){let t=function(e){let t=F.useContext(xe);return t||D(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||D(!1),n.route.id}const Me={};T.startTransition;function Qe(e){let{to:t,replace:n,state:r,relative:o}=e;ke()||D(!1);let{future:a,static:i}=F.useContext(be),{matches:s}=F.useContext(xe),{pathname:c}=Be(),l=Ie(),u=le(t,ce(s,a.v7_relativeSplatPath),c,"path"===o),A=JSON.stringify(u);return F.useEffect((()=>l(JSON.parse(A),{replace:n,state:r,relative:o})),[l,A,o,n,r]),null}function He(e){D(!1)}function ze(e){let{basename:t="/",children:n=null,location:r,navigationType:o=N.Pop,navigator:a,static:i=!1,future:s}=e;ke()&&D(!1);let c=t.replace(/^\/*/,"/"),l=F.useMemo((()=>({basename:c,navigator:a,static:i,future:me({v7_relativeSplatPath:!1},s)})),[c,s,a,i]);"string"===typeof r&&(r=z(r));let{pathname:u="/",search:A="",hash:h="",state:d=null,key:p="default"}=r,f=F.useMemo((()=>{let e=ae(u,c);return null==e?null:{location:{pathname:e,search:A,hash:h,state:d,key:p},navigationType:o}}),[c,u,A,h,d,p,o]);return null==f?null:F.createElement(be.Provider,{value:l},F.createElement(we.Provider,{children:n,value:f}))}function Ve(e){let{children:t,location:n}=e;return Ee(je(t),n)}new Promise((()=>{}));F.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return F.Children.forEach(e,((e,r)=>{if(!F.isValidElement(e))return;let o=[...t,r];if(e.type===F.Fragment)return void n.push.apply(n,je(e.props.children,o));e.type!==He&&D(!1),e.props.index&&e.props.children&&D(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=je(e.props.children,o)),n.push(a)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const We=T.startTransition;O.flushSync,T.useId;function Ke(e){let{basename:t,children:n,future:r,window:o}=e,a=F.useRef();var i;null==a.current&&(a.current=(void 0===(i={window:o,v5Compat:!0})&&(i={}),V((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return Q("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:H(t)}),null,i)));let s=a.current,[c,l]=F.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},A=F.useCallback((e=>{u&&We?We((()=>l(e))):l(e)}),[l,u]);return F.useLayoutEffect((()=>s.listen(A)),[s,A]),F.createElement(ze,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:s,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ge,qe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ge||(Ge={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qe||(qe={}));const Xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},Ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],a=o+1<e.length,i=a?e[o+1]:0,s=o+2<e.length,c=s?e[o+2]:0,l=t>>2,u=(3&t)<<4|i>>4;let A=(15&i)<<2|c>>6,h=63&c;s||(h=64,a||(A=64)),r.push(n[l],n[u],n[A],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&a)}else if(o>239&&o<365){const a=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0;++o;const i=o<e.length?n[e.charAt(o)]:64;++o;const s=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==a||null==i||null==s)throw new Ze;const c=t<<2|a>>4;if(r.push(c),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==s){const e=i<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Je=function(e){return function(e){const t=Xe(e);return Ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},$e=function(e){try{return Ye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const et=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,tt=()=>{try{return et()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Hachicunstudent",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&$e(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},nt=e=>{var t,n;return null===(n=null===(t=tt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},rt=e=>{const t=nt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ot=()=>{var e;return null===(e=tt())||void 0===e?void 0:e.config},at=e=>{var t;return null===(t=tt())||void 0===t?void 0:t["_".concat(e)]};class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function st(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(a)),""].join(".")}function ct(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class lt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ut.prototype.create)}}class ut{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(At,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new lt(n,a,t)}}const At=/\{\$([^}]+)}/g;function ht(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],a=t[o];if(dt(n)&&dt(a)){if(!ht(n,a))return!1}else if(n!==a)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function dt(e){return null!==e&&"object"===typeof e}function pt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ft(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function gt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class mt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=yt),void 0===r.error&&(r.error=yt),void 0===r.complete&&(r.complete=yt);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function yt(){}function vt(e){return e&&e._delegate?e._delegate:e}class bt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wt="[DEFAULT]";class xt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new it;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(Vge){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ct(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(Vge){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Ct(e){return e===wt?void 0:e}class kt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Bt=[];var St;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(St||(St={}));const It={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Et=St.INFO,Nt={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},Ft=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,a=new Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class Tt{constructor(e){this.name=e,this._logLevel=Et,this._logHandler=Ft,this._userLogHandler=null,Bt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?It[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...t),this._logHandler(this,St.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...t),this._logHandler(this,St.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.INFO,...t),this._logHandler(this,St.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.WARN,...t),this._logHandler(this,St.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,St.ERROR,...t),this._logHandler(this,St.ERROR,...t)}}const _t=(e,t)=>t.some((t=>e instanceof t));let Lt,Ot;const Rt=new WeakMap,Ut=new WeakMap,Dt=new WeakMap,Pt=new WeakMap,Mt=new WeakMap;let Qt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ut.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Dt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ht(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ot||(Ot=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(jt(this),n),Vt(Rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vt(e.apply(jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const a=e.call(jt(this),t,...r);return Dt.set(a,t.sort?t.sort():[t]),Vt(a)}}function zt(e){return"function"===typeof e?Ht(e):(e instanceof IDBTransaction&&function(e){if(Ut.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ut.set(e,t)}(e),_t(e,Lt||(Lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Qt):e)}function Vt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(Vt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Rt.set(t,e)})).catch((()=>{})),Mt.set(t,e),t}(e);if(Pt.has(e))return Pt.get(e);const t=zt(e);return t!==e&&(Pt.set(e,t),Mt.set(t,e)),t}const jt=e=>Mt.get(e);const Wt=["get","getKey","getAll","getAllKeys","count"],Kt=["put","add","delete","clear"],Gt=new Map;function qt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Gt.get(t))return Gt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Kt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Wt.includes(n))return;const a=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];return r&&(a=a.index(s.shift())),(await Promise.all([a[n](...s),o&&t.done]))[0]};return Gt.set(t,a),a}Qt=(e=>({...e,get:(t,n,r)=>qt(t,n)||e.get(t,n,r),has:(t,n)=>!!qt(t,n)||e.has(t,n)}))(Qt);class Xt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Yt="@firebase/app",Zt="0.9.25",Jt=new Tt("@firebase/app"),$t="[DEFAULT]",en={[Yt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){Jt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function on(e){const t=e.name;if(nn.has(t))return Jt.debug("There were multiple attempts to register component ".concat(t,".")),!1;nn.set(t,e);for(const n of tn.values())rn(n,e);return!0}function an(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const sn=new ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const ln="10.7.1";function un(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:$t,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!==typeof o||!o)throw sn.create("bad-app-name",{appName:String(o)});if(n||(n=ot()),!n)throw sn.create("no-options");const a=tn.get(o);if(a){if(ht(n,a.options)&&ht(r,a.config))return a;throw sn.create("duplicate-app",{appName:o})}const i=new kt(o);for(const c of nn.values())i.addComponent(c);const s=new cn(n,r,i);return tn.set(o,s),s}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;const t=tn.get(e);if(!t&&e===$t&&ot())return un();if(!t)throw sn.create("no-app",{appName:e});return t}function hn(e,t,n){var r;let o=null!==(r=en[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const a=o.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),a&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Jt.warn(e.join(" "))}on(new bt("".concat(o,"-version"),(()=>({library:o,version:t})),"VERSION"))}const dn="firebase-heartbeat-database",pn=1,fn="firebase-heartbeat-store";let gn=null;function mn(){return gn||(gn=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),s=Vt(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(Vt(i.result),e.oldVersion,e.newVersion,Vt(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(dn,pn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(fn)}}).catch((e=>{throw sn.create("idb-open",{originalErrorMessage:e.message})}))),gn}async function yn(e,t){try{const n=(await mn()).transaction(fn,"readwrite"),r=n.objectStore(fn);await r.put(t,vn(e)),await n.done}catch(n){if(n instanceof lt)Jt.warn(n.message);else{const e=sn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Jt.warn(e.message)}}}function vn(e){return"".concat(e.name,"!").concat(e.options.appId)}class bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=wn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),Cn(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Cn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=Je(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function wn(){return(new Date).toISOString().substring(0,10)}class xn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await mn();return await t.transaction(fn).objectStore(fn).get(vn(e))}catch(t){if(t instanceof lt)Jt.warn(t.message);else{const e=sn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Jt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return yn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Cn(e){return Je(JSON.stringify({version:2,heartbeats:e})).length}var kn;kn="",on(new bt("platform-logger",(e=>new Xt(e)),"PRIVATE")),on(new bt("heartbeat",(e=>new bn(e)),"PRIVATE")),hn(Yt,Zt,kn),hn(Yt,Zt,"esm2017"),hn("fire-js","");function Bn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Sn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const In=Sn,En=new ut("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nn=new Tt("@firebase/auth");function Fn(e){if(Nn.logLevel<=St.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nn.error("Auth (".concat(ln,"): ").concat(e),...n)}}function Tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw On(e,...n)}function _n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return On(e,...n)}function Ln(e,t,n){const r=Object.assign(Object.assign({},In()),{[t]:n});return new ut("auth","Firebase",r).create(t,{appName:e.name})}function On(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return En.create(e,...n)}function Rn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw On(t,...r)}}function Un(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fn(t),new Error(t)}function Dn(e,t){e||Un(t)}function Pn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Mn(){return"http:"===Qn()||"https:"===Qn()}function Qn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Hn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Mn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class zn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Hn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vn(e,t){Dn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class jn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kn=new zn(3e4,6e4);function Gn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qn(e,t,n,r){return Xn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let o={},a={};r&&("GET"===t?a=r:o={body:JSON.stringify(r)});const i=pt(Object.assign({key:e.config.apiKey},a)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),jn.fetch()(Zn(e,e.config.apiHost,n,i),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},o))}))}async function Xn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wn),t);try{const t=new $n(e),o=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw er(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const t=o.ok?a.errorMessage:a.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw er(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw er(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw er(e,"user-disabled",a);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw Ln(e,s,i);Tn(e,s)}}catch(o){if(o instanceof lt)throw o;Tn(e,"network-request-failed",{message:String(o)})}}async function Yn(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await qn(e,t,n,r,o);return"mfaPendingCredential"in a&&Tn(e,"multi-factor-auth-required",{_serverResponse:a}),a}function Zn(e,t,n,r){const o="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Vn(e.config,o):"".concat(e.config.apiScheme,"://").concat(o)}function Jn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $n{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(_n(this.auth,"network-request-failed"))),Kn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=_n(e,t,r);return o.customData._tokenResponse=n,o}function tr(e){return void 0!==e&&void 0!==e.enterprise}class nr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Jn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function rr(e,t){return qn(e,"GET","/v2/recaptchaConfig",Gn(e,t))}function or(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ar(e){return 1e3*Number(e)}function ir(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Fn("JWT malformed, contained fewer than 3 sections"),null;try{const e=$e(n);return e?JSON.parse(e):(Fn("Failed to decode base64 JWT payload"),null)}catch(o){return Fn("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}async function sr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof lt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class lr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ur(e){var t;const n=e.auth,r=await e.getIdToken(),o=await sr(e,async function(e,t){return qn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Rn(null===o||void 0===o?void 0:o.users.length,n,"internal-error");const a=o.users[0];e._notifyReloadListener(a);const i=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?a.providerUserInfo.map((e=>{var{providerId:t}=e,n=Bn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,i),c=e.isAnonymous,l=!(e.email&&a.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!c&&l,A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new lr(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,A)}class Ar{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rn(e.idToken,"internal-error"),Rn("undefined"!==typeof e.idToken,"internal-error"),Rn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=ir(e);return Rn(t,"internal-error"),Rn("undefined"!==typeof t.exp,"internal-error"),Rn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Rn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await async function(e,t){const n=await Xn(e,{},(async()=>{const n=pt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,a=Zn(e,r,"/v1/token","key=".concat(o)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",jn.fetch()(a,{method:"POST",headers:i,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,a=new Ar;return n&&(Rn("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Rn("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),o&&(Rn("number"===typeof o,"internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ar,this.toJSON())}_performRefresh(){return Un("not implemented")}}function hr(e,t){Rn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=Bn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lr(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await sr(this,this.stsTokenManager.getToken(this.auth,e));return Rn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vt(e),r=await n.getIdToken(t),o=ir(r);Rn(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a="object"===typeof o.firebase?o.firebase:void 0,i=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:or(ar(o.auth_time)),issuedAtTime:or(ar(o.iat)),expirationTime:or(ar(o.exp)),signInProvider:i||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vt(e);await ur(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Rn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ur(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await sr(this,async function(e,t){return qn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,a,i,s,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,A=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,d=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(i=t.tenantId)&&void 0!==i?i:void 0,f=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,m=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:v,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Rn(y&&x,e,"internal-error");const C=Ar.fromJSON(this.name,x);Rn("string"===typeof y,e,"internal-error"),hr(u,e.name),hr(A,e.name),Rn("boolean"===typeof v,e,"internal-error"),Rn("boolean"===typeof b,e,"internal-error"),hr(h,e.name),hr(d,e.name),hr(p,e.name),hr(f,e.name),hr(g,e.name),hr(m,e.name);const k=new dr({uid:y,auth:e,email:A,emailVerified:v,displayName:u,isAnonymous:b,photoURL:d,phoneNumber:h,tenantId:p,stsTokenManager:C,createdAt:g,lastLoginAt:m});return w&&Array.isArray(w)&&(k.providerData=w.map((e=>Object.assign({},e)))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ar;r.updateFromServerResponse(t);const o=new dr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ur(o),o}}const pr=new Map;function fr(e){Dn(e instanceof Function,"Expected a class definition");let t=pr.get(e);return t?(Dn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pr.set(e,t),t)}class gr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gr.type="NONE";const mr=gr;function yr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class vr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=yr(this.userKey,r.apiKey,o),this.fullPersistenceKey=yr("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new vr(fr(mr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=r[0]||fr(mr);const a=yr(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(a);if(t){const n=dr._fromJSON(e,t);c!==o&&(i=n),o=c;break}}catch(Vge){}const s=r.filter((e=>e._shouldAllowMigration));return o._shouldAllowMigration&&s.length?(o=s[0],i&&await o._set(a,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(a)}catch(Vge){}}))),new vr(o,e,n)):new vr(o,e,n)}}function br(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Sr(t))return"Blackberry";if(Ir(t))return"Webos";if(xr(t))return"Safari";if((t.includes("chrome/")||Cr(t))&&!t.includes("edge/"))return"Chrome";if(Br(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/firefox\//i.test(e)}function xr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/crios\//i.test(e)}function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/iemobile/i.test(e)}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/android/i.test(e)}function Sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/blackberry/i.test(e)}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/webos/i.test(e)}function Er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nr(){return function(){const e=ct();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct();return Er(e)||Br(e)||Ir(e)||Sr(e)||/windows phone/i.test(e)||kr(e)}function Tr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=br(ct());break;case"Worker":t="".concat(br(ct()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ln,"/").concat(r)}class _r{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(o){r(o)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(Jme){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Lr{constructor(e){var t,n,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,a,i;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(i=s.containsNonAlphanumericCharacter)||void 0===i||i),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Or{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ur(this),this.idTokenSubscription=new Ur(this),this.beforeStateQueue=new _r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=En,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await vr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==a||!(null===i||void 0===i?void 0:i.user)||(r=i.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(a)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ur(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?vt(e):null;return t&&Rn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Rn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(fr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qn(e,"GET","/v2/passwordPolicy",Gn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Lr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ut("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qn(e,"POST","/v2/accounts:revokeToken",Gn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fr(e)||this._popupRedirectResolver;Rn(t,this,"argument-error"),this.redirectPersistenceManager=await vr.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"===typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(i,this,"internal-error"),i.then((()=>{a||o(this.currentUser)})),"function"===typeof t){const o=e.addObserver(t,n,r);return()=>{a=!0,o()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Nn.logLevel<=St.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nn.warn("Auth (".concat(ln,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Rr(e){return vt(e)}class Ur{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new mt(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dr(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Pr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Mr{constructor(e){this.type="recaptcha-enterprise",this.auth=Rr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const o=window.grecaptcha;tr(o)?o.enterprise.ready((()=>{o.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{rr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new nr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((o=>{if(!t&&tr(window.grecaptcha))n(o,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Dr("https://www.google.com/recaptcha/enterprise.js?render="+o).then((()=>{n(o,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Qr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Mr(e);let a;try{a=await o.verify(n)}catch(s){a=await o.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:a}):Object.assign(i,{captchaResponse:a}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Hr(e,t,n,r){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Qr(e,t,n,"getOobCode"===n);return r(e,o)}return r(e,t).catch((async o=>{if(o.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const o=await Qr(e,t,n,"getOobCode"===n);return r(e,o)}return Promise.reject(o)}))}function zr(e,t,n){const r=Rr(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Vr(t),{host:i,port:s}=function(e){const t=Vr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:jr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:jr(t)}}}(t),c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(i).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Wr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,t){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function Kr(e,t){return qn(e,"POST","/v1/accounts:signUp",t)}async function Gr(e,t){return Yn(e,"POST","/v1/accounts:signInWithPassword",Gn(e,t))}class qr extends Wr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new qr(e,t,"password")}static _fromEmailAndCode(e,t){return new qr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gr);case"emailLink":return async function(e,t){return Yn(e,"POST","/v1/accounts:signInWithEmailLink",Gn(e,t))}(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kr);case"emailLink":return async function(e,t){return Yn(e,"POST","/v1/accounts:signInWithEmailLink",Gn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xr(e,t){return Yn(e,"POST","/v1/accounts:signInWithIdp",Gn(e,t))}class Yr extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=Bn(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Yr(n,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){return Xr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Xr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pt(t)}return e}}const Zr={USER_NOT_FOUND:"user-not-found"};class Jr extends Wr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Jr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Jr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Yn(e,"POST","/v1/accounts:signInWithPhoneNumber",Gn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Yn(e,"POST","/v1/accounts:signInWithPhoneNumber",Gn(e,t));if(n.temporaryProof)throw er(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Yn(e,"POST","/v1/accounts:signInWithPhoneNumber",Gn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Zr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new Jr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class $r{constructor(e){var t,n,r,o,a,i;const s=ft(gt(e)),c=null!==(t=s.apiKey)&&void 0!==t?t:null,l=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Rn(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=s.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(i=s.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=ft(gt(e)).link,n=t?ft(gt(t)).deep_link_id:null,r=ft(gt(e)).deep_link_id;return(r?ft(gt(r)).link:null)||r||n||t||e}(e);try{return new $r(t)}catch(Vge){return null}}}class eo{constructor(){this.providerId=eo.PROVIDER_ID}static credential(e,t){return qr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$r.parseLink(t);return Rn(n,"argument-error"),qr._fromEmailAndCode(e,n.code,n.tenantId)}}eo.PROVIDER_ID="password",eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class to{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class no extends to{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ro extends no{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ro.credential(t.oauthAccessToken)}catch(Vge){return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com",ro.PROVIDER_ID="facebook.com";class oo extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yr._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return oo.credential(n,r)}catch(Vge){return null}}}oo.GOOGLE_SIGN_IN_METHOD="google.com",oo.PROVIDER_ID="google.com";class ao extends no{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ao.credential(t.oauthAccessToken)}catch(Vge){return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com",ao.PROVIDER_ID="github.com";class io extends no{constructor(){super("twitter.com")}static credential(e,t){return Yr._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return io.credential(n,r)}catch(Vge){return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com",io.PROVIDER_ID="twitter.com";class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await dr._fromIdTokenResponse(e,n,r),a=co(n);return new so({user:o,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=co(n);return new so({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function co(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class lo extends lt{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,lo.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new lo(e,t,n,r)}}function uo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw lo._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await sr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return so._forOperation(e,"link",r)}async function ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,o="reauthenticate";try{const a=await sr(e,uo(r,o,t,e),n);Rn(a.idToken,r,"internal-error");const i=ir(a.idToken);Rn(i,r,"internal-error");const{sub:s}=i;return Rn(e.uid===s,r,"user-mismatch"),so._forOperation(e,o,a)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&Tn(r,"user-mismatch"),a}}async function po(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",o=await uo(e,r,t),a=await so._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(a.user),a}async function fo(e,t){return po(Rr(e),t)}async function go(e){const t=Rr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function mo(e,t,n,r){return vt(e).onAuthStateChanged(t,n,r)}new WeakMap;const yo="__sak";class vo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(Vge){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bo extends vo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ct();return xr(e)||Er(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Fr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);Nr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bo.type="LOCAL";const wo=bo;class xo extends vo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xo.type="SESSION";const Co=xo;class ko{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ko(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(a).map((async e=>e(t.origin,o))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Bo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ko.receivers=[];class So{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise(((i,s)=>{const c=Bo("",20);r.port1.start();const l=setTimeout((()=>{s(new Error("unsupported_event"))}),n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}function Io(){return window}function Eo(){return"undefined"!==typeof Io().WorkerGlobalScope&&"function"===typeof Io().importScripts}const No="firebaseLocalStorageDb",Fo="firebaseLocalStorage",To="fbase_key";class _o{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Lo(e,t){return e.transaction([Fo],t?"readwrite":"readonly").objectStore(Fo)}function Oo(){const e=indexedDB.open(No,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Fo,{keyPath:To})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Fo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(No);return new _o(e).toPromise()}(),t(await Oo()))}))}))}async function Ro(e,t,n){const r=Lo(e,!0).put({[To]:t,value:n});return new _o(r).toPromise()}function Uo(e,t){const n=Lo(e,!0).delete(t);return new _o(n).toPromise()}class Do{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Oo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ko._getInstance(Eo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new So(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(Vge){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oo();return await Ro(e,yo,"1"),await Uo(e,yo),!0}catch(Vge){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ro(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Lo(e,!1).get(t),r=await new _o(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Uo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Lo(e,!1).getAll();return new _o(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Do.type="LOCAL";const Po=Do;Pr("rcb"),new zn(3e4,6e4);const Mo="recaptcha";async function Qo(e,t,n){var r;const o=await n.verify();try{let a;if(Rn("string"===typeof o,e,"argument-error"),Rn(n.type===Mo,e,"argument-error"),a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){Rn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return qn(e,"POST","/v2/accounts/mfaEnrollment:start",Gn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{Rn("signin"===t.type,e,"internal-error");const n=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;Rn(n,e,"missing-multi-factor-info");const i=await function(e,t){return qn(e,"POST","/v2/accounts/mfaSignIn:start",Gn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return qn(e,"POST","/v1/accounts:sendVerificationCode",Gn(e,t))}(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}class Ho{constructor(e){this.providerId=Ho.PROVIDER_ID,this.auth=Rr(e)}verifyPhoneNumber(e,t){return Qo(this.auth,e,vt(t))}static credential(e,t){return Jr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ho.credentialFromTaggedObject(t)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Jr._fromTokenResponse(n,r):null}}function zo(e,t){return t?fr(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ho.PROVIDER_ID="phone",Ho.PHONE_SIGN_IN_METHOD="phone";class Vo extends Wr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jo(e){return po(e.auth,new Vo(e),e.bypassAuthState)}function Wo(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),ho(n,new Vo(e),e.bypassAuthState)}async function Ko(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),Ao(n,new Vo(e),e.bypassAuthState)}class Go{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:a,type:i}=e;if(a)return void this.reject(a);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(s))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jo;case"linkViaPopup":case"linkViaRedirect":return Ko;case"reauthViaPopup":case"reauthViaRedirect":return Wo;default:Tn(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qo=new zn(2e3,1e4);class Xo extends Go{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,Xo.currentPopupAction&&Xo.currentPopupAction.cancel(),Xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rn(e,this.auth,"internal-error"),e}async onExecution(){Dn(1===this.filter.length,"Popup operations only handle one event");const e=Bo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(_n(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,qo.get())};e()}}Xo.currentPopupAction=null;const Yo="pendingRedirect",Zo=new Map;class Jo extends Go{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Zo.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ta(t),r=ea(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Zo.set(this.auth._key(),e)}return this.bypassAuthState||Zo.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function $o(e,t){Zo.set(e._key(),t)}function ea(e){return fr(e._redirectPersistence)}function ta(e){return yr(Yo,e.config.apiKey,e.name)}async function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Rr(e),o=zo(r,t),a=new Jo(r,o,n),i=await a.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class ra{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!aa(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_n(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oa(e))}saveEventToCache(e){this.cachedEventUids.add(oa(e)),this.lastProcessedEventTime=Date.now()}}function oa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function aa(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sa=/^https?/;async function ca(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return qn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(la(n))return}catch(Vge){}Tn(e,"unauthorized-domain")}function la(e){const t=Pn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!sa.test(n))return!1;if(ia.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const ua=new zn(3e4,6e4);function Aa(){const e=Io().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let ha=null;function da(e){return ha=ha||function(e){return new Promise(((t,n)=>{var r,o,a;function i(){Aa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Aa(),n(_n(e,"network-request-failed"))},timeout:ua.get()})}if(null===(o=null===(r=Io().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Io().gapi)||void 0===a?void 0:a.load)){const t=Pr("iframefcb");return Io()[t]=()=>{gapi.load?i():n(_n(e,"network-request-failed"))},Dr("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}i()}})).catch((e=>{throw ha=null,e}))}(e),ha}const pa=new zn(5e3,15e3),fa="__/auth/iframe",ga="emulator/auth/iframe",ma={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vn(t,ga):"https://".concat(e.config.authDomain,"/").concat(fa),r={apiKey:t.apiKey,appName:e.name,v:ln},o=ya.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pt(r).slice(1))}const ba={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function xa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-o)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},ba),{width:r.toString(),height:o.toString(),top:a,left:i}),l=ct().toLowerCase();n&&(s=Cr(l)?"_blank":n),wr(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Er(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new wa(null);const A=window.open(t||"",s,u);Rn(A,e,"popup-blocked");try{A.focus()}catch(h){}return new wa(A)}const Ca="__/auth/handler",ka="emulator/auth/handler",Ba=encodeURIComponent("fac");async function Sa(e,t,n,r,o,a){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ln,eventId:o};if(t instanceof to){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof no){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const s=i;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const c=await e._getAppCheckToken(),l=c?"#".concat(Ba,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ca);return Vn(t,ka)}(e),"?").concat(pt(s).slice(1)).concat(l)}const Ia="webStorageSupport";const Ea=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Co,this._completeRedirectFn=na,this._overrideRedirectResult=$o}async _openPopup(e,t,n,r){var o;Dn(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return xa(e,await Sa(e,t,n,Pn(),r),Bo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Io().location.href=e}(await Sa(e,t,n,Pn(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await da(e),n=Io().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:va(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ma,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=_n(e,"network-request-failed"),a=Io().setTimeout((()=>{r(o)}),pa.get());function i(){Io().clearTimeout(a),n(t)}t.ping(i).then(i,(()=>{r(o)}))}))))}(e),n=new ra(e);return t.register("authEvent",(t=>{Rn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ia,{type:Ia},(n=>{var r;const o=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ia];void 0!==o&&t(!!o),Tn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ca(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fr()||xr()||Er()}};var Na="@firebase/auth",Fa="1.5.1";class Ta{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _a=at("authIdTokenMaxAge")||300;let La=null;var Oa;Oa="Browser",on(new bt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:s}=r.options;Rn(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:i,authDomain:s,clientPlatform:Oa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tr(Oa)},l=new Or(r,o,a,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),on(new bt("auth-internal",(e=>(e=>new Ta(e))(Rr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),hn(Na,Fa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Oa)),hn(Na,Fa,"esm2017");hn("firebase","10.7.1","app");var Ra,Ua="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Da={},Pa=Pa||{},Ma=Ua||self;function Qa(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ha(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var za="closure_uid_"+(1e9*Math.random()>>>0),Va=0;function ja(e,t,n){return e.call.apply(e.bind,arguments)}function Wa(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ka(e,t,n){return(Ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:Wa).apply(null,arguments)}function Ga(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qa(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[n].apply(e,o)}}function Xa(){this.s=this.s,this.o=this.o}Xa.prototype.s=!1,Xa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,za)&&e[za]||(e[za]=++Va)}(this)},Xa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ya=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Za(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ja(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Qa(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function $a(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}$a.prototype.h=function(){this.defaultPrevented=!0};var ei=function(){if(!Ma.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Ma.addEventListener("test",e,t),Ma.removeEventListener("test",e,t)}catch(Ome){}return e}();function ti(e){return/^[\s\xa0]*$/.test(e)}function ni(){var e=Ma.navigator;return e&&(e=e.userAgent)?e:""}function ri(e){return-1!=ni().indexOf(e)}function oi(e){return oi[" "](e),e}oi[" "]=function(){};var ai,ii,si=ri("Opera"),ci=ri("Trident")||ri("MSIE"),li=ri("Edge"),ui=li||ci,Ai=ri("Gecko")&&!(-1!=ni().toLowerCase().indexOf("webkit")&&!ri("Edge"))&&!(ri("Trident")||ri("MSIE"))&&!ri("Edge"),hi=-1!=ni().toLowerCase().indexOf("webkit")&&!ri("Edge");function di(){var e=Ma.document;return e?e.documentMode:void 0}e:{var pi="",fi=function(){var e=ni();return Ai?/rv:([^\);]+)(\)|;)/.exec(e):li?/Edge\/([\d\.]+)/.exec(e):ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):hi?/WebKit\/(\S+)/.exec(e):si?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fi&&(pi=fi?fi[1]:""),ci){var gi=di();if(null!=gi&&gi>parseFloat(pi)){ai=String(gi);break e}}ai=pi}if(Ma.document&&ci){var mi=di();ii=mi||(parseInt(ai,10)||void 0)}else ii=void 0;var yi=ii;function vi(e,t){if($a.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ai){e:{try{oi(t.nodeName);var o=!0;break e}catch(Pme){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:bi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vi.$.h.call(this)}}qa(vi,$a);var bi={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var wi="closure_listenable_"+(1e6*Math.random()|0),xi=0;function Ci(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=o,this.key=++xi,this.fa=this.ia=!1}function ki(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Bi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Si(e){const t={};for(const n in e)t[n]=e[n];return t}const Ii="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ei(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<Ii.length;t++)n=Ii[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ni(e){this.src=e,this.g={},this.h=0}function Fi(e,t){var n=t.type;if(n in e.g){var r,o=e.g[n],a=Ya(o,t);(r=0<=a)&&Array.prototype.splice.call(o,a,1),r&&(ki(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ti(e,t,n,r){for(var o=0;o<e.length;++o){var a=e[o];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return o}return-1}Ni.prototype.add=function(e,t,n,r,o){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=Ti(e,t,r,o);return-1<i?(t=e[i],n||(t.ia=!1)):((t=new Ci(t,this.src,a,!!r,o)).ia=n,e.push(t)),t};var _i="closure_lm_"+(1e6*Math.random()|0),Li={};function Oi(e,t,n,r,o){if(r&&r.once)return Ui(e,t,n,r,o);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Oi(e,t[a],n,r,o);return null}return n=Vi(n),e&&e[wi]?e.O(t,n,Ha(r)?!!r.capture:!!r,o):Ri(e,t,n,!1,r,o)}function Ri(e,t,n,r,o,a){if(!t)throw Error("Invalid event type");var i=Ha(o)?!!o.capture:!!o,s=Hi(e);if(s||(e[_i]=s=new Ni(e)),(n=s.add(t,n,r,i,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Qi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ei||(o=i),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(Mi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ui(e,t,n,r,o){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ui(e,t[a],n,r,o);return null}return n=Vi(n),e&&e[wi]?e.P(t,n,Ha(r)?!!r.capture:!!r,o):Ri(e,t,n,!0,r,o)}function Di(e,t,n,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)Di(e,t[a],n,r,o);else r=Ha(r)?!!r.capture:!!r,n=Vi(n),e&&e[wi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ti(a=e.g[t],n,r,o))&&(ki(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Hi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ti(t,n,r,o)),(n=-1<e?t[e]:null)&&Pi(n))}function Pi(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[wi])Fi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Mi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Hi(t))?(Fi(n,e),0==n.h&&(n.src=null,t[_i]=null)):ki(e)}}}function Mi(e){return e in Li?Li[e]:Li[e]="on"+e}function Qi(e,t){if(e.fa)e=!0;else{t=new vi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Pi(e),e=n.call(r,t)}return e}function Hi(e){return(e=e[_i])instanceof Ni?e:null}var zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(e){return"function"===typeof e?e:(e[zi]||(e[zi]=function(t){return e.handleEvent(t)}),e[zi])}function ji(){Xa.call(this),this.i=new Ni(this),this.S=this,this.J=null}function Wi(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new $a(t,e);else if(t instanceof $a)t.target=t.target||e;else{var o=t;Ei(t=new $a(r,e),o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];o=Ki(i,r,!0,t)&&o}if(o=Ki(i=t.g=e,r,!0,t)&&o,o=Ki(i,r,!1,t)&&o,n)for(a=0;a<n.length;a++)o=Ki(i=t.g=n[a],r,!1,t)&&o}function Ki(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.fa&&i.capture==n){var s=i.listener,c=i.la||i.src;i.ia&&Fi(e.i,i),o=!1!==s.call(c,r)&&o}}return o&&!r.defaultPrevented}qa(ji,Xa),ji.prototype[wi]=!0,ji.prototype.removeEventListener=function(e,t,n,r){Di(this,e,t,n,r)},ji.prototype.N=function(){if(ji.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ki(n[r]);delete t.g[e],t.h--}}this.J=null},ji.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ji.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Gi=Ma.JSON.stringify;function qi(){var e=ts;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Yi),(e=>e.reset()));class Yi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ji(e){Ma.setTimeout((()=>{throw e}),0)}let $i,es=!1,ts=new class{constructor(){this.h=this.g=null}add(e,t){const n=Xi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ns=()=>{const e=Ma.Promise.resolve(void 0);$i=()=>{e.then(rs)}};var rs=()=>{for(var e;e=qi();){try{e.h.call(e.g)}catch(Ome){Ji(Ome)}var t=Xi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}es=!1};function os(e,t){ji.call(this),this.h=e||1,this.g=t||Ma,this.j=Ka(this.qb,this),this.l=Date.now()}function as(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function is(e,t,n){if("function"===typeof e)n&&(e=Ka(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ka(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ma.setTimeout(e,t||0)}function ss(e){e.g=is((()=>{e.g=null,e.i&&(e.i=!1,ss(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}qa(os,ji),(Ra=os.prototype).ga=!1,Ra.T=null,Ra.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wi(this,"tick"),this.ga&&(as(this),this.start()))}},Ra.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ra.N=function(){os.$.N.call(this),as(this),delete this.g};class cs extends Xa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ss(this)}N(){super.N(),this.g&&(Ma.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(e){Xa.call(this),this.h=e,this.g={}}qa(ls,Xa);var us=[];function As(e,t,n,r){Array.isArray(n)||(n&&(us[0]=n.toString()),n=us);for(var o=0;o<n.length;o++){var a=Oi(t,n[o],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hs(e){Bi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Pi(e)}),e),e.g={}}function ds(){this.g=!0}function ps(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var a=o[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<o.length;i++)o[i]=""}}}return Gi(n)}catch(Nme){return t}}(e,n)+(r?" "+r:"")}))}ls.prototype.N=function(){ls.$.N.call(this),hs(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ds.prototype.Ea=function(){this.g=!1},ds.prototype.info=function(){};var fs={},gs=null;function ms(){return gs=gs||new ji}function ys(e){$a.call(this,fs.Ta,e)}function vs(e){const t=ms();Wi(t,new ys(t))}function bs(e,t){$a.call(this,fs.STAT_EVENT,e),this.stat=t}function ws(e){const t=ms();Wi(t,new bs(t,e))}function xs(e,t){$a.call(this,fs.Ua,e),this.size=t}function Cs(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ma.setTimeout((function(){e()}),t)}fs.Ta="serverreachability",qa(ys,$a),fs.STAT_EVENT="statevent",qa(bs,$a),fs.Ua="timingevent",qa(xs,$a);var ks={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Bs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ss(){}function Is(e){return e.h||(e.h=e.i())}function Es(){}Ss.prototype.h=null;var Ns,Fs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ts(){$a.call(this,"d")}function _s(){$a.call(this,"c")}function Ls(){}function Os(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ls(this),this.P=Us,e=ui?125:void 0,this.V=new os(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Rs}function Rs(){this.i=null,this.g="",this.h=!1}qa(Ts,$a),qa(_s,$a),qa(Ls,Ss),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},Ns=new Ls;var Us=45e3,Ds={},Ps={};function Ms(e,t,n){e.L=1,e.A=oc($s(t)),e.u=n,e.S=!0,Qs(e,null)}function Qs(e,t){e.G=Date.now(),js(e),e.B=$s(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),mc(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Rs,e.g=ml(e.l,n?t:null,!e.u),0<e.O&&(e.M=new cs(Ka(e.Pa,e,e.g),e.O)),As(e.U,e.g,"readystatechange",e.nb),t=e.I?Si(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),vs(),function(e,t,n,r,o,a){e.info((function(){if(e.g)if(a)for(var i="",s=a.split("&"),c=0;c<s.length;c++){var l=s[c].split("=");if(1<l.length){var u=l[0];l=l[1];var A=u.split("_");i=2<=A.length&&"type"==A[1]?i+(u+"=")+l+"&":i+(u+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+i}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Hs(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function zs(e,t,n){let r,o=!0;for(;!e.J&&e.o<n.length;){if(r=Vs(e,n),r==Ps){4==t&&(e.s=4,ws(14),o=!1),ps(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ds){e.s=4,ws(15),ps(e.j,e.m,n,"[Invalid Chunk]"),o=!1;break}ps(e.j,e.m,r,null),Xs(e,r)}Hs(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,ws(16),o=!1),e.i=e.i&&o,o?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ll(t),t.M=!0,ws(11))):(ps(e.j,e.m,n,"[Invalid Chunked Response]"),qs(e),Gs(e))}function Vs(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Ps:(n=Number(t.substring(n,r)),isNaN(n)?Ds:(r+=1)+n>t.length?Ps:(t=t.slice(r,r+n),e.o=r+n,t))}function js(e){e.Y=Date.now()+e.P,Ws(e,e.P)}function Ws(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Cs(Ka(e.lb,e),t)}function Ks(e){e.C&&(Ma.clearTimeout(e.C),e.C=null)}function Gs(e){0==e.l.H||e.J||hl(e.l,e)}function qs(e){Ks(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,as(e.V),hs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Xs(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||kc(n.i,e)))if(!e.K&&kc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(zme){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Al(n),tl(n)}cl(n),ws(18)}}else n.Fa=o[1],0<n.Fa-n.V&&37500>o[2]&&n.G&&0==n.A&&!n.v&&(n.v=Cs(Ka(n.ib,n),6e3));if(1>=Cc(n.i)&&n.oa){try{n.oa()}catch(zme){}n.oa=void 0}}else pl(n,11)}else if((e.K||n.g==e)&&Al(n),!ti(t))for(o=n.Ja.g.parse(t),t=0;t<o.length;t++){let l=o[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const o=l[4];null!=o&&(n.Ga=o,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const A=e.g;if(A){const e=A.g?A.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.i;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Bc(a,a.h),a.h=null))}if(r.F){const e=A.g?A.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,rc(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var i=e;if((r=n).wa=gl(r,r.J?r.pa:null,r.Y),i.K){Sc(r.i,i);var s=i,c=r.L;c&&s.setTimeout(c),s.C&&(Ks(s),js(s)),r.g=i}else sl(r);0<n.j.length&&rl(n)}else"stop"!=l[0]&&"close"!=l[0]||pl(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pl(n,7):el(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}vs()}catch(zme){}}function Ys(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Qa(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Qa(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Qa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),o=r.length,a=0;a<o;a++)t.call(void 0,r[a],n&&n[a],e)}(Ra=Os.prototype).setTimeout=function(e){this.P=e},Ra.nb=function(e){e=e.target;const t=this.M;t&&3==qc(e)?t.l():this.Pa(e)},Ra.Pa=function(e){try{if(e==this.g)e:{const u=qc(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||ui||this.g&&(this.h.h||this.g.ja()||Xc(this.g)))){this.J||4!=u||7==t||vs(),Ks(this);var n=this.g.da();this.ca=n;t:if(Hs(this)){var r=Xc(this.g);e="";var o=r.length,a=4==qc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qs(this),Gs(this);var i="";break t}this.h.i=new Ma.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:a&&t==o-1});r.length=0,this.h.g+=e,this.o=0,i=this.h.g}else i=this.g.ja();if(this.i=200==n,function(e,t,n,r,o,a,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+a+" "+i}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ti(s)){var l=s;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,ws(12),qs(this),Gs(this);break e}ps(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xs(this,n)}this.S?(zs(this,u,i),ui&&this.i&&3==u&&(As(this.U,this.V,"tick",this.mb),this.V.start())):(ps(this.j,this.m,i,null),Xs(this,i)),4==u&&qs(this),this.i&&!this.J&&(4==u?hl(this.l,this):(this.i=!1,js(this)))}else(function(e){const t={};e=(e.g&&2<=qc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ti(e[r]))continue;var n=Zi(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[o]||[];t[o]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<i.indexOf("Unknown SID")?(this.s=3,ws(12)):(this.s=0,ws(13)),qs(this),Gs(this)}}}catch(Rme){}},Ra.mb=function(){if(this.g){var e=qc(this.g),t=this.g.ja();this.o<t.length&&(Ks(this),zs(this,e,t),this.i&&4!=e&&js(this))}},Ra.cancel=function(){this.J=!0,qs(this)},Ra.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(vs(),ws(17)),qs(this),this.s=2,Gs(this)):Ws(this,this.Y-e)};var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Js(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Js){this.h=e.h,ec(this,e.j),this.s=e.s,this.g=e.g,tc(this,e.m),this.l=e.l;var t=e.i,n=new dc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),nc(this,n),this.o=e.o}else e&&(t=String(e).match(Zs))?(this.h=!1,ec(this,t[1]||"",!0),this.s=ac(t[2]||""),this.g=ac(t[3]||"",!0),tc(this,t[4]),this.l=ac(t[5]||"",!0),nc(this,t[6]||"",!0),this.o=ac(t[7]||"")):(this.h=!1,this.i=new dc(null,this.h))}function $s(e){return new Js(e)}function ec(e,t,n){e.j=n?ac(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function nc(e,t,n){t instanceof dc?(e.i=t,function(e,t){t&&!e.j&&(pc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(fc(this,t),mc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ic(t,Ac)),e.i=new dc(t,e.h))}function rc(e,t,n){e.i.set(t,n)}function oc(e){return rc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ac(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ic(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,sc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function sc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Js.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ic(t,cc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ic(t,cc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ic(n,"/"==n.charAt(0)?uc:lc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ic(n,hc)),e.join("")};var cc=/[#\/\?@]/g,lc=/[#\?:]/g,uc=/[#\?]/g,Ac=/[#\?@]/g,hc=/#/g;function dc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var a=e[n].substring(0,r);o=e[n].substring(r+1)}else a=e[n];t(a,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function fc(e,t){pc(e),t=yc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function gc(e,t){return pc(e),t=yc(e,t),e.g.has(t)}function mc(e,t,n){fc(e,t),0<n.length&&(e.i=null,e.g.set(yc(e,t),Za(n)),e.h+=n.length)}function yc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ra=dc.prototype).add=function(e,t){pc(this),this.i=null,e=yc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ra.forEach=function(e,t){pc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ra.ta=function(){pc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const o=e[r];for(let e=0;e<o.length;e++)n.push(t[r])}return n},Ra.Z=function(e){pc(this);let t=[];if("string"===typeof e)gc(this,e)&&(t=t.concat(this.g.get(yc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ra.set=function(e,t){return pc(this),this.i=null,gc(this,e=yc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ra.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ra.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.Z(r);for(r=0;r<i.length;r++){var o=a;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var vc=class{constructor(e,t){this.g=e,this.map=t}};function bc(e){this.l=e||wc,Ma.PerformanceNavigationTiming?e=0<(e=Ma.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ma.g&&Ma.g.Ka&&Ma.g.Ka()&&Ma.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wc=10;function xc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Cc(e){return e.h?1:e.g?e.g.size:0}function kc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bc(e,t){e.g?e.g.add(t):e.h=t}function Sc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ic(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Za(e.i)}bc.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ec=class{stringify(e){return Ma.JSON.stringify(e,void 0)}parse(e){return Ma.JSON.parse(e,void 0)}};function Nc(){this.g=new Ec}function Fc(e,t,n){const r=n||"";try{Ys(e,(function(e,n){let o=e;Ha(e)&&(o=Gi(e)),t.push(r+n+"="+encodeURIComponent(o))}))}catch(o){throw t.push(r+"type="+encodeURIComponent("_badmap")),o}}function Tc(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch(Pme){}}function _c(e){this.l=e.ec||null,this.j=e.ob||!1}function Lc(e,t){ji.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qa(_c,Ss),_c.prototype.g=function(){return new Lc(this.l,this.j)},_c.prototype.i=function(e){return function(){return e}}({}),qa(Lc,ji);var Oc=0;function Rc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Uc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dc(e)}function Dc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ra=Lc.prototype).open=function(e,t){if(this.readyState!=Oc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dc(this)},Ra.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ma).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ra.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uc(this)),this.readyState=Oc},Ra.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dc(this)),this.g&&(this.readyState=3,Dc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ma.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ra.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Uc(this):Dc(this),3==this.readyState&&Rc(this)}},Ra.Za=function(e){this.g&&(this.response=this.responseText=e,Uc(this))},Ra.Ya=function(e){this.g&&(this.response=e,Uc(this))},Ra.ka=function(){this.g&&Uc(this)},Ra.setRequestHeader=function(e,t){this.v.append(e,t)},Ra.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ra.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Pc=Ma.JSON.parse;function Mc(e){ji.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qc,this.L=this.M=!1}qa(Mc,ji);var Qc="",Hc=/^https?$/i,zc=["POST","PUT"];function Vc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,jc(e),Kc(e)}function jc(e){e.F||(e.F=!0,Wi(e,"complete"),Wi(e,"error"))}function Wc(e){if(e.h&&"undefined"!=typeof Pa&&(!e.C[1]||4!=qc(e)||2!=e.da()))if(e.v&&4==qc(e))is(e.La,0,e);else if(Wi(e,"readystatechange"),4==qc(e)){e.h=!1;try{const i=e.da();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){var o=String(e.I).match(Zs)[1]||null;!o&&Ma.self&&Ma.self.location&&(o=Ma.self.location.protocol.slice(0,-1)),r=!Hc.test(o?o.toLowerCase():"")}n=r}if(n)Wi(e,"complete"),Wi(e,"success");else{e.m=6;try{var a=2<qc(e)?e.g.statusText:""}catch(Nme){a=""}e.j=a+" ["+e.da()+"]",jc(e)}}finally{Kc(e)}}}function Kc(e,t){if(e.g){Gc(e);const r=e.g,o=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Wi(e,"ready");try{r.onreadystatechange=o}catch(n){}}}function Gc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ma.clearTimeout(e.A),e.A=null)}function qc(e){return e.g?e.g.readyState:0}function Xc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Qc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(nu){return null}}function Yc(e){let t="";return Bi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):rc(e,t,n))}function Jc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $c(e){this.Ga=0,this.j=[],this.l=new ds,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jc("baseRetryDelayMs",5e3,e),this.hb=Jc("retryDelaySeedMs",1e4,e),this.eb=Jc("forwardChannelMaxRetries",2,e),this.xa=Jc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new bc(e&&e.concurrentRequestLimit),this.Ja=new Nc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function el(e){if(nl(e),3==e.H){var t=e.W++,n=$s(e.I);if(rc(n,"SID",e.K),rc(n,"RID",t),rc(n,"TYPE","terminate"),al(e,n),(t=new Os(e,e.l,t)).L=2,t.A=oc($s(n)),n=!1,Ma.navigator&&Ma.navigator.sendBeacon)try{n=Ma.navigator.sendBeacon(t.A.toString(),"")}catch(Mme){}!n&&Ma.Image&&((new Image).src=t.A,n=!0),n||(t.g=ml(t.l,null),t.g.ha(t.A)),t.G=Date.now(),js(t)}fl(e)}function tl(e){e.g&&(ll(e),e.g.cancel(),e.g=null)}function nl(e){tl(e),e.u&&(Ma.clearTimeout(e.u),e.u=null),Al(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ma.clearTimeout(e.m),e.m=null)}function rl(e){if(!xc(e.i)&&!e.m){e.m=!0;var t=e.Na;$i||ns(),es||($i(),es=!0),ts.add(t,e),e.C=0}}function ol(e,t){var n;n=t?t.m:e.W++;const r=$s(e.I);rc(r,"SID",e.K),rc(r,"RID",n),rc(r,"AID",e.V),al(e,r),e.o&&e.s&&Zc(r,e.o,e.s),n=new Os(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=il(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Bc(e.i,n),Ms(n,r,t)}function al(e,t){e.na&&Bi(e.na,(function(e,n){rc(t,n,e)})),e.h&&Ys({},(function(e,n){rc(t,n,e)}))}function il(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ka(e.h.Va,e.h,e):null;e:{var o=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let s=0;s<n;s++){let n=o[s].g;const c=o[s].map;if(n-=t,0>n)t=Math.max(0,o[s].g-100),i=!1;else try{Fc(c,e,"req"+n+"_")}catch(a){r&&r(c)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function sl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;$i||ns(),es||($i(),es=!0),ts.add(t,e),e.A=0}}function cl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Cs(Ka(e.Ma,e),dl(e,e.A)),e.A++,!0)}function ll(e){null!=e.B&&(Ma.clearTimeout(e.B),e.B=null)}function ul(e){e.g=new Os(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=$s(e.wa);rc(t,"RID","rpc"),rc(t,"SID",e.K),rc(t,"AID",e.V),rc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&rc(t,"TO",e.qa),rc(t,"TYPE","xmlhttp"),al(e,t),e.o&&e.s&&Zc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=oc($s(t)),n.u=null,n.S=!0,Qs(n,e)}function Al(e){null!=e.v&&(Ma.clearTimeout(e.v),e.v=null)}function hl(e,t){var n=null;if(e.g==t){Al(e),ll(e),e.g=null;var r=2}else{if(!kc(e.i,t))return;n=t.F,Sc(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var o=e.C;Wi(r=ms(),new xs(r,n)),rl(e)}else sl(e);else if(3==(o=t.s)||0==o&&0<t.ca||!(1==r&&function(e,t){return!(Cc(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Cs(Ka(e.Na,e,t),dl(e,e.C)),e.C++,!0))}(e,t)||2==r&&cl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),o){case 1:pl(e,5);break;case 4:pl(e,10);break;case 3:pl(e,6);break;default:pl(e,2)}}function dl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function pl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ka(e.pb,e);n||(n=new Js("//www.google.com/images/cleardot.gif"),Ma.location&&"http"==Ma.location.protocol||ec(n,"https"),oc(n)),function(e,t){const n=new ds;if(Ma.Image){const r=new Image;r.onload=Ga(Tc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ga(Tc,n,r,"TestLoadImage: error",!1,t),r.onabort=Ga(Tc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ga(Tc,n,r,"TestLoadImage: timeout",!1,t),Ma.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ws(2);e.H=0,e.h&&e.h.za(t),fl(e),nl(e)}function fl(e){if(e.H=0,e.ma=[],e.h){const t=Ic(e.i);0==t.length&&0==e.j.length||(Ja(e.ma,t),Ja(e.ma,e.j),e.i.i.length=0,Za(e.j),e.j.length=0),e.h.ya()}}function gl(e,t,n){var r=n instanceof Js?$s(n):new Js(n);if(""!=r.g)t&&(r.g=t+"."+r.g),tc(r,r.m);else{var o=Ma.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new Js(null);r&&ec(a,r),t&&(a.g=t),o&&tc(a,o),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&rc(r,n,t),rc(r,"VER",e.ra),al(e,r),r}function ml(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Mc(new _c({ob:n})):new Mc(e.va)).Oa(e.J),t}function yl(){}function vl(){if(ci&&!(10<=Number(yi)))throw Error("Environmental error: no available transport.")}function bl(e,t){ji.call(this),this.g=new $c(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ti(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ti(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Cl(this)}function wl(e){Ts.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xl(){_s.call(this),this.status=1}function Cl(e){this.g=e}function kl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var o=0;16>o;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];var a=e.g[3],i=t+(a^n&(o^a))+r[0]+3614090360&4294967295;i=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=(n=(o=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(o^t&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=o+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^o&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(o^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(o^t&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=o+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^o&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(o^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(o^t&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=o+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^o&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(o^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(o^t&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=o+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^o&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^a&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^o&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=o+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(o^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(o^a&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^o&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=o+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(o^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(o^a&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^o&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=o+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(o^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(o^a&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^o&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=o+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(o^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^o^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=o+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(o^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^o^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=o+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(o^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^o^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=o+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(o^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^o^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=o+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(o^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(o^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~o))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=o+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(o|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(o^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~o))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=o+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(o|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(o^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~o))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=o+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(o|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(o^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~o))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((o=a+((i=o+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+a&4294967295}function Sl(e,t){this.h=t;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var a=0|e[o];r&&a==t||(n[o]=a,r=!1)}this.g=n}(Ra=Mc.prototype).Oa=function(e){this.M=e},Ra.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ns.g(),this.C=this.u?Is(this.u):Is(Ns),this.g.onreadystatechange=Ka(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(Pme){return void Vc(this,Pme)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=Ma.FormData&&e instanceof Ma.FormData,!(0<=Ya(zc,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,i]of n)this.g.setRequestHeader(a,i);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gc(this),0<this.B&&((this.L=function(e){return ci&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ka(this.ua,this)):this.A=is(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Pme){Vc(this,Pme)}},Ra.ua=function(){"undefined"!=typeof Pa&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wi(this,"timeout"),this.abort(8))},Ra.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Wi(this,"complete"),Wi(this,"abort"),Kc(this))},Ra.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kc(this,!0)),Mc.$.N.call(this)},Ra.La=function(){this.s||(this.G||this.v||this.l?Wc(this):this.kb())},Ra.kb=function(){Wc(this)},Ra.isActive=function(){return!!this.g},Ra.da=function(){try{return 2<qc(this)?this.g.status:-1}catch(Tme){return-1}},Ra.ja=function(){try{return this.g?this.g.responseText:""}catch(Tme){return""}},Ra.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pc(t)}},Ra.Ia=function(){return this.m},Ra.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ra=$c.prototype).ra=8,Ra.H=1,Ra.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const o=new Os(this,this.l,e);let a=this.s;if(this.U&&(a?(a=Si(a),Ei(a,this.U)):a=this.U),null!==this.o||this.O||(o.I=a,a=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=il(this,o,t),rc(n=$s(this.I),"RID",e),rc(n,"CVER",22),this.F&&rc(n,"X-HTTP-Session-Id",this.F),al(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Yc(a)))+"&"+t:this.o&&Zc(n,this.o,a)),Bc(this.i,o),this.bb&&rc(n,"TYPE","init"),this.P?(rc(n,"$req",t),rc(n,"SID","null"),o.aa=!0,Ms(o,n,null)):Ms(o,n,t),this.H=2}}else 3==this.H&&(e?ol(this,e):0==this.j.length||xc(this.i)||ol(this))},Ra.Ma=function(){if(this.u=null,ul(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Cs(Ka(this.jb,this),e)}},Ra.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ws(10),tl(this),ul(this))},Ra.ib=function(){null!=this.v&&(this.v=null,tl(this),cl(this),ws(19))},Ra.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ws(2)):(this.l.info("Failed to ping google.com"),ws(1))},Ra.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ra=yl.prototype).Ba=function(){},Ra.Aa=function(){},Ra.za=function(){},Ra.ya=function(){},Ra.isActive=function(){return!0},Ra.Va=function(){},vl.prototype.g=function(e,t){return new bl(e,t)},qa(bl,ji),bl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ws(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=gl(e,null,e.Y),rl(e)},bl.prototype.close=function(){el(this.g)},bl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Gi(e),e=n);t.j.push(new vc(t.fb++,e)),3==t.H&&rl(t)},bl.prototype.N=function(){this.g.h=null,delete this.j,el(this.g),delete this.g,bl.$.N.call(this)},qa(wl,Ts),qa(xl,_s),qa(Cl,yl),Cl.prototype.Ba=function(){Wi(this.g,"a")},Cl.prototype.Aa=function(e){Wi(this.g,new wl(e))},Cl.prototype.za=function(e){Wi(this.g,new xl)},Cl.prototype.ya=function(){Wi(this.g,"b")},qa(kl,(function(){this.blockSize=-1})),kl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},kl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,o=this.h,a=0;a<t;){if(0==o)for(;a<=n;)Bl(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[o++]=e.charCodeAt(a++),o==this.blockSize){Bl(this,r),o=0;break}}else for(;a<t;)if(r[o++]=e[a++],o==this.blockSize){Bl(this,r),o=0;break}}this.h=o,this.i+=t},kl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Il={};function El(e){return-128<=e&&128>e?function(e,t){var n=Il;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Sl([0|e],0>e?-1:0)})):new Sl([0|e],0>e?-1:0)}function Nl(e){if(isNaN(e)||!isFinite(e))return Tl;if(0>e)return Ul(Nl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Fl;return new Sl(t,0)}var Fl=4294967296,Tl=El(0),_l=El(1),Ll=El(16777216);function Ol(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Rl(e){return-1==e.h}function Ul(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Sl(n,~e.h).add(_l)}function Dl(e,t){return e.add(Ul(t))}function Pl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ml(e,t){this.g=e,this.h=t}function Ql(e,t){if(Ol(t))throw Error("division by zero");if(Ol(e))return new Ml(Tl,Tl);if(Rl(e))return t=Ql(Ul(e),t),new Ml(Ul(t.g),Ul(t.h));if(Rl(t))return t=Ql(e,Ul(t)),new Ml(Ul(t.g),t.h);if(30<e.g.length){if(Rl(e)||Rl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_l,r=t;0>=r.X(e);)n=Hl(n),r=Hl(r);var o=zl(n,1),a=zl(r,1);for(r=zl(r,2),n=zl(n,2);!Ol(r);){var i=a.add(r);0>=i.X(e)&&(o=o.add(n),a=i),r=zl(r,1),n=zl(n,1)}return t=Dl(e,o.R(t)),new Ml(o,t)}for(o=Tl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),i=(a=Nl(n)).R(t);Rl(i)||0<i.X(e);)i=(a=Nl(n-=r)).R(t);Ol(a)&&(a=_l),o=o.add(a),e=Dl(e,i)}return new Ml(o,e)}function Hl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Sl(n,e.h)}function zl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,o=[],a=0;a<r;a++)o[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Sl(o,e.h)}(Ra=Sl.prototype).ea=function(){if(Rl(this))return-Ul(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Fl+r)*t,t*=Fl}return e},Ra.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ol(this))return"0";if(Rl(this))return"-"+Ul(this).toString(e);for(var t=Nl(Math.pow(e,6)),n=this,r="";;){var o=Ql(n,t).g,a=((0<(n=Dl(n,o.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ol(n=o))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ra.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ra.X=function(e){return Rl(e=Dl(this,e))?-1:Ol(e)?0:1},Ra.abs=function(){return Rl(this)?Ul(this):this},Ra.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,o=0;o<=t;o++){var a=r+(65535&this.D(o))+(65535&e.D(o)),i=(a>>>16)+(this.D(o)>>>16)+(e.D(o)>>>16);r=i>>>16,a&=65535,i&=65535,n[o]=i<<16|a}return new Sl(n,-2147483648&n[n.length-1]?-1:0)},Ra.R=function(e){if(Ol(this)||Ol(e))return Tl;if(Rl(this))return Rl(e)?Ul(this).R(Ul(e)):Ul(Ul(this).R(e));if(Rl(e))return Ul(this.R(Ul(e)));if(0>this.X(Ll)&&0>e.X(Ll))return Nl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<e.g.length;o++){var a=this.D(r)>>>16,i=65535&this.D(r),s=e.D(o)>>>16,c=65535&e.D(o);n[2*r+2*o]+=i*c,Pl(n,2*r+2*o),n[2*r+2*o+1]+=a*c,Pl(n,2*r+2*o+1),n[2*r+2*o+1]+=i*s,Pl(n,2*r+2*o+1),n[2*r+2*o+2]+=a*s,Pl(n,2*r+2*o+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Sl(n,0)},Ra.gb=function(e){return Ql(this,e).h},Ra.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Sl(n,this.h&e.h)},Ra.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Sl(n,this.h|e.h)},Ra.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Sl(n,this.h^e.h)},vl.prototype.createWebChannel=vl.prototype.g,bl.prototype.send=bl.prototype.u,bl.prototype.open=bl.prototype.m,bl.prototype.close=bl.prototype.close,ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,Bs.COMPLETE="complete",Es.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",ji.prototype.listen=ji.prototype.O,Mc.prototype.listenOnce=Mc.prototype.P,Mc.prototype.getLastError=Mc.prototype.Sa,Mc.prototype.getLastErrorCode=Mc.prototype.Ia,Mc.prototype.getStatus=Mc.prototype.da,Mc.prototype.getResponseJson=Mc.prototype.Wa,Mc.prototype.getResponseText=Mc.prototype.ja,Mc.prototype.send=Mc.prototype.ha,Mc.prototype.setWithCredentials=Mc.prototype.Oa,kl.prototype.digest=kl.prototype.l,kl.prototype.reset=kl.prototype.reset,kl.prototype.update=kl.prototype.j,Sl.prototype.add=Sl.prototype.add,Sl.prototype.multiply=Sl.prototype.R,Sl.prototype.modulo=Sl.prototype.gb,Sl.prototype.compare=Sl.prototype.X,Sl.prototype.toNumber=Sl.prototype.ea,Sl.prototype.toString=Sl.prototype.toString,Sl.prototype.getBits=Sl.prototype.D,Sl.fromNumber=Nl,Sl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ul(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Nl(Math.pow(n,8)),o=Tl,a=0;a<t.length;a+=8){var i=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+i),n);8>i?(i=Nl(Math.pow(n,i)),o=o.R(i).add(Nl(s))):o=(o=o.R(r)).add(Nl(s))}return o};var Vl=Da.createWebChannelTransport=function(){return new vl},jl=Da.getStatEventTarget=function(){return ms()},Wl=Da.ErrorCode=ks,Kl=Da.EventType=Bs,Gl=Da.Event=fs,ql=Da.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xl=(Da.FetchXmlHttpFactory=_c,Da.WebChannel=Es),Yl=Da.XhrIo=Mc,Zl=Da.Md5=kl,Jl=Da.Integer=Sl;const $l="@firebase/firestore";class eu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}eu.UNAUTHENTICATED=new eu(null),eu.GOOGLE_CREDENTIALS=new eu("google-credentials-uid"),eu.FIRST_PARTY=new eu("first-party-uid"),eu.MOCK_USER=new eu("mock-user");let tu="10.7.0";const nu=new Tt("@firebase/firestore");function ru(){return nu.logLevel}function ou(e){if(nu.logLevel<=St.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(su);nu.debug("Firestore (".concat(tu,"): ").concat(e),...o)}}function au(e){if(nu.logLevel<=St.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(su);nu.error("Firestore (".concat(tu,"): ").concat(e),...o)}}function iu(e){if(nu.logLevel<=St.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(su);nu.warn("Firestore (".concat(tu,"): ").concat(e),...o)}}function su(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(dve){return e}}function cu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(tu,") INTERNAL ASSERTION FAILED: ")+e;throw au(t),new Error(t)}function lu(e,t){e||cu()}function uu(e,t){return e}const Au={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hu extends lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class du{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class fu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(eu.UNAUTHENTICATED)))}shutdown(){}}class gu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mu{constructor(e){this.t=e,this.currentUser=eu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new du;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new du,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=o;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{ou("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(ou("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new du)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ou("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(lu("string"==typeof t.accessToken),new pu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lu(null===e||"string"==typeof e),new eu(e)}}class yu{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=eu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vu{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new yu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(eu.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wu{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ou("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ou("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ou("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ou("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(lu("string"==typeof e.token),this.R=e.token,new bu(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Cu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=xu(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function ku(e,t){return e<t?-1:e>t?1:0}function Bu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Su{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hu(Au.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hu(Au.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hu(Au.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hu(Au.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Su.fromMillis(Date.now())}static fromDate(e){return Su.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Su(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ku(this.nanoseconds,e.nanoseconds):ku(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Iu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Iu(e)}static min(){return new Iu(new Su(0,0))}static max(){return new Iu(new Su(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Eu{constructor(e,t,n){void 0===t?t=0:t>e.length&&cu(),void 0===n?n=e.length-t:n>e.length-t&&cu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Eu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),o=t.get(r);if(n<o)return-1;if(n>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nu extends Eu{construct(e,t,n){return new Nu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new hu(Au.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter((e=>e.length>0)))}return new Nu(e)}static emptyPath(){return new Nu([])}}const Fu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tu extends Eu{construct(e,t,n){return new Tu(e,t,n)}static isValidIdentifier(e){return Fu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new hu(Au.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new hu(Au.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hu(Au.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(o(),r++)}if(o(),a)throw new hu(Au.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tu(t)}static emptyPath(){return new Tu([])}}class _u{constructor(e){this.path=e}static fromPath(e){return new _u(Nu.fromString(e))}static fromName(e){return new _u(Nu.fromString(e).popFirst(5))}static empty(){return new _u(Nu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _u(new Nu(e.slice()))}}class Lu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Lu.UNKNOWN_ID=-1;function Ou(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=Iu.fromTimestamp(1e9===r?new Su(n+1,0):new Su(n,r));return new Uu(o,_u.empty(),t)}function Ru(e){return new Uu(e.readTime,e.key,-1)}class Uu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Uu(Iu.min(),_u.empty(),-1)}static max(){return new Uu(Iu.max(),_u.empty(),-1)}}function Du(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=_u.comparator(e.documentKey,t.documentKey),0!==n?n:ku(e.largestBatchId,t.largestBatchId))}const Pu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qu(e){if(e.code!==Au.FAILED_PRECONDITION||e.message!==Pu)throw e;ou("LocalStore","Unexpectedly lost primary lease")}class Hu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&cu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Hu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Hu?t:Hu.resolve(t)}catch(e){return Hu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Hu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Hu.reject(t)}static resolve(e){return new Hu(((t,n)=>{t(e)}))}static reject(e){return new Hu(((t,n)=>{n(e)}))}static waitFor(e){return new Hu(((t,n)=>{let r=0,o=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++o,a&&o===r&&t()}),(e=>n(e)))})),a=!0,o===r&&t()}))}static or(e){let t=Hu.resolve(!1);for(const n of e)t=t.next((e=>e?Hu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Hu(((n,r)=>{const o=e.length,a=new Array(o);let i=0;for(let s=0;s<o;s++){const c=s;t(e[c]).next((e=>{a[c]=e,++i,i===o&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new Hu(((n,r)=>{const o=()=>{!0===e()?t().next((()=>{o()}),r):n()};o()}))}}function zu(e){return"IndexedDbTransactionError"===e.name}class Vu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function ju(e){return null==e}function Wu(e){return 0===e&&1/e==-1/0}function Ku(e){return"number"==typeof e&&Number.isInteger(e)&&!Wu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Vu._e=-1;const Gu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xu=qu;function Yu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ju(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $u{constructor(e,t){this.comparator=e,this.root=t||tA.EMPTY}insert(e,t){return new $u(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tA.BLACK,null,null))}remove(e){return new $u(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tA.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eA(this.root,e,this.comparator,!1)}getReverseIterator(){return new eA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eA(this.root,e,this.comparator,!0)}}class eA{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tA{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:tA.RED,this.left=null!=r?r:tA.EMPTY,this.right=null!=o?o:tA.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new tA(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tA.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return tA.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tA.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tA.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw cu();if(this.right.isRed())throw cu();const e=this.left.check();if(e!==this.right.check())throw cu();return e+(this.isRed()?0:1)}}tA.EMPTY=null,tA.RED=!0,tA.BLACK=!1,tA.EMPTY=new class{constructor(){this.size=0}get key(){throw cu()}get value(){throw cu()}get color(){throw cu()}get left(){throw cu()}get right(){throw cu()}copy(e,t,n,r,o){return this}insert(e,t,n){return new tA(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nA{constructor(e){this.comparator=e,this.data=new $u(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rA(this.data.getIterator())}getIteratorFrom(e){return new rA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof nA))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nA(this.comparator);return t.data=e,t}}class rA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class oA{constructor(e){this.fields=e,e.sort(Tu.comparator)}static empty(){return new oA([])}unionWith(e){let t=new nA(Tu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new oA(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class aA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class iA{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new aA("Invalid base64 string: "+e):e}}(e);return new iA(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new iA(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ku(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}iA.EMPTY_BYTE_STRING=new iA("");const sA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cA(e){if(lu(!!e),"string"==typeof e){let t=0;const n=sA.exec(e);if(lu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lA(e.seconds),nanos:lA(e.nanos)}}function lA(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uA(e){return"string"==typeof e?iA.fromBase64String(e):iA.fromUint8Array(e)}function AA(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hA(e){const t=e.mapValue.fields.__previous_value__;return AA(t)?hA(t):t}function dA(e){const t=cA(e.mapValue.fields.__local_write_time__.timestampValue);return new Su(t.seconds,t.nanos)}class pA{constructor(e,t,n,r,o,a,i,s,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=s,this.useFetchStreams=c}}class fA{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fA("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fA&&e.projectId===this.projectId&&e.database===this.database}}const gA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mA(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?AA(e)?4:FA(e)?9007199254740991:10:cu()}function yA(e,t){if(e===t)return!0;const n=mA(e);if(n!==mA(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dA(e).isEqual(dA(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=cA(e.timestampValue),r=cA(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uA(e.bytesValue).isEqual(uA(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lA(e.geoPointValue.latitude)===lA(t.geoPointValue.latitude)&&lA(e.geoPointValue.longitude)===lA(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lA(e.integerValue)===lA(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lA(e.doubleValue),r=lA(t.doubleValue);return n===r?Wu(n)===Wu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bu(e.arrayValue.values||[],t.arrayValue.values||[],yA);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yu(n)!==Yu(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!yA(n[o],r[o])))return!1;return!0}(e,t);default:return cu()}}function vA(e,t){return void 0!==(e.values||[]).find((e=>yA(e,t)))}function bA(e,t){if(e===t)return 0;const n=mA(e),r=mA(t);if(n!==r)return ku(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ku(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lA(e.integerValue||e.doubleValue),r=lA(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wA(e.timestampValue,t.timestampValue);case 4:return wA(dA(e),dA(t));case 5:return ku(e.stringValue,t.stringValue);case 6:return function(e,t){const n=uA(e),r=uA(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=ku(n[o],r[o]);if(0!==e)return e}return ku(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ku(lA(e.latitude),lA(t.latitude));return 0!==n?n:ku(lA(e.longitude),lA(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=bA(n[o],r[o]);if(e)return e}return ku(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===gA.mapValue&&t===gA.mapValue)return 0;if(e===gA.mapValue)return 1;if(t===gA.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},a=Object.keys(o);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=ku(r[i],a[i]);if(0!==e)return e;const t=bA(n[r[i]],o[a[i]]);if(0!==t)return t}return ku(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cu()}}function wA(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ku(e,t);const n=cA(e),r=cA(t),o=ku(n.seconds,r.seconds);return 0!==o?o:ku(n.nanos,r.nanos)}function xA(e){return CA(e)}function CA(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=cA(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return uA(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return _u.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=CA(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(CA(e.fields[o]));return n+"}"}(e.mapValue):cu()}function kA(e){return!!e&&"integerValue"in e}function BA(e){return!!e&&"arrayValue"in e}function SA(e){return!!e&&"nullValue"in e}function IA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function EA(e){return!!e&&"mapValue"in e}function NA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Zu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=NA(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=NA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function FA(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class TA{constructor(e){this.value=e}static empty(){return new TA({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!EA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=NA(t)}setAll(e){let t=Tu.emptyPath(),n={},r=[];e.forEach(((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=NA(e):r.push(o.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());EA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yA(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];EA(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Zu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new TA(NA(this.value))}}function _A(e){const t=[];return Zu(e.fields,((e,n)=>{const r=new Tu([e]);if(EA(n)){const e=_A(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new oA(t)}class LA{constructor(e,t,n,r,o,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=a,this.documentState=i}static newInvalidDocument(e){return new LA(e,0,Iu.min(),Iu.min(),Iu.min(),TA.empty(),0)}static newFoundDocument(e,t,n,r){return new LA(e,1,t,Iu.min(),n,r,0)}static newNoDocument(e,t){return new LA(e,2,t,Iu.min(),Iu.min(),TA.empty(),0)}static newUnknownDocument(e,t){return new LA(e,3,t,Iu.min(),Iu.min(),TA.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Iu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=TA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=TA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Iu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof LA&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new LA(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class OA{constructor(e,t){this.position=e,this.inclusive=t}}function RA(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const a=t[o],i=e.position[o];if(r=a.field.isKeyField()?_u.comparator(_u.fromName(i.referenceValue),n.key):bA(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function UA(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!yA(e.position[n],t.position[n]))return!1;return!0}class DA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function PA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class MA{}class QA extends MA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qA(e,t,n):"array-contains"===t?new JA(e,n):"in"===t?new $A(e,n):"not-in"===t?new eh(e,n):"array-contains-any"===t?new th(e,n):new QA(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new XA(e,n):new YA(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bA(t,this.value)):null!==t&&mA(this.value)===mA(t)&&this.matchesComparison(bA(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class HA extends MA{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new HA(e,t)}matches(e){return zA(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function zA(e){return"and"===e.op}function VA(e){return jA(e)&&zA(e)}function jA(e){for(const t of e.filters)if(t instanceof HA)return!1;return!0}function WA(e){if(e instanceof QA)return e.field.canonicalString()+e.op.toString()+xA(e.value);if(VA(e))return e.filters.map((e=>WA(e))).join(",");{const t=e.filters.map((e=>WA(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function KA(e,t){return e instanceof QA?function(e,t){return t instanceof QA&&e.op===t.op&&e.field.isEqual(t.field)&&yA(e.value,t.value)}(e,t):e instanceof HA?function(e,t){return t instanceof HA&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&KA(n,t.filters[r])),!0)}(e,t):void cu()}function GA(e){return e instanceof QA?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(xA(e.value))}(e):e instanceof HA?function(e){return e.op.toString()+" {"+e.getFilters().map(GA).join(" ,")+"}"}(e):"Filter"}class qA extends QA{constructor(e,t,n){super(e,t,n),this.key=_u.fromName(n.referenceValue)}matches(e){const t=_u.comparator(e.key,this.key);return this.matchesComparison(t)}}class XA extends QA{constructor(e,t){super(e,"in",t),this.keys=ZA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YA extends QA{constructor(e,t){super(e,"not-in",t),this.keys=ZA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZA(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>_u.fromName(e.referenceValue)))}class JA extends QA{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return BA(t)&&vA(t.arrayValue,this.value)}}class $A extends QA{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vA(this.value.arrayValue,t)}}class eh extends QA{constructor(e,t){super(e,"not-in",t)}matches(e){if(vA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vA(this.value.arrayValue,t)}}class th extends QA{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!BA(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>vA(this.value.arrayValue,e)))}}class nh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=a,this.endAt=i,this.ce=null}}function rh(e){return new nh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function oh(e){const t=uu(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>WA(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ju(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>xA(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>xA(e))).join(",")),t.ce=e}return t.ce}function ah(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!PA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!KA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!UA(e.startAt,t.startAt)&&UA(e.endAt,t.endAt)}function ih(e){return _u.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class sh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=a,this.startAt=i,this.endAt=s,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ch(e,t,n,r,o,a,i,s){return new sh(e,t,n,r,o,a,i,s)}function lh(e){return new sh(e)}function uh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ah(e){return null!==e.collectionGroup}function hh(e){const t=uu(e);if(null===t.le){t.le=[];const e=new Set;for(const o of t.explicitOrderBy)t.le.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new nA(Tu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new DA(r,n))})),e.has(Tu.keyField().canonicalString())||t.le.push(new DA(Tu.keyField(),n))}return t.le}function dh(e){const t=uu(e);return t.he||(t.he=ph(t,hh(e))),t.he}function ph(e,t){if("F"===e.limitType)return rh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new DA(e.field,t)}));const n=e.endAt?new OA(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new OA(e.startAt.position,e.startAt.inclusive):null;return rh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function fh(e,t,n){return new sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gh(e,t){return ah(dh(e),dh(t))&&e.limitType===t.limitType}function mh(e){return"".concat(oh(dh(e)),"|lt:").concat(e.limitType)}function yh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>GA(e))).join(", "),"]")),ju(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>xA(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>xA(e))).join(",")),"Target(".concat(t,")")}(dh(e)),"; limitType=").concat(e.limitType,")")}function vh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):_u.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of hh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=RA(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hh(e),t))&&!(e.endAt&&!function(e,t,n){const r=RA(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hh(e),t))}(e,t)}function bh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wh(e){return(t,n)=>{let r=!1;for(const o of hh(e)){const e=xh(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function xh(e,t,n){const r=e.field.isKeyField()?_u.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?bA(r,o):cu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cu()}}class Ch{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zu(this.inner,((t,n)=>{for(const[r,o]of n)e(r,o)}))}isEmpty(){return Ju(this.inner)}size(){return this.innerSize}}const kh=new $u(_u.comparator);function Bh(){return kh}const Sh=new $u(_u.comparator);function Ih(){let e=Sh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function Eh(e){let t=Sh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Nh(){return Th()}function Fh(){return Th()}function Th(){return new Ch((e=>e.toString()),((e,t)=>e.isEqual(t)))}const _h=new $u(_u.comparator),Lh=new nA(_u.comparator);function Oh(){let e=Lh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const Rh=new nA(ku);function Uh(){return Rh}function Dh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(t)?"-0":t}}function Ph(e){return{integerValue:""+e}}function Mh(e,t){return Ku(t)?Ph(t):Dh(e,t)}class Qh{constructor(){this._=void 0}}function Hh(e,t,n){return e instanceof jh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&AA(t)&&(t=hA(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wh?Kh(e,t):e instanceof Gh?qh(e,t):function(e,t){const n=Vh(e,t),r=Yh(n)+Yh(e.Ie);return kA(n)&&kA(e.Ie)?Ph(r):Dh(e.serializer,r)}(e,t)}function zh(e,t,n){return e instanceof Wh?Kh(e,t):e instanceof Gh?qh(e,t):n}function Vh(e,t){return e instanceof Xh?function(e){return kA(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class jh extends Qh{}class Wh extends Qh{constructor(e){super(),this.elements=e}}function Kh(e,t){const n=Zh(t);for(const r of e.elements)n.some((e=>yA(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Gh extends Qh{constructor(e){super(),this.elements=e}}function qh(e,t){let n=Zh(t);for(const r of e.elements)n=n.filter((e=>!yA(e,r)));return{arrayValue:{values:n}}}class Xh extends Qh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Yh(e){return lA(e.integerValue||e.doubleValue)}function Zh(e){return BA(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Jh{constructor(e,t){this.version=e,this.transformResults=t}}class $h{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $h}static exists(e){return new $h(void 0,e)}static updateTime(e){return new $h(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class td{}function nd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hd(e.key,$h.none()):new sd(e.key,e.data,$h.none());{const n=e.data,r=TA.empty();let o=new nA(Tu.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new cd(e.key,r,new oA(o.toArray()),$h.none())}}function rd(e,t,n){e instanceof sd?function(e,t,n){const r=e.value.clone(),o=ud(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cd?function(e,t,n){if(!ed(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ud(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(ld(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function od(e,t,n,r){return e instanceof sd?function(e,t,n,r){if(!ed(e.precondition,t))return n;const o=e.value.clone(),a=Ad(e.fieldTransforms,r,t);return o.setAll(a),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof cd?function(e,t,n,r){if(!ed(e.precondition,t))return n;const o=Ad(e.fieldTransforms,r,t),a=t.data;return a.setAll(ld(e)),a.setAll(o),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ed(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ad(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),o=Vh(r.transform,e||null);null!=o&&(null===n&&(n=TA.empty()),n.set(r.field,o))}return n||null}function id(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wh&&t instanceof Wh||e instanceof Gh&&t instanceof Gh?Bu(e.elements,t.elements,yA):e instanceof Xh&&t instanceof Xh?yA(e.Ie,t.Ie):e instanceof jh&&t instanceof jh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sd extends td{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cd extends td{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ld(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ud(e,t,n){const r=new Map;lu(e.length===n.length);for(let o=0;o<n.length;o++){const a=e[o],i=a.transform,s=t.data.field(a.field);r.set(a.field,zh(i,s,n[o]))}return r}function Ad(e,t,n){const r=new Map;for(const o of e){const e=o.transform,a=n.data.field(o.field);r.set(o.field,Hh(e,a,t))}return r}class hd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dd extends td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&rd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=od(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=od(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fh();return this.mutations.forEach((r=>{const o=e.get(r.key),a=o.overlayedDocument;let i=this.applyToLocalView(a,o.mutatedFields);i=t.has(r.key)?null:i;const s=nd(a,i);null!==s&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Iu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oh())}isEqual(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,((e,t)=>id(e,t)))&&Bu(this.baseMutations,e.baseMutations,((e,t)=>id(e,t)))}}class fd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){lu(e.mutations.length===n.length);let r=_h;const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,n[a].version);return new fd(e,t,n,r)}}class gd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class md{constructor(e,t){this.count=e,this.unchangedNames=t}}var yd,vd;function bd(e){switch(e){default:return cu();case Au.CANCELLED:case Au.UNKNOWN:case Au.DEADLINE_EXCEEDED:case Au.RESOURCE_EXHAUSTED:case Au.INTERNAL:case Au.UNAVAILABLE:case Au.UNAUTHENTICATED:return!1;case Au.INVALID_ARGUMENT:case Au.NOT_FOUND:case Au.ALREADY_EXISTS:case Au.PERMISSION_DENIED:case Au.FAILED_PRECONDITION:case Au.ABORTED:case Au.OUT_OF_RANGE:case Au.UNIMPLEMENTED:case Au.DATA_LOSS:return!0}}function wd(e){if(void 0===e)return au("GRPC error has no .code"),Au.UNKNOWN;switch(e){case yd.OK:return Au.OK;case yd.CANCELLED:return Au.CANCELLED;case yd.UNKNOWN:return Au.UNKNOWN;case yd.DEADLINE_EXCEEDED:return Au.DEADLINE_EXCEEDED;case yd.RESOURCE_EXHAUSTED:return Au.RESOURCE_EXHAUSTED;case yd.INTERNAL:return Au.INTERNAL;case yd.UNAVAILABLE:return Au.UNAVAILABLE;case yd.UNAUTHENTICATED:return Au.UNAUTHENTICATED;case yd.INVALID_ARGUMENT:return Au.INVALID_ARGUMENT;case yd.NOT_FOUND:return Au.NOT_FOUND;case yd.ALREADY_EXISTS:return Au.ALREADY_EXISTS;case yd.PERMISSION_DENIED:return Au.PERMISSION_DENIED;case yd.FAILED_PRECONDITION:return Au.FAILED_PRECONDITION;case yd.ABORTED:return Au.ABORTED;case yd.OUT_OF_RANGE:return Au.OUT_OF_RANGE;case yd.UNIMPLEMENTED:return Au.UNIMPLEMENTED;case yd.DATA_LOSS:return Au.DATA_LOSS;default:return cu()}}(vd=yd||(yd={}))[vd.OK=0]="OK",vd[vd.CANCELLED=1]="CANCELLED",vd[vd.UNKNOWN=2]="UNKNOWN",vd[vd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vd[vd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vd[vd.NOT_FOUND=5]="NOT_FOUND",vd[vd.ALREADY_EXISTS=6]="ALREADY_EXISTS",vd[vd.PERMISSION_DENIED=7]="PERMISSION_DENIED",vd[vd.UNAUTHENTICATED=16]="UNAUTHENTICATED",vd[vd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vd[vd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vd[vd.ABORTED=10]="ABORTED",vd[vd.OUT_OF_RANGE=11]="OUT_OF_RANGE",vd[vd.UNIMPLEMENTED=12]="UNIMPLEMENTED",vd[vd.INTERNAL=13]="INTERNAL",vd[vd.UNAVAILABLE=14]="UNAVAILABLE",vd[vd.DATA_LOSS=15]="DATA_LOSS";let xd=null;function Cd(){return new TextEncoder}const kd=new Jl([4294967295,4294967295],0);function Bd(e){const t=Cd().encode(e),n=new Zl;return n.update(t),new Uint8Array(n.digest())}function Sd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jl([n,r],0),new Jl([o,a],0)]}class Id{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ed("Invalid padding: ".concat(t));if(n<0)throw new Ed("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ed("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ed("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Jl.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Jl.fromNumber(n)));return 1===r.compare(kd)&&(r=new Jl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Bd(e),[n,r]=Sd(t);for(let o=0;o<this.hashCount;o++){const e=this.de(n,r,o);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Id(o,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.Te)return;const t=Bd(e),[n,r]=Sd(t);for(let o=0;o<this.hashCount;o++){const e=this.de(n,r,o);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nd{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Nd(Iu.min(),r,new $u(ku),Bh(),Oh())}}class Fd{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fd(n,t,Oh(),Oh(),Oh())}}class Td{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class _d{constructor(e,t){this.targetId=e,this.fe=t}}class Ld{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iA.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Od{constructor(){this.ge=0,this.pe=Dd(),this.ye=iA.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Oh(),t=Oh(),n=Oh();return this.pe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cu()}})),new Fd(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Dd()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,lu(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Rd{constructor(e){this.Le=e,this.ke=new Map,this.qe=Bh(),this.Qe=Ud(),this.Ke=new $u(ku)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:cu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const o=r.target;if(ih(o))if(0===n){const e=new _u(o.path);this.We(t,e,LA.newNoDocument(e,Iu.min()))}else lu(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),o=n?this.et(n,e,r):1;if(0!==o){this.He(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==xd||xd.tt(function(e,t,n,r,o){var a,i,s,c,l,u;const A={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(A.bloomFilter={applied:0===o,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(c=null===(s=null===(i=null==h?void 0:h.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==h?void 0:h.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),A}(r,e.fe,this.Le.nt(),n,o))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let a,i;try{a=uA(n).toUint8Array()}catch(e){if(e instanceof aA)return iu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Id(a,r,o)}catch(e){return iu(e instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.Te?null:i}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const o=this.Le.nt(),a="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const o=this.Ye(r);if(o){if(n.current&&ih(o.target)){const t=new _u(o.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,LA.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Oh();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Nd(e,t,this.Ke,this.qe,n);return this.qe=Bh(),this.Qe=Ud(),this.Ke=new $u(ku),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Od,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nA(ku),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ou("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Od),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ud(){return new $u(_u.comparator)}function Dd(){return new $u(_u.comparator)}const Pd={asc:"ASCENDING",desc:"DESCENDING"},Md={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qd={and:"AND",or:"OR"};class Hd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zd(e,t){return e.useProto3Json||ju(t)?t:{value:t}}function Vd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wd(e,t){return Vd(e,t.toTimestamp())}function Kd(e){return lu(!!e),Iu.fromTimestamp(function(e){const t=cA(e);return new Su(t.seconds,t.nanos)}(e))}function Gd(e,t){return function(e){return new Nu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qd(e){const t=Nu.fromString(e);return lu(pp(t)),t}function Xd(e,t){return Gd(e.databaseId,t.path)}function Yd(e,t){const n=qd(t);if(n.get(1)!==e.databaseId.projectId)throw new hu(Au.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hu(Au.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new _u(ep(n))}function Zd(e,t){return Gd(e.databaseId,t)}function Jd(e){const t=qd(e);return 4===t.length?Nu.emptyPath():ep(t)}function $d(e){return new Nu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ep(e){return lu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tp(e,t,n){return{name:Xd(e,t),fields:n.value.mapValue.fields}}function np(e,t){let n;if(t instanceof sd)n={update:tp(e,t.key,t.value)};else if(t instanceof hd)n={delete:Xd(e,t.key)};else if(t instanceof cd)n={update:tp(e,t.key,t.data),updateMask:dp(t.fieldMask)};else{if(!(t instanceof dd))return cu();n={verify:Xd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof jh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xh)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw cu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cu()}(e,t.precondition)),n}function rp(e,t){return{documents:[Zd(e,t.path)]}}function op(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Zd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Zd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(e){if(0!==e.length)return hp(HA.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:up(e.field),direction:sp(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const i=zd(e,t.limit);return null!==i&&(n.structuredQuery.limit=i),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ap(e){let t=Jd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){lu(1===r);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=ip(e);return t instanceof HA&&VA(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map((e=>function(e){return new DA(Ap(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,ju(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new OA(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new OA(n,t)}(n.endAt)),ch(t,o,i,a,s,"F",c,l)}function ip(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ap(e.unaryFilter.field);return QA.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ap(e.unaryFilter.field);return QA.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ap(e.unaryFilter.field);return QA.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ap(e.unaryFilter.field);return QA.create(o,"!=",{nullValue:"NULL_VALUE"});default:return cu()}}(e):void 0!==e.fieldFilter?function(e){return QA.create(Ap(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return HA.create(e.compositeFilter.filters.map((e=>ip(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return cu()}}(e.compositeFilter.op))}(e):cu()}function sp(e){return Pd[e]}function cp(e){return Md[e]}function lp(e){return Qd[e]}function up(e){return{fieldPath:e.canonicalString()}}function Ap(e){return Tu.fromServerFormat(e.fieldPath)}function hp(e){return e instanceof QA?function(e){if("=="===e.op){if(IA(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NAN"}};if(SA(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(IA(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NAN"}};if(SA(e.value))return{unaryFilter:{field:up(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:up(e.field),op:cp(e.op),value:e.value}}}(e):e instanceof HA?function(e){const t=e.getFilters().map((e=>hp(e)));return 1===t.length?t[0]:{compositeFilter:{op:lp(e.op),filters:t}}}(e):cu()}function dp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function pp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class fp{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Iu.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Iu.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:iA.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=s}withSequenceNumber(e){return new fp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gp{constructor(e){this.ut=e}}function mp(e){const t=ap({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fh(t,t.limit,"L"):t}class yp{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(lA(e.integerValue));else if("doubleValue"in e){const n=lA(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Wu(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(uA(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?FA(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):cu()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),_u.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}yp.St=new yp;class vp{constructor(){this.on=new bp}addToCollectionParentIndex(e,t){return this.on.add(t),Hu.resolve()}getCollectionParents(e,t){return Hu.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Hu.resolve()}deleteFieldIndex(e,t){return Hu.resolve()}deleteAllFieldIndexes(e){return Hu.resolve()}createTargetIndexes(e,t){return Hu.resolve()}getDocumentsMatchingTarget(e,t){return Hu.resolve(null)}getIndexType(e,t){return Hu.resolve(0)}getFieldIndexes(e,t){return Hu.resolve([])}getNextCollectionGroupToUpdate(e){return Hu.resolve(null)}getMinOffset(e,t){return Hu.resolve(Uu.min())}getMinOffsetFromCollectionGroup(e,t){return Hu.resolve(Uu.min())}updateCollectionGroup(e,t,n){return Hu.resolve()}updateIndexEntries(e,t){return Hu.resolve()}}class bp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nA(Nu.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nA(Nu.comparator)).toArray()}}new Uint8Array(0);class wp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new wp(e,wp.DEFAULT_COLLECTION_PERCENTILE,wp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}wp.DEFAULT_COLLECTION_PERCENTILE=10,wp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wp.DEFAULT=new wp(41943040,wp.DEFAULT_COLLECTION_PERCENTILE,wp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wp.DISABLED=new wp(-1,0,0);class xp{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new xp(0)}static Nn(){return new xp(-1)}}class Cp{constructor(){this.changes=new Ch((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,LA.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Hu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&od(n.mutation,e,oA.empty(),Su.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Oh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oh();const r=Nh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ih();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Nh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Oh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let o=Bh();const a=Th(),i=Th();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof cd)?o=o.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),od(i.mutation,t,i.mutation.getFieldMask(),Su.now())):a.set(t.key,oA.empty())})),this.recalculateAndSaveOverlays(e,o).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new kp(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=Th();let r=new $u(((e,t)=>e-t)),o=Oh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const o of e)o.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||oA.empty();i=o.applyToLocalView(a,i),n.set(e,i);const s=(r.get(o.batchId)||Oh()).add(e);r=r.insert(o.batchId,s)}))})).next((()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),s=r.key,c=r.value,l=Fh();c.forEach((e=>{if(!o.has(e)){const r=nd(t.get(e),n.get(e));null!==r&&l.set(e,r),o=o.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Hu.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return _u.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ah(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):Hu.resolve(Nh());let i=-1,s=o;return a.next((t=>Hu.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),o.get(t)?Hu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,o))).next((()=>this.computeViews(e,s,t,Oh()))).next((e=>({batchId:i,changes:Eh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _u(t)).next((e=>{let t=Ih();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let a=Ih();return this.indexManager.getCollectionParents(e,o).next((i=>Hu.forEach(i,(i=>{const s=function(e,t){return new sh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(o));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r)))).next((e=>{o.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,LA.newInvalidDocument(r)))}));let n=Ih();return e.forEach(((e,r)=>{const a=o.get(e);void 0!==a&&od(a.mutation,r,oA.empty(),Su.now()),vh(t,r)&&(n=n.insert(e,r))})),n}))}}class Sp{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Hu.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Kd(e.createTime)}}(t)),Hu.resolve()}getNamedQuery(e,t){return Hu.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:mp(e.bundledQuery),readTime:Kd(e.readTime)}}(t)),Hu.resolve()}}class Ip{constructor(){this.overlays=new $u(_u.comparator),this.lr=new Map}getOverlay(e,t){return Hu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Nh();return Hu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Hu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Hu.resolve()}getOverlaysForCollection(e,t,n){const r=Nh(),o=t.length+1,a=new _u(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Hu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new $u(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=Nh(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Nh(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return Hu.resolve(i)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gd(t,n));let o=this.lr.get(t);void 0===o&&(o=Oh(),this.lr.set(t,o)),this.lr.set(t,o.add(n.key))}}class Ep{constructor(){this.hr=new nA(Np.Pr),this.Ir=new nA(Np.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new Np(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new Np(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new _u(new Nu([])),n=new Np(t,e),r=new Np(t,e+1),o=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),o.push(e.key)})),o}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new _u(new Nu([])),n=new Np(t,e),r=new Np(t,e+1);let o=Oh();return this.Ir.forEachInRange([n,r],(e=>{o=o.add(e.key)})),o}containsKey(e){const t=new Np(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Np{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return _u.comparator(e.key,t.key)||ku(e.gr,t.gr)}static Tr(e,t){return ku(e.gr,t.gr)||_u.comparator(e.key,t.key)}}class Fp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new nA(Np.Pr)}checkEmpty(e){return Hu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pd(o,t,n,r);this.mutationQueue.push(a);for(const i of r)this.yr=this.yr.add(new Np(i.key,o)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return Hu.resolve(a)}lookupMutationBatch(e,t){return Hu.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),o=r<0?0:r;return Hu.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Hu.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Hu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Np(t,0),r=new Np(t,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);o.push(t)})),Hu.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nA(ku);return t.forEach((e=>{const t=new Np(e,0),r=new Np(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Hu.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;_u.isDocumentKey(o)||(o=o.child(""));const a=new Np(new _u(o),0);let i=new nA(ku);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.gr)),!0)}),a),Hu.resolve(this.br(i))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){lu(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Hu.forEach(t.mutations,(r=>{const o=new Np(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new Np(t,0),r=this.yr.firstAfterOrEqual(n);return Hu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Hu.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tp{constructor(e){this.Cr=e,this.docs=new $u(_u.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Hu.resolve(n?n.document.mutableCopy():LA.newInvalidDocument(t))}getEntries(e,t){let n=Bh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():LA.newInvalidDocument(e))})),Hu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=Bh();const a=t.path,i=new _u(a.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Du(Ru(i),n)<=0||(r.has(i.key)||vh(t,i))&&(o=o.insert(i.key,i.mutableCopy()))}return Hu.resolve(o)}getAllFromCollectionGroup(e,t,n,r){cu()}vr(e,t){return Hu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new _p(this)}getSize(e){return Hu.resolve(this.size)}}class _p extends Cp{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Hu.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Lp{constructor(e){this.persistence=e,this.Fr=new Ch((e=>oh(e)),ah),this.lastRemoteSnapshotVersion=Iu.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ep,this.targetCount=0,this.Nr=xp.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Hu.resolve()}getLastRemoteSnapshotVersion(e){return Hu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Hu.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Hu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Hu.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Hu.resolve()}updateTargetData(e,t){return this.kn(t),Hu.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Hu.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.Fr.forEach(((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.Fr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),Hu.waitFor(o).next((()=>r))}getTargetCount(e){return Hu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Hu.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Hu.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((t=>{o.push(r.markPotentiallyOrphaned(e,t))})),Hu.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Hu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Hu.resolve(n)}containsKey(e,t){return Hu.resolve(this.Or.containsKey(t))}}class Op{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Vu(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Lp(this),this.indexManager=new vp,this.remoteDocumentCache=function(e){return new Tp(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new gp(t),this.Kr=new Sp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ip,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Fp(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){ou("MemoryPersistence","Starting transaction:",e);const r=new Rp(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Hu.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Rp extends Mu{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Gr=new Ep,this.zr=null}static jr(e){return new Up(e)}get Hr(){if(this.zr)return this.zr;throw cu()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Hu.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Hu.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Hu.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hu.forEach(this.Hr,(n=>{const r=_u.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Iu.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Hu.or([()=>Hu.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Dp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Oh(),r=Oh();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Dp(e,t.fromCache,n,r)}}class Pp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mp{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.zi(e,t).next((e=>{o.result=e})).next((()=>{if(!o.result)return this.ji(e,t,r,n).next((e=>{o.result=e}))})).next((()=>{if(o.result)return;const n=new Pp;return this.Hi(e,t,n).next((r=>{if(o.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>o.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(ru()<=St.DEBUG&&ou("QueryEngine","SDK will not create cache indexes for query:",yh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Hu.resolve()):(ru()<=St.DEBUG&&ou("QueryEngine","Query:",yh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(ru()<=St.DEBUG&&ou("QueryEngine","The SDK decides to create cache indexes for query:",yh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dh(t))):Hu.resolve())}zi(e,t){if(uh(t))return Hu.resolve(null);let n=dh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=fh(t,null,"F"),n=dh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const o=Oh(...r);return this.Gi.getDocuments(e,o).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.Yi(t,r);return this.Zi(t,a,o,n.readTime)?this.zi(e,fh(t,null,"F")):this.Xi(e,a,t,n)}))))})))))}ji(e,t,n,r){return uh(t)||r.isEqual(Iu.min())?Hu.resolve(null):this.Gi.getDocuments(e,n).next((o=>{const a=this.Yi(t,o);return this.Zi(t,a,n,r)?Hu.resolve(null):(ru()<=St.DEBUG&&ou("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yh(t)),this.Xi(e,a,t,Ou(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new nA(wh(e));return t.forEach(((t,r)=>{vh(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,t,n){return ru()<=St.DEBUG&&ou("QueryEngine","Using full collection scan to execute query:",yh(t)),this.Gi.getDocumentsMatchingQuery(e,t,Uu.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Qp{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new $u(ku),this.ns=new Ch((e=>oh(e)),ah),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bp(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Hp(e,t,n,r){return new Qp(e,t,n,r)}async function zp(e,t){const n=uu(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((o=>(r=o,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const o=[],a=[];let i=Oh();for(const e of r){o.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({_s:e,removedBatchIds:o,addedBatchIds:a})))}))}))}function Vp(e){const t=uu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function jp(e,t,n){let r=Oh(),o=Oh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Bh();return n.forEach(((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(o=o.add(n)),a.isNoDocument()&&a.version.isEqual(Iu.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ou("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),{us:r,cs:o}}))}function Wp(e,t){const n=uu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Kp(e,t){const n=uu(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((o=>o?(r=o,Hu.resolve(r)):n.qr.allocateTargetId(e).next((o=>(r=new fp(t,o,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function Gp(e,t,n){const r=uu(e),o=r.ts.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,o)))}catch(e){if(!zu(e))throw e;ou("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(o.target)}function qp(e,t,n){const r=uu(e);let o=Iu.min(),a=Oh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=uu(e),o=r.ns.get(n);return void 0!==o?Hu.resolve(r.ts.get(o)):r.qr.getTargetData(t,n)}(r,e,dh(t)).next((t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?o:Iu.min(),n?a:Oh()))).next((e=>(Xp(r,bh(t),e),{documents:e,ls:a})))))}function Xp(e,t,n){let r=e.rs.get(t)||Iu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}class Yp{constructor(){this.activeTargetIds=Uh()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zp{constructor(){this.eo=new Yp,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Yp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jp{ro(e){}shutdown(){}}class $p{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){ou("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){ou("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ef=null;function tf(){return null===ef?ef=268435456+Math.round(2147483648*Math.random()):ef++,"0x"+ef.toString(16)}const nf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rf{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const of="WebChannelConnection";class af extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,o){const a=tf(),i=this.So(e,t);ou("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),i,n);const s={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(s,r,o),this.Do(e,i,s,n).then((t=>(ou("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t)),(t=>{throw iu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",i,"request:",n),t}))}Co(e,t,n,r,o,a){return this.wo(e,t,n,r,o)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=nf[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const o=tf();return new Promise(((a,i)=>{const s=new Yl;s.setWithCredentials(!0),s.listenOnce(Kl.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Wl.NO_ERROR:const t=s.getResponseJson();ou(of,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),a(t);break;case Wl.TIMEOUT:ou(of,"RPC '".concat(e,"' ").concat(o," timed out")),i(new hu(Au.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const n=s.getStatus();if(ou(of,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Au).indexOf(t)>=0?t:Au.UNKNOWN}(t.status);i(new hu(e,t.message))}else i(new hu(Au.UNKNOWN,"Server responded with status "+s.getStatus()))}else i(new hu(Au.UNAVAILABLE,"Connection failed."));break;default:cu()}}finally{ou(of,"RPC '".concat(e,"' ").concat(o," completed."))}}));const c=JSON.stringify(r);ou(of,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",c,n,15)}))}vo(e,t,n){const r=tf(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Vl(),i=jl(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.bo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=o.join("");ou(of,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);const u=a.createWebChannel(l,s);let A=!1,h=!1;const d=new rf({co:t=>{h?ou(of,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(A||(ou(of,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),A=!0),ou(of,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Xl.EventType.OPEN,(()=>{h||ou(of,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Xl.EventType.CLOSE,(()=>{h||(h=!0,ou(of,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Ro())})),p(u,Xl.EventType.ERROR,(t=>{h||(h=!0,iu(of,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Ro(new hu(Au.UNAVAILABLE,"The operation could not be completed")))})),p(u,Xl.EventType.MESSAGE,(t=>{var n;if(!h){const o=t.data[0];lu(!!o);const a=o,i=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){ou(of,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=yd[e];if(void 0!==t)return wd(t)}(t),o=i.message;void 0===n&&(n=Au.INTERNAL,o="Unknown error status: "+t+" with message "+i.message),h=!0,d.Ro(new hu(n,o)),u.close()}else ou(of,"RPC '".concat(e,"' stream ").concat(r," received:"),o),d.Vo(o)}})),p(i,Gl.STAT_EVENT,(t=>{t.stat===ql.PROXY?ou(of,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ql.NOPROXY&&ou(of,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{d.Ao()}),0),d}}function sf(){return"undefined"!=typeof document?document:null}function cf(e){return new Hd(e,!0)}class lf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&ou("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class uf{constructor(e,t,n,r,o,a,i,s){this.si=e,this.Ko=n,this.$o=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=s,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new lf(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Au.RESOURCE_EXHAUSTED?(au(t.toString()),au("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Au.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new hu(Au.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return ou("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(ou("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Af extends uf{constructor(e,t,n,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=o}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cu()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(lu(void 0===t||"string"==typeof t),iA.fromBase64String(t||"")):(lu(void 0===t||t instanceof Uint8Array),iA.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,s=i&&function(e){const t=void 0===e.code?Au.UNKNOWN:wd(e.code);return new hu(t,e.message||"")}(i);n=new Ld(r,o,a,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Yd(e,r.document.name),a=Kd(r.document.updateTime),i=r.document.createTime?Kd(r.document.createTime):Iu.min(),s=new TA({mapValue:{fields:r.document.fields}}),c=LA.newFoundDocument(o,a,i,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Td(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Yd(e,r.document),a=r.readTime?Kd(r.readTime):Iu.min(),i=LA.newNoDocument(o,a),s=r.removedTargetIds||[];n=new Td([],s,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Yd(e,r.document),a=r.removedTargetIds||[];n=new Td([],a,o,null)}else{if(!("filter"in t))return cu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:o}=e,a=new md(r,o),i=e.targetId;n=new _d(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Iu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Iu.min():t.readTime?Kd(t.readTime):Iu.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=$d(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ih(r)?{documents:rp(e,r)}:{query:op(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jd(e,t.resumeToken);const r=zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Iu.min())>0){n.readTime=Vd(e,t.snapshotVersion.toTimestamp());const r=zd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=$d(this.serializer),t.removeTarget=e,this.e_(t)}}class hf extends uf{constructor(e,t,n,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(lu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(lu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Kd(e.updateTime):Kd(t);return n.isEqual(Iu.min())&&(n=Kd(t)),new Jh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Kd(e.commitTime);return this.listener.I_(n,t)}return lu(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=$d(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>np(this.serializer,e)))};this.e_(t)}}class df extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new hu(Au.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[o,a]=r;return this.connection.wo(e,t,n,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Au.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hu(Au.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[a,i]=o;return this.connection.Co(e,t,n,a,i,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Au.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hu(Au.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class pf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(au(t),this.f_=!1):ou("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class ff{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro((e=>{n.enqueueAndForget((async()=>{kf(this)&&(ou("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=uu(e);t.C_.add(4),await mf(t),t.M_.set("Unknown"),t.C_.delete(4),await gf(t)}(this))}))})),this.M_=new pf(n,r)}}async function gf(e){if(kf(e))for(const t of e.v_)await t(!0)}async function mf(e){for(const t of e.v_)await t(!1)}function yf(e,t){const n=uu(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Cf(n)?xf(n):zf(n).Ho()&&bf(n,t))}function vf(e,t){const n=uu(e),r=zf(n);n.D_.delete(t),r.Ho()&&wf(n,t),0===n.D_.size&&(r.Ho()?r.Zo():kf(n)&&n.M_.set("Unknown"))}function bf(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Iu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zf(e).u_(t)}function wf(e,t){e.x_.Oe(t),zf(e).c_(t)}function xf(e){e.x_=new Rd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),zf(e).start(),e.M_.g_()}function Cf(e){return kf(e)&&!zf(e).jo()&&e.D_.size>0}function kf(e){return 0===uu(e).C_.size}function Bf(e){e.x_=void 0}async function Sf(e){e.D_.forEach(((t,n)=>{bf(e,t)}))}async function If(e,t){Bf(e),Cf(e)?(e.M_.w_(t),xf(e)):e.M_.set("Unknown")}async function Ef(e,t,n){if(e.M_.set("Online"),t instanceof Ld&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){ou("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Nf(e,n)}else if(t instanceof Td?e.x_.$e(t):t instanceof _d?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Iu.min()))try{const t=await Vp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const o=e.D_.get(r);o&&e.D_.set(r,o.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(iA.EMPTY_BYTE_STRING,r.snapshotVersion)),wf(e,t);const o=new fp(r.target,t,n,r.sequenceNumber);bf(e,o)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ou("RemoteStore","Failed to raise snapshot:",t),await Nf(e,t)}}async function Nf(e,t,n){if(!zu(t))throw t;e.C_.add(1),await mf(e),e.M_.set("Offline"),n||(n=()=>Vp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ou("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await gf(e)}))}function Ff(e,t){return t().catch((n=>Nf(e,n,t)))}async function Tf(e){const t=uu(e),n=Vf(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;_f(t);)try{const e=await Wp(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Lf(t,e)}catch(e){await Nf(t,e)}Of(t)&&Rf(t)}function _f(e){return kf(e)&&e.b_.length<10}function Lf(e,t){e.b_.push(t);const n=Vf(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Of(e){return kf(e)&&!Vf(e).jo()&&e.b_.length>0}function Rf(e){Vf(e).start()}async function Uf(e){Vf(e).E_()}async function Df(e){const t=Vf(e);for(const n of e.b_)t.P_(n.mutations)}async function Pf(e,t,n){const r=e.b_.shift(),o=fd.from(r,t,n);await Ff(e,(()=>e.remoteSyncer.applySuccessfulWrite(o))),await Tf(e)}async function Mf(e,t){t&&Vf(e).h_&&await async function(e,t){if(function(e){return bd(e)&&e!==Au.ABORTED}(t.code)){const n=e.b_.shift();Vf(e).Yo(),await Ff(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Tf(e)}}(e,t),Of(e)&&Rf(e)}async function Qf(e,t){const n=uu(e);n.asyncQueue.verifyOperationInProgress(),ou("RemoteStore","RemoteStore received new credentials");const r=kf(n);n.C_.add(3),await mf(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await gf(n)}async function Hf(e,t){const n=uu(e);t?(n.C_.delete(2),await gf(n)):t||(n.C_.add(2),await mf(n),n.M_.set("Unknown"))}function zf(e){return e.O_||(e.O_=function(e,t,n){const r=uu(e);return r.A_(),new Af(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Sf.bind(null,e),Io:If.bind(null,e),a_:Ef.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Cf(e)?xf(e):e.M_.set("Unknown")):(await e.O_.stop(),Bf(e))}))),e.O_}function Vf(e){return e.N_||(e.N_=function(e,t,n){const r=uu(e);return r.A_(),new hf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Uf.bind(null,e),Io:Mf.bind(null,e),T_:Df.bind(null,e),I_:Pf.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Tf(e)):(await e.N_.stop(),e.b_.length>0&&(ou("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class jf{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new du,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const a=Date.now()+n,i=new jf(e,t,a,r,o);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hu(Au.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(e,t){if(au("AsyncQueue","".concat(t,": ").concat(e)),zu(e))return new hu(Au.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Kf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||_u.comparator(t.key,n.key):(e,t)=>_u.comparator(e.key,t.key),this.keyedMap=Ih(),this.sortedSet=new $u(this.comparator)}static emptySet(e){return new Kf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Gf{constructor(){this.B_=new $u(_u.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):cu():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class qf{constructor(e,t,n,r,o,a,i,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,o){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new qf(e,t,Kf.emptySet(t),a,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xf{constructor(){this.k_=void 0,this.listeners=[]}}class Yf{constructor(){this.queries=new Ch((e=>mh(e)),gh),this.onlineState="Unknown",this.q_=new Set}}async function Zf(e,t){const n=uu(e),r=t.query;let o=!1,a=n.queries.get(r);if(a||(o=!0,a=new Xf),o)try{a.k_=await n.onListen(r)}catch(e){const n=Wf(e,"Initialization of query '".concat(yh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,a),a.listeners.push(t),t.Q_(n.onlineState),a.k_&&t.K_(a.k_)&&tg(n)}async function Jf(e,t){const n=uu(e),r=t.query;let o=!1;const a=n.queries.get(r);if(a){const e=a.listeners.indexOf(t);e>=0&&(a.listeners.splice(e,1),o=0===a.listeners.length)}if(o)return n.queries.delete(r),n.onUnlisten(r)}function $f(e,t){const n=uu(e);let r=!1;for(const o of t){const e=o.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(o)&&(r=!0);t.k_=o}}r&&tg(n)}function eg(e,t,n){const r=uu(e),o=r.queries.get(t);if(o)for(const a of o.listeners)a.onError(n);r.queries.delete(t)}function tg(e){e.q_.forEach((e=>{e.next()}))}class ng{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new qf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=qf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class rg{constructor(e){this.key=e}}class og{constructor(e){this.key=e}}class ag{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Oh(),this.mutatedKeys=Oh(),this._a=wh(e),this.aa=new Kf(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new Gf,r=t?t.aa:this.aa;let o=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=vh(this.query,t)?t:null,A=!!l&&this.mutatedKeys.has(l.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let d=!1;l&&u?l.data.isEqual(u.data)?A!==h&&(n.track({type:3,doc:u}),d=!0):this.ha(l,u)||(n.track({type:2,doc:u}),d=!0,(s&&this._a(u,s)>0||c&&this._a(u,c)<0)&&(i=!0)):!l&&u?(n.track({type:0,doc:u}),d=!0):l&&!u&&(n.track({type:1,doc:l}),d=!0,(s||c)&&(i=!0)),d&&(u?(a=a.add(u),o=h?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{aa:a,la:n,Zi:i,mutatedKeys:o}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const a=e.la.L_();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cu()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const i=t&&!r?this.Ia():[],s=0===this.oa.size&&this.current&&!r?1:0,c=s!==this.sa;return this.sa=s,0!==a.length||c?{snapshot:new qf(this.query,e.aa,o,a,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:i}:{Ta:i}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Gf,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Oh(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new og(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new rg(n))})),t}da(e){this.ia=e.ls,this.oa=Oh();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return qf.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class ig{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class sg{constructor(e){this.key=e,this.Ra=!1}}class cg{constructor(e,t,n,r,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Va={},this.ma=new Ch((e=>mh(e)),gh),this.fa=new Map,this.ga=new Set,this.pa=new $u(_u.comparator),this.ya=new Map,this.wa=new Ep,this.Sa={},this.ba=new Map,this.Da=xp.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function lg(e,t){const n=Ig(e);let r,o;const a=n.ma.get(t);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),o=a.view.Aa();else{const e=await Kp(n.localStore,dh(t)),a=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,o=await ug(n,t,r,"current"===a,e.resumeToken),n.isPrimaryClient&&yf(n.remoteStore,e)}return o}async function ug(e,t,n,r,o){e.va=(t,n,r)=>async function(e,t,n,r){let o=t.view.ca(n);o.Zi&&(o=await qp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,o)})));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,a,i);return wg(e,t.targetId,s.Ta),s.snapshot}(e,t,n,r);const a=await qp(e.localStore,t,!0),i=new ag(t,a.ls),s=i.ca(a.documents),c=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),l=i.applyChanges(s,e.isPrimaryClient,c);wg(e,n,l.Ta);const u=new ig(t,n,i);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function Ag(e,t){const n=uu(e),r=n.ma.get(t),o=n.fa.get(r.targetId);if(o.length>1)return n.fa.set(r.targetId,o.filter((e=>!gh(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Gp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),vf(n.remoteStore,r.targetId),vg(n,r.targetId)})).catch(Qu)):(vg(n,r.targetId),await Gp(n.localStore,r.targetId,!0))}async function hg(e,t){const n=uu(e);try{const e=await function(e,t){const n=uu(e),r=t.snapshotVersion;let o=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.ss.newChangeBuffer({trackRemovals:!0});o=n.ts;const i=[];t.targetChanges.forEach(((a,s)=>{const c=o.get(s);if(!c)return;i.push(n.qr.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.qr.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(iA.EMPTY_BYTE_STRING,Iu.min()).withLastLimboFreeSnapshotVersion(Iu.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),o=o.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&i.push(n.qr.updateTargetData(e,l))}));let s=Bh(),c=Oh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(jp(e,a,t.documentUpdates).next((e=>{s=e.us,c=e.cs}))),!r.isEqual(Iu.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return Hu.waitFor(i).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.ts=o,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(lu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?lu(r.Ra):e.removedDocuments.size>0&&(lu(r.Ra),r.Ra=!1))})),await kg(n,e,t)}catch(e){await Qu(e)}}function dg(e,t,n){const r=uu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const o=r.view.Q_(t);o.snapshot&&e.push(o.snapshot)})),function(e,t){const n=uu(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const o of n.listeners)o.Q_(t)&&(r=!0)})),r&&tg(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pg(e,t,n){const r=uu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.ya.get(t),a=o&&o.key;if(a){let e=new $u(_u.comparator);e=e.insert(a,LA.newNoDocument(a,Iu.min()));const n=Oh().add(a),o=new Nd(Iu.min(),new Map,new $u(ku),e,n);await hg(r,o),r.pa=r.pa.remove(a),r.ya.delete(t),Cg(r)}else await Gp(r.localStore,t,!1).then((()=>vg(r,t,n))).catch(Qu)}async function fg(e,t){const n=uu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=uu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const o=n.batch,a=o.keys();let i=Hu.resolve();return a.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);lu(null!==a),t.version.compareTo(a)<0&&(o.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,o)))}(n,e,t,o).next((()=>o.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Oh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yg(n,r,null),mg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kg(n,e)}catch(e){await Qu(e)}}async function gg(e,t,n){const r=uu(e);try{const e=await function(e,t){const n=uu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(lu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yg(r,t,n),mg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kg(r,e)}catch(n){await Qu(n)}}function mg(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function yg(e,t,n){const r=uu(e);let o=r.Sa[r.currentUser.toKey()];if(o){const e=o.get(t);e&&(n?e.reject(n):e.resolve(),o=o.remove(t)),r.Sa[r.currentUser.toKey()]=o}}function vg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||bg(e,t)}))}function bg(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(vf(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Cg(e))}function wg(e,t,n){for(const r of n)r instanceof rg?(e.wa.addReference(r.key,t),xg(e,r)):r instanceof og?(ou("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||bg(e,r.key)):cu()}function xg(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(ou("SyncEngine","New document in limbo: "+n),e.ga.add(r),Cg(e))}function Cg(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new _u(Nu.fromString(t)),r=e.Da.next();e.ya.set(r,new sg(n)),e.pa=e.pa.insert(n,r),yf(e.remoteStore,new fp(dh(lh(n.path)),r,"TargetPurposeLimboResolution",Vu._e))}}async function kg(e,t,n){const r=uu(e),o=[],a=[],i=[];r.ma.isEmpty()||(r.ma.forEach(((e,s)=>{i.push(r.va(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);const t=Dp.Qi(s.targetId,e);a.push(t)}})))})),await Promise.all(i),r.Va.a_(o),await async function(e,t){const n=uu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Hu.forEach(t,(t=>Hu.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Hu.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!zu(e))throw e;ou("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,o)}}}(r.localStore,a))}async function Bg(e,t){const n=uu(e);if(!n.currentUser.isEqual(t)){ou("SyncEngine","User change. New user:",t.toKey());const e=await zp(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new hu(Au.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await kg(n,e._s)}}function Sg(e,t){const n=uu(e),r=n.ya.get(t);if(r&&r.Ra)return Oh().add(r.key);{let e=Oh();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}function Ig(e){const t=uu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pg.bind(null,t),t.Va.a_=$f.bind(null,t.eventManager),t.Va.Fa=eg.bind(null,t.eventManager),t}function Eg(e){const t=uu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gg.bind(null,t),t}class Ng{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Hp(this.persistence,new Mp,e.initialUser,this.serializer)}createPersistence(e){return new Op(Up.jr,this.serializer)}createSharedClientState(e){return new Zp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bg.bind(null,this.syncEngine),await Hf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Yf}createDatastore(e){const t=cf(e.databaseInfo.databaseId),n=function(e){return new af(e)}(e.databaseInfo);return function(e,t,n,r){return new df(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,o){return new ff(e,t,n,r,o)}(this.localStore,this.datastore,e.asyncQueue,(e=>dg(this.syncEngine,e,0)),$p.D()?new $p:new Jp)}createSyncEngine(e,t){return function(e,t,n,r,o,a,i){const s=new cg(e,t,n,r,o,a);return i&&(s.Ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=uu(e);ou("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await mf(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}class Tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):au("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class _g{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=eu.UNAUTHENTICATED,this.clientId=Cu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ou("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ou("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hu(Au.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new du;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(dve){const n=Wf(dve,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Lg(e,t){e.asyncQueue.verifyOperationInProgress(),ou("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await zp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Og(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ug(e);ou("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Qf(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Qf(t.remoteStore,n))),e._onlineComponents=t}function Rg(e){return"FirebaseError"===e.name?e.code===Au.FAILED_PRECONDITION||e.code===Au.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ug(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ou("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lg(e,e._uninitializedComponentsProvider._offline)}catch(dve){const n=dve;if(!Rg(n))throw n;iu("Error using user provided cache. Falling back to memory cache: "+n),await Lg(e,new Ng)}}else ou("FirestoreClient","Using default OfflineComponentProvider"),await Lg(e,new Ng);return e._offlineComponents}async function Dg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ou("FirestoreClient","Using user provided OnlineComponentProvider"),await Og(e,e._uninitializedComponentsProvider._online)):(ou("FirestoreClient","Using default OnlineComponentProvider"),await Og(e,new Fg))),e._onlineComponents}function Pg(e){return Dg(e).then((e=>e.syncEngine))}async function Mg(e){const t=await Dg(e),n=t.eventManager;return n.onListen=lg.bind(null,t.syncEngine),n.onUnlisten=Ag.bind(null,t.syncEngine),n}function Qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new du;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,o){const a=new Tg({next:a=>{t.enqueueAndForget((()=>Jf(e,i)));const s=a.docs.has(n);!s&&a.fromCache?o.reject(new hu(Au.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?o.reject(new hu(Au.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(a)},error:e=>o.reject(e)}),i=new ng(lh(n.path),a,{includeMetadataChanges:!0,J_:!0});return Zf(e,i)}(await Mg(e),e.asyncQueue,t,n,r))),r.promise}function Hg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const zg=new Map;function Vg(e,t,n){if(!n)throw new hu(Au.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jg(e){if(!_u.isDocumentKey(e))throw new hu(Au.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wg(e){if(_u.isDocumentKey(e))throw new hu(Au.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":cu()}function Gg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hu(Au.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kg(e);throw new hu(Au.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class qg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new hu(Au.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hu(Au.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new hu(Au.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hu(Au.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new hu(Au.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new hu(Au.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hu(Au.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hu(Au.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fu;switch(e.type){case"firstParty":return new vu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hu(Au.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zg.get(e);t&&(ou("ComponentProvider","Removing Datastore"),zg.delete(e),t.terminate())}(this),Promise.resolve()}}class Yg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yg(this.firestore,e,this._query)}}class Zg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zg(this.firestore,e,this._key)}}class Jg extends Yg{constructor(e,t,n){super(e,t,lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zg(this.firestore,null,new _u(e))}withConverter(e){return new Jg(this.firestore,e,this._path)}}function $g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=vt(e),1===arguments.length&&(t=Cu.newId()),Vg("doc","path",t),e instanceof Xg){const n=Nu.fromString(t,...r);return jg(n),new Zg(e,null,new _u(n))}{if(!(e instanceof Zg||e instanceof Jg))throw new hu(Au.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Nu.fromString(t,...r));return jg(n),new Zg(e.firestore,e instanceof Jg?e.converter:null,new _u(n))}}class em{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new lf(this,"async_queue_retry"),this.iu=()=>{const e=sf();e&&ou("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=sf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=sf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new du;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!zu(e))throw e;ou("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw au("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=jf.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&cu()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}class tm extends Xg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new em,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||om(this),this._firestoreClient.terminate()}}function nm(e,t){const n="string"==typeof e?e:t||"(default)",r=an("object"==typeof e?e:An(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=rt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var o;const a=(e=Gg(e,Xg))._getSettings(),i="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==i&&iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:i,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=eu.MOCK_USER;else{t=st(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new hu(Au.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eu(a)}e._authCredentials=new gu(new pu(t,n))}}(r,...e)}return r}function rm(e){return e._firestoreClient||om(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function om(e){var t,n,r;const o=e._freezeSettings(),a=function(e,t,n,r){return new pA(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Hg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._firestoreClient=new _g(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=o.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=o.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.localCache.kind,_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider})}class am{constructor(e){this._byteString=e}static fromBase64String(e){try{return new am(iA.fromBase64String(e))}catch(e){throw new hu(Au.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new am(iA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class im{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new hu(Au.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sm{constructor(e){this._methodName=e}}class cm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hu(Au.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hu(Au.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ku(this._lat,e._lat)||ku(this._long,e._long)}}const lm=/^__.*__$/;class um{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new sd(e,this.data,t,this.fieldTransforms)}}function Am(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cu()}}class hm{constructor(e,t,n,r,o,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Cm(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Am(this.Iu)&&lm.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class dm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cf(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hm({Iu:e,methodName:t,gu:n,path:Tu.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pm(e){const t=e._freezeSettings(),n=cf(e._databaseId);return new dm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fm(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.pu(a.merge||a.mergeFields?2:0,t,n,o);vm("Data must be an object, but it was:",i,r);const s=mm(r,i);let c,l;if(a.merge)c=new oA(i.fieldMask),l=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const o=bm(t,r,n);if(!i.contains(o))throw new hu(Au.INVALID_ARGUMENT,"Field '".concat(o,"' is specified in your field mask but missing from your input data."));km(e,o)||e.push(o)}c=new oA(e),l=i.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=i.fieldTransforms;return new um(new TA(s),c,l)}function gm(e,t){if(ym(e=vt(e)))return vm("Unsupported field value:",t,e),mm(e,t);if(e instanceof sm)return function(e,t){if(!Am(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const o of e){let e=gm(o,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Mh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Su.fromDate(e);return{timestampValue:Vd(t.serializer,n)}}if(e instanceof Su){const n=new Su(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vd(t.serializer,n)}}if(e instanceof cm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof am)return{bytesValue:jd(t.serializer,e._byteString)};if(e instanceof Zg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Gd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Kg(e)))}(e,t)}function mm(e,t){const n={};return Ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zu(e,((e,r)=>{const o=gm(r,t.Eu(e));null!=o&&(n[e]=o)})),{mapValue:{fields:n}}}function ym(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Su||e instanceof cm||e instanceof am||e instanceof Zg||e instanceof sm)}function vm(e,t,n){if(!ym(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Kg(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function bm(e,t,n){if((t=vt(t))instanceof im)return t._internalPath;if("string"==typeof t)return xm(e,t);throw Cm("Field path arguments must be of type string or ",e,!1,void 0,n)}const wm=new RegExp("[~\\*/\\[\\]]");function xm(e,t,n){if(t.search(wm)>=0)throw Cm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new im(...t.split("."))._internalPath}catch(qa){throw Cm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cm(e,t,n,r,o){const a=r&&!r.isEmpty(),i=void 0!==o;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||i)&&(c+=" (found",a&&(c+=" in field ".concat(r)),i&&(c+=" in document ".concat(o)),c+=")"),new hu(Au.INVALID_ARGUMENT,s+e+c)}function km(e,t){return e.some((e=>e.isEqual(t)))}class Bm{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Im("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sm extends Bm{data(){return super.data()}}function Im(e,t){return"string"==typeof t?xm(e,t):t instanceof im?t._internalPath:t._delegate._internalPath}class Em{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(mA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lA(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Zu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cm(lA(e.latitude),lA(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hA(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dA(e));default:return null}}convertTimestamp(e){const t=cA(e);return new Su(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nu.fromString(e);lu(pp(n));const r=new fA(n.get(1),n.get(3)),o=new _u(n.popFirst(5));return r.isEqual(t)||au("Document ".concat(o," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),o}}function Nm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Fm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tm extends Bm{constructor(e,t,n,r,o,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Im("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _m extends Tm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Lm extends Em{constructor(e){super(),this.firestore=e}convertBytes(e){return new am(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zg(this.firestore,null,t)}}function Om(e,t){return function(e,t){const n=new du;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Eg(e);try{const e=await function(e,t){const n=uu(e),r=Su.now(),o=t.reduce(((e,t)=>e.add(t.key)),Oh());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=Bh(),c=Oh();return n.ss.getEntries(e,o).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((o=>{a=o;const i=[];for(const e of t){const t=ad(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new cd(e.key,t,_A(t.value.mapValue),$h.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Eh(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new $u(ku)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await kg(r,e.changes),await Tf(r.remoteStore)}catch(e){const t=Wf(e,"Failed to persist write");n.reject(t)}}(await Pg(e),t,n))),n.promise}(rm(e),t)}function Rm(e,t,n){const r=n.docs.get(t._key),o=new Lm(e);return new Tm(e,o,t._key,r,new Fm(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tu=e}(ln),on(new bt("firestore",((e,n)=>{let{instanceIdentifier:r,options:o}=n;const a=e.getProvider("app").getImmediate(),i=new tm(new mu(e.getProvider("auth-internal")),new wu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hu(Au.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fA(e.options.projectId,t)}(a,r),a);return o=Object.assign({useFetchStreams:t},o),i._setSettings(o),i}),"PUBLIC").setMultipleInstances(!0)),hn($l,"4.4.0",e),hn($l,"4.4.0","esm2017")}();const Um="firebasestorage.googleapis.com",Dm="storageBucket";class Pm extends lt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Hm(e),"Firebase Storage: ".concat(t," (").concat(Hm(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pm.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Mm,Qm;function Hm(e){return"storage/"+e}function zm(){return new Pm(Mm.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Vm(){return new Pm(Mm.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jm(){return new Pm(Mm.CANCELED,"User canceled the upload/download.")}function Wm(){return new Pm(Mm.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Km(e){return new Pm(Mm.INVALID_ARGUMENT,e)}function Gm(){return new Pm(Mm.APP_DELETED,"The Firebase app was deleted.")}function qm(e,t){return new Pm(Mm.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xm(e){throw new Pm(Mm.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Mm||(Mm={}));class Ym{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ym.makeFromUrl(e,t)}catch(o){return new Ym(e,"")}if(""===n.path)return n;throw r=e,new Pm(Mm.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const o=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const i=t.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(i,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(t===Um?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}];for(let c=0;c<s.length;c++){const t=s[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let o=r[t.indices.path];o||(o=""),n=new Ym(e,o),t.postModify(n);break}}if(null==n)throw function(e){return new Pm(Mm.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Zm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Jm(e){return"string"===typeof e||e instanceof String}function $m(e){return ey()&&e instanceof Blob}function ey(){return"undefined"!==typeof Blob}function ty(e,t,n,r){if(r<t)throw Km("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Km("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ny(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ry(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function oy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),o=-1!==t.indexOf(e);return n||r||o}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Qm||(Qm={}));class ay{constructor(e,t,n,r,o,a,i,s,c,l,u){let A=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=i,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new iy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Qm.NO_ERROR,o=n.getStatus();if(!t||oy(o,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Qm.ABORT;return void e(!1,new iy(!1,null,t))}const a=-1!==this.successCodes_.indexOf(o);e(!0,new iy(a,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,o=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(o,o.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(a){r(a)}else if(null!==o){const e=zm();e.serverResponse=o.getErrorText(),this.errorCallback_?r(this.errorCallback_(o,e)):r(e)}else if(t.canceled){r(this.appDelete_?Gm():jm())}else{r(Vm())}};this.canceled_?t(0,new iy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,o=null,a=null,i=!1,s=0;function c(){return 2===s}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function A(t){o=setTimeout((()=>{o=null,e(d,c())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(l)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(e)return h(),void u.call(null,e,...n);if(c()||i)return h(),void u.call(null,e,...n);let a;r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),A(a)}let p=!1;function f(e){p||(p=!0,h(),l||(null!==o?(e||(s=2),clearTimeout(o),A(0)):e||(s=1)))}return A(0),a=setTimeout((()=>{i=!0,f(!0)}),n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class iy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function sy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cy(){const e=sy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ey())return new Blob(n);throw new Pm(Mm.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ly(e){if("undefined"===typeof atob)throw t="base-64",new Pm(Mm.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const uy={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ay{constructor(e,t){this.data=e,this.contentType=t||null}}function hy(e,t){switch(e){case uy.RAW:return new Ay(dy(t));case uy.BASE64:case uy.BASE64URL:return new Ay(py(e,t));case uy.DATA_URL:return new Ay(function(e){const t=new fy(e);return t.base64?py(uy.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw qm(uy.DATA_URL,"Malformed data URL.")}return dy(t)}(t.rest)}(t),new fy(t).contentType)}throw zm()}function dy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function py(e,t){switch(e){case uy.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw qm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case uy.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw qm(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ly(t)}catch(o){if(o.message.includes("polyfill"))throw o;throw qm(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class fy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw qm(uy.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class gy{constructor(e,t){let n=0,r="";$m(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if($m(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new gy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new gy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ey()){const e=t.map((e=>e instanceof gy?e.data_:e));return new gy(cy.apply(null,e))}{const e=t.map((e=>Jm(e)?hy(uy.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let o=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[o++]=e[t]})),new gy(r,!0)}}uploadData(){return this.data_}}function my(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function vy(e,t){return t}class by{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||vy}}let wy=null;function xy(){if(wy)return wy;const e=[];e.push(new by("bucket")),e.push(new by("generation")),e.push(new by("metageneration")),e.push(new by("name","fullPath",!0));const t=new by("name");t.xform=function(e,t){return function(e){return!Jm(e)||e.length<2?e:yy(e)}(t)},e.push(t);const n=new by("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new by("timeCreated")),e.push(new by("updated")),e.push(new by("md5Hash",null,!0)),e.push(new by("cacheControl",null,!0)),e.push(new by("contentDisposition",null,!0)),e.push(new by("contentEncoding",null,!0)),e.push(new by("contentLanguage",null,!0)),e.push(new by("contentType",null,!0)),e.push(new by("metadata","customMetadata",!0)),wy=e,wy}function Cy(e,t,n){const r={type:"file"},o=n.length;for(let a=0;a<o;a++){const e=n[a];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,o=new Ym(n,r);return t._makeStorageReference(o)}})}(r,e),r}function ky(e,t,n){const r=my(t);if(null===r)return null;return Cy(e,r,n)}function By(e,t){const n={},r=t.length;for(let o=0;o<r;o++){const r=t[o];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Sy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Iy(e){if(!e)throw zm()}function Ey(e,t){return function(n,r){const o=ky(e,r,t);return Iy(null!==o),o}}function Ny(e,t){return function(n,r){const o=ky(e,r,t);return Iy(null!==o),function(e,t,n,r){const o=my(t);if(null===o)return null;if(!Jm(o.downloadTokens))return null;const a=o.downloadTokens;if(0===a.length)return null;const i=encodeURIComponent,s=a.split(",").map((t=>{const o=e.bucket,a=e.fullPath;return ny("/b/"+i(o)+"/o/"+i(a),n,r)+ry({alt:"media",token:t})}));return s[0]}(o,r,e.host,e._protocol)}}function Fy(e){return function(t,n){let r;var o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Pm(Mm.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Pm(Mm.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Pm(Mm.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):r=403===t.getStatus()?function(e){return new Pm(Mm.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Ty(e){const t=Fy(e);return function(n,r){let o=t(n,r);return 404===n.getStatus()&&(o=function(e){return new Pm(Mm.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),o.serverResponse=r.serverResponse,o}}function _y(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ly(e,t,n,r,o){const a=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};const s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i["Content-Type"]="multipart/related; boundary="+s;const c=_y(t,r,o),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+By(c,n)+"\r\n--"+s+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+s+"--",A=gy.getBlob(l,r,u);if(null===A)throw Wm();const h={name:c.fullPath},d=ny(a,e.host,e._protocol),p=e.maxUploadRetryTime,f=new Sy(d,"POST",Ey(e,n),p);return f.urlParams=h,f.headers=i,f.body=A.uploadData(),f.errorHandler=Fy(t),f}let Oy=null;class Ry{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qm.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Qm.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Qm.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Xm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Xm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Uy extends Ry{initXhr(){this.xhr_.responseType="text"}}function Dy(){return Oy?Oy():new Uy}class Py{constructor(e,t){this._service=e,this._location=t instanceof Ym?t:Ym.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Py(e,t)}get root(){const e=new Ym(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Ym(this._location.bucket,e);return new Py(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Pm(Mm.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function My(e,t,n){e._throwIfRoot("uploadBytes");const r=Ly(e.storage,e._location,xy(),new gy(t,!0),n);return e.storage.makeRequestWithTokens(r,Dy).then((t=>({metadata:t,ref:e})))}function Qy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ny(t.fullServerUrl(),e.host,e._protocol),o=e.maxOperationRetryTime,a=new Sy(r,"GET",Ny(e,n),o);return a.errorHandler=Ty(t),a}(e.storage,e._location,xy());return e.storage.makeRequestWithTokens(t,Dy).then((e=>{if(null===e)throw new Pm(Mm.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Hy(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Ym(e._location.bucket,n);return new Py(e.storage,r)}function zy(e,t){if(e instanceof Wy){const n=e;if(null==n._bucket)throw new Pm(Mm.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dm+"' property when initializing the app?");const r=new Py(n,n._bucket);return null!=t?zy(r,t):r}return void 0!==t?Hy(e,t):e}function Vy(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof Wy)return new Py(e,t);throw Km("To use ref(service, url), the first argument must be a Storage instance.")}return zy(e,t)}function jy(e,t){const n=null===t||void 0===t?void 0:t[Dm];return null==n?null:Ym.makeFromBucketSpec(n,e)}class Wy{constructor(e,t,n,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=Um,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ym.makeFromBucketSpec(r,this._host):jy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Ym.makeFromBucketSpec(this._url,e):this._bucket=jy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ty("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ty("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Py(this,e)}_makeRequest(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Zm(Gm());{const a=function(e,t,n,r,o,a){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=ry(e.urlParams),c=e.url+s,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new ay(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,i)}(e,this._appId,n,r,t,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Ky="@firebase/storage",Gy="0.12.0",qy="storage";function Xy(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Wy(r,o,a,n,ln)}on(new bt(qy,Xy,"PUBLIC").setMultipleInstances(!0)),hn(Ky,Gy,""),hn(Ky,Gy,"esm2017");const Yy=un({apiKey:"AIzaSyCmTY1E23andMrelb0724IQptrg2yirWII",authDomain:"thietchancra.firebaseapp.com",projectId:"thietchancra",storageBucket:"thietchancra.appspot.com",messagingSenderId:"487309131835",appId:"1:487309131835:web:27b4f88fb20d57ff359c1e"}),Zy=nm(Yy),Jy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An();const t=an(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=an(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ht(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Tn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ea,persistence:[Po,wo,Co]}),r=at("authTokenSyncURL");if(r){const e=(o=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>_a)return;const r=null===t||void 0===t?void 0:t.token;La!==r&&(La=r,await fetch(o,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){vt(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){vt(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var o;const a=nt("auth");return a&&zr(n,"http://".concat(a)),n}(Yy),$y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An(),t=arguments.length>1?arguments[1]:void 0;e=vt(e);const n=an(e,qy).getImmediate({identifier:t}),r=rt("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:st(o,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Yy);var ev=n(184);const tv=()=>{const[e,t]=(0,F.useState)(""),[n,r]=(0,F.useState)(""),o=Ie();return(0,ev.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,ev.jsxs)("div",{className:"w-full max-w-xs border-2 rounded-lg p-6",children:[(0,ev.jsx)("h2",{className:"mb-6 text-2xl font-bold text-center text-gray-700",children:"Thi\u1ec7t Ch\u1ea9n L\u1ee5c Kh\xed-v1"}),(0,ev.jsx)("h2",{className:"mb-6 text-3xl font-bold text-center text-gray-700",children:"\u0110\u0102NG NH\u1eacP"}),(0,ev.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await function(e,t,n){return fo(vt(e),eo.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&go(e),t}))}(Jy,e,n),console.log("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng"),o("/upload")}catch(r){console.error("\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",r.message)}},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,ev.jsx)("div",{className:"mb-4",children:(0,ev.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value)})}),(0,ev.jsx)("div",{className:"mb-6",children:(0,ev.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"M\u1eadt kh\u1ea9u",value:n,onChange:e=>r(e.target.value)})}),(0,ev.jsx)("div",{className:"flex items-center justify-between",children:(0,ev.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"\u0110\u0103ng nh\u1eadp"})})]}),(0,ev.jsxs)("p",{className:"text-center text-gray-500 text-xs",children:["B\u1ea1n ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? ",(0,ev.jsx)("a",{href:"#",className:"text-blue-500 hover:text-blue-800",children:"\u0110\u0103ng k\xed"})]})]})})};var nv=n(2831),rv=n.n(nv);const ov=()=>{const[e,t]=(0,F.useState)(null),[n,r]=(0,F.useState)(null),o=(0,F.useRef)(null);return(0,ev.jsxs)("div",{className:"p-4 max-w-sm mx-auto",children:[(0,ev.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){const n=new FileReader;n.onload=function(e){t(e.target.result),o.current||(o.current=new(rv())(document.getElementById("croppie-container"),{viewport:{width:200,height:200,type:"square"},boundary:{width:300,height:300},enableResize:!0})),o.current.bind({url:e.target.result})},n.readAsDataURL(e.target.files[0])}},className:"block w-full text-sm py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:border-indigo-500"}),(0,ev.jsx)("div",{id:"croppie-container"}),(0,ev.jsx)("div",{className:"flex justify-center",children:(0,ev.jsx)("button",{onClick:()=>{o.current.result({type:"base64",size:"original",format:"jpeg",quality:1}).then((e=>{r(e),sessionStorage.setItem("croppedImage",e),console.log("Image saved to sessionStorage with original size")}))},disabled:!e,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600",style:{minWidth:"170px"},children:"C\u1eaft \u1ea3nh"})}),n&&(0,ev.jsx)("div",{className:"flex justify-center mt-4",children:(0,ev.jsx)("img",{src:n,alt:"Cropped",className:"block rounded-md shadow-lg object-cover",style:{width:"300px",height:"auto"}})})]})};class av{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class iv{refCount(e){return sv("refCount")}incRef(e){return sv("incRef")}timerAvailable(){return!0}time(e){return sv("time")}read(e){return sv("read")}readSync(e){return sv("readSync")}readToGPU(e,t){return sv("readToGPU")}numDataIds(){return sv("numDataIds")}disposeData(e,t){return sv("disposeData")}write(e,t,n){return sv("write")}move(e,t,n,r,o){return sv("move")}createTensorFromGPUData(e,t,n){return sv("createTensorFromGPUData")}memory(){return sv("memory")}floatPrecision(){return sv("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return sv("dispose")}}function sv(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function lv(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,hv(e,t,n)}function uv(e,t,n){return Math.max(e,Math.min(t,n))}function Av(e){return e%2===0?e:e+1}function hv(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function dv(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function pv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";dv(mv(e,t),(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}function fv(e){dv(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function gv(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function mv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function yv(e){return e%1===0}function vv(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function bv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function wv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((o,a)=>{let i=0;const s=()=>{if(e())return void o();i++;const c=t(i);null!=n&&i>=n?a():null!=r?r(s,c):setTimeout(s,c)};s()}))}function xv(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const o=e.slice();return o[r]=t/n,o}function Cv(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),dv(e.every((e=>e>=-n&&e<n)),(()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e))),dv(e.every((e=>yv(e))),(()=>"All values in axis param must be integers but "+"got axis ".concat(e))),e.map((e=>e<0?n+e:e))}function kv(e,t){const n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:Cv(t,e).sort();let i=0;for(let s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Bv(e,t){return Sv(e,t)}function Sv(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Iv(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Ev(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Nv(e){return"string"===typeof e||e instanceof String}function Fv(e){return"number"===typeof e}function Tv(e){return Array.isArray(e)?Tv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Fv(e)?"float32":Nv(e)?"string":"boolean"===typeof e?"bool":"float32"}function _v(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Lv(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Ov(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Rv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new Array;if(1===t.length){const a=t[0]*(r?2:1);for(let t=0;t<a;t++)o[t]=n[e+t]}else{const a=t[0],i=t.slice(1),s=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<a;t++)o[t]=Rv(e+t*s,i,n,r)}return o}function Uv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Rv(0,e,t,n)}function Dv(e,t){const n=Pv(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Pv(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Mv(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return Uv(e,new Float32Array(n));if("int32"===t)return Uv(e,new Int32Array(n));if("bool"===t)return Uv(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Qv(e){e.forEach((t=>{dv(Number.isInteger(t)&&t>=0,(()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")))}))}function Hv(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function zv(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function Vv(e){return e&&e.then&&"function"===typeof e.then}const jv="tfjsflags";class Wv{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Kv,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Gv().getBool("IS_TEST")||Gv().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Gv().getBool("IS_TEST")||Gv().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Vv(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(jv in e){e[jv].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)}))}}}function Kv(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function Gv(){return Xv}let qv,Xv=null;function Yv(){if(null==qv){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}qv=e}return qv}function Zv(e,t){const n=function(){const e=Yv();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Jv="Abs",$v="Acos",eb="Acosh",tb="Add",nb="AddN",rb="All",ob="Any",ab="ArgMax",ib="ArgMin",sb="Asin",cb="Asinh",lb="Atan",ub="Atanh",Ab="Atan2",hb="AvgPool",db="AvgPoolGrad",pb="AvgPool3D",fb="AvgPool3DGrad",gb="BatchMatMul",mb="BatchToSpaceND",yb="Bincount",vb="BitwiseAnd",bb="BroadcastArgs",wb="Cast",xb="Ceil",Cb="ClipByValue",kb="Complex",Bb="ComplexAbs",Sb="Concat",Ib="Conv2D",Eb="Conv2DBackpropFilter",Nb="Conv2DBackpropInput",Fb="Conv3D",Tb="Conv3DBackpropFilterV2",_b="Conv3DBackpropInputV2",Lb="Cos",Ob="Cosh",Rb="Cumprod",Ub="Cumsum",Db="CropAndResize",Pb="DenseBincount",Mb="DepthToSpace",Qb="DepthwiseConv2dNative",Hb="DepthwiseConv2dNativeBackpropFilter",zb="DepthwiseConv2dNativeBackpropInput",Vb="Diag",jb="Dilation2D",Wb="Dilation2DBackpropInput",Kb="Dilation2DBackpropFilter",Gb="Draw",qb="RealDiv",Xb="Einsum",Yb="Elu",Zb="EluGrad",Jb="Erf",$b="Equal",ew="Exp",tw="ExpandDims",nw="Expm1",rw="FFT",ow="Fill",aw="FlipLeftRight",iw="Floor",sw="FloorDiv",cw="FusedBatchNorm",lw="GatherV2",uw="GatherNd",Aw="Greater",hw="GreaterEqual",dw="Identity",pw="IFFT",fw="Imag",gw="IsFinite",mw="IsInf",yw="IsNan",vw="LeakyRelu",bw="Less",ww="LessEqual",xw="LinSpace",Cw="Log",kw="Log1p",Bw="LogicalAnd",Sw="LogicalNot",Iw="LogicalOr",Ew="LRN",Nw="LRNGrad",Fw="Max",Tw="Maximum",_w="MaxPool",Lw="MaxPoolGrad",Ow="MaxPool3D",Rw="MaxPool3DGrad",Uw="MaxPoolWithArgmax",Dw="Mean",Pw="Min",Mw="Minimum",Qw="MirrorPad",Hw="Mod",zw="Multinomial",Vw="Multiply",jw="Neg",Ww="NotEqual",Kw="NonMaxSuppressionV3",Gw="NonMaxSuppressionV4",qw="NonMaxSuppressionV5",Xw="OnesLike",Yw="OneHot",Zw="Pack",Jw="PadV2",$w="Pow",ex="Prelu",tx="Prod",nx="RaggedGather",rx="RaggedRange",ox="RaggedTensorToTensor",ax="Range",ix="Real",sx="Reciprocal",cx="Relu",lx="Reshape",ux="ResizeNearestNeighbor",Ax="ResizeNearestNeighborGrad",hx="ResizeBilinear",dx="ResizeBilinearGrad",px="Relu6",fx="Reverse",gx="Round",mx="Rsqrt",yx="ScatterNd",vx="TensorScatterUpdate",bx="SearchSorted",wx="Select",xx="Selu",Cx="Slice",kx="Sin",Bx="Sinh",Sx="Sign",Ix="Sigmoid",Ex="Softplus",Nx="Sqrt",Fx="Sum",Tx="SpaceToBatchND",_x="SplitV",Lx="Softmax",Ox="SparseFillEmptyRows",Rx="SparseReshape",Ux="SparseSegmentMean",Dx="SparseSegmentSum",Px="SparseToDense",Mx="SquaredDifference",Qx="Square",Hx="StaticRegexReplace",zx="StridedSlice",Vx="StringNGrams",jx="StringSplit",Wx="StringToHashBucketFast",Kx="Sub",Gx="Tan",qx="Tanh",Xx="Tile",Yx="TopK",Zx="Transform",Jx="Transpose",$x="Unique",eC="Unpack",tC="UnsortedSegmentSum",nC="ZerosLike",rC="Step",oC="FromPixels",aC="RotateWithOffset",iC="_FusedMatMul",sC="FusedConv2D",cC="FusedDepthwiseConv2D";function lC(){Gv().getBool("IS_TEST")||Gv().getBool("PROD")||console.warn(...arguments)}function uC(){Gv().getBool("IS_TEST")||Gv().getBool("PROD")||console.log(...arguments)}const AC=Zv("kernelRegistry",(()=>new Map)),hC=Zv("gradRegistry",(()=>new Map));function dC(e,t){const n=yC(e,t);return AC.get(n)}function pC(e){return hC.get(e)}function fC(e){const t=AC.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[a,i]=o,[s]=a.split("_");s===e&&n.push(i)}return n}function gC(e){const{kernelName:t,backendName:n}=e,r=yC(t,n);AC.has(r)&&lC("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),AC.set(r,e)}function mC(e){const{kernelName:t}=e;hC.has(t)&&Gv().getBool("DEBUG")&&lC("Overriding the gradient for '".concat(t,"'")),hC.set(t,e)}function yC(e,t){return"".concat(t,"_").concat(e)}function vC(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var bC=n(8097);const wC=n.n(bC)()||bC;function xC(e){return wC.fromString(e,!0,16)}const CC=xC("c3a5c85c97cb3127"),kC=xC("b492b66fbe98f273"),BC=xC("9ae16a3b2f90404f");function SC(e){return e.xor(e.shru(47))}function IC(e,t,n){const r=e.slice(t,t+n);return wC.fromBytes(Array.from(r),!0,!0)}function EC(e,t){return IC(e,t,8)}function NC(e,t){return IC(e,t,4)}function FC(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function TC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xC("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function _C(e,t,n,r){return function(e,t,n,r,o,a){o=o.add(e),a=FC(a.add(o).add(r),21);const i=o;return o=(o=o.add(t)).add(n),a=a.add(FC(o,44)),[o.add(r),a.add(i)]}(EC(e,t),EC(e,t+8),EC(e,t+16),EC(e,t+24),n,r)}function LC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=wC.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=BC.add(2*t),r=EC(e,0).add(BC),o=EC(e,t-8);return TC(FC(o,37).mul(n).add(r),FC(r,25).add(o).mul(n),n)}if(t>=4){const n=BC.add(2*t);return TC(NC(e,0).shl(3).add(t),NC(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return SC(BC.mul(n).xor(CC.mul(r))).mul(BC)}return BC}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=BC.add(2*t),r=EC(e,0).mul(kC),o=EC(e,8),a=EC(e,t-8).mul(n),i=EC(e,t-16).mul(BC);return TC(FC(r.add(o),43).add(FC(a,30)).add(i),r.add(FC(o.add(BC),18)).add(a),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=BC.add(2*t),r=EC(e,0).mul(BC),o=EC(e,8),a=EC(e,t-8).mul(n),i=EC(e,t-16).mul(BC),s=FC(r.add(o),43).add(FC(a,30)).add(i),c=TC(s,r.add(FC(o.add(BC),18)).add(a),n),l=EC(e,16).mul(n),u=EC(e,24),A=s.add(EC(e,t-32)).mul(n),h=c.add(EC(e,t-24)).mul(n);return TC(FC(l.add(u),43).add(FC(A,30)).add(h),l.add(FC(u.add(r),18)).add(A),n)}(e,t);let r=n,o=n.mul(kC).add(113),a=SC(o.mul(BC).add(113)).mul(BC),i=[wC.UZERO,wC.UZERO],s=[wC.UZERO,wC.UZERO];r=r.mul(BC).add(EC(e,0));let c=0;const l=64*(t-1>>6),u=l+(t-1&63)-63;do{r=FC(r.add(o).add(i[0]).add(EC(e,c+8)),37).mul(kC),o=FC(o.add(i[1]).add(EC(e,c+48)),42).mul(kC),r=r.xor(s[1]),o=o.add(i[0]).add(EC(e,c+40)),a=FC(a.add(s[0]),33).mul(kC),i=_C(e,c,i[1].mul(kC),r.add(s[0])),s=_C(e,c+32,a.add(s[1]),o.add(EC(e,c+16))),[a,r]=[r,a],c+=64}while(c!==l);const A=kC.add(a.and(255).shl(1));return c=u,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=FC(r.add(o).add(i[0]).add(EC(e,c+8)),37).mul(A),o=FC(o.add(i[1]).add(EC(e,c+48)),42).mul(A),r=r.xor(s[1].mul(9)),o=o.add(i[0].mul(9).add(EC(e,c+40))),a=FC(a.add(s[0]),33).mul(A),i=_C(e,c,i[1].mul(A),r.add(s[0])),s=_C(e,c+32,a.add(s[1]),o.add(EC(e,c+16))),[a,r]=[r,a],TC(TC(i[0],s[0],A).add(SC(o).mul(CC)).add(a),TC(i[1],s[1],A).add(r),A)}function OC(e,t){return"string"===t?DC(e):RC([e],t)}function RC(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=QC(e)),Gv().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function UC(){return Gv().platform.now()}function DC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Gv().platform.encode(e,t)}function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Gv().platform.decode(e,t)}function MC(e){return null!=Gv().platform.isTypedArray?Gv().platform.isTypedArray(e):vC(e)}function QC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||Vv(e)||null==e||MC(e)&&n)t.push(e);else if(Array.isArray(e)||MC(e))for(let r=0;r<e.length;++r)QC(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let o=0;o<=r;o++)QC(e[o],t,n)}return t}class HC{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new VC)}profileKernel(e,t,n){let r;const o=()=>{r=n()};let a;const i=UC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const e of r)e.dataSync();a=Promise.resolve({kernelMs:UC()-i})}if(Gv().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{zC(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((e=>e.kernelMs)),extraInfo:a.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:o,extraInfo:a}=e;n.forEach((e=>{Promise.all([e.data(),r,a]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],o,n[2])}))}))}}function zC(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class VC{logKernelProfile(e,t,n,r,o,a){const i="number"===typeof r?bv("".concat(r,"ms"),9):r.error,s=bv(e,25),c=t.rank,l=t.size,u=bv(t.shape.toString(),14);let A="";for(const h in o){const e=o[h];if(null!=e){const n=e.shape||t.shape,r=n.length;A+="".concat(h,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(c,"D ").concat(u,"\t%c").concat(l,"\t%c").concat(A,"\t%c").concat(a),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const jC=20,WC=3,KC=7;function GC(e,t,n,r){const o=Ov(t),a=function(e,t,n,r){const o=gv(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,c="complex64"===n?ZC(e):e;if(s>1)for(let l=0;l<o/a;l++){const e=l*a;for(let t=0;t<a;t++)i[t]=Math.max(i[t],qC(c[e+t],0,n).length)}return i}(e,t,n,o),i=t.length,s=YC(e,t,n,o,a),c=["Tensor"];return r&&(c.push("  dtype: ".concat(n)),c.push("  rank: ".concat(i)),c.push("  shape: [".concat(t,"]")),c.push("  values:")),c.push(s.map((e=>"    "+e)).join("\n")),c.join("\n")}function qC(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(KC))," + ")+"".concat(parseFloat(e[1].toFixed(KC)),"j"):Nv(e)?"'".concat(e,"'"):"bool"===n?XC(e):parseFloat(e.toFixed(KC)).toString(),bv(r,t)}function XC(e){return 0===e?"false":"true"}function YC(e,t,n,r,o){let a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i="complex64"===n?2:1,s=t[0],c=t.length;if(0===c){if("complex64"===n){return[qC(ZC(e)[0],0,n)]}return"bool"===n?[XC(e[0])]:[e[0].toString()]}if(1===c){if(s>jC){const t=WC*i;let r=Array.from(e.slice(0,t)),a=Array.from(e.slice((s-WC)*i,s*i));return"complex64"===n&&(r=ZC(r),a=ZC(a)),["["+r.map(((e,t)=>qC(e,o[t],n))).join(", ")+", ..., "+a.map(((e,t)=>qC(e,o[s-WC+t],n))).join(", ")+"]"]}return["["+("complex64"===n?ZC(e):Array.from(e)).map(((e,t)=>qC(e,o[t],n))).join(", ")+"]"]}const l=t.slice(1),u=r.slice(1),A=r[0]*i,h=[];if(s>jC){for(let t=0;t<WC;t++){const r=t*A,a=r+A;h.push(...YC(e.slice(r,a),l,n,u,o,!1))}h.push("...");for(let t=s-WC;t<s;t++){const r=t*A,a=r+A;h.push(...YC(e.slice(r,a),l,n,u,o,t===s-1))}}else for(let f=0;f<s;f++){const t=f*A,r=t+A;h.push(...YC(e.slice(t,r),l,n,u,o,f===s-1))}const d=2===c?",":"";h[0]="["+(s>0?h[0]+d:"");for(let f=1;f<h.length-1;f++)h[f]=" "+h[f]+d;let p=",\n";for(let f=2;f<c;f++)p+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":p),h}function ZC(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class JC{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=gv(e),null!=n){const e=n.length;dv(e===this.size,(()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'.")))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Sv(t,this.size),this.strides=Ov(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),dv(n.length===this.rank,(()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")")));const o=this.locToIndex(n);this.values[o]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const a of t){if(a<0||a>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let o=t[t.length-1];for(let a=0;a<t.length-1;++a)o+=this.strides[a]*t[a];return this.values[o]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return $C().makeTensor(this.values,this.shape,this.dtype)}}let $C=null,ek=null,tk=null;class nk{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=gv(e),this.strides=Ov(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return ek.buffer(this.shape,this.dtype,e)}bufferSync(){return ek.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Uv(this.shape,e,"complex64"===this.dtype)}arraySync(){return Uv(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=$C().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>PC(e)))}catch(Vge){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),$C().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=$C().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>PC(e)))}catch(Vge){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await $C().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),$C().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ek.print(this,e)}clone(){return this.throwIfDisposed(),ek.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GC(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),ek.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),$C().makeVariable(this,e,t,n)}}function rk(){return Zv("Tensor",(()=>nk))}Object.defineProperty(nk,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),rk();class ok extends nk{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!mv(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));$C().disposeTensor(this),this.dataId=e.dataId,$C().incRef(this,null)}dispose(){$C().disposeVariable(this),this.isDisposedInternal=!0}}var ak,ik,sk,ck,lk;Object.defineProperty(ok,Symbol.hasInstance,{value:e=>e instanceof nk&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(ak||(ak={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(ik||(ik={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(sk||(sk={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ck||(ck={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(lk||(lk={}));const uk={float32:ck,int32:ik,bool:sk,complex64:lk};function Ak(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return uk[e][t]}function hk(e){return Ak(e,"int32")}function dk(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function pk(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function fk(e,t){if(e.dtype===t.dtype)return[e,t];const n=Ak(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function gk(e,t){return t.some((t=>t.id===e.id))}function mk(e){const t=[];return yk(e,t,new Set),t}function yk(e,t,n){if(null==e)return;if(e instanceof nk)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const o=e;for(const a in o){const e=o[a];n.has(e)||(n.add(e),yk(e,t,n))}}function vk(e){return null!=e.kernelName}class bk{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class wk{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new bk}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(lC("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new HC(this.backendInstance),!0}setupRegisteredKernels(){fC(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){fC(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof iv||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,lC("Initialization of backend ".concat(e," failed")),lC(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return lC("Initialization of backend ".concat(e," failed")),lC(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t),a=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,o,n.shape,n.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return wk.nextTensorId++}nextVariableId(){return wk.nextVariableId++}clone(e){const t=Ck.runKernel(dw,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return Ck.runKernel(wb,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=dC(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let o=0;n.forEach((e=>{o+="complex64"===e.dtype?3:1}));const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;let i,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=vk(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(vk(e)){const{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;const c=dC(t,this.backendName);dv(null!=c,(()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'"))),i=()=>{const e=this.backend.numDataIds();s=c.kernelFunc({inputs:o,attrs:a,backend:this.backend});const i=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const l=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,o,l);n=this.saveTensorsForBackwardMode(e)}return l}}else{const{forwardFunc:t}=e,o=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,o)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,e,n),n}}const{inputs:l,attrs:u}=e,A=vk(e)?null:e.backwardsFunc;let h;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(c,l,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()})),r&&this.addTapeNode(c,l,t,A,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map((e=>null!=l[e]?l[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=pC(e);if(null!=r){const e=r.inputsToSave||[],o=r.outputsToSave||[];let a;r.saveAllInputs?(dv(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),a=Object.keys(t).map((e=>t[e]))):a=e.map((e=>t[e]));const i=n.filter(((e,t)=>o[t]));return a.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=e;"string"===n&&Nv(e[0])&&(o=e.map((e=>DC(e))));const a=r.write(o,t,n),i=new nk(t,n,a,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(a),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(o);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const o={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(o,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:o}=e,a=new nk(r,o,n,this.nextTensorId());return this.trackTensor(a,t),a}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const o=new ok(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name ".concat(o.name," was already registered"));return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ev(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof ok||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*Ev(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=pC(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=Pv(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],o,a))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=mk(e),n=new Set(t.map((e=>e.id)));for(let o=0;o<this.state.activeScope.track.length;o++){const e=this.state.activeScope.track[o];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(dv(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));dv(o instanceof nk,(()=>"The result y returned by f() must be a tensor."));const a=function(e,t,n){const r={},o={};for(let c=0;c<t.length;c++)r[t[c].id]=!0;for(let c=0;c<e.length;c++){const n=e[c],a=n.inputs;for(const e in a){const i=a[e];let s=!1;for(let e=0;e<t.length;e++)if(r[i.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,o[n.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const i={};for(let c=e.length-1;c>=0;c--){const t=e[c],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(a[t.outputs[e].id]){for(const e in n)a[n[e].id]=!0,i[t.id]=!0;break}}const s=[];for(let c=0;c<e.length;c++){const t=e[c];if(o[t.id]&&i[t.id]){const e={};for(const o in t.inputs){const n=t.inputs[o];r[n.id]&&(e[o]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[o.id]=null==n?function(e){const t=Dv(gv(e),"float32");return Ck.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(let o=t.length-1;o>=0;o--){const a=t[o],i=[];if(a.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));const s=a.gradient(i);for(const t in a.inputs){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));const o=n((()=>s[t]()));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(o.dtype,"'"));const i=a.inputs[t];if(!mv(o.shape,i.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=o;else{const t=e[i.id];e[i.id]=r(t,o),t.dispose()}}}}(e,a,(e=>this.tidy(e)),kk);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(e){var t=this;return dv(_v(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a;dv(r.every((e=>e instanceof nk)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const i={};r.forEach(((e,t)=>{i[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(a=e(...r,n),dv(a.value instanceof nk,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),dv(_v(a.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),a.value),backwardsFunc:(e,t)=>{const n=a.gradFunc(e,t),o=Array.isArray(n)?n:[n];dv(o.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),dv(o.every((e=>e instanceof nk)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return o.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=UC(),n=await this.backend.time(e);return n.wallMs=UC()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new bk;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function xk(){const e=Yv();if(null==e._tfengine){const t=new Wv(e);e._tfengine=new wk(t)}var t;return t=e._tfengine.ENV,Xv=t,$C=()=>e._tfengine,e._tfengine}wk.nextTensorId=0,wk.nextVariableId=0;const Ck=xk();function kk(e,t){const n={a:e,b:t};return Ck.runKernel(tb,n)}let Bk;function Sk(e){if(void 0!==Bk)return Bk;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Ik(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const Ek=Gv();function Nk(e,t){let n=e;if(MC(e))return"string"===t?[]:[e.length];if(dk(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(pk(e))return[e.buffer.size/(null==t?4:Ev(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||MC(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Gv().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Fk(e,r,[]),r}function Fk(e,t,n){if(n=n||[],!Array.isArray(e)&&!MC(e))return void dv(0===t.length,(()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")));dv(t.length>0,(()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements"))),dv(e.length===t[0],(()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")));const r=t.slice(1);for(let o=0;o<e.length;++o)Fk(e[o],r,n.concat(o))}function Tk(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function _k(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof rk())return Tk(r,e.dtype,t,n),e;let o=Tv(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Tk(r,o,t,n),null==e||!MC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const a=Nk(e,o);MC(e)||Array.isArray(e)||(e=[e]);const i="string"!==o?RC(e,o):QC(e,[],!0);return Ck.makeTensor(i,a,o)}function Lk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map(((e,o)=>_k(e,"".concat(t,"[").concat(o,"]"),n,r)))}Ek.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ek.registerFlag("IS_BROWSER",(()=>Ik())),Ek.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),Ek.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Ek.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),Ek.registerFlag("PROD",(()=>!1)),Ek.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Ek.getBool("DEBUG"))),Ek.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Ek.registerFlag("IS_TEST",(()=>!1)),Ek.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>Ek.getBool("DEBUG"))),Ek.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Ek.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),Ek.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const Ok="__op";function Rk(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Ok;const o=function(){Ck.startScope(n);try{const e=r(...arguments);return Vv(e)&&console.error("Cannot return a Promise inside of tidy."),Ck.endScope(e),e}catch(e){throw Ck.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}const Uk=Rk({complex_:function(e,t){const n=_k(e,"real","complex"),r=_k(t,"imag","complex");pv(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const o={real:n,imag:r};return Ck.runKernel(kb,o)}});function Dk(e,t,n,r){if(null==r)r=Tv(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(pk(e)||dk(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return Ck.backend.createTensorFromGPUData(e,t||n,r)}if(!MC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Qv(t);const e=gv(t),r=gv(n);dv(e===r,(()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r)));for(let o=0;o<n.length;++o){const e=n[o],r=o!==n.length-1||e!==gv(t.slice(o));dv(n[o]===t[o]||!r,(()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")))}}return MC(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?RC(e,r):QC(e,[],!0),Ck.makeTensor(e,t,r)}function Pk(e,t,n){return Dk(e,t,Nk(e,n),n)}const Mk={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Qk{static join(e){return new Qk(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>MC(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=t+r.byteLength;this.shards.push({buffer:r,start:t,end:o}),t=o}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),o=new Uint8Array(r);let a=0;for(let i=n;i<this.shards.length;i++){const n=this.shards[i],r=e+a-n.start,s=a,c=Math.min(t,n.end)-n.start,l=new Uint8Array(n.buffer,r,c-r);if(o.set(l,s),a+=l.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,a=t(e[o]);if(0===a)return o;a<0?r=o:n=o+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function Hk(){return Ck}function zk(){return Ck.memory()}function Vk(e,t){return Ck.tidy(e,t)}function jk(e){mk(e).forEach((e=>e.dispose()))}function Wk(e){return Ck.keep(e)}function Kk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Ck.registerBackend(e,t,n)}function Gk(){return Ck.backend}tk=function(e){Gv().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const qk=4;async function Xk(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let a=0;a<o.length;++a){const i=o[a],s=Array.isArray(e)?e[a].tensor:e[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));const c={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+qk*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=qk,r.set(e,o),o+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(c.group=t),n.push(c)}return{data:nB(await Promise.all(r)),specs:n}}function Yk(e,t){const n=new Qk(e),r={};let o=0;for(const a of t){const e=Zk(a,((e,t)=>n.slice(o+e,o+t)));r[a.name]=$k(a,n.slice(o,o+e)),o+=e}return r}function Zk(e,t){const n=gv(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Mk[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=qk+new Uint32Array(t(e,e+qk))[0];return e}r=Mk[e.dtype]}return n*r}async function Jk(e,t){const n=gv(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Mk[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=qk+new Uint32Array(await t(e,e+qk))[0];return e}r=Mk[e.dtype]}return n*r}function $k(e,t){const n=e.name,r=e.dtype,o=e.shape,a=gv(o);let i,s=0;if("quantization"in e){const o=e.quantization;if("uint8"===o.dtype||"uint16"===o.dtype){if(!("min"in o)||!("scale"in o))throw new Error("Weight ".concat(e.name," with quantization ").concat(o.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==o.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(o.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==r)throw new Error("Weight ".concat(e.name," is quantized with ").concat(o.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}const c=Mk[o.dtype],l="uint8"===o.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===o.dtype||"uint16"===o.dtype){i=new Float32Array(l.length);for(let e=0;e<l.length;e++){const t=l[e];i[e]=t*o.scale+o.min}}else{if("float16"!==o.dtype)throw new Error("Unsupported quantization type ".concat(o.dtype," ")+"for weight type float32.");{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),a=new Uint32Array(o);for(let i=0;i<r.length;i++){const o=r[i],s=e[n[o>>10]+(1023&o)]+t[o>>10];a[i]=s}return new Float32Array(o)}}();i=e(l)}}else{if("int32"!==r)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));if("uint8"!==o.dtype&&"uint16"!==o.dtype)throw new Error("Unsupported quantization type ".concat(o.dtype," ")+"for weight type int32.");i=new Int32Array(l.length);for(let e=0;e<l.length;e++){const t=l[e];i[e]=Math.round(t*o.scale+o.min)}}s+=a*c}else if("string"===r){const n=gv(e.shape);i=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+qk))[0];s+=qk;const n=new Uint8Array(t.slice(s,s+e));i.push(n),s+=e}}else{const e=Mk[r];if("float32"===r)i=new Float32Array(t);else if("int32"===r)i=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){i=new Float32Array(t);const e=new Float32Array(i.length/2),n=new Float32Array(i.length/2);for(let t=0;t<e.length;t++)e[t]=i[2*t],n[t]=i[2*t+1];const r=Pk(e,o,"float32"),a=Pk(n,o,"float32"),s=Uk(r,a);return r.dispose(),a.dispose(),s}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r))}i=new Uint8Array(t)}s+=a*e}return Pk(i,o,r)}async function eB(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:o}=await e.read();if(t&&null==o){const e=n-r.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}const a=new Uint8Array(r.length+o.byteLength);a.set(r,0),a.set(new Uint8Array(o),r.length),r=a}return r.buffer}async function tB(e,t){const n={},r=e.getReader();let o=new ArrayBuffer(0);for(const a of t){const e=await Jk(a,(async(e,t)=>(o=await eB(r,o,t),o.slice(e,t))));o=await eB(r,o,e);const t=o.slice(0,e);o=o.slice(e);const i=$k(a,t);if(n[a.name]=i,"webgpu"===Ck.backendName){const e=Gk();"uploadToGPU"in e&&gv(i.shape)>=Gv().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(i.dataId)}}return n}function nB(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const rB="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function oB(e){return rB?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function aB(e){return Qk.join(e)}function iB(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function sB(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function cB(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function lB(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),cB(e,n,r)}function uB(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:oB(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:oB(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Qk(e.weightData).byteLength}}function AB(e){const t=[];for(const n of e)t.push(...n.weights);return t}class hB{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==hB.instance&&(hB.instance=new hB),hB.instance}static registerSaveRouter(e){hB.getInstance().saveRouters.push(e)}static registerLoadRouter(e){hB.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return hB.getHandlers(e,"save")}static getLoadHandlers(e,t){return hB.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?hB.getInstance().loadRouters:hB.getInstance().saveRouters).forEach((t=>{const o=t(e,n);null!==o&&r.push(o)})),r}}const dB=e=>hB.registerSaveRouter(e),pB=e=>hB.registerLoadRouter(e),fB=e=>hB.getSaveHandlers(e),gB=(e,t)=>hB.getLoadHandlers(e,t),mB="tensorflowjs",yB="models_store",vB="model_info_store";function bB(){if(!Gv().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function wB(e){const t=e.result;t.createObjectStore(yB,{keyPath:"modelPath"}),t.createObjectStore(vB,{keyPath:"modelPath"})}class xB{constructor(e){if(this.indexedDB=bB(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(mB,1);r.onupgradeneeded=()=>wB(r),r.onsuccess=()=>{const o=r.result;if(null==t){const t=o.transaction(yB,"readonly"),r=t.objectStore(yB).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return o.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(o.close(),n(r.error)),t.oncomplete=()=>o.close()}else{t.weightData=Qk.join(t.weightData);const r=uB(t),i=o.transaction(vB,"readwrite");let s,c,l=i.objectStore(vB);try{s=l.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(a){return n(a)}s.onsuccess=()=>{c=o.transaction(yB,"readwrite");const s=c.objectStore(yB);let u;try{u=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(a){return n(a)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{l=i.objectStore(vB);const t=l.delete(this.modelPath);t.onsuccess=()=>(o.close(),n(u.error)),t.onerror=e=>(o.close(),n(u.error))}},s.onerror=e=>(o.close(),n(s.error)),i.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}}},r.onerror=e=>n(r.error)}))}}xB.URL_SCHEME="indexeddb://";const CB=e=>{return Gv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(xB.URL_SCHEME)?(t=e.slice(xB.URL_SCHEME.length),new xB(t)):null;var t};hB.registerSaveRouter(CB),hB.registerLoadRouter(CB);class kB{constructor(){this.indexedDB=bB()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(mB,1);n.onupgradeneeded=()=>wB(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(vB,"readonly"),a=o.objectStore(vB).getAll();a.onsuccess=()=>{const t={};for(const e of a.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},a.onerror=e=>(r.close(),t(a.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(xB.URL_SCHEME)?t.slice(xB.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(mB,1);r.onupgradeneeded=()=>wB(r),r.onsuccess=()=>{const o=r.result,a=o.transaction(vB,"readwrite"),i=a.objectStore(vB),s=i.get(e);let c;s.onsuccess=()=>{if(null==s.result)return o.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=i.delete(e),a=()=>{c=o.transaction(yB,"readwrite");const r=c.objectStore(yB).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(s.error))}},s.onerror=e=>(o.close(),n(s.error)),a.oncomplete=()=>{null==c?o.close():c.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}const BB="/",SB="tensorflowjs_models",IB="info",EB="model_topology",NB="weight_specs",FB="weight_data",TB="model_metadata";function _B(e){return{info:[SB,e,IB].join(BB),topology:[SB,e,EB].join(BB),weightSpecs:[SB,e,NB].join(BB),weightData:[SB,e,FB].join(BB),modelMetadata:[SB,e,TB].join(BB)}}function LB(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function OB(e){const t=e.split(BB);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(BB)}class RB{constructor(e){if(!Gv().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=_B(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=uB(e),a=Qk.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(rB)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(a));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:o}}catch(t){throw LB(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(o.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(o.weightSpecsBytes,", ")+"weightDataBytes=".concat(o.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(rB){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(a),t}}RB.URL_SCHEME="localstorage://";const UB=e=>{return Gv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(RB.URL_SCHEME)?(t=e.slice(RB.URL_SCHEME.length),new RB(t)):null;var t};hB.registerSaveRouter(UB),hB.registerLoadRouter(UB);class DB{constructor(){dv(Gv().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),dv("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=SB+BB,n=BB+IB;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[OB(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=_B(e=(t=e).startsWith(RB.URL_SCHEME)?t.slice(RB.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return LB(n),r}}const PB="://";class MB{constructor(){this.managers={}}static getInstance(){return null==MB.instance&&(MB.instance=new MB),MB.instance}static registerManager(e,t){dv(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(PB)&&(e=e.slice(0,e.indexOf(PB))),dv(e.length>0,(()=>"scheme must not be an empty string."));const n=MB.getInstance();dv(null==n.managers[e],(()=>"A model store manager is already registered for scheme '".concat(e,"'."))),n.managers[e]=t}static getManager(e){const t=MB.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(MB.getInstance().managers)}}function QB(e){if(-1===e.indexOf(PB))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(MB.getSchemes().join(",")));return{scheme:e.split(PB)[0],path:e.split(PB)[1]}}async function HB(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];dv(e!==t,(()=>"Old path and new path are the same: '".concat(e,"'")));const r=hB.getLoadHandlers(e);dv(r.length>0,(()=>"Copying failed because no load handler is found for source URL ".concat(e,"."))),dv(r.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(e,".")));const o=r[0],a=hB.getSaveHandlers(t);dv(a.length>0,(()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,"."))),dv(a.length<2,(()=>"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(t,".")));const i=a[0],s=QB(e).scheme,c=QB(e).path,l=s===QB(e).scheme,u=await o.load();n&&l&&await MB.getManager(s).removeModel(c);const A=await i.save(u);return n&&!l&&await MB.getManager(s).removeModel(c),A.modelArtifactsInfo}async function zB(){const e=MB.getSchemes(),t={};for(const n of e){const e=await MB.getManager(n).listModels();for(const r in e){t[n+PB+r]=e[r]}}return t}async function VB(e){const t=QB(e);return MB.getManager(t.scheme).removeModel(t.path)}async function jB(e,t){return HB(e,t,!1)}async function WB(e,t){return HB(e,t,!0)}class KB{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&Gv().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return vC(e)}}if(Gv().get("IS_BROWSER")){Gv().setPlatform("browser",new KB);try{MB.registerManager(RB.URL_SCHEME,new DB)}catch(nbe){}try{MB.registerManager(xB.URL_SCHEME,new kB)}catch(nbe){}}const GB=()=>n(5410);let qB;class XB{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Gv().global.fetch?Gv().global.fetch(e,t):(null==qB&&(qB=GB()),qB(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function YB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Qv(e),new JC(e,t,n)}Gv().get("IS_NODE")&&!Gv().get("IS_BROWSER")&&Gv().setPlatform("node",new XB);const ZB=Rk({cast_:function(e,t){const n=_k(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:t};return Ck.runKernel(wb,r,o)}});const JB=Rk({clone_:function(e){const t={x:_k(e,"x","clone","string_or_numeric")};return Ck.runKernel(dw,t)}});function $B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}xk();ek={buffer:YB,cast:ZB,clone:JB,print:$B};const eS=Rk({add_:function(e,t){let n=_k(e,"a","add"),r=_k(t,"b","add");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(tb,o)}});const tS=Rk({floorDiv_:function(e,t){let n=_k(e,"a","floorDiv"),r=_k(t,"b","floorDiv");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(sw,o)}});const nS=Rk({div_:function(e,t){let n=_k(e,"a","div"),r=_k(t,"b","div");if([n,r]=fk(n,r),"int32"===n.dtype&&"int32"===r.dtype)return tS(n,r);const o={a:n,b:r};return Ck.runKernel(qb,o,{})}});const rS=Rk({mul_:function(e,t){let n=_k(e,"a","mul"),r=_k(t,"b","mul");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(Vw,o)}});const oS=Rk({sqrt_:function(e){const t={x:_k(e,"x","sqrt","float32")};return Ck.runKernel(Nx,t)}});const aS=Rk({square_:function(e){const t=_k(e,"x","square");return Ck.runKernel("Square",{x:t},{})}});const iS=Rk({zerosLike_:function(e){const t={x:_k(e,"x","zerosLike")};return Ck.runKernel(nC,t)}});function sS(e){return Ck.customGrad(e)}function cS(e,t){if((MC(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&MC(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Dk(e,[],[],t)}const lS=new Map,uS=new Map;class AS{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class hS{constructor(){this.classNameMap={}}static getMap(){return null==hS.instance&&(hS.instance=new hS),hS.instance}static register(e){hS.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function dS(e,t,n){dv(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),dv("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),dv(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return hS.register(e),lS.set(r,e),uS.set(e,r),e}class pS extends AS{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:o}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:o[e.name]})));this.applyGradients(e)}else this.applyGradients(o);return jk(o),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){dv(_v(e),(()=>"The f passed in variableGrads(f) must be a function")),dv(null==t||Array.isArray(t)&&t.every((e=>e instanceof ok)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in Ck.registeredVariables)t.push(Ck.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,o=t.length;t=t.filter((e=>e.trainable)),dv(t.length>0,(()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."));const{value:a,grads:i}=Ck.gradients(e,t,null,!0);dv(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),dv(0===a.rank,(()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(a.rank," tensor")));const s={};return t.forEach(((e,t)=>{null!=i[t]&&(s[e.name]=i[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:a,grads:s}}(e,t)}dispose(){null!=this.iterations_&&jk(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:cS(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(pS,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class fS extends pS{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Ck.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ck.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:Vk((()=>iS(r).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:Vk((()=>iS(r).variable(false)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,i=this.accumulatedUpdates[n].variable;Vk((()=>{const e=eS(rS(a,this.rho),rS(aS(o),1-this.rho)),t=rS(nS(oS(eS(i,this.epsilon)),oS(eS(a,this.epsilon))),o),n=eS(rS(i,this.rho),rS(aS(t),1-this.rho));a.assign(e),i.assign(n);const s=eS(rS(t,-this.learningRate),r);r.assign(s)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(jk(this.accumulatedGrads.map((e=>e.variable))),jk(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function gS(e,t,n){Qv(e);const r={shape:e,value:t,dtype:n=n||Tv(t)};return Ck.runKernel(ow,{},r)}class mS extends pS{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ck.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:Vk((()=>gS(r.shape,this.initialAccumulatorValue).variable(e)))}}const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable;Vk((()=>{const e=eS(a,aS(o));a.assign(e);const t=eS(rS(nS(o,oS(eS(e,Ck.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&jk(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const yS=Rk({pow_:function(e,t){let n=_k(e,"base","pow"),r=_k(t,"exp","pow");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel($w,o)}});const vS=Rk({sub_:function(e,t){let n=_k(e,"a","sub"),r=_k(t,"b","sub");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(Kx,o)}});class bS extends pS{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Vk((()=>{this.accBeta1=cS(t).variable(),this.accBeta2=cS(n).variable()})),null==r&&(this.epsilon=Ck.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Vk((()=>{const n=vS(1,this.accBeta1),r=vS(1,this.accBeta2);t.forEach(((t,o)=>{const a=Ck.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:Vk((()=>iS(a).variable(false)))}),null==this.accumulatedSecondMoment[o]&&(this.accumulatedSecondMoment[o]={originalName:"".concat(t,"/v"),variable:Vk((()=>iS(a).variable(false)))});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,c=this.accumulatedSecondMoment[o].variable,l=eS(rS(s,this.beta1),rS(i,1-this.beta1)),u=eS(rS(c,this.beta2),rS(aS(i),1-this.beta2)),A=nS(l,n),h=nS(u,r);s.assign(l),c.assign(u);const d=eS(rS(nS(A,eS(oS(h),this.epsilon)),-this.learningRate),a);a.assign(d)})),this.accBeta1.assign(rS(this.accBeta1,this.beta1)),this.accBeta2.assign(rS(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&jk(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&jk(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),Vk((()=>{this.accBeta1.assign(yS(this.beta1,this.iterations_+1)),this.accBeta2.assign(yS(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const wS=Rk({abs_:function(e){const t=_k(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return Ck.runKernel(Bb,e)}{const e={x:t};return Ck.runKernel(Jv,e)}}});function xS(e,t){const n=e.length,r=[];for(let o=0;o<n;o++){const a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function CS(e,t){const n=[];for(let r=0;r<t.length;r++){const o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function kS(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let a=e[e.length-o-1];null==a&&(a=1);let i=t[t.length-o-1];if(null==i&&(i=1),1===a)r[n-o-1]=i;else if(1===i)r[n-o-1]=a;else{if(a!==i){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-o-1]=a}}return r}const BS=Rk({maximum_:function(e,t){let n=_k(e,"a","maximum"),r=_k(t,"b","maximum");[n,r]=fk(n,r),"bool"===n.dtype&&(n=ZB(n,"int32"),r=ZB(r,"int32")),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Tw,o)}});class SS extends pS{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Vk((()=>{this.iteration=cS(0).variable(),this.accBeta1=cS(t).variable()})),null==r&&(this.epsilon=Ck.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);Vk((()=>{const n=vS(1,this.accBeta1),r=nS(-this.learningRate,eS(rS(this.iteration,this.decay),1));t.forEach(((t,o)=>{const a=Ck.registeredVariables[t];null==this.accumulatedFirstMoment[o]&&(this.accumulatedFirstMoment[o]={originalName:"".concat(t,"/m"),variable:iS(a).variable(false)}),null==this.accumulatedWeightedInfNorm[o]&&(this.accumulatedWeightedInfNorm[o]={originalName:"".concat(t,"/v"),variable:iS(a).variable(false)});const i=Array.isArray(e)?e[o].tensor:e[t];if(null==i)return;const s=this.accumulatedFirstMoment[o].variable,c=this.accumulatedWeightedInfNorm[o].variable,l=eS(rS(s,this.beta1),rS(i,1-this.beta1)),u=rS(c,this.beta2),A=wS(i),h=BS(u,A);s.assign(l),c.assign(h);const d=eS(rS(nS(r,n),nS(l,eS(h,this.epsilon))),a);a.assign(d)})),this.iteration.assign(eS(this.iteration,1)),this.accBeta1.assign(rS(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&jk(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&jk(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class IS extends pS{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=Ck.registeredVariables[t];Vk((()=>{const e=eS(rS(this.c,r),o);o.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Wk(cS(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class ES extends IS{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=cS(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ck.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:Vk((()=>iS(r).variable(e)))}}const o=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];null!=a&&Vk((()=>{let e;const t=eS(rS(this.m,o),a);e=this.useNesterov?eS(rS(this.c,eS(a,rS(t,this.m))),r):eS(rS(this.c,t),r),o.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&jk(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class NS extends pS{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,null==r&&(this.epsilon=Ck.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ck.registeredVariables[t],o=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:Vk((()=>iS(r).variable(o)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:Vk((()=>iS(r).variable(o)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:Vk((()=>iS(r).variable(o)))});const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const i=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;Vk((()=>{const e=eS(rS(i,this.decay),rS(aS(a),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,o=eS(rS(t,this.decay),rS(a,1-this.decay)),c=nS(rS(a,this.learningRate),oS(vS(e,eS(aS(o),this.epsilon)))),l=eS(rS(s,this.momentum),c);i.assign(e),t.assign(o),s.assign(l);const u=vS(r,l);r.assign(u)}else{const e=eS(rS(i,this.decay),rS(aS(a),1-this.decay)),t=eS(rS(s,this.momentum),nS(rS(a,this.learningRate),oS(eS(e,this.epsilon))));i.assign(e),s.assign(t);const n=vS(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&jk(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&jk(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&jk(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const FS=[fS,mS,bS,SS,ES,NS,IS];function TS(e){return new Promise((e=>setTimeout(e))).then(e)}class _S{constructor(e){if(!Gv().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(_S.URL_SCHEME)&&(e=e.slice(_S.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Qk.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=sB(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=r,await TS((()=>o.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await TS((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:uB(e)}}}}_S.URL_SCHEME="downloads://";class LS{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),o=r.modelTopology;if(null==o)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:o});const a=lB(r,(e=>this.loadWeights(e)));e(a)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const a of e)t.push(...a.weights),n.push(...a.paths);const r=this.checkManifestAndWeightFiles(e),o=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(o).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const o=new FileReader;o.onload=e=>{const t=e.target.result;n(t)},o.onerror=t=>r("Failed to weights data from file of path '".concat(e,"'.")),o.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>iB(e.name))),r={};for(const o of e)o.paths.forEach((e=>{const o=iB(e);if(-1!==t.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(o,"'"));if(t.push(o),-1===n.indexOf(o))throw new Error("Weight file with basename '".concat(o,"' is not provided."));r[e]=this.weightsFiles[n.indexOf(o)]}));if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return r}}function OS(e){return new LS(e)}function RS(e,t,n,r){!function(e){dv(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){dv(e>=0&&e<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e))),dv(t>=0&&t<=1,(()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t))),dv(t>=e,(()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((a=>(a.then((a=>{const i=n+ ++o/e.length*(r-n);return t(i),a})),a))))}async function US(e,t){null==t&&(t={});const n=null==t.fetchFunc?Gv().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),o=(null==t.onProgress?await Promise.all(r):await RS(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(o):await RS(o,t.onProgress,.5,1)}async function DS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return PS((e=>US(e,{requestInit:r})))(e,t,n)}function PS(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const o=t.map((()=>!1)),a={},i=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const c="quantization"in e?e.quantization.dtype:e.dtype,l=Mk[c]*gv(e.shape),u=()=>{o[t]=!0,null==a[t]&&(a[t]=[]),a[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=r?r.forEach(((t,n)=>{t===e.name&&(u(),i[n]=!0)})):u(),s.push(e.name),n+=l}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."))}const c=o.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),l=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;l.push(t)}))}));const u=await e(l),A={};let h=0;return c.forEach((e=>{const n=t[e].paths.length,r=new Qk(u.slice(h,h+n));a[e].forEach((e=>{const t=Yk(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)A[n]=t[n]})),h+=n})),A}}hB.registerSaveRouter((e=>Gv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_S.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new _S(e)}(e.slice(_S.URL_SCHEME.length)):null));class MS{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(dv("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Gv().platform.fetch,dv(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&dv(2===e.length,(()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,")."))),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=sB(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=Qk.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:uB(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(o){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return lB(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=AB(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?Gv().platform.fetch:t.fetchFunc;let o,a=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;a<e.length;){if(!o){const n=(await r(e[a],t.requestInit,{isBinary:!0})).body;o=n.getReader()}const{done:s,value:c}=await o.read();if(!s)return void n.enqueue(c);a++,o=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,a/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),o=this.weightPathPrefix||n,a=[],i=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):a.push(o+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(i)),a}async loadWeights(e){const t=await this.getWeightUrls(e);return[AB(e),await US(t,this.loadOptions)]}}function QS(e){return null!=e.match(MS.URL_SCHEME_REGEX)}MS.URL_SCHEME_REGEX=/^https?:\/\//;const HS=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>QS(e))):QS(e),n)return zS(e,t)}return null};function zS(e,t){return new MS(e,t)}function VS(e,t){return zS(e,t)}hB.registerSaveRouter(HS),hB.registerLoadRouter(HS);class jS{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class WS{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class KS{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function GS(e,t,n,r){return new KS(qS(...arguments))}function qS(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new jS(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jS({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jS({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function XS(e){return new WS(e)}function YS(e){return new WS(e)}function ZS(e,t,n){if(fv(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=Nk(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Dk(e,t,r,n)}let JS,$S=!1;function eI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,a=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(null!=dC(oC,Ck.backendName)){const n={pixels:e},r={numChannels:t};return Ck.runKernel(oC,n,r)}const[c,l]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,A;if(i)u=e.getContext("2d").getImageData(0,0,c,l).data;else if(r||n)u=e.data;else if(a||o||s){if(null==JS)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");JS=new OffscreenCanvas(1,1).getContext("2d")}else JS=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});JS.canvas.width=c,JS.canvas.height=l,JS.drawImage(e,0,0,c,l),u=JS.getImageData(0,0,c,l).data}if(4===t)A=new Int32Array(u);else{const e=c*l;A=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)A[n*t+e]=u[4*n+e]}return ZS(A,[l,c,t],"int32")}function tI(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));const t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,".")+" Please use float32 or int32 tensors.")}const nI=Rk({fromPixels_:eI}),rI=-2,oI=-1;function aI(e,t,n){const r=e.shape.length;dv(r===t.length,(()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,")."))),dv(r===n.length,(()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")));for(let o=0;o<r;++o)dv(t[o]+n[o]<=e.shape[o],(()=>"Error in slice".concat(r,"D: begin[").concat(o,"] + size[").concat(o,"] ")+"(".concat(t[o]+n[o],") would overflow input.shape[").concat(o,"] (").concat(e.shape[o],")")))}function iI(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function sI(e,t,n){const r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function cI(e,t,n,r){const o=[...e];for(let a=o.length;a<r.length;a++)o.push(1);for(let a=0;a<n;a++)0===a?o[t]=1:(o.splice(t,0,1),o.pop());return o}function lI(e,t,n){return n<=e?n:n-(t-1)}function uI(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function AI(e,t,n,r,o,a,i,s,c){const l=e.length;let u=new Array(l),A=new Array(l),h=new Array(l);if(t.length&&n>0){const c=t[0],l=n+1;u=hI(i,c,l,r,e),A=dI(s,c,l,o,e),h=cI(a,c,l,e)}else for(let d=0;d<l;d++)u[d]=fI(i,r,a,e,d,c),A[d]=gI(s,o,a,e,d,c),h[d]=pI(a,d,c);return{begin:u,end:A,strides:h}}function hI(e,t,n,r,o){const a=[...o],i=uI(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=0;else{const o=lI(t,n,s);let i=r[o];e&1<<o&&(i=0),a[s]=i}return a}function dI(e,t,n,r,o){const a=[...o],i=uI(n,t);for(let s=0;s<a.length;s++)if(i.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const o=lI(t,n,s);let i=r[o];e&1<<o&&(i=Number.MAX_SAFE_INTEGER),a[s]=i}for(let s=0;s<a.length;s++){const e=o[s];a[s]<0&&(a[s]+=e),a[s]=uv(0,a[s],o[s])}return a}function pI(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function fI(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=r[o];return i<0&&(i+=c),i=uv(0,i,c-1),i}function gI(e,t,n,r,o,a){let i=t[o];const s=n[o]||1;(e&1<<o||a&1<<o||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=r[o];return i<0&&(i+=c),i=s>0?uv(0,i,c):uv(-1,i,c-1),i}function mI(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function yI(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function vI(e,t,n){let r;const o=e.shape.length;let a;return r="number"===typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach((e=>{dv(-1!==e,(()=>"slice() does not support negative begin indexing."))})),a=null==n?new Array(o).fill(-1):"number"===typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,a=a.map(((t,n)=>t>=0?t:(dv(-1===t,(()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,"."))),e.shape[n]-r[n]))),[r,a]}function bI(e,t,n,r,o,a,i,s,c){let l;if(null==r?(l=new Array(t.length),l.fill(1)):l=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const A={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};for(let v=0;v<A.dims;v++)u&&0!==(1<<v&s)&&A.numAddAxisAfterEllipsis++,1<<v&i&&(u=!0);u||(A.ellipsisMask|=1<<A.dims,A.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(rI),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(oI),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(A,h);let d=!0,p=!0,f=!0;const g=[],m=[];for(let v=0;v<e.length;++v){if(0===h.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));const t=!!(h.shrinkAxisMask&1<<v),n=e[v];if(-1===n){g.push(t?1:-1);continue}const r=[h.beginMask&1<<v,h.endMask&1<<v],o=[h.strides[v]>0?0:-1,h.strides[v]>0?n:n-1];if(t&&h.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&1===h.strides[v];const a=!!(h.beginMask&1<<v&&h.endMask&1<<v);if(h.beginValid&&h.endValid){if(t){const e=h.begin[v]<0?n+h.begin[v]:h.begin[v];if(h.begin[v]=e,h.end[v]=h.begin[v]+1,e<0||e>=n)throw Error("slice index ".concat(h.begin[v]," of dimension ").concat(v," out of bounds."))}else h.begin[v]=wI(h.begin[v],0,h.strides[v],n,r,o),h.end[v]=wI(h.end[v],1,h.strides[v],n,r,o);const e=1===h.strides[v]&&0===h.begin[v]&&h.end[v]===n;d=d&&e,p=p&&(0===v&&1===h.strides[v]||e)}else d=d&&1===h.strides[v]&&a,p=p&&(0===v&&1===h.strides[v]||a);let i,s=!1;if(h.beginValid&&h.endValid?(i=h.end[v]-h.begin[v],s=!0):t?(i=1,s=!0):a&&n>=0&&(i=h.strides[v]<0?-n:n,s=!0),s){let e;e=0===i||i<0!==h.strides[v]<0?0:Math.trunc(i/h.strides[v])+(i%h.strides[v]!==0?1:0),g.push(e)}else g.push(-1)}for(let v=0;v<h.finalShapeGatherIndices.length;++v){const e=h.finalShapeGatherIndices[v];e>=0?m.push(g[e]):e===rI&&m.push(1)}const y=m.filter(((e,t)=>h.finalShapeGatherIndices[t]!==rI));return{finalShapeSparse:y,finalShape:m,isIdentity:d,sliceDim0:p,isSimpleSlice:f,begin:h.begin,end:h.end,strides:h.strides}}function wI(e,t,n,r,o,a){if(o[t])return n>0?a[t]:a[t+1&1];{const t=e<0?r+e:e;return t<a[0]?a[0]:t>a[1]?a[1]:t}}const xI=Rk({acos_:function(e){const t={x:_k(e,"x","acos")};return Ck.runKernel($v,t)}});const CI=Rk({acosh_:function(e){const t={x:_k(e,"x","acosh")};return Ck.runKernel(eb,t)}});const kI=Rk({addN_:function(e){dv(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),dv(e.length>=1,(()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)));const t=e.map(((e,t)=>_k(e,"tensors".concat(t),"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!mv(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return Ck.runKernel(nb,r)}});const BI=Rk({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:_k(e,"x","all","bool")},o={axis:t,keepDims:n};return Ck.runKernel(rb,r,o)}});const SI=Rk({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:_k(e,"x","any","bool")},o={axis:t,keepDims:n};return Ck.runKernel(ob,r,o)}});const II=Rk({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:_k(e,"x","argMax")},r={axis:t};return Ck.runKernel(ab,n,r)}});const EI=Rk({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:_k(e,"x","argMin")},r={axis:t};return Ck.runKernel(ib,n,r)}});const NI=Rk({asin_:function(e){const t={x:_k(e,"x","asin")};return Ck.runKernel(sb,t)}});const FI=Rk({asinh_:function(e){const t={x:_k(e,"x","asinh")};return Ck.runKernel(cb,t)}});const TI=Rk({atan_:function(e){const t={x:_k(e,"x","atan")};return Ck.runKernel(lb,t)}});const _I=Rk({atan2_:function(e,t){let n=_k(e,"a","atan2"),r=_k(t,"b","atan2");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(Ab,o)}});const LI=Rk({atanh_:function(e){const t={x:_k(e,"x","atanh")};return Ck.runKernel(ub,t)}});function OI(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5?arguments[5]:void 0;return DI(e,[...t,e[3]],n,a,r,null,null,GI(o))}function RI(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,c]=QI(t);let l;if("channelsLast"===i)l=[s,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));l=[s,c,e[1],e[1]]}return DI(e,l,n,r,o,a,!1,i)}function UI(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,c,l]=HI(t);let u,A;if("NDHWC"===i)A="channelsLast",u=[s,c,l,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat ".concat(i));A="channelsFirst",u=[s,c,l,e[1],e[1]]}return PI(e,u,n,r,o,!1,A,a)}function DI(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[c,l,u,A]=[-1,-1,-1,-1];if("channelsLast"===s)[c,l,u,A]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[c,A,l,u]=e}const[h,d,,p]=t,[f,g]=QI(n),[m,y]=QI(r),v=zI(h,m),b=zI(d,y),{padInfo:w,outHeight:x,outWidth:C}=function(e,t,n,r,o,a,i,s,c){let l,u,A;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,r,o){null==r&&(r=MI(e,t,n));const a=e[0],i=e[1],s=VI((a-t+2*r)/n+1,o),c=VI((i-t+2*r)/n+1,o);return[s,c]}([t,n],a,r,e,s);u=o[0],A=o[1]}else if("same"===e){u=Math.ceil(t/r),A=Math.ceil(n/o);const e=Math.max(0,(u-1)*r+a-t),s=Math.max(0,(A-1)*o+i-n),c=Math.floor(e/2),h=e-c,d=Math.floor(s/2);l={top:c,bottom:h,left:d,right:s-d,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-a+1)/r),A=Math.ceil((n-i+1)/o);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const h="channelsLast"===c?e[1][0]:e[2][0],d="channelsLast"===c?e[1][1]:e[2][1],p="channelsLast"===c?e[2][0]:e[3][0],f="channelsLast"===c?e[2][1]:e[3][1];l={top:h,bottom:d,left:p,right:f,type:0===h&&0===d&&0===p&&0===f?"VALID":"EXPLICIT"},u=VI((t-a+h+d)/r+1,s),A=VI((n-i+p+f)/o+1,s)}}return{padInfo:l,outHeight:u,outWidth:A}}(o,l,u,f,g,v,b,a,s),k=i?p*A:p;let B;return"channelsFirst"===s?B=[c,k,x,C]:"channelsLast"===s&&(B=[c,x,C,k]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:u,inChannels:A,outHeight:x,outWidth:C,outChannels:k,padInfo:w,strideHeight:f,strideWidth:g,filterHeight:h,filterWidth:d,effectiveFilterHeight:v,effectiveFilterWidth:b,dilationHeight:m,dilationWidth:y,inShape:e,outShape:B,filterShape:t}}function PI(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[c,l,u,A,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[c,l,u,A,h]=e;else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));[c,h,l,u,A]=e}const[d,p,f,,g]=t,[m,y,v]=HI(n),[b,w,x]=HI(r),C=zI(d,b),k=zI(p,w),B=zI(f,x),{padInfo:S,outDepth:I,outHeight:E,outWidth:N}=function(e,t,n,r,o,a,i,s,c,l,u){let A,h,d,p;"valid"===e&&(e=0);if("number"===typeof e){A={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const f=function(e,t,n,r,o,a){null==o&&(o=MI(e,t[0],r[0]));const i=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*o>=t[s]&&(i[s]=VI((e[s]-t[s]+2*o)/r[s]+1,a));return i}([t,n,r,1],[s,c,l],1,[o,a,i],e,u);h=f[0],d=f[1],p=f[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{h=Math.ceil(t/o),d=Math.ceil(n/a),p=Math.ceil(r/i);const e=(h-1)*o+s-t,u=(d-1)*a+c-n,f=(p-1)*i+l-r,g=Math.floor(e/2),m=e-g,y=Math.floor(u/2),v=u-y,b=Math.floor(f/2);A={top:y,bottom:v,left:b,right:f-b,front:g,back:m,type:"SAME"}}}return{padInfo:A,outDepth:h,outHeight:d,outWidth:p}}(o,l,u,A,m,y,v,C,k,B,s),F=a?g*h:g;let T;return"channelsFirst"===i?T=[c,F,I,E,N]:"channelsLast"===i&&(T=[c,I,E,N,F]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:u,inWidth:A,inChannels:h,outDepth:I,outHeight:E,outWidth:N,outChannels:F,padInfo:S,strideDepth:m,strideHeight:y,strideWidth:v,filterDepth:d,filterHeight:p,filterWidth:f,effectiveFilterDepth:C,effectiveFilterHeight:k,effectiveFilterWidth:B,dilationDepth:b,dilationHeight:w,dilationWidth:x,inShape:e,outShape:T,filterShape:t}}function MI(e,t,n){const r=zI(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function QI(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function HI(e){return"number"===typeof e?[e,e,e]:e}function zI(e,t){return t<=1?e:e+(e-1)*(t-1)}function VI(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function jI(e){const[t,n,r]=QI(e);return 1===t&&1===n&&1===r}function WI(e,t){return jI(e)||jI(t)}function KI(e){return QI(e).every((e=>e>0))}function GI(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function qI(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)dv(yv(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((t=>{t.forEach((t=>{dv(yv(t),(()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")))}))}))}}}const XI=Rk({reshape_:function(e,t){const n={x:_k(e,"x","reshape","string_or_numeric")},r={shape:t};return Ck.runKernel(lx,n,r)}});const YI=Rk({avgPool_:function(e,t,n,r,o){const a=_k(e,"x","avgPool","float32");dv(WI(n,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")));let i=a,s=!1;3===a.rank&&(s=!0,i=XI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),dv(4===i.rank,(()=>"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,"."))),qI("avgPool",r,o);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:o};let u=Ck.runKernel(hb,c,l);return u=ZB(u,a.dtype),s?XI(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ZI=Rk({avgPool3d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=_k(e,"x","avgPool3d","float32");let s=i,c=!1;4===i.rank&&(c=!0,s=XI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),dv(5===s.rank,(()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),dv("NDHWC"===a,(()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(a))),dv("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'"))),qI("avgPool3d",r,o);const l={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a};let A=Ck.runKernel(pb,l,u);return A=ZB(A,s.dtype),c?XI(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}});const JI=Rk({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;dv(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=Lk(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return JB(n[0]);const r=n,o={axis:t};return Ck.runKernel(Sb,r,o)}});const $I=Rk({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=_k(e,"a","matMul"),a=_k(t,"b","matMul");[o,a]=fk(o,a);const i={a:o,b:a},s={transposeA:n,transposeB:r};return Ck.runKernel(gb,i,s)}});const eE=Rk({sigmoid_:function(e){const t={x:_k(e,"x","sigmoid","float32")};return Ck.runKernel(Ix,t)}});const tE=Rk({slice_:function(e,t,n){const r=_k(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const o={x:r},a={begin:t,size:n};return Ck.runKernel(Cx,o,a)}});const nE=Rk({tanh_:function(e){const t={x:_k(e,"x","tanh","float32")};return Ck.runKernel(qx,t)}});const rE=Rk({basicLSTMCell_:function(e,t,n,r,o,a){const i=_k(e,"forgetBias","basicLSTMCell"),s=_k(t,"lstmKernel","basicLSTMCell"),c=_k(n,"lstmBias","basicLSTMCell"),l=_k(r,"data","basicLSTMCell"),u=_k(o,"c","basicLSTMCell"),A=_k(a,"h","basicLSTMCell"),h=JI([l,A],1),d=$I(h,s),p=eS(d,c),f=p.shape[0],g=p.shape[1]/4,m=[f,g],y=tE(p,[0,0],m),v=tE(p,[0,g],m),b=tE(p,[0,2*g],m),w=tE(p,[0,3*g],m),x=eS(rS(eE(y),nE(v)),rS(u,eE(eS(i,b))));return[x,rS(nE(x),eE(w))]}});const oE=Rk({batchToSpaceND_:function(e,t,n){const r=_k(e,"x","batchToSpaceND"),o=t.reduce(((e,t)=>e*t));dv(r.rank>=1+t.length,(()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length))),dv(n.length===t.length,(()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length))),dv(r.shape[0]%o===0,(()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(o)));const a={x:r},i={blockShape:t,crops:n};return Ck.runKernel(mb,a,i)}});const aE=Rk({batchNorm_:function(e,t,n,r,o,a){null==a&&(a=.001);const i=_k(e,"x","batchNorm"),s=_k(t,"mean","batchNorm"),c=_k(n,"variance","batchNorm");let l,u;null!=o&&(l=_k(o,"scale","batchNorm")),null!=r&&(u=_k(r,"offset","batchNorm")),dv(s.rank===c.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),dv(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),dv(null==l||s.rank===l.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const A=function(e){let t;return t=0===e.rank||1===e.rank?XI(e,[1,1,1,e.size]):2===e.rank?XI(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?XI(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),h={x:A,scale:l,offset:u,mean:s,variance:c},d={varianceEpsilon:a},p=Ck.runKernel(cw,h,d);return XI(p,i.shape)}});const iE=Rk({batchNorm2d_:function(e,t,n,r,o,a){const i=_k(e,"x","batchNorm"),s=_k(t,"mean","batchNorm"),c=_k(n,"variance","batchNorm");let l,u;return null!=o&&(l=_k(o,"scale","batchNorm")),null!=r&&(u=_k(r,"offset","batchNorm")),dv(2===i.rank,(()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(i.rank,"."))),dv(2===s.rank||1===s.rank,(()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(s.rank,"."))),dv(2===c.rank||1===c.rank,(()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&dv(2===l.rank||1===l.rank,(()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&dv(2===u.rank||1===u.rank,(()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,"."))),aE(i,s,c,u,l,a)}});const sE=Rk({batchNorm3d_:function(e,t,n,r,o,a){const i=_k(e,"x","batchNorm"),s=_k(t,"mean","batchNorm"),c=_k(n,"variance","batchNorm");let l,u;return null!=o&&(l=_k(o,"scale","batchNorm")),null!=r&&(u=_k(r,"offset","batchNorm")),dv(3===i.rank,(()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(i.rank,"."))),dv(3===s.rank||1===s.rank,(()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(s.rank,"."))),dv(3===c.rank||1===c.rank,(()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&dv(3===l.rank||1===l.rank,(()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&dv(3===u.rank||1===u.rank,(()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,"."))),aE(i,s,c,u,l,a)}});const cE=Rk({batchNorm4d_:function(e,t,n,r,o,a){const i=_k(e,"x","batchNorm"),s=_k(t,"mean","batchNorm"),c=_k(n,"variance","batchNorm");let l,u;return null!=o&&(l=_k(o,"scale","batchNorm")),null!=r&&(u=_k(r,"offset","batchNorm")),dv(4===i.rank,(()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(i.rank,"."))),dv(4===s.rank||1===s.rank,(()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(s.rank,"."))),dv(4===c.rank||1===c.rank,(()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,"."))),null!=l&&dv(4===l.rank||1===l.rank,(()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,"."))),null!=u&&dv(4===u.rank||1===u.rank,(()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,"."))),aE(i,s,c,u,l,a)}});const lE=Rk({bincount_:function(e,t,n){const r=_k(e,"x","bincount"),o=_k(t,"weights","bincount");dv("int32"===r.dtype,(()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype))),dv(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),dv(o.size===r.size||0===o.size,(()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(o.shape,".")));const a={x:r,weights:o},i={size:n};return Ck.runKernel(yb,a,i)}});const uE=Rk({bitwiseAnd_:function(e,t){const n=_k(e,"x","bitwiseAnd"),r=_k(t,"y","bitwiseAnd");if(!mv(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));const o={a:n,b:r};return Ck.runKernel(vb,o)}});const AE=Rk({broadcastArgs_:function(e,t){const n=_k(e,"s0","broadcastArgs","int32"),r=_k(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));const o={s0:n,s1:r};return Ck.runKernel(bb,o)}});const hE=Rk({broadcastTo_:function(e,t){let n=_k(e,"broadcastTo","x");const r=n.shape;if(Qv(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=XI(n,e)}const o=n.shape,a=Array.from(t);for(let l=t.length-1;l>=0;l--)if(o[l]===t[l])a[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));const i=a.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===i.length)return JB(n);const s={x:n},c={reps:a};return Ck.runKernel(Xx,s,c)}});const dE=Rk({ceil_:function(e){const t={x:_k(e,"x","ceil","float32")};return Ck.runKernel(xb,t)}});const pE=Rk({clipByValue_:function(e,t,n){const r=_k(e,"x","clipByValue");if(dv(t<=n,(()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,")."))),t===n)return gS(r.shape,t,r.dtype);const o={x:r},a={clipValueMin:t,clipValueMax:n};return Ck.runKernel(Cb,o,a)}});const fE=Rk({concat1d_:function(e){return JI(e,0)}});const gE=Rk({concat2d_:function(e,t){return JI(e,t)}});const mE=Rk({concat3d_:function(e,t){return JI(e,t)}});const yE=Rk({concat4d_:function(e,t){return JI(e,t)}});const vE=Rk({conv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=_k(e,"x","conv2d","float32"),c=_k(t,"filter","conv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=XI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),dv(4===l.rank,(()=>"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,"."))),dv(4===c.rank,(()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(c.rank,"."))),qI("conv2d",r,i);const A="NHWC"===o?l.shape[3]:l.shape[1];dv(A===c.shape[2],(()=>"Error in conv2d: depth of input (".concat(A,") must match ")+"input depth for filter ".concat(c.shape[2],"."))),dv(WI(n,a),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(a,"'"))),dv(KI(a),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),dv(KI(n),(()=>"Error in conv2D: Strides should be larger than 0."));const h={x:l,filter:c},d={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},p=Ck.runKernel(Ib,h,d);return u?XI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const bE=Rk({conv1d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=_k(e,"x","conv1d"),c=_k(t,"filter","conv1d");let l=s,u=!1;2===s.rank&&(u=!0,l=XI(s,[1,s.shape[0],s.shape[1]])),dv(3===l.rank,(()=>"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,"."))),dv(3===c.rank,(()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,"."))),qI("conv1d",r,i),dv(l.shape[2]===c.shape[1],(()=>"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],"."))),dv(WI(n,a),(()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(a,"'"))),dv(KI(a),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),dv(KI(n),(()=>"Error in conv1D: Stride should be larger than 0.")),dv("NWC"===o,(()=>"Error in conv1d: got dataFormat of ".concat(o," but only NWC is currently supported.")));const A=XI(c,[1,c.shape[0],c.shape[1],c.shape[2]]),h=XI(l,[l.shape[0],1,l.shape[1],l.shape[2]]),d=vE(h,A,[1,n],r,"NHWC",[1,a],i);return XI(d,u?[d.shape[2],d.shape[3]]:[d.shape[0],d.shape[2],d.shape[3]])}});const wE=Rk({conv2DBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;dv(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let s=e,c=t,l=!1;3===t.rank&&(l=!0,c=XI(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),dv(4===s.length,(()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,"."))),dv(4===c.rank,(()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(c.rank))),dv(4===n.rank,(()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)));const u="NHWC"===a?s[3]:s[1],A="NHWC"===a?c.shape[3]:c.shape[1];dv(u===n.shape[2],(()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],"."))),dv(A===n.shape[3],(()=>"Error in conv2dDerInput: depth of output (".concat(A,") must ")+"match output depth for filter ".concat(n.shape[3],"."))),qI("conv2dDerInput",o,i);const h={dy:c,filter:n},d={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,inputShape:s},p=Ck.runKernel(Nb,h,d);return l?XI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const xE=Rk({conv2dTranspose_:function(e,t,n,r,o,a){const i=_k(e,"x","conv2dTranspose"),s=_k(t,"filter","conv2dTranspose");return wE(n,i,s,r,o,"NHWC",a)}});const CE=Rk({conv3d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const i=_k(e,"x","conv3d"),s=_k(t,"filter","conv3d");let c=i,l=!1;4===i.rank&&(l=!0,c=XI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),dv(5===c.rank,(()=>"Error in conv3d: input must be rank 5, but got rank ".concat(c.rank,"."))),dv(5===s.rank,(()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,"."))),dv(c.shape[4]===s.shape[3],(()=>"Error in conv3d: depth of input (".concat(c.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],"."))),dv(WI(n,a),(()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(a,"'"))),dv("NDHWC"===o,(()=>"Error in conv3d: got dataFormat of ".concat(o," but only NDHWC is currently supported."))),dv(KI(a),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),dv(KI(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:c,filter:s},A={strides:n,pad:r,dataFormat:o,dilations:a},h=Ck.runKernel(Fb,u,A);return l?XI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const kE=Rk({conv3DBackpropInput_:function(e,t,n,r,o){dv(e.length===t.rank,(()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")));let a=e,i=t,s=!1;4===t.rank&&(s=!0,i=XI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);const c=a[4],l=i.shape[4];dv(5===a.length,(()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(a.length,"."))),dv(5===i.rank,(()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank))),dv(5===n.rank,(()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank))),dv(c===n.shape[3],(()=>"Error in conv3dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[3],"."))),dv(l===n.shape[4],(()=>"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")));const u={dy:i,filter:n},A={pad:o,strides:r,inputShape:a},h=Ck.runKernel(_b,u,A);return s?XI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const BE=Rk({conv3dTranspose_:function(e,t,n,r,o){const a=_k(e,"x","conv3dTranspose"),i=_k(t,"filter","conv3dTranspose");return kE(n,a,i,r,o)}});const SE=Rk({cos_:function(e){const t={x:_k(e,"x","cos","float32")};return Ck.runKernel(Lb,t)}});const IE=Rk({cosh_:function(e){const t={x:_k(e,"x","cosh","float32")};return Ck.runKernel(Ob,t)}});const EE=Rk({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:_k(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return Ck.runKernel(Rb,o,a)}});const NE=Rk({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={x:_k(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return Ck.runKernel(Ub,o,a)}});const FE=Rk({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=_k(e,"x","denseBincount"),a=_k(t,"weights","denseBincount");dv("int32"===o.dtype,(()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(o.dtype))),dv(o.rank<=2,(()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(o.rank,"."))),dv(n>=0,(()=>"size must be non-negative, but got ".concat(n,"."))),dv(a.size===o.size||0===a.size,(()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(o.shape,", weights shape: ")+"".concat(a.shape,".")));const i={x:o,weights:a},s={size:n,binaryOutput:r};return Ck.runKernel(Pb,i,s)}});const TE=Rk({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=_k(e,"x","depthToSpace","float32"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];dv(t>1,(()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t))),dv(o*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape))),dv(a*t>=0,(()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape))),dv(i%(t*t)===0,(()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)));const s={x:r},c={blockSize:t,dataFormat:n};return Ck.runKernel(Mb,s,c)}});const _E=Rk({depthwiseConv2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0;const s=_k(e,"x","depthwiseConv2d","float32"),c=_k(t,"filter","depthwiseConv2d","float32");let l=s,u=!1;3===s.rank&&(u=!0,l=XI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),dv(4===l.rank,(()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,"."))),dv(4===c.rank,(()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(c.rank,".")));const A="NHWC"===o?l.shape[3]:l.shape[1];dv(A===c.shape[2],(()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(A,") must match the inChannels dimension in ")+"filter ".concat(c.shape[2],"."))),qI("depthwiseConv2d",r,i);const h={x:l,filter:c},d={strides:n,pad:r,dataFormat:o,dilations:a,dimRoundingMode:i},p=Ck.runKernel(Qb,h,d);return u?XI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});const LE=Rk({diag_:function(e){const t={x:_k(e,"x","diag")};return Ck.runKernel(Vb,t)}});const OE=Rk({dilation2d_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const i=_k(e,"x","dilation2d"),s=_k(t,"filter","dilation2d");dv(3===i.rank||4===i.rank,(()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,"."))),dv(3===s.rank,(()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,"."))),dv("NHWC"===a,(()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(a)));let c=i,l=!1;3===i.rank&&(c=XI(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),dv(c.shape[3]===s.shape[2],(()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(c.shape[3]," vs ").concat(s.shape[2])));const u={x:c,filter:s},A={strides:n,pad:r,dilations:o},h=Ck.runKernel(jb,u,A);return l?XI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const RE=Rk({equal_:function(e,t){let n=_k(e,"a","equal","string_or_numeric"),r=_k(t,"b","equal","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel($b,o)}});const UE=Rk({where_:function(e,t,n){const r=_k(t,"a","where"),o=_k(n,"b","where"),a=_k(e,"condition","where","bool"),i=kS(kS(a.shape,r.shape),o.shape),s={condition:hE(a,i),t:hE(r,i),e:hE(o,i)};return Ck.runKernel(wx,s)}});const DE=Rk({divNoNan_:function(e,t){let n=_k(e,"a","div"),r=_k(t,"b","div");[n,r]=fk(n,r);const o=nS(n,r),a=iS(o),i=RE(r,a);return UE(i,a,o)}});const PE=Rk({dot_:function(e,t){const n=_k(e,"t1","dot"),r=_k(t,"t2","dot");dv((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];if(dv(o===a,(()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(o," and ").concat(a,"."))),1===n.rank&&1===r.rank){const e=XI(n,[1,-1]),t=XI(r,[-1,1]),o=$I(e,t);return XI(o,[])}if(1===n.rank&&2===r.rank){const e=XI(n,[1,-1]),t=XI(r,[r.shape[0],r.shape[1]]),o=$I(e,t);return XI(o,[o.size])}if(2===n.rank&&1===r.rank){const e=XI(r,[-1,1]),t=$I(n,e);return XI(t,[t.size])}{const e=XI(r,[r.shape[0],r.shape[1]]);return $I(n,e)}}});const ME=Rk({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(((e,t)=>_k(e,"tensors".concat(t),"einsum"))),a={equation:e};return Ck.runKernel(Xb,o,a)}});const QE=Rk({elu_:function(e){const t={x:_k(e,"x","elu","float32")};return Ck.runKernel(Yb,t)}});const HE=Rk({ensureShape_:function(e,t){const n=_k(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});const zE=Rk({erf_:function(e){let t=_k(e,"x","erf");dv("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=ZB(t,"float32"));const n={x:t};return Ck.runKernel(Jb,n)}});function VE(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function jE(e,t,n){const r=e.length+t.length,o=[];let a=0,i=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function WE(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((t=>e[t]))]}function KE(e,t){return jE(e,t.map((e=>1)),t)}function GE(e,t,n){dv(VE(t,n),(()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")))}function qE(e,t){if(VE(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function XE(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function YE(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const ZE=Rk({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:_k(e,"x","max")},o={reductionIndices:t,keepDims:n};return Ck.runKernel(Fw,r,o)}});const JE=Rk({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:_k(e,"x","min")},o={axis:t,keepDims:n};return Ck.runKernel(Pw,r,o)}});const $E=Rk({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_k(e,"x","sum");"bool"===r.dtype&&(r=ZB(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return Ck.runKernel(Fx,o,a)}});function eN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return wS(e);if(1!==e.rank&&null===n)return eN(XI(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return $E(wS(e),n);if(t===1/0)return ZE(wS(e),n);if(t===-1/0)return JE(wS(e),n);if("euclidean"===t||2===t)return oS($E(yS(wS(e),cS(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return ZE($E(wS(e),n[0]),n[1]-1);if(t===1/0)return ZE($E(wS(e),n[1]),n[0]);if(t===-1/0)return JE($E(wS(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return oS($E(aS(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const tN=Rk({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=eN(e=_k(e,"x","norm"),t,n);let a=o.shape;if(r){const t=Cv(n,e.shape);a=KE(o.shape,t)}return XI(o,a)}});const nN=Rk({euclideanNorm_:function(e){return tN(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const rN=Rk({exp_:function(e){const t={x:_k(e,"x","exp")};return Ck.runKernel(ew,t)}});const oN=Rk({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=_k(e,"x","expandDims","string_or_numeric");dv(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},o={dim:t};return Ck.runKernel(tw,r,o)}});const aN=Rk({expm1_:function(e){const t={x:_k(e,"x","expm1")};return Ck.runKernel(nw,t)}});const iN=Rk({tile_:function(e,t){const n=_k(e,"x","tile","string_or_numeric");dv(n.rank===t.length,(()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")));const r={x:n},o={reps:t};return Ck.runKernel(Xx,r,o)}});const sN=Rk({eye_:function(e,t,n){null==t&&(t=e);const r=YB([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),o=e<=t?e:t;for(let i=0;i<o;++i)r.set(1,i,i);const a=XI(r.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return iN(oN(a,0),[n[0],1,1]);if(2===n.length)return iN(oN(oN(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return iN(oN(oN(oN(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const cN=Rk({floor_:function(e){const t={x:_k(e,"x","floor","float32")};return Ck.runKernel(iw,t)}});const lN=Rk({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o={x:_k(e,"x","gather"),indices:_k(t,"indices","gather","int32")},a={axis:n,batchDims:r};return Ck.runKernel(lw,o,a)}});const uN=Rk({greater_:function(e,t){let n=_k(e,"a","greater","string_or_numeric"),r=_k(t,"b","greater","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Aw,o)}});const AN=Rk({greaterEqual_:function(e,t){let n=_k(e,"a","greaterEqual","string_or_numeric"),r=_k(t,"b","greaterEqual","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(hw,o)}});const hN=Rk({imag_:function(e){const t={input:_k(e,"input","imag")};return Ck.runKernel(fw,t)}});const dN=Rk({isFinite_:function(e){const t={x:_k(e,"x","isFinite")};return Ck.runKernel(gw,t)}});const pN=Rk({isInf_:function(e){const t={x:_k(e,"x","isInf")};return Ck.runKernel(mw,t)}});const fN=Rk({isNaN_:function(e){const t={x:_k(e,"x","isNaN")};return Ck.runKernel(yw,t)}});const gN=Rk({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:_k(e,"x","leakyRelu")},r={alpha:t};return Ck.runKernel(vw,n,r)}});const mN=Rk({less_:function(e,t){let n=_k(e,"a","less","string_or_numeric"),r=_k(t,"b","less","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(bw,o)}});const yN=Rk({lessEqual_:function(e,t){let n=_k(e,"a","lessEqual","string_or_numeric"),r=_k(t,"b","lessEqual","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(ww,o)}});function vN(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return Ck.runKernel(xw,{},r)}const bN=Rk({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const a=_k(e,"x","localResponseNormalization");dv(4===a.rank||3===a.rank,(()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(a.rank,"."))),dv(yv(t),(()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")));let i=a,s=!1;3===a.rank&&(s=!0,i=XI(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const c={x:i},l={depthRadius:t,bias:n,alpha:r,beta:o},u=Ck.runKernel(Ew,c,l);return s?XI(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const wN=Rk({log_:function(e){const t={x:_k(e,"x","log","float32")};return Ck.runKernel(Cw,t)}});const xN=Rk({log1p_:function(e){const t={x:_k(e,"x","log1p")};return Ck.runKernel(kw,t)}});const CN=Rk({neg_:function(e){const t={x:_k(e,"x","neg")};return Ck.runKernel(jw,t)}});const kN=Rk({softplus_:function(e){const t={x:_k(e,"x","softplus")};return Ck.runKernel(Ex,t)}});const BN=Rk({logSigmoid_:function(e){const t=_k(e,"x","logSigmoid"),n=sS((e=>({value:CN(kN(CN(e))),gradFunc:t=>rS(t,eE(CN(e)))})));return n(t)}});const SN=Rk({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=_k(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=sS(((e,n)=>{const r=ZE(e,t,!0),o=vS(e,r),a=vS(ZB(o,"float32"),wN($E(rN(o),t,!0)));n([a]);return{value:a,gradFunc:(e,n)=>{const[r]=n,o=rN(r);return vS(e,rS($E(e,t,!0),o))}}}));return r(n)}});const IN=Rk({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=_k(e,"x","logSumExp"),o=Cv(t,r.shape),a=ZE(r,o,!0),i=vS(r,a),s=rN(i),c=$E(s,o),l=wN(c),u=eS(XI(a,l.shape),l);if(n){const e=KE(u.shape,o);return XI(u,e)}return u}});const EN=Rk({logicalAnd_:function(e,t){const n=_k(e,"a","logicalAnd","bool"),r=_k(t,"b","logicalAnd","bool");kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Bw,o)}});const NN=Rk({logicalNot_:function(e){const t={x:_k(e,"x","logicalNot","bool")};return Ck.runKernel(Sw,t)}});const FN=Rk({logicalOr_:function(e,t){const n=_k(e,"a","logicalOr","bool"),r=_k(t,"b","logicalOr","bool");kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Iw,o)}});const TN=Rk({logicalXor_:function(e,t){const n=_k(e,"a","logicalXor","bool"),r=_k(t,"b","logicalXor","bool");return kS(n.shape,r.shape),EN(FN(e,t),NN(EN(e,t)))}}),_N=2147483648;const LN=Rk({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=_k(e,"sortedSequence","searchSorted"),o=_k(t,"values","searchSorted"),a=r.shape[r.shape.length-1],i=o.shape[o.shape.length-1],s=XI(r,[-1,a]),c=XI(o,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(gv(c.shape)>=_N)throw new Error("values tensor size must less than ".concat(_N));if(s.shape[1]>=_N)throw new Error("trailing dim_size must less than ".concat(_N," for int32 output type, was ").concat(s.shape[1]));const l={sortedSequence:s,values:c},u={side:n};return Ck.runKernel(bx,l,u)}});function ON(e,t){return LN(e,t,"left")}const RN=Rk({maxPool_:function(e,t,n,r,o){const a=_k(e,"x","maxPool");let i=a,s=!1;3===a.rank&&(s=!0,i=XI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),dv(4===i.rank,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,"."))),dv(WI(n,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"))),qI("maxPool",r,o);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:o},u=Ck.runKernel(_w,c,l);return s?XI(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const UN=Rk({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const i=_k(e,"x","maxPool3d");let s=i,c=!1;4===i.rank&&(c=!0,s=XI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),dv(5===s.rank,(()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,"."))),dv("NDHWC"===a,(()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(a))),qI("maxPool3d",r,o);const l={x:s},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:a},A=Ck.runKernel(Ow,l,u);return c?XI(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}});const DN=Rk({maxPoolWithArgmax_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a={x:_k(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},s=Ck.runKernel(Uw,a,i);return{result:s[0],indexes:s[1]}}});const PN=Rk({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:_k(e,"x","mean")},o={axis:t,keepDims:n};return Ck.runKernel(Dw,r,o)}});function MN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Qv(e),"complex64"===t){const t=MN(e,"float32"),n=MN(e,"float32");return Uk(t,n)}const n=Pv(gv(e),t);return Ck.makeTensor(n,e,t)}function QN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Qv(e),"complex64"===t){const t=QN(e,"float32"),n=MN(e,"float32");return Uk(t,n)}const n=Dv(gv(e),t);return Ck.makeTensor(n,e,t)}function HN(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let r=_k(e,"x","meshgrid",e instanceof nk?e.dtype:"float32");if(void 0===t)return[r];let o=_k(t,"y","meshgrid",t instanceof nk?t.dtype:"float32");const a=gv(r.shape),i=gv(o.shape);return"xy"===n?(r=XI(r,[1,-1]),o=XI(o,[-1,1]),[$I(QN([i,1],r.dtype),r),$I(o,QN([1,a],o.dtype))]):(r=XI(r,[-1,1]),o=XI(o,[1,-1]),[$I(r,QN([1,i],r.dtype)),$I(QN([a,1],o.dtype),o)])}const zN=Rk({minimum_:function(e,t){let n=_k(e,"a","minimum"),r=_k(t,"b","minimum");[n,r]=fk(n,r),"bool"===n.dtype&&(n=ZB(n,"int32"),r=ZB(r,"int32")),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Mw,o)}});const VN=Rk({mirrorPad_:function(e,t,n){dv("reflect"===n||"symmetric"===n,(()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")));const r=_k(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");dv(t.length===r.rank,(()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")));const o="reflect"===n?1:0;for(let s=0;s<r.rank;s++)dv(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),dv(t[s][0]>=0&&t[s][0]<=r.shape[s]-o&&t[s][1]>=0&&t[s][1]<=r.shape[s]-o,(()=>"Padding in dimension ".concat(s," cannot be greater than or equal ")+"to ".concat(r.shape[s]-o," or less than 0 for input of ")+"shape ".concat(r.shape)));const a={paddings:t,mode:n},i={x:r};return Ck.runKernel(Qw,i,a)}});const jN=Rk({mod_:function(e,t){let n=_k(e,"a","mod"),r=_k(t,"b","mod");[n,r]=fk(n,r);const o={a:n,b:r};return Ck.runKernel(Hw,o)}});const WN=Rk({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Cv(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=_k(e,"x","moments")).shape),r=PN(e,n,t);let o=r.shape;t||(o=KE(r.shape,n));const a=aS(vS(ZB(e,"float32"),XI(r,o)));return{mean:r,variance:PN(a,n,t)}}});const KN=Rk({multiRNNCell_:function(e,t,n,r){const o=_k(t,"data","multiRNNCell"),a=Lk(n,"c","multiRNNCell"),i=Lk(r,"h","multiRNNCell");let s=o;const c=[];for(let A=0;A<e.length;A++){const t=e[A](s,a[A],i[A]);c.push(t[0]),c.push(t[1]),s=t[1]}const l=[],u=[];for(let A=0;A<c.length;A+=2)l.push(c[A]),u.push(c[A+1]);return[l,u]}});const GN=Rk({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=_k(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(a,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();const s={logits:1===i?XI(o,[1,-1]):o},c={numSamples:t,seed:n,normalized:r},l=Ck.runKernel(zw,s,c);return 1===i?XI(l,[l.size]):l}});const qN=Rk({notEqual_:function(e,t){let n=_k(e,"a","notEqual","string_or_numeric"),r=_k(t,"b","notEqual","string_or_numeric");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Ww,o)}});const XN=Rk({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const a={indices:_k(e,"indices","oneHot","int32")},i={dtype:o,depth:t,onValue:n,offValue:r};return Ck.runKernel(Yw,a,i)}});const YN=Rk({onesLike_:function(e){const t={x:_k(e,"x","onesLike")};return Ck.runKernel(Xw,t)}});const ZN=Rk({outerProduct_:function(e,t){const n=_k(e,"v1","outerProduct"),r=_k(t,"v2","outerProduct");dv(1===n.rank&&1===r.rank,(()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")));const o=XI(n,[-1,1]),a=XI(r,[1,-1]);return $I(o,a)}});const JN=Rk({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=_k(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},a={x:r};return Ck.runKernel(Jw,a,o)}});const $N=Rk({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return dv(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),JN(e,[t],n)}});const eF=Rk({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return dv(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),JN(e,t,n)}});const tF=Rk({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return dv(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),JN(e,t,n)}});const nF=Rk({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return dv(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),JN(e,t,n)}});const rF=Rk({spaceToBatchND_:function(e,t,n){const r=_k(e,"x","spaceToBatchND");dv(r.rank>=1+t.length,(()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length))),dv(n.length===t.length,(()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length))),dv(r.shape.reduce(((e,r,o)=>o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]===0:e),!0),(()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())));const o={x:r},a={blockShape:t,paddings:n};return Ck.runKernel(Tx,o,a)}});const oF=Rk({pool_:function(e,t,n,r,o,a,i){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");const s=_k(e,"x","maxPool");let c=s,l=!1;3===s.rank&&(l=!0,c=XI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),dv(WI(a,o),(()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(o,"'")));const u=RI(c.shape,t,a,o,r),A=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),o=r.map((e=>Math.floor(e/2))),a=r.map(((e,t)=>e-o[t]));return r.map(((e,t)=>[o[t],a[t]]))}([u.filterHeight,u.filterWidth],A):[[0,0],[0,0]];const d=1===A[0]&&1===A[1],[p,f]=function(e,t,n){const r=n.map((e=>e[0])),o=n.map((e=>e[1])),a=e.concat(r,o),i=t.map(((e,t)=>(e-a[t]%e)%e)),s=o.map(((e,t)=>e+i[t])),c=t.map(((e,t)=>[r[t],s[t]])),l=t.map(((e,t)=>[0,i[t]]));return[c,l]}([u.inHeight,u.inWidth],A,h),g=d?r:"valid",m=d?c:rF(c,A,p),y=("avg"===n?()=>YI(m,t,a,g,i):()=>RN(m,t,a,g,i))(),v=d?y:oE(y,A,f);return l?XI(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});const aF=Rk({prelu_:function(e,t){const n={x:_k(e,"x","prelu"),alpha:_k(t,"alpha","prelu")};return Ck.runKernel(ex,n)}});const iF=Rk({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_k(e,"x","prod");"bool"===r.dtype&&(r=ZB(r,"int32"));const o={x:r},a={axis:t,keepDims:n};return Ck.runKernel(tx,o,a)}});const sF=Rk({raggedGather_:function(e,t,n,r){const o=e.map(((e,t)=>_k(e,"tensors".concat(t),"raggedGather","int32"))),a={paramsNestedSplits:o,paramsDenseValues:_k(t,"paramsDenseValues","raggedGather"),indices:_k(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},s=Ck.runKernel(nx,a,i);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}});const cF=Rk({raggedRange_:function(e,t,n){const r=_k(e,"starts","raggedRange"),o={starts:r,limits:_k(t,"limits","raggedRange",r.dtype),deltas:_k(n,"deltas","raggedRange",r.dtype)},a=Ck.runKernel(rx,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}});const lF=Rk({raggedTensorToTensor_:function(e,t,n,r,o){const a=_k(e,"shape","raggedTensorToTensor","int32"),i=_k(t,"values","raggedTensorToTensor"),s=_k(n,"defaultValue","raggedTensorToTensor",i.dtype),c=r.map(((e,t)=>_k(e,"tensors".concat(t),"raggedTensorToTensor","int32"))),l={shape:a,values:i,defaultValue:s,rowPartitionTensors:c},u={rowPartitionTypes:o};return Ck.runKernel(ox,l,u)}});const uF=Rk({rand_:function(e,t,n){Qv(e);const r=gv(e);let o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));o=new Uint8Array(r)}for(let a=0;a<r;a++)o[a]=t();return Ck.makeTensor(o,e,n)}});var AF=n(6699);class hF{constructor(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const a=o||Math.random();this.random=AF.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,o,a;do{r=2*this.random()-1,o=2*this.random()-1,a=r*r+o*o}while(a>=1||0===a);const i=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*o*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class dF{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const o=r||Math.random();this.randu=AF.alea(o.toString()),this.randn=new hF(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,o,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),o=this.randu(),o<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class pF{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=AF.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const fF=Rk({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;if(Qv(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));const a=new dF(t,n,r,o),i=YB(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const gF=Rk({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(Qv(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const a=new hF(t,n,r,!1,o),i=YB(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const mF=Rk({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return gF(e,0,1,t,n)}});const yF=Rk({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0;Qv(e);const a=YB(e,r),i=new pF(t,n,null,o);for(let s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});const vF=Rk({randomUniformInt_:function(e,t,n,r){return yF(e,t,n,"int32",r)}});function bF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:r};return Ck.runKernel(ax,{},o)}const wF=Rk({real_:function(e){const t={input:_k(e,"input","real")};return Ck.runKernel(ix,t)}});const xF=Rk({reciprocal_:function(e){const t={x:_k(e,"x","reciprocal")};return Ck.runKernel(sx,t)}});const CF=Rk({relu_:function(e){const t={x:_k(e,"x","relu")};return Ck.runKernel(cx,t)}});const kF=Rk({relu6_:function(e){const t={x:_k(e,"x","relu6")};return Ck.runKernel(px,t)}});const BF=Rk({reverse_:function(e,t){const n={x:_k(e,"x","reverse")},r={dims:t};return Ck.runKernel(fx,n,r)}});const SF=Rk({reverse1d_:function(e){const t=_k(e,"x","reverse");return dv(1===t.rank,(()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,"."))),BF(t,0)}});const IF=Rk({reverse2d_:function(e,t){const n=_k(e,"x","reverse");return dv(2===n.rank,(()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,"."))),BF(n,t)}});const EF=Rk({reverse3d_:function(e,t){const n=_k(e,"x","reverse");return dv(3===n.rank,(()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,"."))),BF(n,t)}});const NF=Rk({reverse4d_:function(e,t){const n=_k(e,"x","reverse");return dv(4===n.rank,(()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,"."))),BF(n,t)}});const FF=Rk({round_:function(e){const t={x:_k(e,"x","round")};return Ck.runKernel(gx,t)}});const TF=Rk({rsqrt_:function(e){const t={x:_k(e,"x","rsqrt","float32")};return Ck.runKernel(mx,t)}});const _F=Rk({selu_:function(e){const t={x:_k(e,"x","selu")};return Ck.runKernel(xx,t)}});const LF=Rk({separableConv2d_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=_k(e,"x","separableConv2d"),c=_k(t,"depthwiseFilter","separableConv2d"),l=_k(n,"pointwiseFilter","separableConv2d");let u=s,A=!1;if(3===s.rank&&(A=!0,u=XI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");dv(4===u.rank,(()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,"."))),dv(4===c.rank,(()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),dv(4===l.rank,(()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,"."))),dv(1===l.shape[0],(()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],"."))),dv(1===l.shape[1],(()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")));const h=c.shape[2],d=c.shape[3];dv(l.shape[2]===h*d,(()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*d,", ")+"but got ".concat(l.shape[2],".")));const p=_E(u,c,r,o,i,a),f=vE(p,l,1,"valid",i);return A?XI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const OF=async function(e,t){const n=_k(e,"x","setdiff1d"),r=_k(t,"y","setdiff1d");dv(n.dtype===r.dtype,(()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,")."))),dv(1===n.rank,(()=>"x should be 1D tensor, but got x (".concat(n.shape,")."))),dv(1===r.rank,(()=>"y should be 1D tensor, but got y (".concat(r.shape,").")));const o=await n.data(),a=await r.data(),i=new Set(a);let s=0;for(let u=0;u<o.length;u++)i.has(o[u])||s++;const c=new JC([s],n.dtype),l=new JC([s],"int32");for(let u=0,A=0;u<o.length;u++)i.has(o[u])||(c.values[A]=o[u],l.values[A]=u,A++);return[c.toTensor(),l.toTensor()]};const RF=Rk({sign_:function(e){const t={x:_k(e,"x","sign")};return Ck.runKernel(Sx,t)}});const UF=Rk({sin_:function(e){const t={x:_k(e,"x","sin","float32")};return Ck.runKernel(kx,t)}});const DF=Rk({sinh_:function(e){const t={x:_k(e,"x","sinh")};return Ck.runKernel(Bx,t)}});const PF=Rk({slice1d_:function(e,t,n){const r=_k(e,"x","slice1d");return dv(1===r.rank,(()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor"))),tE(r,[t],[n])}});const MF=Rk({slice2d_:function(e,t,n){const r=_k(e,"x","slice2d");return dv(2===r.rank,(()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor"))),tE(r,t,n)}});const QF=Rk({slice3d_:function(e,t,n){const r=_k(e,"x","slice3d");return dv(3===r.rank,(()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor"))),tE(r,t,n)}});const HF=Rk({slice4d_:function(e,t,n){const r=_k(e,"x","slice4d");return dv(4===r.rank,(()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor"))),tE(r,t,n)}});const zF=Rk({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=_k(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},o={dim:t};return Ck.runKernel(Lx,r,o)}});const VF=Rk({fft_:function(e){dv("complex64"===e.dtype,(()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return Ck.runKernel(rw,t)}});const jF=Rk({ifft_:function(e){dv("complex64"===e.dtype,(()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")));const t={input:e};return Ck.runKernel(pw,t)}});const WF=Rk({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const o=XI(e,[n,t]);r=jF(o)}else{const o=[n,2*(t-1)],a=XI(wF(e),[n,t]),i=XI(hN(e),[n,t]),s=BF(tE(a,[0,1],[n,t-2]),1),c=rS(BF(tE(i,[0,1],[n,t-2]),1),cS(-1)),l=JI([a,s],1),u=JI([i,c],1),A=XI(Uk(l,u),[o[0],o[1]]);r=jF(A)}if(r=wF(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=XI(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const KF=Rk({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:_k(e,"x","split")},o={numOrSizeSplits:t,axis:n};return Ck.runKernel(_x,r,o)}});const GF=Rk({rfft_:function(e,t){dv("float32"===e.dtype,(()=>"The dtype for rfft() must be real value but got ".concat(e.dtype)));let n=e.shape[e.shape.length-1];const r=e.size/n;let o;if(null!=t&&t<n){const r=e.shape.map((e=>0)),a=e.shape.map((e=>e));a[e.shape.length-1]=t,o=tE(e,r,a),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,o=JI([e,MN(r)],e.shape.length-1),n=t}else o=e;const a=iS(o),i=XI(Uk(o,a),[r,n]),s=VF(i),c=Math.floor(n/2)+1,l=wF(s),u=hN(s),A=KF(l,[c,n-c],l.shape.length-1),h=KF(u,[c,n-c],u.shape.length-1),d=o.shape.slice();return d[o.shape.length-1]=c,XI(Uk(A[0],h[0]),d)}});const qF=Rk({squaredDifference_:function(e,t){let n=_k(e,"a","squaredDifference"),r=_k(t,"b","squaredDifference");[n,r]=fk(n,r),kS(n.shape,r.shape);const o={a:n,b:r};return Ck.runKernel(Mx,o,{})}});const XF=Rk({squeeze_:function(e,t){const n=_k(e,"x","squeeze","string_or_numeric");return XI(n,kv(n.shape,t).newShape)}});const YF=Rk({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Lk(e,"tensors","stack","string_or_numeric");dv(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&dv(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,o={axis:t};return Ck.runKernel(Zw,r,o)}});const ZF=Rk({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:_k(e,"x","step")},r={alpha:t};return Ck.runKernel(rC,n,r)}});const JF=Rk({stridedSlice_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const l={x:_k(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:o,endMask:a,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:c};return Ck.runKernel(zx,l,u)}});const $F=Rk({tan_:function(e){const t={x:_k(e,"x","tan","float32")};return Ck.runKernel(Gx,t)}});function eT(e,t){fv(e);const n=Nk(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Dk(e,null,n,t)}function tT(e,t,n){if(fv(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Nk(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Dk(e,t,r,n)}function nT(e,t,n){if(fv(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Nk(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Dk(e,t,r,n)}function rT(e,t,n){if(fv(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Nk(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Dk(e,t,r,n)}function oT(e,t,n){if(fv(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Nk(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Dk(e,t=t||r,r,n)}function aT(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(o,".");if(n.rank<o)throw new Error(a+" update.rank < ".concat(o,". "));if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < ".concat(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != ".concat(o+e.length-r));for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape[".concat(i+o,"] (").concat(n.shape[i+o],") != shape[").concat(i+o,"] (").concat(e[i+o],")"))}function iT(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}aT(n,t,e)}function sT(e,t,n){const r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length;let i=1;for(let c=o;c<a;++c)i*=n[c];const s=o<1?1:o;return{sliceRank:o,numUpdates:gv(t.shape)/s,sliceSize:i,strides:[...Ov(n.slice(0,o)),1],outputSize:gv(n)}}const cT=Rk({tensorScatterUpdate_:function(e,t,n){const r=_k(e,"tensor","tensorScatterupdate"),o=_k(t,"indices","tensorScatterupdate","int32"),a=_k(n,"updates","tensorScatterupdate");if(iT(a,o,r.shape),r.dtype!==a.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(a.dtype,"."));const i={tensor:r,indices:o,updates:a};return Ck.runKernel(vx,i,{})}});const lT=Rk({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_k(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(o,") ")+"but got ".concat(t));const a={x:r},i={k:t,sorted:n},[s,c]=Ck.runKernel(Yx,a,i);return{values:s,indices:c}}});const uT=Rk({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(Qv(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const a=new hF(t,n,r,!0,o),i=YB(e,r);for(let s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});const AT=Rk({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=_k(e,"x","unique","string_or_numeric");dv(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},o={axis:t},[a,i]=Ck.runKernel($x,r,o);return{values:a,indices:i}}});const hT=Rk({unsortedSegmentSum_:function(e,t,n){const r=_k(e,"x","unsortedSegmentSum"),o=_k(t,"segmentIds","unsortedSegmentSum","int32");dv(yv(n),(()=>"numSegments must be of dtype int"));const a={x:r,segmentIds:o},i={numSegments:n};return Ck.runKernel(tC,a,i)}});const dT=Rk({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=_k(e,"x","unstack","string_or_numeric");dv(t>=-n.shape.length&&t<n.shape.length,(()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")));const r={value:n},o={axis:t};return Ck.runKernel(eC,r,o)}});function pT(e,t){return LN(e,t,"right")}function fT(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Ck.makeVariable(e,t,n,r)}function gT(e,t){const n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);const r=YB(e,"int32"),o=YB([n.length,e.length],"int32");for(let a=0;a<n.length;a++){const t=r.indexToLoc(n[a]),i=a*e.length;o.values.set(t,i)}return o.toTensor()}const mT=async function(e){const t=_k(e,"condition","whereAsync","bool"),n=await t.data(),r=gT(t.shape,n);return e!==t&&t.dispose(),r};const yT=async function(e,t,n){const r=_k(e,"tensor","boolMask"),o=_k(t,"mask","boolMask","bool"),a=null==n?0:n,i=o.rank,s=r.shape;dv(i>0,(()=>"mask cannot be scalar")),pv(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let f=a;f<a+i;f++)c*=s[f];const l=s.slice(0,a).concat([c],s.slice(a+i)),u=XI(r,l),A=XI(o,[-1]),h=await mT(A),d=XF(h,[1]),p=lN(u,d,a);return e!==r&&r.dispose(),t!==o&&o.dispose(),d.dispose(),u.dispose(),A.dispose(),h.dispose(),p};const vT=Rk({transpose_:function(e,t,n){const r=_k(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),dv(r.rank===t.length,(()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,"."))),t.forEach((e=>{dv(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)))})),r.rank<=1)return r.clone();const o={x:r},a={perm:t};return"complex64"===r.dtype?Vk((()=>{let e=wF(r),t=hN(r);return e=Ck.runKernel(Jx,{x:e},a),t=Ck.runKernel(Jx,{x:t},a),n&&(t=CN(t)),Uk(e,t)})):Ck.runKernel(Jx,o,a)}});const bT=Rk({movingAverage_:function(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const a=_k(e,"v","movingAverage"),i=_k(t,"x","movingAverage"),s=_k(n,"decay","movingAverage");!function(e,t){dv(e.dtype===t.dtype,(()=>"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")))}(a,i),dv(mv(a.shape,i.shape),(()=>"Shape mismatch in v and x"));const c=cS(1),l=vS(c,s);let u=rS(vS(i,a),l);if(o){dv(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=_k(r,"step","movingAverage");u=nS(u,vS(c,yS(s,e)))}return eS(a,u)}});const wT=Rk({scatterND_:function(e,t,n){Qv(n);const r=_k(e,"indices","scatterND","int32"),o=_k(t,"updates","scatterND");iT(o,r,n);const a={indices:r,updates:o},i={shape:n};return Ck.runKernel(yx,a,i)}});const xT=Rk({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Qv(n);const o=_k(e,"sparseIndices","sparseToDense","int32"),a=_k(t,"sparseValues","sparseToDense","string_or_numeric"),i=_k(r,"defaultValue","sparseToDense",a.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(a,"."));const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(o,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i);const s={sparseIndices:o,sparseValues:a,defaultValue:i},c={outputShape:n};return Ck.runKernel(Px,s,c)}});const CT=Rk({gatherND_:function(e,t){const n=_k(t,"indices","gatherND","int32"),r={params:_k(e,"x","gatherND","string_or_numeric"),indices:n};return Ck.runKernel(uw,r)}});const kT=Rk({dropout_:function(e,t,n,r){const o=_k(e,"x","dropout");if(dv("float32"===o.dtype,(()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(o.dtype," tensor instead."))),dv(t>=0&&t<1,(()=>"rate must be a float in the range [0, 1), but got ".concat(t,"."))),0===t)return e instanceof nk?o.clone():o;const a=function(e,t){if(null==t)return e.shape.slice();if(mv(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=nS(cN(eS(yF(a,0,1,"float32",r),i)),i);return rS(o,s)}});function BT(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function ST(e,t,n){const r=1-e%2,o=new Float32Array(e);for(let a=0;a<e;++a){const i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return eT(o,"float32")}const IT=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=_k(e,"predictions","inTopK"),o=_k(t,"targets","inTopK");dv(r.rank>1,(()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank))),dv(r.rank-1===o.rank,(()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(o.rank))),pv(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];dv(n>0&&n<=a,(()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(a,"), but got ").concat(n)));const i=await r.data(),s=await o.data(),[c,l]=[i.length/a,a],u=Bv("bool",c);for(let A=0;A<c;A++){const e=A*l,t=i.subarray(e,e+l),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort(((e,t)=>t.value-e.value)),u[A]=0;for(let o=0;o<n;o++)if(r[o].index===s[A]){u[A]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),Pk(u,o.shape,"bool")};const ET=Rk({conv2DBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=XI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=XI(t,[1,t.shape[0],t.shape[1],t.shape[2]])),dv(4===s.rank,(()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,"."))),dv(4===c.rank,(()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(c.shape,"."))),dv(4===n.length,(()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")));const l="NHWC"===a?s.shape[3]:s.shape[1],u="NHWC"===a?c.shape[3]:c.shape[1];dv(l===n[2],(()=>"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],"."))),dv(u===n[3],(()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],")."))),qI("conv2dDerFilter",o,i);const A={x:s,dy:c},h={strides:r,pad:o,dataFormat:a,dimRoundingMode:i,filterShape:n};return Ck.runKernel(Eb,A,h)}});function NT(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return rS(e,ZF(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function FT(e,t){let n=t;const r=CS(e.shape,t.shape);return r.length>0&&(n=$E(n,r)),XI(n,e.shape)}function TT(e,t,n,r){if("linear"===t)return e;if("relu"===t)return CF(e);if("elu"===t)return QE(e);if("relu6"===t)return kF(e);if("prelu"===t)return aF(e,n);if("leakyrelu"===t)return gN(e,r);if("sigmoid"===t)return eE(e);throw new Error("Unknown fused activation ".concat(t,"."))}const _T=(e,t)=>!(e>0)||"linear"===t;const LT=Rk({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:A}=e;if(l=l||"linear",!1===_T(Ck.state.gradientDepth,l)){dv("NHWC"===a,(()=>"Error in fused conv2d: got dataFormat of ".concat(a," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=vE(t,n,r,o,a,i,s);return null!=c&&(e=eS(e,c)),TT(e,l,u,A)}const h=_k(t,"x","conv2d","float32"),d=_k(n,"filter","conv2d","float32");let p=h,f=!1;3===h.rank&&(f=!0,p=XI(h,[1,h.shape[0],h.shape[1],h.shape[2]])),dv(4===p.rank,(()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(p.rank,"."))),dv(4===d.rank,(()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(d.rank,"."))),qI("fused conv2d",o,s);const g="NHWC"===a?p.shape[3]:p.shape[1];dv(d.shape[2]===g,(()=>"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(d.shape[2],"."))),dv(WI(r,i),(()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(i,"'")));const m=DI(p.shape,d.shape,r,i,o,s);let y,v;if(null!=c&&(y=_k(c,"bias","fused conv2d"),[y]=fk(y,h),"NHWC"===a?kS(m.outShape,y.shape):(dv(y.shape.length<=1,(()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(y.shape.length,"."))),dv(0===y.shape.length||y.shape[0]===m.outChannels||1===y.shape[0],(()=>"Error in fused conv2d: bias shape (".concat(y.shape,") is not ")+"compatible with the number of output channels "+"(".concat(m.outChannels,")"))))),null!=u){const e=u.shape;if(dv(e.length<=1||3===e.length,(()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,"."))),1===e.length)dv(1===e[0]||e[0]===m.outChannels,(()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(m.outChannels,").")));else if(3===e.length)try{kS(e,m.outShape)}catch(C){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(m.outShape,").");throw Error(t)}v=_k(u,"prelu weights","fused conv2d")}const b=(e,t)=>{dv("NHWC"===a,(()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(a," but only NHWC is currently supported.")));const[n,s,c,u]=t,A=NT(e,c,l);dv(jI(i),(()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")));const h=[wE(s.shape,A,n,r,o),ET(s,A,n.shape,r,o)];if(null!=u){const e=FT(u,A);h.push(e)}return h},w={x:p,filter:d,bias:y,preluActivationWeights:v},x={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:A};if(null==c){const e=sS(((e,t,n)=>{let r=Ck.runKernel(sC,w,x);return n([t,e,r]),f&&(r=XI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(p,d)}{const e=sS(((e,t,n,r)=>{let o=Ck.runKernel(sC,w,x);return r([t,e,o,n]),f&&(o=XI(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:b}}));return e(p,d,y)}}});const OT=Rk({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=XI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c=t;3===c.rank&&(c=XI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={x:s,dy:c},u={strides:r,pad:o,dimRoundingMode:i,dilations:a,filterShape:n};return Ck.runKernel(Hb,l,u)}});const RT=Rk({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,c=!1;3===t.rank&&(c=!0,s=XI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const l={dy:s,filter:n},u={strides:r,pad:o,dimRoundingMode:i,dilations:a,inputShape:e},A=Ck.runKernel(zb,l,u);return c?XI(A,[A.shape[1],A.shape[2],A.shape[3]]):A}});const UT=Rk({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:c,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:A}=e;if(!1===_T(Ck.state.gradientDepth,l)){let e=_E(t,n,r,o,a,i,s);return null!=c&&(e=eS(e,c)),TT(e,l,u,A)}const h=_k(t,"x","depthwiseConv2d","float32"),d=_k(n,"filter","depthwiseConv2d","float32");let p=h,f=!1;3===h.rank&&(f=!0,p=XI(h,[1,h.shape[0],h.shape[1],h.shape[2]])),dv(4===p.rank,(()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(p.rank,"."))),dv(4===d.rank,(()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(d.rank,"."))),dv(p.shape[3]===d.shape[2],(()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(p.shape[3],") must match the inChannels dimension in ")+"filter ".concat(d.shape[2],"."))),null==i&&(i=[1,1]),dv(WI(r,i),(()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(i,"'"))),qI("fused depthwiseConv2d",o,s);const g=DI(p.shape,d.shape,r,i,o,s,!0);let m,y;null!=c&&(m=_k(c,"bias","fused conv2d"),[m]=fk(m,h),kS(g.outShape,m.shape)),null!=u&&(y=_k(u,"prelu weights","fused depthwiseConv2d"));const v=(e,t)=>{dv(jI(i),(()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(i,"'")));const[n,a,c,u]=t,A=NT(e,c,l),h=RT(a.shape,A,n,r,o,i,s),d=OT(a,A,n.shape,r,o,i,s);if(null!=u){return[h,d,FT(m,A)]}return[h,d]},b={x:p,filter:d,bias:m,preluActivationWeights:y},w={strides:r,pad:o,dataFormat:a,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:A};if(null==c){const e=sS(((e,t,n)=>{let r=Ck.runKernel(cC,b,w);return n([t,e,r]),f&&(r=XI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}}));return e(p,d)}{const e=sS(((e,t,n,r)=>{let o=Ck.runKernel(cC,b,w);return r([t,e,o,n]),f&&(o=XI(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:v}}));return e(p,d,m)}}});const DT=Rk({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:o=!1,bias:a,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:c=.2}=e;if(!1===_T(Ck.state.gradientDepth,i)){let e=$I(t,n,r,o);return null!=a&&(e=eS(e,a)),TT(e,i,s,c)}let l=_k(t,"a","fused matMul"),u=_k(n,"b","fused matMul");[l,u]=fk(l,u);const A=r?l.shape[l.rank-2]:l.shape[l.rank-1],h=o?u.shape[u.rank-1]:u.shape[u.rank-2],d=r?l.shape[l.rank-1]:l.shape[l.rank-2],p=o?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),g=u.shape.slice(0,-2),m=gv(f),y=gv(g);dv(A===h,(()=>"Error in fused matMul: inner shapes (".concat(A,") and (")+"".concat(h,") of Tensors with shapes ").concat(l.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const v=kS(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,p]),b=XI(l,r?[m,A,d]:[m,d,A]),w=XI(u,o?[y,p,h]:[y,h,p]);let x,C;null!=a&&(x=_k(a,"bias","fused matMul"),[x]=fk(x,l),kS(v,x.shape)),null!=s&&(C=_k(s,"prelu weights","fused matMul"));const k=(e,t)=>{const[n,s,c,l]=t,u=NT(XI(e,c.shape),c,i);let A,h;if(r||o?!r&&o?(A=$I(u,s,!1,!1),h=$I(u,n,!0,!1)):r&&!o?(A=$I(s,u,!1,!0),h=$I(n,u,!1,!1)):(A=$I(s,u,!0,!0),h=$I(u,n,!0,!0)):(A=$I(u,s,!1,!0),h=$I(n,u,!0,!1)),null!=a){return[A,h,FT(l,u)]}return[A,h]},B={a:b,b:w,bias:x,preluActivationWeights:C},S={transposeA:r,transposeB:o,activation:i,leakyreluAlpha:c};if(null==a){const e=sS(((e,t,n)=>{const r=Ck.runKernel(iC,B,S);return n([e,t,r]),{value:XI(r,v),gradFunc:k}}));return e(b,w)}{const e=sS(((e,t,n,r)=>{const o=Ck.runKernel(iC,B,S);return r([e,t,o,n]),{value:XI(o,v),gradFunc:k}}));return e(b,w,x)}}});const PT=Rk({hammingWindow_:function(e){return ST(e,.54,.46)}});const MT=Rk({hannWindow_:function(e){return ST(e,.5,.5)}});const QT=Rk({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0;const i=[];for(;a+t<=e.size;)i.push(tE(e,a,t)),a+=n;if(r)for(;a<e.size;){const r=a+t-e.size,s=JI([tE(e,a,t-r),gS([r],o)]);i.push(s),a+=n}return 0===i.length?tT([],[0,t]):XI(JI(i),[i.length,t])}});const HT=Rk({stft_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:MT;null==r&&(r=BT(t));const a=QT(e,t,n),i=rS(a,o(t));return GF(i,r)}});const zT=Rk({cropAndResize_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=_k(e,"image","cropAndResize"),s=_k(t,"boxes","cropAndResize","float32"),c=_k(n,"boxInd","cropAndResize","int32"),l=s.shape[0];dv(4===i.rank,(()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),dv(2===s.rank&&4===s.shape[1],(()=>"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,"."))),dv(1===c.rank&&c.shape[0]===l,(()=>"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,"."))),dv(2===r.length,(()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,"."))),dv(r[0]>=1&&r[1]>=1,(()=>"cropSize must be atleast [1,1], but was ".concat(r))),dv("bilinear"===o||"nearest"===o,(()=>"method must be bilinear or nearest, but was ".concat(o)));const u={image:i,boxes:s,boxInd:c},A={method:o,extrapolationValue:a,cropSize:r};return Ck.runKernel(Db,u,A)}});const VT=Rk({flipLeftRight_:function(e){const t=_k(e,"image","flipLeftRight","float32");dv(4===t.rank,(()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")));const n={image:t};return Ck.runKernel(aw,n,{})}});const jT=Rk({grayscaleToRGB_:function(e){const t=_k(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];dv(t.rank>=2,(()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),dv(1===r,(()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")));const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,iN(t,o)}});const WT=Rk({rgbToGrayscale_:function(e){const t=_k(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];dv(t.rank>=2,(()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,"."))),dv(3===r,(()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,".")));const o=t.dtype,a=ZB(t,"float32"),i=eT([.2989,.587,.114]);let s;switch(t.rank){case 2:s=ME("ij,j->i",a,i);break;case 3:s=ME("ijk,k->ij",a,i);break;case 4:s=ME("ijkl,l->ijk",a,i);break;case 5:s=ME("ijklm,m->ijkl",a,i);break;case 6:s=ME("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return s=oN(s,-1),ZB(s,o)}});const KT=Rk({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=_k(e,"image","rotateWithOffset","float32");dv(4===o.rank,(()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(o.rank,".")));const a={image:o},i={radians:t,fillValue:n,center:r};return Ck.runKernel(aC,a,i)}});function GT(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);const i=e.shape[0];return n=Math.min(n,i),dv(0<=r&&r<=1,(()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'"))),dv(2===e.rank,(()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'"))),dv(4===e.shape[1],(()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1]))),dv(1===t.rank,(()=>"scores must be a 1D tensor")),dv(t.shape[0]===i,(()=>"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0]))),dv(0<=a&&a<=1,(()=>"softNmsSigma must be in [0, 1], but was '".concat(a,"'"))),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}const qT=Rk({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=_k(e,"boxes","nonMaxSuppression","float32"),i=_k(t,"scores","nonMaxSuppression","float32"),s=GT(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Ck.runKernel(Kw,{boxes:a,scores:i},c)}});function XT(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,o=e.length,a=0,i=!1;for(;r<o;){a=r+(o-r>>>1);const s=n(t,e[a]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||YT)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function YT(e,t){return e>t?1:e<t?-1:0}function ZT(e,t,n,r,o){return e_(e,t,n,r,o,0)}function JT(e,t,n,r,o,a){return e_(e,t,n,r,o,0,!1,a,!0)}function $T(e,t,n,r,o,a){return e_(e,t,n,r,o,a,!0)}function e_(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=[];for(let g=0;g<t.length;g++)t[g]>o&&l.push({score:t[g],boxIndex:g,suppressBeginIndex:0});l.sort(r_);const u=a>0?-.5/a:0,A=[],h=[];for(;A.length<n&&l.length>0;){const t=l.pop(),{score:n,boxIndex:a,suppressBeginIndex:i}=t;if(n<o)break;let s=!1;for(let c=A.length-1;c>=i;--c){const n=t_(e,a,A[c]);if(n>=r){s=!0;break}if(t.score=t.score*n_(r,u,n),t.score<=o)break}t.suppressBeginIndex=A.length,s||(t.score===n?(A.push(a),h.push(t.score)):t.score>o&&XT(l,t,r_))}const d=A.length,p=n-d;s&&p>0&&(A.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const f={selectedIndices:A};return i&&(f.selectedScores=h),c&&(f.validOutputs=d),f}function t_(e,t,n){const r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),A=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),d=(s-a)*(c-i),p=(A-l)*(h-u);if(d<=0||p<=0)return 0;const f=Math.max(a,l),g=Math.max(i,u),m=Math.min(s,A),y=Math.min(c,h),v=Math.max(m-f,0)*Math.max(y-g,0);return v/(d+p-v)}function n_(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function r_(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const o_=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const a=_k(e,"boxes","nonMaxSuppressionAsync"),i=_k(t,"scores","nonMaxSuppressionAsync"),s=GT(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;const c=await Promise.all([a.data(),i.data()]),l=c[0],u=c[1],{selectedIndices:A}=ZT(l,u,n,r,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),eT(A,"int32")};const a_=Rk({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=_k(e,"boxes","nonMaxSuppression"),s=_k(t,"scores","nonMaxSuppression"),c=GT(i,s,n,r,o,a);n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,a=c.softNmsSigma;const l={boxes:i,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a},A=Ck.runKernel(qw,l,u);return{selectedIndices:A[0],selectedScores:A[1]}}});const i_=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=_k(e,"boxes","nonMaxSuppressionAsync"),s=_k(t,"scores","nonMaxSuppressionAsync"),c=GT(i,s,n,r,o,a);n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,a=c.softNmsSigma;const l=await Promise.all([i.data(),s.data()]),u=l[0],A=l[1],{selectedIndices:h,selectedScores:d}=$T(u,A,n,r,o,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:eT(h,"int32"),selectedScores:eT(d)}};const s_=Rk({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=_k(e,"boxes","nonMaxSuppression"),s=_k(t,"scores","nonMaxSuppression"),c=GT(i,s,n,r,o,null),l={boxes:i,scores:s},u={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},A=Ck.runKernel(Gw,l,u);return{selectedIndices:A[0],validOutputs:A[1]}}});const c_=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=_k(e,"boxes","nonMaxSuppressionAsync"),s=_k(t,"scores","nonMaxSuppressionAsync"),c=GT(i,s,n,r,o,null),l=c.maxOutputSize,u=c.iouThreshold,A=c.scoreThreshold,[h,d]=await Promise.all([i.data(),s.data()]),{selectedIndices:p,validOutputs:f}=JT(h,d,l,u,A,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),{selectedIndices:eT(p,"int32"),validOutputs:cS(f,"int32")}};const l_=Rk({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=_k(e,"images","resizeBilinear");dv(3===o.rank||4===o.rank,(()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),dv(2===t.length,(()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,"."))),dv(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=XI(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},c={alignCorners:n,halfPixelCenters:r,size:t},l=Ck.runKernel(hx,s,c);return i?XI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const u_=Rk({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=_k(e,"images","resizeNearestNeighbor");dv(3===o.rank||4===o.rank,(()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(o.rank,"."))),dv(2===t.length,(()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,"."))),dv("float32"===o.dtype||"int32"===o.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),dv(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let a=o,i=!1;3===o.rank&&(i=!0,a=XI(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const[]=t,s={images:a},c={alignCorners:n,halfPixelCenters:r,size:t},l=Ck.runKernel(ux,s,c);return i?XI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});const A_=Rk({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=_k(e,"image","threshold"),a=o.shape[0]*o.shape[1];let i,s,c,l,u=rS(eT([r]),255);if(dv(3===o.rank,(()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(o.rank,"."))),dv(3===o.shape[2]||1===o.shape[2],(()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(o.shape[2],"."))),dv("int32"===o.dtype||"float32"===o.dtype,(()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(o.dtype,"."))),dv("otsu"===t||"binary"===t,(()=>"Method must be binary or otsu, but was ".concat(t))),3===o.shape[2]){[i,s,c]=KF(o,[1,1,1],-1);const e=rS(i,.2989),t=rS(s,.587),n=rS(c,.114);l=eS(eS(e,t),n)}else l=e;if("otsu"===t){u=function(e,t){let n,r,o,a,i,s,c=eT([-1]),l=eT([0]),u=eT([0]);for(let A=0;A<e.size-1;A++){n=tE(e,0,A+1),r=tE(e,A+1),i=nS($E(n),t),s=nS($E(r),t);const h=$E(rS(n,bF(0,n.size)));o=nS(h,$E(n));const d=gS(r.shape,n.size),p=eS(bF(0,r.size),d),f=rS(r,p);a=nS($E(f),$E(r));const g=vS(o,a),m=vS(o,a),y=rS(i,s);u=rS(rS(y,g),m);const v=uN(u,l);l=UE(v,u,l),c=UE(v,eT([A]),c)}return c}(lE(ZB(FF(l),"int32"),Pk([]),256),a)}const A=n?yN(l,u):uN(l,u);return ZB(rS(A,255),"int32")}});const h_=Rk({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;const i=_k(e,"image","transform","float32"),s=_k(t,"transforms","transform","float32");dv(4===i.rank,(()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,"."))),dv(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),dv(null==a||2===a.length,(()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(a,".")));const c={image:i,transforms:s},l={interpolation:n,fillMode:r,fillValue:o,outputShape:a};return Ck.runKernel(Zx,c,l)}});const d_=Rk({bandPart_:function(e,t,n){const r=_k(e,"a","bandPart");dv(r.rank>=2,(()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")));const o=r.shape,[a,i]=r.shape.slice(-2);let s,c;"number"===typeof t?(dv(t%1===0,(()=>"bandPart(): numLower must be an integer, got ".concat(t,"."))),dv(t<=a,(()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(a,")."))),s=_k(t<0?a:t,"numLower","bandPart")):(dv("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=UE(mN(t,0),a,zN(t,a))),"number"===typeof n?(dv(n%1===0,(()=>"bandPart(): numUpper must be an integer, got ".concat(n,"."))),dv(n<=i,(()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(i,")."))),c=_k(n<0?i:n,"numUpper","bandPart")):(dv("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),c=UE(mN(n,0),i,zN(n,i)));const l=XI(bF(0,a,1,"int32"),[-1,1]),u=bF(0,i,1,"int32"),A=vS(l,u),h=EN(yN(A,s),AN(A,CN(c))),d=MN([a,i],r.dtype);return XI(YF(dT(XI(r,[-1,a,i])).map((e=>UE(h,e,d)))),o)}});const p_=Rk({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,dv(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)dv(e[t].shape[0]===n,(()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")))}else t=!0,e=KF(e,e.shape[0],0).map((e=>XF(e,[0])));dv(e.length<=e[0].shape[0],(()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")));const n=[],r=e;for(let o=0;o<e.length;++o)n.push(Ck.tidy((()=>{let e=r[o];if(o>0)for(let t=0;t<o;++t){const r=rS($E(rS(n[t],e)),n[t]);e=vS(e,r)}return nS(e,tN(e,"euclidean"))})));return t?YF(n,0):n}});function f_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ck.tidy((()=>{dv(2===e.shape.length,(()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")));const n=e.shape[0],r=e.shape[1];let o=sN(n),a=JB(e);const i=tT([[1]],[1,1]);let s=JB(i);const c=n>=r?r:n;for(let e=0;e<c;++e){const t=a,c=s,l=o;[s,a,o]=Ck.tidy((()=>{const t=tE(a,[e,e],[n-e,1]),c=tN(t),l=tE(a,[e,e],[1,1]),u=UE(uN(l,0),tT([[-1]]),tT([[1]])),A=vS(l,rS(u,c)),h=nS(t,A);s=1===h.shape[0]?JB(i):JI([i,tE(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const d=CN(nS($I(u,A),c)),p=tE(a,[e,0],[n-e,r]),f=rS(d,s),g=vT(s);if(0===e)a=vS(p,$I(f,$I(g,p)));else{const t=vS(p,$I(f,$I(g,p)));a=JI([tE(a,[0,0],[e,r]),t],0)}const m=vT(f),y=tE(o,[0,e],[n,o.shape[1]-e]);if(0===e)o=vS(y,$I($I(y,s),m));else{const t=vS(y,$I($I(y,s),m));o=JI([tE(o,[0,0],[n,e]),t],1)}return[s,a,o]})),jk([t,c,l])}return!t&&n>r&&(o=tE(o,[0,0],[n,r]),a=tE(a,[0,0],[r,r])),[o,a]}))}const g_=Rk({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(dv(e.rank>=2,(()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank))),2===e.rank)return f_(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=dT(XI(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];r.forEach((e=>{const[n,r]=f_(e,t);o.push(n),a.push(r)}));return[XI(YF(o,0),e.shape),XI(YF(a,0),e.shape)]}}});var m_;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(m_||(m_={}));const y_=Rk({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m_.SUM_BY_NONZERO_WEIGHTS;const r=_k(e,"losses","computeWeightedLoss");let o=null;null!=t&&(o=_k(t,"weights","computeWeightedLoss"));const a=null==o?r:rS(r,o);if(n===m_.NONE)return a;if(n===m_.SUM)return $E(a);if(n===m_.MEAN){if(null==o)return PN(a);{const e=r.size/o.size,t=nS($E(a),$E(o));return e>1?nS(t,cS(e)):t}}if(n===m_.SUM_BY_NONZERO_WEIGHTS){if(null==o)return nS($E(a),cS(r.size));{const e=rS(o,QN(r.shape)),t=ZB($E(qN(e,cS(0))),"float32");return nS($E(a),t)}}throw Error("Unknown reduction: ".concat(n))}});const v_=Rk({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m_.SUM_BY_NONZERO_WEIGHTS;const o=_k(e,"labels","absoluteDifference"),a=_k(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=_k(n,"weights","absoluteDifference")),pv(o.shape,a.shape,"Error in absoluteDifference: ");const s=wS(vS(o,a));return y_(s,i,r)}});const b_=Rk({cosineDistance_:function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m_.SUM_BY_NONZERO_WEIGHTS;const a=_k(e,"labels","cosineDistance"),i=_k(t,"predictions","cosineDistance");let s=null;null!=r&&(s=_k(r,"weights","cosineDistance")),pv(a.shape,i.shape,"Error in cosineDistance: ");const c=cS(1),l=vS(c,$E(rS(a,i),n,!0));return y_(l,s,o)}});const w_=Rk({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m_.SUM_BY_NONZERO_WEIGHTS,o=_k(e,"labels","hingeLoss");const a=_k(t,"predictions","hingeLoss");let i=null;null!=n&&(i=_k(n,"weights","hingeLoss")),pv(o.shape,a.shape,"Error in hingeLoss: ");const s=cS(1);o=vS(rS(cS(2),o),s);const c=CF(vS(s,rS(o,a)));return y_(c,i,r)}});const x_=Rk({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m_.SUM_BY_NONZERO_WEIGHTS;const a=_k(e,"labels","huberLoss"),i=_k(t,"predictions","huberLoss");let s=null;null!=n&&(s=_k(n,"weights","huberLoss")),pv(a.shape,i.shape,"Error in huberLoss: ");const c=cS(r),l=wS(vS(i,a)),u=zN(l,c),A=vS(l,u),h=eS(rS(cS(.5),aS(u)),rS(c,A));return y_(h,s,o)}});const C_=Rk({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m_.SUM_BY_NONZERO_WEIGHTS;const a=_k(e,"labels","logLoss"),i=_k(t,"predictions","logLoss");let s=null;null!=n&&(s=_k(n,"weights","logLoss")),pv(a.shape,i.shape,"Error in logLoss: ");const c=cS(1),l=cS(r),u=CN(rS(a,wN(eS(i,l)))),A=rS(vS(c,a),wN(eS(vS(c,i),l))),h=vS(u,A);return y_(h,s,o)}});const k_=Rk({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m_.SUM_BY_NONZERO_WEIGHTS;const o=_k(e,"labels","meanSquaredError"),a=_k(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=_k(n,"weights","meanSquaredError")),pv(o.shape,a.shape,"Error in meanSquaredError: ");const s=qF(o,a);return y_(s,i,r)}});const B_=Rk({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m_.SUM_BY_NONZERO_WEIGHTS,a=_k(e,"multiClassLabels","sigmoidCrossEntropy");const i=_k(t,"logits","sigmoidCrossEntropy");let s=null;if(null!=n&&(s=_k(n,"weights","sigmoidCrossEntropy")),pv(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=cS(r),t=cS(1),n=cS(.5);a=eS(rS(a,vS(t,e)),rS(n,e))}const c=function(e,t){const n=_k(e,"labels","sigmoidCrossEntropyWithLogits"),r=_k(t,"logits","sigmoidCrossEntropyWithLogits");pv(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=CF(r),a=rS(r,n),i=xN(rN(CN(wS(r))));return eS(vS(o,a),i)}(a,i);return y_(c,s,o)}});const S_=Rk({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m_.SUM_BY_NONZERO_WEIGHTS,a=_k(e,"onehotLabels","softmaxCrossEntropy");const i=_k(t,"logits","softmaxCrossEntropy");let s=null;if(null!=n&&(s=_k(n,"weights","softmaxCrossEntropy")),pv(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=cS(r),t=cS(1),n=cS(a.shape[1]);a=eS(rS(a,vS(t,e)),nS(e,n))}const c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const r=sS(((e,t,r)=>{const o=IN(t,[n],!0),a=vS(ZB(t,"float32"),o);r([e,a]);const i=CN(rS(a,e));return{value:$E(i,[n]),gradFunc:(e,t)=>{const[r,o]=t,a=KE(e.shape,[n]);return[rS(XI(e,a),vS(ZB(r,"float32"),rN(o))),rS(XI(e,a),vS(rN(o),ZB(r,"float32")))]}}}));return r(e,t)}(a,i);return y_(c,s,o)}});const I_=Rk({sparseFillEmptyRows_:function(e,t,n,r){const o=_k(e,"indices","sparseFillEmptyRows","int32"),a=_k(t,"values","sparseFillEmptyRows"),i=_k(n,"denseShape","sparseFillEmptyRows","int32"),s=_k(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==o.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(o.shape));if(1!==a.rank)throw new Error("Values should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));const c={indices:o,values:a,denseShape:i,defaultValue:s},l=Ck.runKernel(Ox,c);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});const E_=Rk({sparseReshape_:function(e,t,n){const r=_k(e,"inputIndices","sparseReshape","int32"),o=_k(t,"inputShape","sparseReshape","int32"),a=_k(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==o.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(o.shape));if(1!==a.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(a.shape));const i={inputIndices:r,inputShape:o,newShape:a},s=Ck.runKernel(Rx,i);return{outputIndices:s[0],outputShape:s[1]}}});const N_=Rk({sparseSegmentMean_:function(e,t,n){const r=_k(e,"data","sparseSegmentMean"),o=_k(t,"indices","sparseSegmentMean","int32"),a=_k(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(o.shape));if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(a.shape));const i={data:r,indices:o,segmentIds:a};return Ck.runKernel(Ux,i)}});const F_=Rk({sparseSegmentSum_:function(e,t,n){const r=_k(e,"data","sparseSegmentSum"),o=_k(t,"indices","sparseSegmentSum","int32"),a=_k(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(o.shape));if(1!==a.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(a.shape));const i={data:r,indices:o,segmentIds:a};return Ck.runKernel(Dx,i)}});const T_=Rk({stringNGrams_:function(e,t,n,r,o,a,i,s){const c=_k(e,"data","stringNGrams","string");if("string"!==c.dtype)throw new Error("Data must be of datatype string");if(1!==c.shape.length)throw new Error("Data must be a vector, saw: ".concat(c.shape));const l=_k(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:o,rightPad:a,padWidth:i,preserveShortSequences:s},A={data:c,dataSplits:l},h=Ck.runKernel(Vx,A,u);return{nGrams:h[0],nGramsSplits:h[1]}}});const __=Rk({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_k(e,"input","stringSplit","string"),o=_k(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==o.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(o.shape));const a={skipEmpty:n},i={input:r,delimiter:o},s=Ck.runKernel(jx,i,a);return{indices:s[0],values:s[1],shape:s[2]}}});const L_=Rk({stringToHashBucketFast_:function(e,t){const n=_k(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return Ck.runKernel(Wx,o,r)}});const O_=Rk({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=_k(e,"input","staticRegexReplace","string"),a={pattern:t,rewrite:n,replaceGlobal:r};return Ck.runKernel(Hx,{x:o},a)}}),R_={fft:VF,ifft:jF,rfft:GF,irfft:WF},U_={hammingWindow:PT,hannWindow:MT,frame:QT,stft:HT},D_={flipLeftRight:VT,grayscaleToRGB:jT,resizeNearestNeighbor:u_,resizeBilinear:l_,rgbToGrayscale:WT,rotateWithOffset:KT,cropAndResize:zT,nonMaxSuppression:qT,nonMaxSuppressionAsync:o_,nonMaxSuppressionWithScore:a_,nonMaxSuppressionWithScoreAsync:i_,nonMaxSuppressionPadded:s_,nonMaxSuppressionPaddedAsync:c_,threshold:A_,transform:h_},P_={bandPart:d_,gramSchmidt:p_,qr:g_},M_={absoluteDifference:v_,computeWeightedLoss:y_,cosineDistance:b_,hingeLoss:w_,huberLoss:x_,logLoss:C_,meanSquaredError:k_,sigmoidCrossEntropy:B_,softmaxCrossEntropy:S_},Q_={sparseFillEmptyRows:I_,sparseReshape:E_,sparseSegmentMean:N_,sparseSegmentSum:F_},H_={stringNGrams:T_,stringSplit:__,stringToHashBucketFast:L_,staticRegexReplace:O_};const z_=class{static sgd(e){return new IS(e)}static momentum(e,t){return new ES(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new NS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new bS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new fS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new SS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new mS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},V_="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function j_(){return new Promise((e=>V_((()=>e()))))}function W_(e,t){const n=e[0].length;e.forEach(((e,t)=>{dv(e.length===n,(()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")))})),dv(t>=0&&t<n,(()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")));const r=e[0];e.forEach(((e,o)=>{for(let a=0;a<n;a++)dv(a===t||e[a]===r[a],(()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(o,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(o,".")))}))}function K_(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var G_;function q_(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let o=1;o<n.length;++o){const a=n[o],i=r[r.length-n.length+o],s=r[i];if(a>=0)if(s>=0){if(s!==a)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(o+e,"] = ").concat(a," but shape[").concat(o+e,"] = ").concat(s))}else r[i]=a}return r}function X_(e){const t={FIRST_DIM_SIZE:G_.FIRST_DIM_SIZE,VALUE_ROWIDS:G_.VALUE_ROWIDS,ROW_LENGTHS:G_.ROW_LENGTHS,ROW_SPLITS:G_.ROW_SPLITS,ROW_LIMITS:G_.ROW_LIMITS,ROW_STARTS:G_.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function Y_(e){return 0===e.length?0:e[0]===G_.FIRST_DIM_SIZE?e.length-1:e.length}function Z_(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let o=0;o<Math.min(n,r-1);++o){const n=e[o],r=t[o+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(o-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(o-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(G_||(G_={}));const J_=30;function $_(e){return e<=J_?e:Lv(e,Math.floor(Math.sqrt(e)))}function eL(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function tL(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let o=0;o<n;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(n+1))}return r}function nL(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],o=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?o.push(n):r.push(n);n.push(...r),n.push(0),n.push(...o)}return n}function rL(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function oL(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function aL(e,t,n){const r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function iL(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===gv(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const o=t.shape,a=o[o.length-1];let i=1;for(let A=0;A<o.length-1;++A)i*=o[A];const s=e.shape,c=o.slice();c.pop();let l=1;for(let A=a;A<n;++A)l*=s[A],c.push(s[A]);const u=[...Ov(e.shape).map((e=>e/l)),1].slice(0,a);return[c,i,l,u]}const sL=1.7580993408473768,cL=1.0507009873554805,lL=.3275911,uL=.254829592,AL=-.284496736,hL=1.421413741,dL=-1.453152027,pL=1.061405429;function fL(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function gL(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function mL(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function yL(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function vL(e,t){return{real:e[2*t],imag:e[2*t+1]}}function bL(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function wL(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function xL(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const CL="->",kL=/->/g,BL=",",SL="...";function IL(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(kL,"").length)/CL.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(CL,'").'));const[r,o]=e.split(CL);dv(-1===r.indexOf(SL),(()=>'The ellipsis notation ("'.concat(SL,'") is not supported yet.')));const a=r.split(BL),i=a.length;if(t!==i)throw new Error("Expected ".concat(i," input tensors, received ").concat(t));if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let A=0;A<o.length;++A){const e=o[A];if(!a.some((t=>-1!==t.indexOf(e))))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===s.indexOf(e)&&s.push(e)}for(let A=0;A<r.length;++A){const e=r[A];-1===s.indexOf(e)&&e!==BL&&s.push(e)}const c=new Array(a.length);for(let A=0;A<i;++A){if(new Set(a[A].split("")).size!==a[A].length)throw new Error("Found duplicate axes in input component ".concat(a[A],". ")+"Support for duplicate axes in input is not implemented yet.");c[A]=[];for(let e=0;e<a[A].length;++e)c[A].push(s.indexOf(a[A][e]))}const l=s.length,u=[];for(let A=o.length;A<l;++A)u.push(A);return{allDims:s,summedDims:u,idDims:c}}function EL(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const r=[];for(let o=0;o<e;++o)-1===n[o]&&r.push(o);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function NL(e,t,n){const r=new Array(e);for(let o=0;o<n.length;++o){const e=n[o].shape;for(let n=0;n<t[o].length;++n)void 0===r[t[o][n]]?r[t[o][n]]=e[n]:dv(r[t[o][n]]===e[n],(()=>"Expected dimension ".concat(r[t[o][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n])))}}function FL(e,t){const n=e,r=[];let o=0;0===e.length&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const e=_L(t,n[i]);for(const t of e)-1===a.indexOf(t)&&(r[i].push(t),a.push(t))}return{path:n,steps:r}}function TL(e){return e.every(((e,t)=>e===t))}function _L(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function LL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)dv(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);dv(o<=1,(()=>"There should be only one negative value in split array."));const a=t.indexOf(-1);if(-1!==a){const r=t.reduce(((e,t)=>t>0?e+t:e));t[a]=e.shape[n]-r}dv(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function OL(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function RL(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function UL(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function DL(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function PL(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function ML(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function QL(e,t){const n=gv(e),r=gv(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function HL(e,t){const n=gv(e),r=gv(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function zL(){return"segment ids must be >= 0"}function VL(){return"segment ids are not increasing"}function jL(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function WL(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function KL(e,t){let n,r=!1;for(e<=J_?(n=e,r=!0):n=Lv(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Lv(e,n+1);return n}function GL(e,t,n){const r=[],o=e.length;for(let a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}function qL(e,t,n,r){const o=t.shape.length,a=e.shape.length;if(0!==r&&(r<-o||r>o))throw new Error("Expect batchDims in the range of [-".concat(o,", ").concat(o,"], but got ").concat(r));if(r<0&&(r+=o),r>a)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(a,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let A=0;A<r;++A)if(e.shape[A]!==t.shape[A])throw new Error("x.shape[".concat(A,"]: ").concat(e.shape[A]," should be equal to indices.shape[").concat(A,"]: ").concat(t.shape[A],"."));const i=e.shape[n],s=[];let c=1,l=1,u=1;for(let A=0;A<r;++A)s.push(e.shape[A]),c*=e.shape[A];for(let A=r;A<n;A++)s.push(e.shape[A]),l*=e.shape[A];for(let A=r;A<o;A++)s.push(t.shape[A]);for(let A=n+1;A<a;A++)s.push(e.shape[A]),u*=e.shape[A];return{batchSize:c,sliceSize:u,outerSize:l,dimSize:i,outputShape:s}}function XL(e){try{return e.map((e=>PC(e)))}catch(nbe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(nbe))}}function YL(e){return e.map((e=>DC(e)))}!function(){for(const e of FS)dS(e)}();const ZL={kernelName:Jv,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,ZF(ZB(n,"float32"),-1))}}},JL={kernelName:$v,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=aS(ZB(n,"float32")),r=oS(vS(cS(1),t));return CN(nS(e,r))}}}},$L={kernelName:eb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=oS(vS(aS(ZB(n,"float32")),1));return nS(e,t)}}}},eO={kernelName:tb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{let t=e;const r=CS(n.shape,o);return r.length>0&&(t=$E(t,r)),XI(t,n.shape)},b:()=>{let t=e;const n=CS(r.shape,o);return n.length>0&&(t=$E(t,n)),XI(t,r.shape)}}}},tO={kernelName:nb,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},nO={kernelName:ab,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>iS(n)}}},rO={kernelName:ib,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>iS(n)}}},oO={kernelName:sb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,oS(vS(cS(1),aS(ZB(n,"float32")))))}}},aO={kernelName:cb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=oS(eS(cS(1),aS(ZB(n,"float32"))));return nS(e,t)}}}},iO={kernelName:Ab,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{const t=eS(aS(n),aS(r));let a=rS(e,nS(r,t));const i=CS(n.shape,o);return i.length>0&&(a=$E(a,i)),XI(a,n.shape)},b:()=>{const t=eS(aS(n),aS(r));let a=CN(rS(e,nS(n,t)));const i=CS(r.shape,o);return i.length>0&&(a=$E(a,i)),XI(a,r.shape)}}}},sO={kernelName:lb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,eS(aS(ZB(n,"float32")),1))}}},cO={kernelName:ub,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,vS(cS(1),aS(ZB(n,"float32"))))}}};const lO=Rk({avgPool3dGrad_:function(e,t,n,r,o,a){const i=_k(e,"dy","avgPool3dGrad"),s=_k(t,"input","avgPool3dGrad");let c=i,l=s,u=!1;4===s.rank&&(u=!0,c=XI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=XI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),dv(5===c.rank,(()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,"."))),dv(5===l.rank,(()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,"."))),qI("avgPool3dGrad",o,a);const A={dy:c,input:l},h={filterSize:n,strides:r,pad:o,dimRoundingMode:a},d=Ck.runKernel(fb,A,h);return u?XI(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),uO={kernelName:pb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:s}=n;return{x:()=>lO(e,r,o,a,i,s)}}};const AO=Rk({avgPoolGrad_:function(e,t,n,r,o){const a=_k(e,"dy","avgPoolGrad"),i=_k(t,"input","avgPoolGrad");dv(i.rank===a.rank,(()=>"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(a.rank,")")));let s=i,c=a,l=!1;3===i.rank&&(l=!0,s=XI(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=XI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),dv(4===c.rank,(()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,"."))),dv(4===s.rank,(()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")));const u={dy:c,input:s},A={filterSize:n,strides:r,pad:o},h=Ck.runKernel(db,u,A);return l?XI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),hO={kernelName:hb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:o,strides:a,pad:i}=n;return{x:()=>AO(e,r,o,a,i)}}},dO={kernelName:gb,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,o]=t,{transposeA:a,transposeB:i}=n;return a||i?!a&&i?{a:()=>$I(e,o,!1,!1),b:()=>$I(e,r,!0,!1)}:a&&!i?{a:()=>$I(o,e,!1,!0),b:()=>$I(r,e,!1,!1)}:{a:()=>$I(o,e,!0,!0),b:()=>$I(e,r,!0,!0)}:{a:()=>$I(e,o,!1,!0),b:()=>$I(r,e,!0,!1)}}},pO={kernelName:mb,gradFunc:(e,t,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>rF(e,r,o)}}},fO={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,o=r.inputShape,a=r.shape,i=Array.from(a);for(let c=o.length-1;c>=0;c--)if(o[c]===a[c])i[c]=1;else if(1!==o[c])throw new Error("broadcastTo(): [".concat(o,"] cannot be broadcast to [").concat(a,"]."));const s=[];for(let c=0;c<i.length;c++)i[c]>1&&s.push(c);return{x:()=>$E(e,s,!0)}}},gO={kernelName:wb,gradFunc:e=>({x:()=>e.clone()})},mO={kernelName:xb,gradFunc:e=>({x:()=>iS(e)})},yO={kernelName:Cb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:o,clipValueMax:a}=n;return{x:()=>UE(EN(AN(r,o),yN(r,a)),e,iS(e))}}},vO={kernelName:Bb,inputsToSave:["x"],gradFunc:ZL.gradFunc},bO={kernelName:Sb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:o}=n,a=Cv(o,t[0].shape)[0],i=r.map((e=>e[a]));return KF(e,i,a).map((e=>()=>e))}},wO={kernelName:Ib,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{dilations:a,strides:i,pad:s,dataFormat:c}=n;return dv(jI(a),(()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(a,"'"))),{x:()=>wE(r.shape,e,o,i,s,c),filter:()=>ET(r,e,o.shape,i,s,c)}}},xO={kernelName:Nb,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,{strides:a,pad:i,dataFormat:s,dimRoundingMode:c}=n;return{dy:()=>vE(e,o,a,i,s,1,c),filter:()=>ET(e,r,o.shape,a,i,s,c)}}};const CO=Rk({conv3DBackpropFilter_:function(e,t,n,r,o){let a=e;4===e.rank&&(a=XI(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=XI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),dv(5===a.rank,(()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(a.shape,"."))),dv(5===i.rank,(()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,"."))),dv(5===n.length,(()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,"."))),dv(a.shape[4]===n[3],(()=>"Error in conv3dDerFilter: depth of input ".concat(a.shape[4],") must ")+"match input depth in filter (".concat(n[3],"."))),dv(i.shape[4]===n[4],(()=>"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")));const s={x:a,dy:i},c={strides:r,pad:o,filterShape:n};return Ck.runKernel(Tb,s,c)}}),kO={kernelName:Fb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a}=n;dv(jI(r),(()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")));const[i,s]=t;return{x:()=>kE(i.shape,e,s,o,a),filter:()=>CO(i,e,s.shape,o,a)}}},BO={kernelName:Lb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(CN(UF(ZB(n,"float32"))),e)}}},SO={kernelName:Ob,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(DF(ZB(n,"float32")),e)}}},IO={kernelName:Ub,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o,exclusive:a,reverse:i}=n;return{x:()=>{const t=qE([o],r.rank);let n=NE(e,o,a,!i);return null!=t&&(n=vT(n,t)),n}}}},EO={kernelName:Qb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:o,pad:a,dimRoundingMode:i}=n,s=null==r?[1,1]:r;dv(jI(s),(()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")));const[c,l]=t;return dv(4===c.rank,(()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,"."))),dv(4===l.rank,(()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,"."))),dv(c.shape[3]===l.shape[2],(()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],"."))),dv(WI(o,s),(()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(o," and dilations ")+"'".concat(s,"'."))),qI("depthwiseConv2d",a,i),{x:()=>RT(c.shape,e,l,o,a,s,i),filter:()=>OT(c,e,l.shape,o,a,s,i)}}},NO={kernelName:jb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,o]=t,a={x:r,filter:o,dy:e},i={x:r,filter:o,dy:e};return{x:()=>Ck.runKernel(Wb,a,n),filter:()=>Ck.runKernel(Kb,i,n)}}},FO={kernelName:Yb,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>Ck.runKernel(Zb,r)}}},TO={kernelName:Jb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=rS(rN(CN(aS(n))),2/Math.sqrt(Math.PI));return{x:()=>rS(e,r)}}},_O={kernelName:ew,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,n)}}},LO={kernelName:tw,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>XI(e,n.shape)}}},OO={kernelName:nw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,rN(n))}}},RO={kernelName:iw,gradFunc:e=>({x:()=>iS(e)})},UO={kernelName:sw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{const t=nS(e,ZB(r,"float32")),a=CS(n.shape,o);return a.length>0?XI($E(t,a),n.shape):t},b:()=>{let t=rS(e,ZB(n,"float32"));const a=CS(r.shape,o);a.length>0&&(t=XI($E(t,a),r.shape));const i=aS(r);return CN(nS(t,ZB(i,"float32")))}}}},DO={kernelName:cw,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[o,a,i,s]=t,c=null==s?cS(1):s,l=CS(a.shape,o.shape),u=[];if(1===a.rank){for(let e=0;e<o.shape.length-1;++e)u.push(o.shape[e]);u.push(1)}const A=vS(o,a),h=rS(e,c),d=TF(eS(i,cS(r))),p=rS(rS(rS(d,d),d),cS(-.5));return{x:()=>1===a.rank?XI(rS(rS(e,iN(XI(d,[1,1,1,a.shape[0]]),u)),c),o.shape):XI(rS(rS(e,d),c),o.shape),mean:()=>{let e=rS(rS(d,cS(-1)),h);return 1===a.rank&&(e=$E(e,l)),XI(e,a.shape)},variance:()=>{let e=rS(rS(p,A),h);return 1===a.rank&&(e=$E(e,l)),XI(e,a.shape)},scale:()=>{const t=rS(A,d);let n=rS(e,t);return 1===a.rank&&(n=$E(n,l)),XI(n,a.shape)},offset:()=>{let t=e;return 1===a.rank&&(t=$E(t,l)),XI(t,a.shape)}}}},PO={kernelName:lw,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,o]=t,{axis:a,batchDims:i}=n,s=Cv(a,r.shape)[0],c=(e,t,n)=>()=>{const r=e.shape,o=t.size,i=r.slice(0,s),c=i.length,l=r.slice(a,r.length).slice(1),u=l.length,A=MO(0,c),h=MO(c+1,c+1+u),d=QO([i,[o],l]),p=XI(n,d),f=XI(t,[o]),g=QO([[c],A,h]),m=vT(p,g);let y=hT(m,f,e.shape[s]);const v=XE(g);return y=vT(y,v),y};if(1===i){const t=r.shape[0],n=r.split(t,0),a=()=>{const t=YF(n.map(((t,n)=>c(t,o.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:a,indices:()=>o}}return{x:c(r,o,e),indices:()=>o}}};function MO(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function QO(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const HO={kernelName:hw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>iS(n),b:()=>iS(r)}}},zO={kernelName:dw,gradFunc:e=>({x:()=>ZB(e,"float32")})},VO={kernelName:gw,gradFunc:e=>({x:()=>iS(e)})},jO={kernelName:mw,gradFunc:e=>({x:()=>iS(e)})},WO={kernelName:yw,gradFunc:e=>({x:()=>iS(e)})},KO={kernelName:vw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:o}=n,a=uN(r,0);return{x:()=>UE(a,e,rS(e,o))}}},GO={kernelName:kw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,eS(n,1))}}},qO={kernelName:Cw,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,ZB(n,"float32"))}}},XO={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;return{logits:()=>{const t=rN(r);return vS(e,rS($E(e,o,!0),t))}}}};const YO=Rk({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},o={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return Ck.runKernel(Nw,r,o)}}),ZO={kernelName:Ew,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{depthRadius:a,bias:i,alpha:s,beta:c}=n;return{x:()=>YO(r,o,e,a,i,s,c)}}};function JO(e,t,n,r){return t.rank<n.rank&&(t=XI(t,KE(t.shape,r))),e.rank<n.rank&&(e=XI(e,KE(e.shape,r))),{x:()=>rS(e,ZB(RE(n,t),e.dtype))}}const $O={kernelName:Fw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:o}=r,a=t[0],i=JO(e,t[1],a,Cv(o,a.shape));return{x:()=>i.x()}}},eR={kernelName:Tw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>rS(e,ZB(AN(n,r),"float32")),b:()=>rS(e,ZB(mN(n,r),"float32"))}}};const tR=Rk({maxPool3dGrad_:function(e,t,n,r,o,a,i){const s=_k(e,"dy","maxPool3dGrad"),c=_k(t,"input","maxPool3dGrad"),l=_k(n,"output","maxPool3dGrad");let u=s,A=c,h=l,d=!1;4===c.rank&&(d=!0,u=XI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),A=XI(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=XI(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),dv(5===u.rank,(()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,"."))),dv(5===A.rank,(()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(A.rank,"."))),dv(5===h.rank,(()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,"."))),qI("maxPool3dGrad",a,i);const p={dy:u,input:A,output:h},f={filterSize:r,strides:o,pad:a,dimRoundingMode:i},g=Ck.runKernel(Rw,p,f);return d?XI(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),nR={kernelName:Ow,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=n;return{x:()=>tR(e,r,o,a,i,s,c)}}};const rR=Rk({maxPoolGrad_:function(e,t,n,r,o,a,i){const s=_k(e,"dy","maxPoolGrad"),c=_k(t,"input","maxPoolGrad"),l=_k(n,"output","maxPoolGrad");dv(c.rank===s.rank,(()=>"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(s.rank,")"))),dv(4===s.rank,(()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,"."))),dv(4===c.rank,(()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,"."))),qI("maxPoolGrad",a,i);const u={dy:s,input:c,output:l},A={filterSize:r,strides:o,pad:a,dimRoundingMode:i};return Ck.runKernel(Lw,u,A)}}),oR={kernelName:_w,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,o]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>rR(e,r,o,a,i,s)}}},aR={kernelName:Dw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n,a=Cv(o,r.shape),i=gv(WE(r.shape,a)[1]);return{x:()=>{const t=r.shape.slice();a.forEach((e=>{t[e]=1}));const n=XI(e,t);return nS(rS(n,QN(r.shape,"float32")),i)}}}},iR={kernelName:Pw,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:o}=r,[a,i]=t,s=JO(e,i,a,Cv(o,a.shape));return{x:()=>s.x()}}},sR={kernelName:Mw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>rS(e,ZB(yN(n,r),"float32")),b:()=>rS(e,ZB(uN(n,r),"float32"))}}},cR={kernelName:Qw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>tE(e,a,r.shape)}}},lR={kernelName:Hw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{const t=CS(n.shape,o);return t.length>0?XI($E(e,t),n.shape):e},b:()=>{const t=rS(e,CN(cN(nS(n,r)))),a=CS(r.shape,o);return a.length>0?XI($E(t,a),r.shape):t}}}},uR={kernelName:Vw,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{const t=rS(e,ZB(r,"float32")),a=CS(n.shape,o);return a.length>0?XI($E(t,a),n.shape):t},b:()=>{const t=rS(e,ZB(n,"float32")),a=CS(r.shape,o);return a.length>0?XI($E(t,a),r.shape):t}}}},AR={kernelName:Zw,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return dT(e,r).map((e=>()=>e))}},hR={kernelName:Jw,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:o}=n,a=o.map((e=>e[0]));return{x:()=>tE(e,a,r.shape)}}},dR={kernelName:$w,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,o]=t,a=n,i=r,s=kS(a.shape,i.shape);return{a:()=>{const t=ZB(i,"float32");let n=rS(e,rS(t,yS(a,vS(t,cS(1)))));const r=CS(a.shape,s);return r.length>0&&(n=$E(n,r)),XI(n,a.shape)},b:()=>{const t=uN(a,0),n=UE(t,wN(a),iS(a));let r=rS(e,rS(o,n));const c=CS(i.shape,s);return c.length>0&&(r=$E(r,c)),XI(r,i.shape)}}}},pR={kernelName:ex,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,o=uN(n,0);return{x:()=>UE(o,e,rS(e,r)),alpha:()=>{let t=UE(o,iS(e),rS(e,n));const a=CS(r.shape,e.shape);return a.length>0&&(t=$E(t,a)),XI(t,r.shape)}}}};function fR(e,t,n){const r=e.shape.length,o=r-n.length,a=qE(n,r);let i=e;null!=a&&(i=vT(e,a));const s=i.shape.slice(),c=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(c);let l=function(e,t,n){const r=e.shape.slice();r[n]=1;const o=XI(t,r),a=EE(e,n,!0,!1),i=EE(e,n,!0,!0),s=rS(a,i);return rS(o,s)}(i.reshape(s),t,o);if(l=l.reshape(i.shape),null!=a){const e=XE(a);l=vT(l,e)}return l}const gR={kernelName:tx,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:o}=n;let a=[];return a=void 0===o||null===o?r.shape.map(((e,t)=>t)):"number"===typeof o?[o]:o,{x:()=>fR(r,e,a)}}},mR={kernelName:qb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{const t=nS(e,ZB(r,"float32")),a=CS(n.shape,o);return a.length>0?XI($E(t,a),n.shape):t},b:()=>{let t=rS(e,ZB(n,"float32"));const a=CS(r.shape,o);a.length>0&&(t=XI($E(t,a),r.shape));const i=aS(r);return CN(nS(t,ZB(i,"float32")))}}}},yR={kernelName:sx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,CN(aS(n)))}}},vR={kernelName:px,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=rS(yN(n,6),ZF(n));return{x:()=>rS(e,ZB(r,"float32"))}}},bR={kernelName:cx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,ZB(ZF(n),"float32"))}}},wR={kernelName:lx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>XI(e,n.shape)}}},xR={kernelName:mx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>CN(nS(e,rS(yS(n,1.5),2)))}}},CR={kernelName:xx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=uN(n,cS(0)),r=cS(sL),o=cS(cL),a=rS(e,o),i=rS(rS(e,r),rN(ZB(n,"float32")));return UE(t,a,i)}}}},kR={kernelName:Ix,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,rS(n,vS(cS(1),n)))}}},BR={kernelName:kx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(SE(ZB(n,"float32")),e)}}},SR={kernelName:Bx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(IE(ZB(n,"float32")),e)}}},IR={kernelName:Cx,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:o,size:a}=n,i=r.shape,[s,c]=vI(r,o,a),l=[];for(let u=0;u<e.rank;u++)l.push([s[u],i[u]-s[u]-c[u]]);return{x:()=>JN(e,l)}}},ER={kernelName:Lx,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:o}=n,a=rS(e,r);return{logits:()=>vS(a,rS($E(a,[o],true),r))}}},NR={kernelName:Ex,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,eE(n))}}},FR={kernelName:Tx,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>oE(e,r,o)}}},TR={kernelName:_x,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>JI(e,r)}}},_R={kernelName:Nx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,rS(oS(ZB(n,"float32")),2))}}},LR={kernelName:Qx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(e,rS(ZB(n,"float32"),2))}}},OR={kernelName:Mx,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=cS(2);return{a:()=>rS(e,rS(o,vS(n,r))),b:()=>rS(e,rS(o,vS(r,n)))}}},RR={kernelName:Kx,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,o=kS(n.shape,r.shape);return{a:()=>{let t=e;const r=CS(n.shape,o);return r.length>0&&(t=$E(t,r)),XI(t,n.shape)},b:()=>{let t=e;const n=CS(r.shape,o);return n.length>0&&(t=$E(t,n)),XI(CN(t),r.shape)}}}},UR={kernelName:Fx,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,o=r.shape.slice(),{axis:a}=n;Cv(a,r.shape).forEach((e=>{o[e]=1}));const i=XI(e,o),s=rS(i,QN(r.shape,"float32"));return{x:()=>s}}},DR={kernelName:Gx,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>nS(e,aS(SE(n)))}}},PR={kernelName:qx,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>rS(vS(cS(1),aS(n)),e)}}},MR={kernelName:Xx,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:o}=n;return{x:()=>{let t=iS(r);if(1===r.rank)for(let n=0;n<o[0];++n)t=eS(t,tE(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)t=eS(t,tE(e,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)t=eS(t,tE(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<o[0];++n)for(let a=0;a<o[1];++a)for(let i=0;i<o[2];++i)for(let s=0;s<o[3];++s)t=eS(t,tE(e,[n*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},QR={kernelName:tC,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=BS(t,iS(t)),r=lN(e,n);let o=AN(t,cS(0,"int32"));const a=r.rank-o.rank;for(let s=0;s<a;++s)o=oN(o,s+1);o=EN(o,QN(r.shape,"bool"));const i=iS(r);return UE(o,r,i)}(e,n)}}};const HR=[ZL,JL,$L,eO,tO,nO,rO,oO,aO,iO,sO,cO,uO,hO,dO,pO,fO,gO,mO,yO,vO,bO,xO,wO,kO,BO,SO,IO,EO,NO,mR,FO,TO,_O,LO,OO,UO,RO,DO,PO,HO,zO,VO,jO,WO,KO,GO,qO,XO,ZO,$O,$O,eR,nR,oR,aR,iR,sR,cR,lR,uR,{kernelName:jw,gradFunc:e=>({x:()=>CN(e)})},{kernelName:Yw,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>MN(n.shape,"float32")}}},{kernelName:Xw,gradFunc:e=>({x:()=>iS(e)})},AR,hR,hR,dR,pR,gR,yR,vR,bR,wR,{kernelName:hx,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>Ck.runKernel(dx,o,n)}}},{kernelName:ux,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,o={dy:e,images:r};return{images:()=>Ck.runKernel(Ax,o,n)}}},{kernelName:fx,gradFunc:(e,t,n)=>{const{dims:r}=n,o=Cv(r,e.shape);return{x:()=>BF(e,o)}}},{kernelName:gx,gradFunc:e=>({x:()=>iS(e)})},xR,{kernelName:wx,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>ZB(iS(n),"float32"),t:()=>rS(e,ZB(n,e.dtype)),e:()=>rS(e,ZB(NN(n),e.dtype))}}},CR,kR,{kernelName:Sx,gradFunc:e=>({x:()=>iS(e)})},BR,SR,IR,ER,NR,FR,FR,TR,TR,_R,OR,LR,{kernelName:rC,gradFunc:e=>({x:()=>iS(e)})},RR,UR,DR,PR,MR,{kernelName:Jx,gradFunc:(e,t,n)=>{const r=n,{perm:o}=r,a=XE(o);return{x:()=>vT(e,a)}}},{kernelName:eC,gradFunc:(e,t,n)=>{const r=n,{axis:o}=r;return{value:()=>YF(e,o)}}},QR,{kernelName:nC,gradFunc:e=>({x:()=>iS(e)})}];for(const n of HR)mC(n);rk().prototype.abs=function(){return this.throwIfDisposed(),wS(this)},rk().prototype.acos=function(){return this.throwIfDisposed(),xI(this)},rk().prototype.acosh=function(){return this.throwIfDisposed(),CI(this)},rk().prototype.add=function(e){return this.throwIfDisposed(),eS(this,e)},rk().prototype.all=function(e,t){return this.throwIfDisposed(),BI(this,e,t)},rk().prototype.any=function(e,t){return this.throwIfDisposed(),SI(this,e,t)},rk().prototype.argMax=function(e){return this.throwIfDisposed(),II(this,e)},rk().prototype.argMin=function(e){return this.throwIfDisposed(),EI(this,e)},rk().prototype.asScalar=function(){return this.throwIfDisposed(),dv(1===this.size,(()=>"The array must have only 1 element.")),XI(this,[])},rk().prototype.asType=function(e){return this.throwIfDisposed(),ZB(this,e)},rk().prototype.as1D=function(){return this.throwIfDisposed(),XI(this,[this.size])},rk().prototype.as2D=function(e,t){return this.throwIfDisposed(),XI(this,[e,t])},rk().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),XI(this,[e,t,n])},rk().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),XI(this,[e,t,n,r])},rk().prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),XI(this,[e,t,n,r,o])},rk().prototype.asin=function(){return this.throwIfDisposed(),NI(this)},rk().prototype.asinh=function(){return this.throwIfDisposed(),FI(this)},rk().prototype.atan=function(){return this.throwIfDisposed(),TI(this)},rk().prototype.atan2=function(e){return this.throwIfDisposed(),_I(this,e)},rk().prototype.atanh=function(){return this.throwIfDisposed(),LI(this)},rk().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),YI(this,e,t,n,r)},rk().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),oE(this,e,t)},rk().prototype.batchNorm=function(e,t,n,r,o){return this.throwIfDisposed(),aE(this,e,t,n,r,o)},rk().prototype.broadcastTo=function(e){return this.throwIfDisposed(),hE(this,e)},rk().prototype.cast=function(e){return this.throwIfDisposed(),ZB(this,e)},rk().prototype.ceil=function(){return this.throwIfDisposed(),dE(this)},rk().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),pE(this,e,t)},rk().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof nk&&(e=[e]),JI([this,...e],t)},rk().prototype.conv1d=function(e,t,n,r,o,a){return this.throwIfDisposed(),bE(this,e,t,n,r,o,a)},rk().prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),xE(this,e,t,n,r,o)},rk().prototype.conv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),vE(this,e,t,n,r,o,a)},rk().prototype.cos=function(){return this.throwIfDisposed(),SE(this)},rk().prototype.cosh=function(){return this.throwIfDisposed(),IE(this)},rk().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),EE(this,e,t,n)},rk().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),NE(this,e,t,n)},rk().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),TE(this,e,t)},rk().prototype.depthwiseConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),_E(this,e,t,n,r,o,a)},rk().prototype.dilation2d=function(e,t,n,r,o){return this.throwIfDisposed(),OE(this,e,t,n,r,o)},rk().prototype.divNoNan=function(e){return this.throwIfDisposed(),DE(this,e)},rk().prototype.div=function(e){return this.throwIfDisposed(),nS(this,e)},rk().prototype.dot=function(e){return this.throwIfDisposed(),PE(this,e)},rk().prototype.elu=function(){return this.throwIfDisposed(),QE(this)},rk().prototype.equal=function(e){return this.throwIfDisposed(),RE(this,e)},rk().prototype.erf=function(){return this.throwIfDisposed(),zE(this)},rk().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),nN(this,e,t)},rk().prototype.exp=function(){return this.throwIfDisposed(),rN(this)},rk().prototype.expandDims=function(e){return this.throwIfDisposed(),oN(this,e)},rk().prototype.expm1=function(){return this.throwIfDisposed(),aN(this)},rk().prototype.fft=function(){return this.throwIfDisposed(),VF(this)},rk().prototype.flatten=function(){return this.throwIfDisposed(),XI(this,[this.size])},rk().prototype.floor=function(){return this.throwIfDisposed(),cN(this)},rk().prototype.floorDiv=function(e){return this.throwIfDisposed(),tS(this,e)},rk().prototype.gather=function(e,t,n){return this.throwIfDisposed(),lN(this,e,t,n)},rk().prototype.greaterEqual=function(e){return this.throwIfDisposed(),AN(this,e)},rk().prototype.greater=function(e){return this.throwIfDisposed(),uN(this,e)},rk().prototype.ifft=function(){return this.throwIfDisposed(),jF(this)},rk().prototype.irfft=function(){return this.throwIfDisposed(),WF(this)},rk().prototype.isFinite=function(){return this.throwIfDisposed(),dN(this)},rk().prototype.isInf=function(){return this.throwIfDisposed(),pN(this)},rk().prototype.isNaN=function(){return this.throwIfDisposed(),fN(this)},rk().prototype.leakyRelu=function(e){return this.throwIfDisposed(),gN(this,e)},rk().prototype.lessEqual=function(e){return this.throwIfDisposed(),yN(this,e)},rk().prototype.less=function(e){return this.throwIfDisposed(),mN(this,e)},rk().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),bN(this,e,t,n,r)},rk().prototype.logSigmoid=function(){return this.throwIfDisposed(),BN(this)},rk().prototype.logSoftmax=function(e){return this.throwIfDisposed(),SN(this,e)},rk().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),IN(this,e,t)},rk().prototype.log=function(){return this.throwIfDisposed(),wN(this)},rk().prototype.log1p=function(){return this.throwIfDisposed(),xN(this)},rk().prototype.logicalAnd=function(e){return this.throwIfDisposed(),EN(this,e)},rk().prototype.logicalNot=function(){return this.throwIfDisposed(),NN(this)},rk().prototype.logicalOr=function(e){return this.throwIfDisposed(),FN(this,e)},rk().prototype.logicalXor=function(e){return this.throwIfDisposed(),TN(this,e)},rk().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),$I(this,e,t,n)},rk().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),RN(this,e,t,n,r)},rk().prototype.max=function(e,t){return this.throwIfDisposed(),ZE(this,e,t)},rk().prototype.maximum=function(e){return this.throwIfDisposed(),BS(this,e)},rk().prototype.mean=function(e,t){return this.throwIfDisposed(),PN(this,e,t)},rk().prototype.min=function(e,t){return this.throwIfDisposed(),JE(this,e,t)},rk().prototype.minimum=function(e){return this.throwIfDisposed(),zN(this,e)},rk().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),VN(this,e,t)},rk().prototype.mod=function(e){return this.throwIfDisposed(),jN(this,e)},rk().prototype.mul=function(e){return this.throwIfDisposed(),rS(this,e)},rk().prototype.neg=function(){return this.throwIfDisposed(),CN(this)},rk().prototype.norm=function(e,t,n){return this.throwIfDisposed(),tN(this,e,t,n)},rk().prototype.notEqual=function(e){return this.throwIfDisposed(),qN(this,e)},rk().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),XN(this,e,t,n)},rk().prototype.onesLike=function(){return this.throwIfDisposed(),YN(this)},rk().prototype.pad=function(e,t){return this.throwIfDisposed(),JN(this,e,t)},rk().prototype.pool=function(e,t,n,r,o,a){return this.throwIfDisposed(),oF(this,e,t,n,r,o,a)},rk().prototype.pow=function(e){return this.throwIfDisposed(),yS(this,e)},rk().prototype.prelu=function(e){return this.throwIfDisposed(),aF(this,e)},rk().prototype.prod=function(e,t){return this.throwIfDisposed(),iF(this,e,t)},rk().prototype.reciprocal=function(){return this.throwIfDisposed(),xF(this)},rk().prototype.relu=function(){return this.throwIfDisposed(),CF(this)},rk().prototype.relu6=function(){return this.throwIfDisposed(),kF(this)},rk().prototype.reshapeAs=function(e){return this.throwIfDisposed(),XI(this,e.shape)},rk().prototype.reshape=function(e){return this.throwIfDisposed(),XI(this,e)},rk().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),l_(this,e,t,n)},rk().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),u_(this,e,t,n)},rk().prototype.reverse=function(e){return this.throwIfDisposed(),BF(this,e)},rk().prototype.rfft=function(){return this.throwIfDisposed(),GF(this)},rk().prototype.round=function(){return this.throwIfDisposed(),FF(this)},rk().prototype.rsqrt=function(){return this.throwIfDisposed(),TF(this)},rk().prototype.selu=function(){return this.throwIfDisposed(),_F(this)},rk().prototype.separableConv2d=function(e,t,n,r,o,a){return this.throwIfDisposed(),LF(this,e,t,n,r,o,a)},rk().prototype.sigmoid=function(){return this.throwIfDisposed(),eE(this)},rk().prototype.sign=function(){return this.throwIfDisposed(),RF(this)},rk().prototype.sin=function(){return this.throwIfDisposed(),UF(this)},rk().prototype.sinh=function(){return this.throwIfDisposed(),DF(this)},rk().prototype.slice=function(e,t){return this.throwIfDisposed(),tE(this,e,t)},rk().prototype.softmax=function(e){return this.throwIfDisposed(),zF(this,e)},rk().prototype.softplus=function(){return this.throwIfDisposed(),kN(this)},rk().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),rF(this,e,t)},rk().prototype.split=function(e,t){return this.throwIfDisposed(),KF(this,e,t)},rk().prototype.sqrt=function(){return this.throwIfDisposed(),oS(this)},rk().prototype.square=function(){return this.throwIfDisposed(),aS(this)},rk().prototype.squaredDifference=function(e){return this.throwIfDisposed(),qF(this,e)},rk().prototype.squeeze=function(e){return this.throwIfDisposed(),XF(this,e)},rk().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof nk?[this,e]:[this,...e];return YF(n,t)},rk().prototype.step=function(e){return this.throwIfDisposed(),ZF(this,e)},rk().prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return this.throwIfDisposed(),JF(this,e,t,n,r,o,a,i,s)},rk().prototype.sub=function(e){return this.throwIfDisposed(),vS(this,e)},rk().prototype.sum=function(e,t){return this.throwIfDisposed(),$E(this,e,t)},rk().prototype.tan=function(){return this.throwIfDisposed(),$F(this)},rk().prototype.tanh=function(){return this.throwIfDisposed(),nE(this)},rk().prototype.tile=function(e){return this.throwIfDisposed(),iN(this,e)},rk().prototype.toBool=function(){return this.throwIfDisposed(),ZB(this,"bool")},rk().prototype.toFloat=function(){return this.throwIfDisposed(),ZB(this,"float32")},rk().prototype.toInt=function(){return this.throwIfDisposed(),ZB(this,"int32")},rk().prototype.topk=function(e,t){return this.throwIfDisposed(),lT(this,e,t)},rk().prototype.transpose=function(e){return this.throwIfDisposed(),vT(this,e)},rk().prototype.unique=function(e){return this.throwIfDisposed(),AT(this,e)},rk().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),hT(this,e,t)},rk().prototype.unstack=function(e){return this.throwIfDisposed(),dT(this,e)},rk().prototype.where=function(e,t){return this.throwIfDisposed(),UE(e,this,t)},rk().prototype.zerosLike=function(){return this.throwIfDisposed(),iS(this)};class zR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zR.prototype)}}class VR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,VR.prototype)}}class jR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jR.prototype)}}class WR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,WR.prototype)}}class KR extends Error{constructor(e){super(e),Object.setPrototypeOf(this,KR.prototype)}}class GR{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function qR(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function XR(e,t){if(!e)throw new KR(t)}function YR(e,t){let n=0;for(const r of e)r===t&&n++;return n}function ZR(e){return 1===e.length?e[0]:e}function JR(e){return Array.isArray(e)?e:[e]}function $R(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function eU(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let tU={};function nU(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function rU(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>rU(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?rU(t):e[n]=t.value)}}}function oU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const o=e;let a;if(o in n)a=n[o];else if(o in tU)a=tU[o];else if(a=t[o],null==a)throw new jR("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return a}{const a=e;if(null==a.className||null==a.config)throw new jR("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(a),".\n")+"'className' and 'config' must set.");const i=a.className;let s,c;if(i in n?[s,c]=n[i]:i in tU?[s,c]=tU.className:i in t&&([s,c]=t[i]),null==s)throw new jR("Unknown ".concat(r,": ").concat(i,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){const e={};for(const n of Object.keys(tU))e[n]=tU[n];for(const o of Object.keys(n))e[o]=n[o];a.config.customObjects=e;const t=Object.assign({},tU);for(const o of Object.keys(n))tU[o]=n[o];rU(a.config);const r=c(s,a.config,n,o);return tU=Object.assign({},t),r}{const e=Object.assign({},tU);for(const r of Object.keys(n))tU[r]=n[r];const t=new s(a.config);return tU=Object.assign({},e),t}}}function aU(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function iU(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function sU(e){if(null==e)throw new jR("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function cU(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new jR("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function lU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return XR(n>=0),XR(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function uU(e,t){Array.isArray(e)?(dv(e.length>0,(()=>"".concat(t," is unexpectedly an empty array."))),e.forEach(((e,n)=>uU(e,"element ".concat(n+1," of ").concat(t))))):dv(Number.isInteger(e)&&e>0,(()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(AU(e),".")))}function AU(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>AU(e))).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function hU(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let dU=0;function pU(){return dU++}const fU={};function gU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in fU||(fU[e]=0),fU[e]+=1,e+fU[e].toString()}const mU=["channelsFirst","channelsLast"],yU=["nearest","bilinear"],vU=["valid","same","causal"],bU=["max","avg"],wU=["sum","mul","concat","ave"],xU=new Map;function CU(e){cU(mU,"DataFormat",e)}function kU(e){cU(vU,"PaddingMode",e)}function BU(e){cU(bU,"PoolMode",e)}const SU=[],IU="/";function EU(e,t){SU.push(e);try{const e=t();return SU.pop(),e}catch(n){throw SU.pop(),n}}function NU(e){if(!_U(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===SU.length?"":SU.join(IU)+IU)+e}function FU(e){if(!_U(e))throw new Error("Not a valid tensor name: '"+e+"'");xU.has(e)||xU.set(e,0);const t=xU.get(e);if(xU.set(e,xU.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return xU.set(n,1),n}return e}const TU=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function _U(e){return!!e.match(TU)}function LU(e){return e===parseInt(e.toString(),10)}function OU(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let o=t;o<n;++o)r*=e[o];return r}function RU(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function UU(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function DU(e,t){if(t<e)throw new jR("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let PU;function MU(){return null==PU&&(PU=Gk().epsilon()),PU}function QU(e,t){return ZB(e,t)}function HU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),XI(e,n)}function zU(e,t,n){return Vk((()=>{switch(e.rank){case 1:return PF(e,t,n);case 2:return MF(e,[t,0],[n,e.shape[1]]);case 3:return QF(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return HF(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return tE(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return tE(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new jR("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function VU(e,t,n){return Vk((()=>{switch(e.rank){case 1:return PF(e,t,n);case 2:return MF(e,[0,t],[e.shape[0],n]);case 3:return QF(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return HF(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new jR("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function jU(e,t,n,r){return Vk((()=>{switch(e.rank){case 1:return PF(e,t,n);case 2:switch(r){case 1:return zU(e,t,n);case 2:return VU(e,t,n);default:throw new jR("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return zU(e,t,n);case 2:return QF(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return VU(e,t,n);default:throw new jR("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return zU(e,t,n);case 2:return HF(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return HF(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return VU(e,t,n);default:throw new jR("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new jR("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function WU(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),JI(e,n)}function KU(e,t){switch(e.rank){case 1:return fE([e,t]);case 2:return gE([e,t],0);case 3:return mE([e,t],0);case 4:return yE([e,t],0);default:throw new jR("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function GU(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new jR("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return iN(e,t)}function qU(e){return gF(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function XU(e,t,n,r){if(e.rank<2||t.rank<2)throw new WR("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new WR("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return DT({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?JU(e.rank,r,"channelsLast"):null,activation:n})}{const o=e.shape.slice(),a=o.pop();e=XI(e,[-1,a]);const i=t.shape.slice(),s=i.pop(),c=i.pop(),l=[...i,s],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=XI(vT(t,u),[c,-1]);const A=[...o,...l];return XI(DT({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?JU(e.rank,r,"channelsLast"):null,activation:n}),A)}}function YU(e,t,n){return Vk((()=>(t=Array.isArray(t)?eT(t,"int32"):ZB(t,"int32"),lN(e,t,n))))}function ZU(e){return rS(e,e)}function JU(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new jR("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?XI(t,[1,r[0],1,1,1]):XI(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?XI(t,[1,1,1,1,r[0]]):XI(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?XI(t,[1,r[0],1,1]):XI(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?XI(t,[1,1,1,r[0]]):XI(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?XI(t,[1,r[0],1]):XI(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?XI(t,[1,1,r[0]]):XI(t,[1].concat(r))}else if(e<3)return t;throw new jR("Unsupported input rank by biasAdd: ".concat(t.rank))}function $U(e,t,n){return Vk((()=>(null==n&&(n="channelsLast"),CU(n),eS(e,JU(e.rank,t,n)))))}function eD(e,t,n,r){return Vk((()=>kT(e,t,n,r)))}function tD(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const nD=["fanIn","fanOut","fanAvg"],rD=["normal","uniform","truncatedNormal"];class oD extends AS{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class aD extends oD{apply(e,t){return MN(e,t)}}aD.className="Zeros",dS(aD);class iD extends oD{apply(e,t){return QN(e,t)}}iD.className="Ones",dS(iD);class sD extends oD{constructor(e){if(super(),"object"!==typeof e)throw new jR("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new jR("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return Vk((()=>rS(cS(this.value),QN(e,t))))}getConfig(){return{value:this.value}}}sD.className="Constant",dS(sD);class cD extends oD{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return yF(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}cD.className="RandomUniform",dS(cD);class lD extends oD{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new WR("randomNormal does not support dType ".concat(t,"."));return qU(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}lD.className="RandomNormal",dS(lD);class uD extends oD{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new WR("truncatedNormal does not support dType ".concat(t,"."));return uT(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}uD.className="TruncatedNormal",dS(uD);class AD extends oD{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return Vk((()=>{if(2!==e.length||e[0]!==e[1])throw new jR("Identity matrix initializer can only be used for 2D square matrices.");return rS(this.gain,sN(e[0]))}))}getConfig(){return{gain:this.gain}}}AD.className="Identity",dS(AD);class hD extends oD{constructor(e){if(super(),e.scale<0)throw new jR("scale must be a positive float. Got: ".concat(e.scale));var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,cU(nD,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){cU(rD,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(CU(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=OU(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=OU(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=OU(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],o=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,o):a/=Math.max(1,(r+o)/2),"normal"===this.distribution){const n=Math.sqrt(a);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new WR("".concat(this.getClassName()," does not support dType ").concat(t,"."));return uT(e,0,n,t,this.seed)}{const n=Math.sqrt(3*a);return yF(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}hD.className="VarianceScaling",dS(hD);class dD extends hD{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return hD.className}}dD.className="GlorotUniform",dS(dD);class pD extends hD{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return hD.className}}pD.className="GlorotNormal",dS(pD);class fD extends hD{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return hD.className}}fD.className="HeNormal",dS(fD);class gD extends hD{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return hD.className}}gD.className="HeUniform",dS(gD);class mD extends hD{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return hD.className}}mD.className="LeCunNormal",dS(mD);class yD extends hD{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return hD.className}}yD.className="LeCunUniform",dS(yD);class vD extends oD{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Vk((()=>{if(e.length<2)throw new WR("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=gv(e.slice(0,-1)),r=e[e.length-1],o=n*r;o>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(o,") elements: ")+"Slowness may result.");const a=qU([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=P_.qr(a,!1);let s=i[0];const c=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=rS(s,c.sign()),n<r&&(s=s.transpose()),rS(cS(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}vD.className="Orthogonal",dS(vD);const bD={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function wD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oU(e,hS.getMap().classNameMap,t,"initializer")}function xD(e){return nU(e)}function CD(e){if("string"===typeof e){const t=e in bD?bD[e]:e;if("GlorotNormal"===t)return new pD;if("GlorotUniform"===t)return new dD;if("HeNormal"===t)return new fD;if("HeUniform"===t)return new gD;if("LeCunNormal"===t)return new mD;if("LeCunUniform"===t)return new yD;{const e={};return e.className=t,e.config={},wD(e)}}return e instanceof oD?e:wD(e)}function kD(e){return Array.isArray(e)&&Array.isArray(e[0])}function BD(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function SD(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new jR("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function ID(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new jR("Expected exactly 1 Shape; got ".concat(e.length))}return e}function ED(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const ND="Variable";class FD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ND,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=pU(),n=null==n?ND:n,this.originalName=NU(n),this.name=FU(this.originalName),this.trainable_=r,this.constraint=o,this.val=fT(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function TD(e){return e.map((e=>e.read()))}function _D(e){e.forEach((e=>{e[0].write(e[1])}))}class LD{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class OD{constructor(e,t,n,r,o,a,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=i,this.id=pU(),null!=a&&(this.originalName=NU(a),this.name=FU(this.originalName)),this.rank=t.length}}let RD=0;class UD{constructor(e,t){this.callArgs=t,this.id=RD++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let DD=0;class PD extends AS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=DD++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=$R(e)+"_"+gU(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new VR("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new jR("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return ZR(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ZR(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new zR("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new zR("Layer ".concat(this.name)+" is not connected, no input to return.");return ZR(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new zR("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new zR("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ZR(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=JR(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=JR(this.inputSpec);if(t.length!==n.length)throw new jR("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],o=n[r];if(null==o)continue;const a=e.rank;if(null!=o.ndim&&a!==o.ndim)throw new jR("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(o.ndim,", found ndim=").concat(a));if(null!=o.maxNDim&&a>o.maxNDim)throw new jR("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(o.maxNDim,", found ndim=").concat(a));if(null!=o.minNDim&&a<o.minNDim)throw new jR("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(o.minNDim,", found ndim=").concat(a,"."));if(null!=o.dtype&&e.dtype!==o.dtype)throw new jR("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(o.dtype,", found dtype=").concat(e.dtype,"."));if(o.axes){const t=e.shape;for(const e in o.axes){const n=Number(e),a=o.axes[e],i=n>=0?t[n]:t[t.length+n];if(null!=a&&-1===[a,null].indexOf(i))throw new jR("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(a," but got shape ").concat(t,"."))}}if(null!=o.shape)for(let t=0;t<o.shape.length;++t){const n=o.shape[t],a=e.shape[t];if(null!=n&&null!=a&&n!==a)throw new jR("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(o.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=JR(e),r=function(e){let t=!0;for(const n of JR(e))if(!(n instanceof OD)){t=!1;break}return t}(e),o=function(e){let t=!0;for(const n of JR(e))if(n instanceof OD){t=!1;break}return t}(e);if(r===o)throw new jR("Arguments to apply() must be all SymbolicTensors or all Tensors");return EU(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of JR(e))t.push(n.shape);this.build(ZR(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const o=JR(r),a=[];for(let e of o)-1!==n.indexOf(e)&&(e=e.clone()),a.push(e);if(r=ZR(a),null!=this.activityRegularizer)throw new WR("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=JR(e);const t=[];for(const n of e)t.push(n.shape);return ZR(t)}(e),r=this.computeOutputShape(n);let o;const a="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),o=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new OD(a,n,this,JR(e),t,this.name,r))):new OD(a,r,this,JR(e),t,this.name),this.addInboundNode(e,o,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new WR("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new zR("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new zR("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new VR("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return ED(this.weights)}build(e){this.built=!0}getWeights(){return TD(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){Vk((()=>{const t=this.weights;if(t.length!==e.length)throw new jR('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=TD(t);for(let o=0;o<r.length;++o){const a=r[o],i=t[o],s=e[o];if(!mv(a.shape,s.shape))throw new jR("Layer weight shape ".concat(a.shape," ")+"not compatible with provided weight shape ".concat(s.shape));n.push([i,s])}_D(n)}))}addWeight(e,t,n,r,o,a,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new jR("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():CD("zeros"));const c=r.apply(t,n),l=new FD(c,n,e,a,i);return c.dispose(),null!=o&&this.addLoss((()=>o.apply(l.read()))),null==a&&(a=!0),a?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=JR(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),o=JR(t),a=JR(r);if(o.length!==a.length)throw new Error("".concat(this.name," outputs ").concat(o.length," tensors ")+"but ".concat(o.length," masks for those tensors"));for(let i=0;i<o.length;i++)o[i].kerasMask=a[i]}addInboundNode(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=JR(e);t=JR(t),n=JR(n),r=JR(r),o=BD(o),a=BD(a);const c=[],l=[],u=[];for(const A of s)c.push(A.sourceLayer),l.push(A.nodeIndex),u.push(A.tensorIndex);new UD({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:u,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:o,outputShapes:a},i);for(let A=0;A<t.length;A++)t[A].sourceLayer=this,t[A].nodeIndex=this.inboundNodes.length-1,t[A].tensorIndex=A}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function MD(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=MD(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class QD extends PD{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:gU("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new jR("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new jR("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new jR("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new OD(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new UD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new jR("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}QD.className="InputLayer",dS(QD);class HD{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof HD)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new jR("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return ZB(t,e.dtype)}catch(nbe){throw new jR("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof OD){if(null==this.id2Value[e.id])throw new jR("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new jR("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof OD){if(null==this.id2Value[e.id])throw new jR("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new jR("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&jk(this.id2Mask)}}const zD=new GR,VD=new GR;function jD(e,t,n,r){const o=null!=n&&n.training,a=Array.isArray(e),i=a?e:[e],s=i.map((e=>e.name)),c=[],l=t.names();for(const p of s)-1!==l.indexOf(p)?c.push(t.getValue(p)):c.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=s.join(",")+"|"+t.names().sort().join(",");let A,h=zD.get(u);if(null==h){const e=function(e,t){dv(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const o=KD(e[0],t);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const a of e){const{sorted:e,recipientMap:i}=KD(a,t);for(const t of e)o.has(t.name)||(n.push(t),o.add(t.name));for(const t in i)null==r[t]&&(r[t]=new Set),i[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:WD(r)}}(i,t);h=e.sorted,A=e.recipientCounts,zD.put(u,h),VD.put(u,A)}A={},o||Object.assign(A,VD.get(u));const d=new HD(t);for(let p=0;p<h.length;++p){if(null!=r){const e=zk().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=h[p],a=e.sourceLayer;if(a instanceof QD)continue;const i=[],l=[],u=[];let f=!1;for(const n of e.inputs){const e=d.getValue(n),r=d.getMask(n);i.push(e),l.push(r),null!=r&&(f=!0),o||(A[n.name]--,0!==A[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}f&&((n=n||{}).mask=l[0]);const g=JR(a.apply(i,n));let m=null;a.supportsMasking&&(m=a.computeMask(i,l));const y=GD(e),v=Array.isArray(y)?y:[y];for(let t=0;t<v.length;++t){d.hasKey(v[t])||d.add(v[t],g[t],Array.isArray(m)?m[0]:m);const e=s.indexOf(v[t].name);-1!==e&&(c[e]=g[t])}o||jk(u)}return d.disposeMasks(),a?c:c[0]}function WD(e){const t={};for(const n in e)t[n]=e[n].size;return t}function KD(e,t){const n=new Set,r=[],o={};for(const s of t.names())n.add(s);const a=[],i=[];for(a.push(e);a.length>0;){const e=a[a.length-1];if(n.has(e.name)){a.pop();continue}const t=i[i.length-1]===a.length-1;if(0===e.inputs.length||t)a.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(a.length-1);for(const t of e.inputs)null==o[t.name]&&(o[t.name]=new Set),o[t.name].add(e.name),n.has(t.name)||a.push(t)}}return{sorted:r,recipientMap:o}}function GD(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function qD(e,t){return Vk((()=>oS($E(rS(e,e),t,!0))))}Gv().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=zD&&zD.setMaxEntries(e),null!=VD&&VD.setMaxEntries(e)}));class XD extends AS{getConfig(){return{}}}class YD extends XD{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vk((()=>{const t=qD(e,this.axis),n=pE(t,0,this.maxValue);return rS(e,nS(n,eS(MU(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}YD.className="MaxNorm",dS(YD);class ZD extends XD{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vk((()=>nS(e,eS(MU(),qD(e,this.axis)))))}getConfig(){return{axis:this.axis}}}ZD.className="UnitNorm",dS(ZD);class JD extends XD{apply(e){return CF(e)}}JD.className="NonNeg",dS(JD);class $D extends XD{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Vk((()=>{const t=qD(e,this.axis),n=eS(rS(this.rate,pE(t,this.minValue,this.maxValue)),rS(1-this.rate,t));return rS(e,nS(n,eS(MU(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}$D.className="MinMaxNorm",dS($D);const eP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function tP(e){return nU(e)}function nP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oU(e,hS.getMap().classNameMap,t,"constraint")}function rP(e){if(null==e)return null;if("string"===typeof e){return nP({className:e in eP?eP[e]:e,config:{}})}return e instanceof XD?e:nP(e)}async function oP(e){if(null==e)return;const t=[],n=[],r=[];for(const o in e){const a=e[o];if("number"!==typeof a){const e=a;t.push(e.data()),n.push(o),r.push(e)}}if(t.length>0){const o=await Promise.all(t);for(let t=0;t<o.length;++t)e[n[t]]=o[t][0];jk(r)}}function aP(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var iP;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(iP||(iP={}));class sP{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class cP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class lP extends sP{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const o=Vk((()=>eS(this.totals[r],rS(e,n))));this.totals[r]=o,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:Vk((()=>{const e=rS(nS(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),Wk(t[n])})))}}class uP extends sP{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const o in this.history){const r=this.history[o];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const i=r[a];e.push(i.data()),t.push(o),n.push(a)}}const r=await Promise.all(e);for(let o=0;o<r.length;++o){this.history[t[o]][n[o]].dispose(),this.history[t[o]][n[o]]=r[o][0]}}}class AP extends sP{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||j_,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Fv(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,o=null!=n?n():UC();return function(){const a=null!=n?n():UC();return a-o<t||(o=a,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await oP(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await oP(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await oP(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await oP(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await oP(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):Fv(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await oP(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await oP(e),await this.trainEnd(e))}}function hP(e,t){if(null==e&&(e={}),e instanceof sP)return[e];if(Array.isArray(e)&&e[0]instanceof sP)return e;return JR(e).map((e=>new AP(e,t)))}class dP{constructor(){}static registerCallbackConstructor(e,t){dv(e>=0&&Number.isInteger(e),(()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e))),dP.checkForDuplicate(t),null==dP.constructors[e]&&(dP.constructors[e]=[]),dP.constructors[e].push(t)}static checkForDuplicate(e){for(const t in dP.constructors){dP.constructors[+t].forEach((t=>{if(t===e)throw new jR("Duplicate callback constructor.")}))}}static clear(){dP.constructors={}}static createCallbacks(e){const t=[];for(const n in dP.constructors){const r=+n;e>=r&&t.push(...dP.constructors[r])}return t.map((e=>new e))}}function pP(e,t,n,r,o,a,i,s,c){const l=new uP,u=[new lP,...dP.createCallbacks(t)];null!=e&&u.push(...e),u.push(l);const A=new cP(u);return A.setParams({epochs:n,initialEpoch:r,samples:o,steps:a,batchSize:i,verbose:t,doValidation:s,metrics:c}),{callbackList:A,history:l}}function fP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return oU(e,hS.getMap().classNameMap,t,"layer",n)}function gP(e,t){return Vk((()=>{"float32"!==e.dtype&&(e=ZB(e,"float32"));const n=$E(ZU(e),t,!0),r=gS(n.shape,MU()),o=oS(BS(n,r));return nS(e,o)}))}function mP(e,t){return Vk((()=>PN(ZU(vS(t,e)),-1)))}function yP(e,t){return Vk((()=>PN(wS(vS(t,e)),-1)))}function vP(e,t){return Vk((()=>{const n=vS(e,t),r=pE(wS(e),MU(),Number.MAX_VALUE),o=wS(nS(n,r));return rS(100,PN(o,-1))}))}function bP(e,t){return Vk((()=>{const n=pE(t,MU(),Number.MAX_VALUE),r=wN(eS(1,n)),o=pE(e,MU(),Number.MAX_VALUE),a=wN(eS(1,o));return PN(ZU(vS(r,a)),-1)}))}function wP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vk((()=>{if(n)t=zF(t);else{const e=$E(t,t.shape.length-1,!0);t=nS(t,e)}return t=pE(t,MU(),1-MU()),CN($E(rS(ZB(e,"float32"),wN(t)),t.shape.length-1))}))}function xP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vk((()=>{const r=ZB(cN(function(e){const t=[OU(e.shape)];return XI(e,t)}(e)),"int32"),o=(t=pE(t,MU(),1-MU())).shape;return wP(XI(XN(r,o[o.length-1]),o),t,n)}))}function CP(e,t){return Vk((()=>{let n;return n=pE(t,MU(),1-MU()),n=wN(nS(n,vS(1,n))),PN(function(e,t){if(!mv(e.shape,t.shape))throw new jR("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Vk((()=>{const n=CF(t),r=CN(wS(t));return eS(vS(n,rS(t,e)),xN(rN(r)))}))}(e,n),-1)}))}function kP(e,t){return Vk((()=>{const n=pE(e,MU(),1),r=pE(t,MU(),1);return $E(rS(e,wN(nS(n,r))),-1)}))}function BP(e,t){return Vk((()=>{const n=gP(e,-1),r=gP(t,-1),o=rS(n,r);return CN($E(o,-1))}))}dP.constructors={};const SP={meanSquaredError:mP,meanAbsoluteError:yP,meanAbsolutePercentageError:vP,meanSquaredLogarithmicError:bP,squaredHinge:function(e,t){return Vk((()=>{const n=BS(0,vS(1,rS(e,t)));return PN(ZU(n),-1)}))},hinge:function(e,t){return Vk((()=>{const n=BS(0,vS(1,rS(e,t)));return PN(n,-1)}))},categoricalHinge:function(e,t){return Vk((()=>{const n=$E(rS(e,t),-1),r=ZE(rS(vS(1,e),t),-1);return BS(0,eS(1,vS(r,n)))}))},logcosh:function(e,t){return Vk((()=>{const n=Math.log(2),r=vS(t,e),o=vS(eS(r,kN(rS(-2,r))),n);return PN(o,-1)}))},categoricalCrossentropy:wP,sparseCategoricalCrossentropy:xP,binaryCrossentropy:CP,kullbackLeiblerDivergence:kP,poisson:function(e,t){return Vk((()=>{const n=wN(eS(MU(),t));return PN(vS(t,rS(e,n)),-1)}))},cosineProximity:BP};function IP(e){if("string"===typeof e){if(e in SP)return SP[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new jR(t)}return e}function EP(e,t){return Vk((()=>{const n=rS(.5,YN(t)),r=QU(uN(t,n),e.dtype);return PN(RE(e,r),-1)}))}function NP(e,t){return Vk((()=>QU(RE(II(e,-1),II(t,-1)),"float32")))}function FP(e,t){return Vk((()=>ZB($E(EN(RE(e,1),RE(t,1))),"float32")))}function TP(e,t){return CP(e,t)}function _P(e,t){return e.rank===t.rank&&(e=XF(e,[e.rank-1])),(t=II(t,-1)).dtype!==e.dtype&&(t=ZB(t,e.dtype)),ZB(RE(e,t),"float32")}const LP=wP,OP=xP,RP={binaryAccuracy:EP,categoricalAccuracy:NP,precision:function(e,t){return Vk((()=>{const n=FP(e,t),r=function(e,t){return Vk((()=>ZB($E(EN(RE(e,0),RE(t,1))),"float32")))}(e,t),o=eS(n,r);return ZB(UE(uN(o,0),nS(n,o),0),"float32")}))},categoricalCrossentropy:LP,sparseCategoricalCrossentropy:OP,mse:mP,MSE:mP,mae:yP,MAE:yP,mape:vP,MAPE:vP,cosine:BP};function UP(e){if("string"===typeof e&&e in RP)return RP[e];if("string"!==typeof e&&null!=e)return e;throw new jR("Unknown metric ".concat(e))}function DP(e){if(XR(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(SP))if(SP[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(RP))if(RP[n]===e){t=n;break}return void 0!==t?t:e.name}}const PP=1048576;function MP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!QP(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>PP&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(PP,"."))}}function QP(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!QP(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!QP(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function HP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const o=function(e){let t=!0;const n=[],r=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||1===o.length&&o[0].inboundLayers.length>1){t=!1;break}r.push(...o)}if(t)for(const o of e.layers){let e=!1;for(const n of o.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!o){a.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),zP(a,n,r),r("=".repeat(t));const s=e.layers;for(let u=0;u<s.length;++u)o?VP(s[u],n,r):jP(s[u],n,i,r),r((u===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const c=function(e){let t;t=null!=e.collectedTrainableWeights?ED(e.collectedTrainableWeights):ED(e.trainableWeights);return t}(e),l=ED(e.nonTrainableWeights);r("Total params: ".concat(c+l)),r("Trainable params: ".concat(c)),r("Non-trainable params: ".concat(l)),r("_".repeat(t))}function zP(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let o=0;o<e.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=e[o],r=r.slice(0,t[o]),r+=" ".repeat(t[o]-r.length);n(r)}function VP(e,t,n){let r,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(nbe){o="multiple"}try{r=JSON.stringify(e.outputShape)}catch(nbe){r="multiple"}const a=e.name,i=e.getClassName();zP(["".concat(a," (").concat(i,")"),o,r,e.countParams().toString()],t,n)}function jP(e,t,n,r){let o,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(nbe){a="multiple"}try{o=JSON.stringify(e.outputShape)}catch(nbe){o="multiple"}const i=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];i.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const s=e.name,c=e.getClassName(),l=0===i.length?"":i[0];zP(["".concat(s," (").concat(c,")"),a,o,e.countParams().toString(),l],t,r);for(let u=1;u<i.length;++u)zP(["","","","",i[u]],t,r)}function WP(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function KP(e,t){if(null===e)return null;if("string"===typeof e)return eU(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];WP(t,o,r)?n.push(r):n.push(KP(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=eU(n);t[e]=KP(r,e)}}return t}}function GP(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return $R(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let o=0;o<r;++o){const r=e[o];WP(t,o,r)?n.push(r):n.push(GP(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],o=$R(n);t[o]="name"!==n&&"className"!==n||"string"!==typeof r?GP(r,n):r}return t}}const qP="4.16.0";class XP extends PD{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=gU(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],iU(this.inputs).length!==this.inputs.length)throw new jR("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map((e=>e.name))));iU(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map((e=>e.name)))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const m of this.outputs){const e=m.sourceLayer,t=m.nodeIndex,n=m.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const m of this.inputs){const e=m.sourceLayer,t=m.nodeIndex,n=m.tensorIndex;XR(0===t,"input layer has >1 nodes"),XR(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let m=0;m<this.inputLayers.length;m++){const t=this.inputLayers[m];if(!(t instanceof QD))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const m of this.outputLayers)this.outputNames.push(m.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},o={},a={},i=[],s=(e,t,n,r,o,c)=>{null!=r&&null!=o&&null!=c||(r=e.sourceLayer,o=e.nodeIndex,c=e.tensorIndex);const l=r.inboundNodes[o];if(-1!==n.indexOf(l))throw new VR("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(l))return;this.containerNodes.add(XP.nodeKey(r,o)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(l)&&n.push(l);const u=l.inboundLayers.length;for(let a=0;a<u;a++){const e=l.inputTensors[a],r=l.inboundLayers[a],o=l.nodeIndices[a],i=l.tensorIndices[a];s(e,t,n,r,o,i)}for(t.push(l);n.indexOf(l)>=0;)n.splice(n.indexOf(l),1);i.push(l)},c=[],l=[];for(const m of this.outputs)s(m,c,l);const u=i.slice().reverse();for(const m of u){n[m.id]=m,m.id in t||(t[m.id]=0);let e=t[m.id];const a=null==r[m.outboundLayer.id]?0:r[m.outboundLayer.id];e=Math.max(e,a),r[m.outboundLayer.id]=e,o[m.outboundLayer.id]=m.outboundLayer,t[m.id]=e;for(let r=0;r<m.inboundLayers.length;r++){const o=m.inboundLayers[r],a=m.nodeIndices[r],i=o.inboundNodes[a],s=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(e+1,s),n[i.id]=i}}const A={};for(const m in t){const e=t[m];e in A||(A[e]=[]),A[e].push(n[m])}const h={};for(const m in r){const e=r[m];e in h||(h[e]=[]),h[e].push(o[m])}let d=Object.keys(h).map((e=>parseInt(e,10))).sort(aU);this.layers=[];for(const m of d){const e=h[m];e.sort(((e,t)=>{const n=a[e.id],r=a[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof XP&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=h,d=Object.keys(A).map((e=>parseInt(e,10))).sort(aU);const p=this.inputs.slice(),f=[];for(const m of d)for(const e of A[m]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===p.indexOf(n))throw new VR("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(f));for(const t of e.outputTensors)p.push(t);f.push(t.name)}}this.nodesByDepth=A;const g=this.layers.map((e=>e.name));for(const m of g){const e=g.filter((e=>e===m)).length;if(1!==e)throw new VR('The name "'.concat(m,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new UD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new jR("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const o=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);o&&this.parseWeights(e);for(const i of this.layers)for(const[e,t]of i.weights.entries()){const a=o?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[a])throw new jR("Duplicate weight name: ".concat(a));n[a]=t,r++}const a=[];for(const i in e){let r=i;if(null==n[i]){const e=i.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])a.push([n[r],e[i]]);else if(t)throw new jR("Provided weight data has no target variable: ".concat(i));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new jR("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}_D(a)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],o=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");o!==t&&(e[o]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(qP),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=GP(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return Vk((()=>{e=JR(e);const n=new HD;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return jD(this.outputs,n,t)}))}computeMask(e,t){return Vk((()=>{let n;return e=JR(e),n=null==t?qR(null,e.length):JR(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=BD(e);if(t.length!==this.inputLayers.length)throw new jR("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let i=0;i<t.length;i++){const e=this.inputLayers[i],r=t[i];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(aU);if(r.length>1)for(const i of r){const e=this.nodesByDepth[i];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let i=0;i<t.inboundLayers.length;i++){const e=t.inboundLayers[i],o=t.nodeIndices[i],a=t.tensorIndices[i],s=n["".concat(e.name,"_").concat(o,"_").concat(a)];r.push(s)}const o=BD(e.computeOutputShape(ZR(r))),a=e.inboundNodes.indexOf(t);for(let t=0;t<o.length;t++){n["".concat(e.name,"_").concat(a,"_").concat(t)]=o[t]}}}const o=[],a=[];for(let i=0;i<this.outputLayers.length;i++){const e=this.outputLayers[i],t=this.outputLayersNodeIndices[i],n=this.outputLayersTensorIndices[i],r="".concat(e.name,"_").concat(t,"_").concat(n);a.push(r)}for(let i=0;i<a.length;i++){const e=a[i];XR(e in n),o.push(n[e])}return ZR(o)}runInternalGraph(e,t){null==t&&(t=qR(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],o=e[s],a=t[s];n[r.id]=[o,a]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(aU);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,o=t.outputTensors,a=new Array;for(const t of r)t.id in n&&a.push(n[t.id]);if(a.length===r.length){let r,i,s,c,l={};if(null!=t.callArgs&&(l=t.callArgs),1===a.length){const[t,n]=a[0];null==l.mask&&(l.mask=n),s=JR(e.call(t,l)),c=JR(e.computeMask(t,n)),r=[t],i=[n]}else r=a.map((e=>e[0])),i=a.map((e=>e[1])),null==l.mask&&(l.mask=i),s=JR(e.call(r,l)),c=JR(e.computeMask(r,i));if(e.activityRegularizer)throw new WR("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<o.length;++e){const t=o[e],r=s[e],a=c[e];n[t.id]=[r,a]}}}}const o=[],a=[],i=[];for(const s of this.outputs){XR(s.id in n,"Could not compute output ".concat(s.name," : ").concat(s.id));const[e,t]=n[s.id];i.push(e.shape),o.push(e),a.push(t)}return[o,a,i]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof XP?1:0;for(let e=0;e<r.inboundNodes.length;e++){const o=XP.nodeKey(r,e);this.containerNodes.has(o)&&(t[o]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new jR("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new jR("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new jR("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return Vk((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=XP.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const a of this.layers){const e=a.getClassName(),r=a.getConfig(),o=[];for(let n=0;n<a.inboundNodes.length;n++){const e=a.inboundNodes[n],r=XP.nodeKey(a,n);let i={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),i=e.callArgs}catch(nbe){console.warn("Layer ".concat(a.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),i={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const o=e.inboundLayers[r],a=e.nodeIndices[r],s=e.tensorIndices[r];let c=t[XP.nodeKey(o,a)];null==c&&(c=0),n.push([o.name,c,s,i])}o.push(n)}}}const i={};i.name=a.name,i.className=e,i.config=r,i.inboundNodes=o,n.push(i)}e.layers=n;const r=[];for(let a=0;a<this.inputLayers.length;a++){const e=this.inputLayers[a],n=this.inputLayersNodeIndices[a],o=XP.nodeKey(e,n);if(!this.containerNodes.has(o))continue;let i=t[o];null!==i&&void 0!==i||(i=0);const s=this.inputLayersTensorIndices[a];r.push([e.name,i,s])}e.inputLayers=r;const o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],n=this.outputLayersNodeIndices[a],r=XP.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let i=t[r];null!==i&&void 0!==i||(i=0);const s=this.outputLayersTensorIndices[a];o.push([e.name,i,s])}return e.outputLayers=o,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},o={};function a(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function i(e,t){const n=[];let o;for(const i of t){const s=i[0],c=i[1],l=i[2];if(o=null==i[3]?{}:i[3],!(s in r))return void a(e,t);const u=r[s];if(u.inboundNodes.length<=c)return void a(e,t);const A=u.inboundNodes[c];n.push(A.outputTensors[l])}n.length>0&&e.apply(ZR(n),o)}function s(e){const o=e.name,i=fP(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[o]=i;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new jR("Corrupted configuration, expected array for nodeData: ".concat(e));a(i,e)}))}const c=t.name,l=t.layers;for(const p of l)s(p);for(;!sU(o);)for(const e of l){const t=r[e.name];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)i(t,n)}}const u=[],A=[],h=t.inputLayers;for(const p of h){const e=p[0],t=p[1],n=p[2];XR(e in r);const o=r[e].inboundNodes[t].outputTensors;u.push(o[n])}const d=t.outputLayers;for(const p of d){const e=p[0],t=p[1],n=p[2];XR(e in r);const o=r[e].inboundNodes[t].outputTensors;A.push(o[n])}return new e({inputs:u,outputs:A,name:c})}get stateful(){if(this._stateful)throw new jR("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Vk((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function YP(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function ZP(e,t){return YP(e,t,"classWeight")}async function JP(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=Vk((()=>{if(1===e.shape.length)return JB(e);if(2===e.shape.length){if(e.shape[1]>1){return II(e,1)}if(1===e.shape[1])return XI(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),r=Array.from(await t.data());jk(t);const o=[];return r.forEach((e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");o.push(n[e])})),eT(o,"float32")}return null}function $P(e,t){return rS(e,t)}function eM(e,t){let n,r;const o=t;n=o.xs,r=o.ys,dv(null!=n&&null!=r,(()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)));const a=tM("input",e.inputNames,n),i=tM("output",e.outputNames,r),s=a[0].shape[0];dv(a.length===e.inputs.length,(()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(a.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")"))),dv(i.length===e.outputs.length,(()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")));for(let c=0;c<a.length;c++)dv(a[c].shape[0]===s,(()=>"Batch size mismatch: input "+"".concat(e.inputNames[c]," has ").concat(a[c].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));for(let c=0;c<i.length;c++)dv(i[c].shape[0]===s,(()=>"Batch size mismatch: output "+"".concat(e.outputNames[c]," has ").concat(i[c].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")));return{xs:a,ys:i}}function tM(e,t,n){if(n instanceof nk)return[n];if(Array.isArray(n))return dv(n.length===t.length,(()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,"."))),n;{const r=[];for(const o of t){if(null==n[o])throw new jR("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));r.push(n[o])}return r}}async function nM(e,t,n){const r=null!=n.batchesPerEpoch;if(dv(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),dv(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),dv(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs))),dv(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch))),dv(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=null!=n.validationData;let a,i;if(o)if(rM(n.validationData))dv(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches)));else{const e=function(e){if(3===e.length)throw new WR("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,i=e.ys}const s=e.makeTrainFunction(),c=e.getDedupedMetricsNames();let l;l=o?c.slice().concat(c.map((e=>"val_"+e))):c.slice();const u=hP(n.callbacks,n.yieldEvery),A=null==n.verbose?1:n.verbose,{callbackList:h,history:d}=pP(u,A,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,o,l);h.setModel(e),e.history=d,await h.onTrainBegin(),e.stopTraining_=!1;let p=null==n.initialEpoch?0:n.initialEpoch,f=await t.iterator();for(;p<n.epochs;){const l={};await h.onEpochBegin(p);let u=0,A=0;for(r||(f=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await f.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:o}=eM(e,t.value),a={};a.batch=A,a.size=r[0].shape[0],await h.onBatchBegin(A,a);const i=[];if(null!=n.classWeight){const t=ZP(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await JP(o[e],null,t[e]))}const l=r.concat(o).concat(i),d=s(l);jk(l);for(let e=0;e<c.length;++e){const t=c[e],n=d[e];a[t]=n,Wk(n)}await h.onBatchEnd(A,a),aP(a),A++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(o){let t;t=rM(n.validationData)?JR(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):JR(e.evaluate(a,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)l["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(p,l),p++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function rM(e){return"function"===typeof e.iterator}function oM(e){dv(e>0&&Number.isInteger(e),(()=>"batchSize is required to be a positive integer, but got ".concat(e)))}function aM(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>zU(e,t,n-t))):zU(e,t,n-t)}function iM(e,t){return Vk((()=>null==e?null:Array.isArray(e)?e.map((e=>iM(e,t))):YU(e,"int32"===t.dtype?t:ZB(t,"int32"))))}function sM(e,t){const n=[];let r=0,o=null;for(;r<e;)o=r+t,o>=e&&(o=e),n.push([r,o]),r=o;return n}function cM(e){const t=[];e instanceof nk&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(HU(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function lM(e,t){if(null==e)return;const n=[];if(t instanceof nk)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const o in t){const e=t[o];n.push(e.id)}const r=[];if(e instanceof nk)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const o in e){const t=e[o];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function uM(e){return Array.isArray(e)}function AM(e){return!function(e){return e instanceof nk}(e)&&!uM(e)}function hM(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(uM(e)&&e.length>0)t=!0;else if(AM(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new jR("Error when checking model ".concat(a," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((e=>null));if(AM(e)){r=[];for(const n of t){if(null==e[n])throw new jR('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(uM(e)){if(e.length!==t.length)throw new jR("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new jR("The model ".concat(a," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=cM(r),null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new jR("Error when checking ".concat(a,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[i].length;++t){if(0===t&&!o)continue;const r=e.shape[t],s=n[i][t];if(null!=s&&s>=0&&r!==s)throw new jR("".concat(a," expected a batch of elements where each ")+"example has shape [".concat(n[i].slice(1,n[i].length),"] ")+"(i.e.,tensor shape [*,".concat(n[i].slice(1,n[i].length),"])")+" but the ".concat(a," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function dM(e,t,n){let r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new jR("Error when checking model ".concat(a,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new jR("The model expects ".concat(t.length," ").concat(a," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let i=0;i<t.length;++i){if(null==n[i])continue;const e=r[i];if(e.shape.length!==n[i].length)throw new jR("Error when checking ".concat(a,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[i].length;++r){if(0===r&&!o)continue;const s=e.shape[r],c=n[i][r];if(null!=c&&c!==s)throw new jR("Error when checking ".concat(a,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class pM extends XP{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new jR("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");HP(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>z_.adagrad(.01),Adadelta:()=>z_.adadelta(1,.95,MU()),Adam:()=>z_.adam(.001,.9,.999,MU()),Adamax:()=>z_.adamax(.002,.9,.999,MU(),0),RMSProp:()=>z_.rmsprop(.001,.9,0,MU()),SGD:()=>z_.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new jR("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof pS))throw new jR("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new jR("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map((e=>IP(e)))}else{const n=IP(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new jR('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(IP(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const e=this.internalOutputShapes[a],t=this.outputNames[a];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],EU("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),o=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};EU("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,a;for(const i of t){if("string"===typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let o;1===t[t.length-1]||this.lossFunctions[e]===CP?-1!==["accuracy","acc"].indexOf(i)?r=EP:-1!==["crossentropy","ce"].indexOf(i)&&(r=TP):this.lossFunctions[e]===xP?-1!==["accuracy","acc"].indexOf(i)?r=_P:-1!==["crossentropy","ce"].indexOf(i)&&(r=OP):-1!==["accuracy","acc"].indexOf(i)?r=NP:-1!==["crossentropy","ce"].indexOf(i)&&(r=LP),-1!==["accuracy","acc"].indexOf(i)?o="acc":-1!==["crossentropy","ce"].indexOf(i)&&(o="ce"),a=r,n=""+o}else{const e=UP(i);a=e,n=""+DP(i)}let t;EU(n,(()=>{t=a})),o(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;oM(r);const o=this.standardizeUserDataXY(e,t,!0,r);try{const e=o[0].concat(o[1]);this.makeTestFunction();const t=this.testFunction;return ZR(this.testLoop(t,e,r,n.verbose,n.steps))}finally{lM(o[0],e),lM(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,o=e.testFunction;let a=[];if(n.verbose>0)throw new WR("Verbose mode is not implemented yet.");dv(!r||n.batches>0&&Number.isInteger(n.batches),(()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches))));const i="function"===typeof t.next?t:await t.iterator();let s=0,c=0;for(;!r||c<n.batches;){const t=await i.next();if(a=Vk((()=>{if(t.value){const{xs:n,ys:r}=eM(e,t.value),i=n.concat(r),l=Vk((()=>o(i)));if(jk(i),0===c)for(let e=0;e<l.length;++e)a.push(cS(0));const u=i[0].shape[0];for(let e=0;e<l.length;++e){const t=l[e],n=a[e];a[e]=Vk((()=>eS(a[e],rS(u,t)))),c>0&&jk(n)}jk(l),s+=u,++c}return a})),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let l=0;l<a.length;++l){const e=a[l];a[l]=nS(a[l],s),jk(e)}return ZR(a)}(this,e,t)}checkNumSamples(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new jR("If ".concat(o," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new jR("Either the input data should have a defined shape, or "+"".concat(o," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new jR("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],o=this.retrieveSymbolicTensors(r),a=new HD;if(e instanceof nk&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new jR("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)a.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new jR("No value is provided for the model's input ".concat(s.name));a.add(s,t)}const i=jD(o,a);return n?i:i[0]}retrieveSymbolicTensors(e){const t=qR(null,e.length);let n=e.length;for(const r of this.layers){const o=Array.isArray(r.output)?r.output:[r.output],a=o.map((e=>e.name));for(let r=0;r<e.length;++r){const i=a.indexOf(e[r]);if(-1!==i&&(t[r]=o[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new jR("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vk((()=>{const r=this.checkNumSamples(e);if(n)throw new WR("Verbose predictLoop() is not implemented yet.");const o=sM(r,t),a=this.outputs.map((e=>[]));for(let t=0;t<o.length;++t){const n=Vk((()=>{const n=o[t][0],r=o[t][1],a=aM(e,n,r),i=[];if(Array.isArray(a))for(let e=0;e<a.length;++e)i.push({key:this.inputs[e],value:a[e]});else i.push({key:this.inputs[0],value:a});const s=new HD(i);return jD(this.outputs,s)}));n.forEach(((e,t)=>a[t].push(e)))}return ZR(a.map((e=>JI(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=cM(e);dM(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return oM(e),this.predictLoop(n,e)}finally{lM(n,e)}}predictOnBatch(e){dM(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new VR("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const e=this.feedOutputShapes[o];this.feedLossFns[o]===xP?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t,n){const r=iU(e.map((e=>e.shape[0])));r.sort();const o=iU(t.map((e=>e.shape[0])));if(o.sort(),r.length>1)throw new jR("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((e=>e.shape)))));if(o.length>1)throw new jR("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((e=>e.shape)))));if(r.length>0&&o.length>0&&!mv(r,o))throw new jR("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(o[0]," target ")+"sample(s).")}(e=hM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=hM(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[mP,CP,wP];for(let o=0;o<e.length;++o){const a=e[o],i=t[o],s=n[o];if(null!=i){if(i===wP&&1===a.shape[a.shape.length-1])throw new jR("You are passing a target array of shape ".concat(a.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i)){const e=a.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],o=t[n];if(null!=o&&r!==o)throw new jR("A target Tensor with shape ".concat(a.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new jR("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0;const[i,s]=this.standardizeUserDataXY(e,t,o,a);if(null!=n)throw new Error("sample weight is not supported yet.");let c=null;if(null!=r){const e=ZP(r,this.outputNames);c=[];for(let t=0;t<e.length;++t)c.push(await JP(s[t],null,e[t]))}return[i,s,c]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Vk((()=>{const a=this.checkNumSamples(t,n,o,"steps"),i=[];if(r>0)throw new WR("Verbose mode is not implemented yet.");if(null!=o)throw new WR("steps mode in testLoop() is not implemented yet");{const r=sM(a,n),o=eT(DU(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],s=r[n][1],c=zU(o,a,s-a),l=iM(t,c),u=e(l);if(0===n)for(let e=0;e<u.length;++e)i.push(cS(0));for(let e=0;e<u.length;++e){const t=u[e];i[e]=eS(i[e],rS(s-a,t))}}for(let e=0;e<i.length;++e)i[e]=nS(i[e],a)}return i}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let o=r;if(YR(e,r)>1){const t=YR(e.slice(0,n),r);o+="_".concat(t)}t.push(o)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],i=this.collectedTrainableWeights.map((e=>e.read())),s=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new HD(e),s=jD(this.outputs,i,{training:!0});let c;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=o[n]&&(e=$P(e,o[n]));const a=PN(e);t.push(a),c=0===n?e:eS(c,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],o=this.metricsTensors[n][1];e=PN(t(r[o],s[o]))}Wk(e),a.push(e)}return c=PN(c),this.calculateLosses().forEach((e=>{c=eS(c,e)})),c}),!0,i);return[s].concat(a)}}makeTestFunction(){this.testFunction=e=>Vk((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let e=0;e<this.inputs.length;++e)a.push({key:this.inputs[e],value:r[e]});const i=new HD(a),s=jD(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],a=PN(r(o[e],s[e]));n=0===e?a:eS(n,a),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],a=PN(n(o[r],s[r]));t.push(a)}return t}))}async fit(e,t){let n,r,o,a,i,s,c,l,u,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const h=null==A.batchSize?32:A.batchSize;oM(h);const d=!1,p=await this.standardizeUserData(e,t,A.sampleWeight,A.classWeight,d,h);n=p[0],r=p[1],u=p[2];let f,g=!1;if(null!=A.validationData&&A.validationData.length>0){if(g=!0,2!==A.validationData.length)throw 3===A.validationData.length?new WR("validationData including sample weights is not supported yet."):new jR("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(A.validationData," is invalid."));i=A.validationData[0],s=A.validationData[1];const e=!0,t=await this.standardizeUserData(i,s,null,null,e,h);c=t[0],l=t[1],f=c.concat(l)}else if(null!=A.validationSplit&&A.validationSplit>0&&A.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-A.validationSplit)),t=n[0].shape[0];c=aM(n,e,t),o=n,n=aM(n,0,e),l=aM(r,e,t),a=r,r=aM(r,0,e),f=c.concat(l)}else null!=A.validationSteps&&(g=!0);const m=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const y=this.makeTrainFunction(),v=this.getDedupedMetricsNames();let b,w;g?(this.makeTestFunction(),b=this.testFunction,w=v.slice().concat(v.map((e=>"val_"+e)))):(b=null,f=[],w=v.slice());const x=hP(A.callbacks,A.yieldEvery);return await this.fitLoop(y,m,v,h,A.epochs,A.verbose,x,b,f,A.shuffle,w,A.initialEpoch,null,null)}finally{this.isTraining=!1,lM(n,e),lM(r,t),lM(o,e),lM(a,t),lM(c,i),lM(l,s),null!=u&&jk(u)}}async fitLoop(e,t,n,r,o,a,i,s,c,l,u,A,h,d){null==r&&(r=32),null==o&&(o=1),null==l&&(l=!0),null==A&&(A=0);let p=!1;if(null!=s&&null!=c&&(p=!0),null!=d&&(p=!0,null==h))throw new jR("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const f=this.checkNumSamples(t,r,h,"steps_per_epoch");let g;null!=f&&(g=DU(0,f)),null==a&&(a=1);const{callbackList:m,history:y}=pP(i,a,o,A,f,h,r,p,u);m.setModel(this),this.history=y,await m.onTrainBegin(),this.stopTraining_=!1;for(let v=A;v<o;++v){await m.onEpochBegin(v);const o={};if(null!=h)throw new WR("stepsPerEpoch mode is not implemented yet.");{if("batch"===l)throw new WR("batch shuffling is not implemneted yet");l&&lv(g);const a=eT(g),i=sM(f,r);for(let l=0;l<i.length;++l){const u={};if(await m.onBatchBegin(l,u),Vk((()=>{const A=i[l][0],h=i[l][1],d=zU(a,A,h-A);u.batch=l,u.size=h-A;const f=iM(t,d),g=e(f);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];u[t]=r,Wk(r)}if(l===i.length-1&&p){const e=this.testLoop(s,c,r);for(let t=0;t<n.length;++t){const r=n[t],a=e[t];Wk(a),o["val_"+r]=a}}})),await m.onBatchEnd(l,u),aP(u),this.stopTraining_)break}a.dispose()}if(await m.onEpochEnd(v,o),this.stopTraining_)break}return await m.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return nM(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],o=n[1],a=this.makeTrainFunction()(r.concat(o)),i=[];for(const s of a){const e=await s.data();i.push(e[0])}return jk(a),lM(n[0],e),lM(n[1],t),ZR(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,o=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:o[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=zk().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-zk().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=$R(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>$R(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=$R(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[$R(DP(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>$R(DP(e))));{const e={};for(const t in this.metrics)e[t]=$R(DP(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=fP(KP(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=eU(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>eU(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=eU(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>eU(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=eU(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=fB(e);if(0===t.length)throw new jR("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new jR("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new jR("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await Xk(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(qP),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:o}=await Xk(await this.optimizer.getWeights(),e);n.specs.push(...o),n.data=aB([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;MP(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){MP(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}pM.className="Model",dS(pM);class fM extends pM{}fM.className="Functional",dS(fM);class gM extends pM{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:gU("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new jR("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof gM||e instanceof pM;let n;if(t){if(n=e,1!==n.outputs.length)throw new jR("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new jR("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new jR("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new jR("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new QD({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new jR("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new jR("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=MD(this.outputs[0])}this.inboundNodes=[],new UD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:qR(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(ID(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new pM({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new VR("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new VR("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new VR("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new VR("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new jR("Legacy serialization format not supported yet.");n=t}else dv(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,o=t;const a=new e(o);if(!(a instanceof gM))throw new WR("Sequential.fromConfig called on non-Sequential input: ".concat(a));for(const i of n){const e=fP(i,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),a.add(e)}return a}set stopTraining(e){if(null==this.model)throw new jR("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new jR("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}gM.className="Sequential",dS(gM);class mM extends AS{getConfig(){return{}}}class yM extends mM{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new WR("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return QE(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}yM.className="elu",dS(yM);class vM extends mM{apply(e){return _F(e)}}vM.className="selu",dS(vM);class bM extends mM{apply(e){return CF(e)}}bM.className="relu",dS(bM);class wM extends mM{apply(e){return Vk((()=>zN(6,CF(e))))}}wM.className="relu6",dS(wM);class xM extends mM{apply(e){return e}}xM.className="linear",dS(xM);class CM extends mM{apply(e){return eE(e)}}CM.className="sigmoid",dS(CM);class kM extends mM{apply(e){return function(e){return Vk((()=>{const t=eS(.5,rS(.2,e));return pE(t,0,1)}))}(e)}}kM.className="hardSigmoid",dS(kM);class BM extends mM{apply(e){return kN(e)}}BM.className="softplus",dS(BM);class SM extends mM{apply(e){return function(e){return Vk((()=>nS(e,eS(wS(e),1))))}(e)}}SM.className="softsign",dS(SM);class IM extends mM{apply(e){return nE(e)}}IM.className="tanh",dS(IM);class EM extends mM{apply(e){return zF(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}EM.className="softmax",dS(EM);class NM extends mM{apply(e){return SN(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}NM.className="logSoftmax",dS(NM);class FM extends mM{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Vk((()=>rS(eE(rS(e,t)),e)))}}FM.className="swish",dS(FM);class TM extends mM{apply(e){return Vk((()=>rS(e,nE(kN(e)))))}}function _M(e){return e.getClassName()}function LM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oU(e,hS.getMap().classNameMap,t,"activation")}function OM(e){if(null==e){const e={className:"linear",config:{}};return LM(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},LM(t)}return e instanceof mM?e:LM(e)}function RM(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}TM.className="mish",dS(TM);class UM extends AS{}class DM extends UM{constructor(e){super(),RM(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Vk((()=>{let t=MN([1]);return this.hasL1&&(t=eS(t,$E(rS(this.l1,wS(e))))),this.hasL2&&(t=eS(t,$E(rS(this.l2,ZU(e))))),XI(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}DM.className="L1L2",dS(DM);const PM={l1l2:"L1L2"};function MM(e){return nU(e)}function QM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oU(e,hS.getMap().classNameMap,t,"regularizer")}function HM(e){if(null==e)return null;if("string"===typeof e){return QM({className:e in PM?PM[e]:e,config:{}})}return e instanceof UM?e:QM(e)}class zM extends PD{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=SD(e);let n=CF(e);return null!=this.maxValue&&(n=pE(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}zM.className="ReLU",dS(zM);class VM extends PD{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=SD(e);return gN(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}VM.className="LeakyReLU",dS(VM);class jM extends PD{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=CD(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=HM(e.alphaRegularizer),this.alphaConstraint=rP(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new jR("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=ID(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new LD({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=SD(e),aF(e,this.alpha.read())}getConfig(){const e={alphaInitializer:xD(this.alphaInitializer),alphaRegularizer:MM(this.alphaRegularizer),alphaConstraint:tP(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}jM.className="PReLU",dS(jM);class WM extends PD{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new WR("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=SD(e);return QE(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}WM.className="ELU",dS(WM);class KM extends PD{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=SD(e);return rS(n,ZB(uN(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}KM.className="ThresholdedReLU",dS(KM);class GM extends PD{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new EM).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return Vk((()=>{let n=SD(e);const r=t.mask;if(null!=r){const e=rS(vS(QN(n.shape),ZB(r,n.dtype)),cS(-1e9));n=eS(n,e)}return this.axis instanceof Array?this.axis.length>1?rN(vS(n,IN(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function qM(e,t,n){if("number"===typeof e)return qR(e,t);if(e.length!==t)throw new jR("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const o=e[r];if(!LU(o))throw new jR("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(o))}return e}function XM(e,t,n,r){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((o+r-1)/r)}function YM(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+UU([n-t,0]);else{if("same"!==r)throw new jR("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function ZM(e,t){return Vk((()=>(CU(t),"channelsFirst"===t?vT(e,[0,2,3,1]):e)))}function JM(e,t){return Vk((()=>(CU(t),"channelsFirst"===t?vT(e,[0,2,3,4,1]):e)))}function $M(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Vk((()=>{if(null==a&&(a="channelsLast"),CU(a),3!==e.shape.length)throw new jR("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new jR("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new jR("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===a&&(e=vT(e,[0,2,1])),"causal"===o)throw new WR("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=bE(e,t,r,"same"===o?"same":"valid","NWC",i);return null!=n&&(s=$U(s,n)),s}))}function eQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Vk((()=>{if(null==a&&(a="channelsLast"),CU(a),3!==e.rank&&4!==e.rank)throw new jR("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new jR("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let c=ZM(e,a);if("causal"===o)throw new WR("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=LT({x:c,filter:t,strides:r,pad:"same"===o?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(c=vT(c,[0,3,1,2])),c}))}function tQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return Vk((()=>{if(null==a&&(a="channelsLast"),CU(a),4!==e.rank&&5!==e.rank)throw new jR("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new jR("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let s=JM(e,a);if("causal"===o)throw new WR("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=CE(s,t,r,"same"===o?"same":"valid","NDHWC",i),null!=n&&(s=$U(s,n)),"channelsFirst"===a&&(s=vT(s,[0,4,1,2,3])),s}))}GM.className="Softmax",dS(GM);class nQ extends PD{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",nQ.verifyArgs(t),this.rank=e,uU(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new WR("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=qM(t.kernelSize,e,"kernelSize"),this.strides=qM(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,kU(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,CU(this.dataFormat),this.activation=OM(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=CD(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=rP(t.biasConstraint),this.biasRegularizer=HM(t.biasRegularizer),this.activityRegularizer=HM(t.activityRegularizer),this.dilationRate=qM(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new jR("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new jR("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new jR("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(XR("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!lU(e.kernelSize,"number",1,3))throw new jR("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:_M(this.activation),useBias:this.useBias,biasInitializer:xD(this.biasInitializer),biasRegularizer:MM(this.biasRegularizer),activityRegularizer:MM(this.activityRegularizer),biasConstraint:tP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class rQ extends nQ{constructor(e,t){super(e,t),this.kernel=null,rQ.verifyArgs(t),this.filters=t.filters,uU(this.filters,"filters"),this.kernelInitializer=CD(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=rP(t.kernelConstraint),this.kernelRegularizer=HM(t.kernelRegularizer)}build(e){e=ID(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jR("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return Vk((()=>{let t;e=SD(e);const n=null==this.bias?null:this.bias.read(),r=hU(this.activation.getClassName());if(null!=r&&2===this.rank)t=eQ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=$M(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=eQ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new WR("convolutions greater than 3D are not implemented yet.");t=tQ(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=ID(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<n.length;++o){const e=XM(n[o],this.kernelSize[o],this.padding,this.strides[o],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[o]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:xD(this.kernelInitializer),kernelRegularizer:MM(this.kernelRegularizer),kernelConstraint:tP(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new jR("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class oQ extends rQ{constructor(e){super(2,e),oQ.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!lU(e.kernelSize,"number",1,2))throw new jR("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}oQ.className="Conv2D",dS(oQ);class aQ extends rQ{constructor(e){super(3,e),aQ.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new jR("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}aQ.className="Conv3D",dS(aQ);class iQ extends oQ{constructor(e){if(super(e),this.inputSpec=[new LD({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new jR("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=ID(e)).length)throw new jR("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jR("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new LD({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Vk((()=>{let t=SD(e);if(4!==t.shape.length)throw new jR("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,a;"channelsFirst"===this.dataFormat?(o=2,a=3):(o=1,a=2);const i=n[o],s=n[a],c=this.kernelSize[0],l=this.kernelSize[1],u=this.strides[0],A=this.strides[1],h=[r,YM(i,u,c,this.padding),YM(s,A,l,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=vT(t,[0,2,3,1]));let d=xE(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(d=vT(d,[0,3,1,2])),null!=this.bias&&(d=$U(d,this.bias.read(),this.dataFormat)),null!=this.activation&&(d=this.activation.apply(d)),d}))}computeOutputShape(e){const t=(e=ID(e)).slice();let n,r,o;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3):(n=3,r=1,o=2);const a=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],c=this.strides[1];return t[n]=this.filters,t[r]=YM(t[r],s,a,this.padding),t[o]=YM(t[o],c,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}iQ.className="Conv2DTranspose",dS(iQ);class sQ extends aQ{constructor(e){if(super(e),this.inputSpec=[new LD({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new jR("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=ID(e)).length)throw new jR("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new jR("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new LD({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Vk((()=>{let t=SD(e);if(5!==t.shape.length)throw new jR("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let o,a,i;"channelsFirst"===this.dataFormat?(i=2,o=3,a=4):(i=1,o=2,a=3);const s=n[i],c=n[o],l=n[a],u=this.kernelSize[0],A=this.kernelSize[1],h=this.kernelSize[2],d=this.strides[0],p=this.strides[1],f=this.strides[2],g=[r,YM(s,d,u,this.padding),YM(c,p,A,this.padding),YM(l,f,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=vT(t,[0,2,3,4,1]));let m=BE(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(m=vT(m,[0,4,1,2,3])),null!==this.bias&&(m=$U(m,this.bias.read(),this.dataFormat)),null!==this.activation&&(m=this.activation.apply(m)),m}))}computeOutputShape(e){const t=(e=ID(e)).slice();let n,r,o,a;"channelsFirst"===this.dataFormat?(n=1,r=2,o=3,a=4):(n=4,r=1,o=2,a=3);const i=this.kernelSize[0],s=this.kernelSize[1],c=this.kernelSize[2],l=this.strides[0],u=this.strides[1],A=this.strides[2];return t[n]=this.filters,t[r]=YM(t[r],l,i,this.padding),t[o]=YM(t[o],u,s,this.padding),t[a]=YM(t[a],A,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}sQ.className="Conv3DTranspose",dS(sQ);class cQ extends rQ{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new jR("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new jR("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new jR("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=CD(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=HM(t.depthwiseRegularizer),this.depthwiseConstraint=rP(t.depthwiseConstraint),this.pointwiseInitializer=CD(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=HM(t.pointwiseRegularizer),this.pointwiseConstraint=rP(t.pointwiseConstraint)}build(e){if((e=ID(e)).length<this.rank+2)throw new jR("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new jR("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),o=[];for(let i=0;i<this.rank;++i)o.push(1);o.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new LD({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return Vk((()=>{let t;if(e=SD(e),1===this.rank)throw new WR("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=vT(e,[0,2,3,1])),t=LF(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=$U(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=vT(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=xD(this.depthwiseInitializer),e.pointwiseInitializer=xD(this.pointwiseInitializer),e.depthwiseRegularizer=MM(this.depthwiseRegularizer),e.pointwiseRegularizer=MM(this.pointwiseRegularizer),e.depthwiseConstraint=tP(this.depthwiseConstraint),e.pointwiseConstraint=tP(this.pointwiseConstraint),e}}cQ.className="SeparableConv";class lQ extends cQ{constructor(e){super(2,e)}}lQ.className="SeparableConv2D",dS(lQ);class uQ extends rQ{constructor(e){super(1,e),uQ.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!lU(e.kernelSize,"number",1,1))throw new jR("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}uQ.className="Conv1D",dS(uQ);class AQ extends PD{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Vk((()=>{if(e=SD(e),"channelsLast"===this.dataFormat){const t=jU(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return jU(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=jU(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return jU(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}AQ.className="Cropping2D",dS(AQ);class hQ extends PD{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,CU(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,cU(yU,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return Vk((()=>{let t=SD(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=vT(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],o="nearest"===this.interpolation?D_.resizeNearestNeighbor(t,[e,r]):D_.resizeBilinear(t,[e,r]);return vT(o,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?D_.resizeNearestNeighbor(t,[e,r]):D_.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}hQ.className="UpSampling2D",dS(hQ);class dQ extends nQ{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=CD(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=rP(e.depthwiseConstraint),this.depthwiseRegularizer=HM(e.depthwiseRegularizer)}build(e){if((e=ID(e)).length<4)throw new jR("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new jR("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Vk((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return Vk((()=>{null==o&&(o="channelsLast"),CU(o);let i=ZM(e,o);if(4!==e.rank)throw new jR("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new jR("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=_E(i,t,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===o&&(i=vT(i,[0,3,1,2])),i}))}(e=SD(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=$U(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=ID(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=XM(t,this.kernelSize[0],this.padding,this.strides[0]),a=XM(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,o,a]:[e[0],o,a,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=xD(this.depthwiseInitializer),e.depthwiseRegularizer=MM(this.depthwiseRegularizer),e.depthwiseConstraint=tP(this.depthwiseRegularizer),e}}function pQ(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new jR("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=o(t),constants:n=o(n)}}function fQ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Vk((()=>{const c=t.shape.length;if(c<3)throw new jR("Input should be at least 3D, but is ".concat(c,"D."));const l=[1,0].concat(DU(2,c));if(t=vT(t,l),null!=a)throw new WR("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=o&&(o=ZB(ZB(o,"bool"),"float32"),o.rank===c-1&&(o=oN(o,-1)),o=vT(o,l)),r&&(t=BF(t,0),null!=o&&(o=BF(o,0)));const u=[];let A,h=n;const d=t.shape[0],p=dT(t);let f,g;null!=o&&(f=dT(o));for(let t=0;t<d;++t){const n=p[t],r=Vk((()=>e(n,h)));if(null==o)A=r[0],h=r[1];else{const e=Vk((()=>{const e=f[t],n=vS(YN(e),e),o=eS(rS(r[0],e),rS(h[0],n)),a=h.map(((t,o)=>eS(rS(r[1][o],e),rS(t,n))));return{output:o,newStates:a}}));A=e.output,h=e.newStates}s&&u.push(A)}if(s){g=YF(u,1)}return[A,g,h]}))}dQ.className="DepthwiseConv2D",dS(dQ);class gQ extends PD{constructor(e){let t;if(super(e),null==e.cell)throw new jR("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new kQ({cells:e.cell}):e.cell,null==t.stateSize)throw new jR("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new LD({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return DU(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){kD(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return Vk((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new WR("Constants support is not implemented in RNN yet.");kD(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new LD({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let o;if(this.cell.build(r),o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!mv(this.stateSpec.map((e=>e.shape[e.shape.length-1])),o))throw new jR("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=o.map((e=>new LD({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Vk((()=>{if(!this.stateful)throw new zR("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new jR("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>MN([n,e]))):this.states_=[MN([n,this.cell.stateSize])];else if(null==e)jk(this.states_),null!=this.keptStates&&(jk(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>MN([n,e]))):this.states_[0]=MN([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new jR("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):jk(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,a=[n,o];if(!mv(r.shape,a))throw new jR("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(a,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map((e=>Wk(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=pQ(e,n,r,this.numConstants);e=o.inputs,n=o.initialState,r=o.constants;let a=[],i=[];if(null!=n){t.initialState=n,a=a.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new LD({shape:e.shape}));i=i.concat(this.stateSpec)}null!=r&&(t.constants=r,a=a.concat(r),this.numConstants=r.length);if(a[0]instanceof OD){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return Vk((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let o=null==t?null:t.initialState;e=SD(e),null==o&&(o=this.stateful?this.states_:this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==a)throw new jR("RNN Layer has ".concat(a," state(s) but was passed ")+"".concat(o.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},s=fQ(((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]}),e,o,this.goBackwards,n,null,this.unroll,this.returnSequences),c=s[0],l=s[1],u=s[2];this.stateful&&this.resetStates(u,r);const A=this.returnSequences?l:c;return this.returnState?[A].concat(u):A}))}getInitialState(e){return Vk((()=>{let t=MN(e.shape);return t=$E(t,[1,2]),t=HU(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?GU(t,[1,e]):t)):this.cell.stateSize>1?[GU(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===gQ.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=fP(t.cell,n);return new e(Object.assign(t,{cell:r}))}}gQ.className="RNN",dS(gQ);class mQ extends PD{}class yQ extends mQ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,uU(this.units,"units"),this.activation=OM(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CD(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CD(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CD(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=HM(e.kernelRegularizer),this.recurrentRegularizer=HM(e.recurrentRegularizer),this.biasRegularizer=HM(e.biasRegularizer),this.kernelConstraint=rP(e.kernelConstraint),this.recurrentConstraint=rP(e.recurrentConstraint),this.biasConstraint=rP(e.biasConstraint),this.dropout=RU([1,UU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=RU([1,UU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ID(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Vk((()=>{if(2!==e.length)throw new jR("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let o;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=BQ({ones:()=>YN(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=BQ({ones:()=>YN(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;o=XU(null!=a?rS(e,a):e,this.kernel.read()),null!=this.bias&&(o=$U(o,this.bias.read())),null!=i&&(n=rS(n,i));let s=eS(o,XU(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:_M(this.activation),useBias:this.useBias,kernelInitializer:xD(this.kernelInitializer),recurrentInitializer:xD(this.recurrentInitializer),biasInitializer:xD(this.biasInitializer),kernelRegularizer:MM(this.kernelRegularizer),recurrentRegularizer:MM(this.recurrentRegularizer),biasRegularizer:MM(this.biasRegularizer),activityRegularizer:MM(this.activityRegularizer),kernelConstraint:tP(this.kernelConstraint),recurrentConstraint:tP(this.recurrentConstraint),biasConstraint:tP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}yQ.className="SimpleRNNCell",dS(yQ);class vQ extends gQ{constructor(e){e.cell=new yQ(e),super(e)}call(e,t){return Vk((()=>{null!=this.cell.dropoutMask&&(jk(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(jk(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return new e(t)}}vQ.className="SimpleRNN",dS(vQ);class bQ extends mQ{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new jR("GRUCell does not support reset_after parameter set to true.");this.units=e.units,uU(this.units,"units"),this.activation=OM(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=OM(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CD(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CD(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CD(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=HM(e.kernelRegularizer),this.recurrentRegularizer=HM(e.recurrentRegularizer),this.biasRegularizer=HM(e.biasRegularizer),this.kernelConstraint=rP(e.kernelConstraint),this.recurrentConstraint=rP(e.recurrentConstraint),this.biasConstraint=rP(e.biasConstraint),this.dropout=RU([1,UU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=RU([1,UU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=ID(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Vk((()=>{if(2!==e.length)throw new jR("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=BQ({ones:()=>YN(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=BQ({ones:()=>YN(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let i,s,c;0<this.dropout&&this.dropout<1&&(e=rS(e,o[0]));let l=XU(e,this.kernel.read());this.useBias&&(l=$U(l,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=rS(r,a[0]));const u=this.recurrentKernel.read(),[A,h]=KF(u,[2*this.units,this.units],u.rank-1),d=XU(r,A),[p,f,g]=KF(l,3,l.rank-1),[m,y]=KF(d,2,d.rank-1);i=this.recurrentActivation.apply(eS(p,m)),s=this.recurrentActivation.apply(eS(f,y));const v=XU(rS(s,r),h);c=this.activation.apply(eS(g,v));const b=eS(rS(i,r),rS(eS(1,CN(i)),c));return[b,b]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:_M(this.activation),recurrentActivation:_M(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xD(this.kernelInitializer),recurrentInitializer:xD(this.recurrentInitializer),biasInitializer:xD(this.biasInitializer),kernelRegularizer:MM(this.kernelRegularizer),recurrentRegularizer:MM(this.recurrentRegularizer),biasRegularizer:MM(this.biasRegularizer),activityRegularizer:MM(this.activityRegularizer),kernelConstraint:tP(this.kernelConstraint),recurrentConstraint:tP(this.recurrentConstraint),biasConstraint:tP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}bQ.className="GRUCell",dS(bQ);class wQ extends gQ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bQ(e),super(e)}call(e,t){return Vk((()=>{null!=this.cell.dropoutMask&&(jk(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(jk(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}wQ.className="GRU",dS(wQ);class xQ extends mQ{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,uU(this.units,"units"),this.activation=OM(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=OM(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CD(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CD(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CD(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=HM(e.kernelRegularizer),this.recurrentRegularizer=HM(e.recurrentRegularizer),this.biasRegularizer=HM(e.biasRegularizer),this.kernelConstraint=rP(e.kernelConstraint),this.recurrentConstraint=rP(e.recurrentConstraint),this.biasConstraint=rP(e.biasConstraint),this.dropout=RU([1,UU([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=RU([1,UU([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=ID(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends oD{apply(t,r){const o=e.apply([n]),a=(new iD).apply([n]),i=e.apply([2*n]);return KU(KU(o,a),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Vk((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new jR("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=BQ({ones:()=>YN(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=BQ({ones:()=>YN(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let s,c,l,u;0<this.dropout&&this.dropout<1&&(e=rS(e,a[0]));let A=XU(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=rS(r,i[0])),A=eS(A,XU(r,this.recurrentKernel.read())),this.useBias&&(A=$U(A,this.bias.read()));const[h,d,p,f]=KF(A,4,A.rank-1);s=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(d),l=eS(rS(c,o),rS(s,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const g=rS(u,this.activation.apply(l));return[g,g,l]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:_M(this.activation),recurrentActivation:_M(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xD(this.kernelInitializer),recurrentInitializer:xD(this.recurrentInitializer),biasInitializer:xD(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:MM(this.kernelRegularizer),recurrentRegularizer:MM(this.recurrentRegularizer),biasRegularizer:MM(this.biasRegularizer),activityRegularizer:MM(this.activityRegularizer),kernelConstraint:tP(this.kernelConstraint),recurrentConstraint:tP(this.recurrentConstraint),biasConstraint:tP(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}xQ.className="LSTMCell",dS(xQ);class CQ extends gQ{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new xQ(e),super(e)}call(e,t){return Vk((()=>{null!=this.cell.dropoutMask&&(jk(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(jk(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}CQ.className="LSTM",dS(CQ);class kQ extends mQ{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Vk((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const o=[];let a;for(let i=0;i<this.cells.length;++i){const s=this.cells[i];n=r[i],a=0===i?[e[0]].concat(n):[a[0]].concat(n),a=s.call(a,t),o.push(a.slice(1))}n=[];for(const e of o.slice().reverse())n.push(...e);return[a[0]].concat(n)}))}build(e){let t;kD(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{EU("RNNCell_".concat(r),(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const o of t.cells)r.push(fP(o,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return TD(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,o=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],o[e]])}_D(t)}}function BQ(e){const{ones:t,rate:n,training:r=!1,count:o=1,dropoutFunc:a}=e,i=()=>null!=a?a(t(),n):eD(t(),n),s=()=>tD(i,t,r);if(!o||o<=1)return Wk(s().clone());return Array(o).fill(void 0).map(s).map((e=>Wk(e.clone())))}kQ.className="StackedRNNCells",dS(kQ);var SQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class IQ extends gQ{constructor(e){if(e.unroll)throw new WR("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new WR("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new LD({ndim:5})]}call(e,t){return Vk((()=>{if(null!=this.cell.dropoutMask&&(jk(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(jk(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new jR("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,o=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:o})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Vk((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),o=MN([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(o):[o]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Vk((()=>{if(!this.stateful)throw new zR("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),o=[r[0],...r.slice(2)];if(null==n[0])throw new jR("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>MN(o))):this.states_=[MN(o)];else if(null==e)jk(this.states_),null!=this.keptStates&&(jk(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>MN(o))):this.states_[0]=MN(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new jR("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):jk(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=o;if(!mv(n.shape,r))throw new jR("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map((e=>Wk(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:o,strides:a,dilationRate:i}=this.cell,s="channelsFirst"===t,c=e[s?3:2],l=e[s?4:3],u=XM(c,r[0],o,a[0],i[0]),A=XM(l,r[1],o,a[1],i[1]);return[...e.slice(0,2),...s?[n,u,A]:[u,A,n]]}}IQ.className="ConvRNN2D";class EQ extends xQ{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:o,dataFormat:a,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,uU(this.filters,"filters"),this.kernelSize=qM(n,2,"kernelSize"),this.kernelSize.forEach((e=>uU(e,"kernelSize"))),this.strides=qM(r||1,2,"strides"),this.strides.forEach((e=>uU(e,"strides"))),this.padding=o||"valid",kU(this.padding),this.dataFormat=a||"channelsLast",CU(this.dataFormat),this.dilationRate=qM(i||1,2,"dilationRate"),this.dilationRate.forEach((e=>uU(e,"dilationRate")))}build(e){var t;e=ID(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new jR("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],o=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends oD{apply(e,t){return WU([n.apply([r]),QN([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Vk((()=>{if(3!==e.length)throw new jR("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],o=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=BQ({ones:()=>YN(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,s=(e,t,n)=>t&&t[n]?rS(t[n],e):e;let c=s(r,i,0),l=s(r,i,1),u=s(r,i,2),A=s(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=BQ({ones:()=>YN(o),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let d=s(o,h,0),p=s(o,h,1),f=s(o,h,2),g=s(o,h,3);const[m,y,v,b]=KF(this.kernel.read(),4,3),[w,x,C,k]=this.useBias?KF(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,m,w,this.padding),l=this.inputConv(l,y,x,this.padding),u=this.inputConv(u,v,C,this.padding),A=this.inputConv(A,b,k,this.padding);const[B,S,I,E]=KF(this.recurrentKernel.read(),4,3);d=this.recurrentConv(d,B),p=this.recurrentConv(p,S),f=this.recurrentConv(f,I),g=this.recurrentConv(g,E);const N=this.recurrentActivation.apply(eS(c,d)),F=this.recurrentActivation.apply(eS(l,p)),T=eS(rS(F,a),rS(N,this.activation.apply(eS(u,f)))),_=rS(this.recurrentActivation.apply(eS(A,g)),this.activation.apply(T));return[_,_,T]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=SQ(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const o=vE(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?$U(o,n,this.dataFormat):o}recurrentConv(e,t){return vE(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}EQ.className="ConvLSTM2DCell",dS(EQ);class NQ extends IQ{constructor(e){const t=new EQ(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}NQ.className="ConvLSTM2D",dS(NQ);class FQ extends PD{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return tD((()=>eD(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}FQ.className="Dropout",dS(FQ);class TQ extends FQ{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}TQ.className="SpatialDropout1D",dS(TQ);class _Q extends PD{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,uU(this.units,"units"),this.activation=OM(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=CD(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=CD(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=rP(e.kernelConstraint),this.biasConstraint=rP(e.biasConstraint),this.kernelRegularizer=HM(e.kernelRegularizer),this.biasRegularizer=HM(e.biasRegularizer),this.activityRegularizer=HM(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=ID(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=ID(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e),r=hU(this.activation.getClassName());let o;return null!=r?o=XU(n,this.kernel.read(),r,this.bias?this.bias.read():null):(o=XU(n,this.kernel.read()),null!=this.bias&&(o=$U(o,this.bias.read())),null!=this.activation&&(o=this.activation.apply(o))),o}))}getConfig(){const e={units:this.units,activation:_M(this.activation),useBias:this.useBias,kernelInitializer:xD(this.kernelInitializer),biasInitializer:xD(this.biasInitializer),kernelRegularizer:MM(this.kernelRegularizer),biasRegularizer:MM(this.biasRegularizer),activityRegularizer:MM(this.activityRegularizer),kernelConstraint:tP(this.kernelConstraint),biasConstraint:tP(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}_Q.className="Dense",dS(_Q);class LQ extends PD{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ID(e);for(const t of e.slice(1))if(null==t)throw new jR('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],OU(e,1)]}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);let n=SD(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=vT(n,e)}return function(e){if(e.rank<=1)throw new jR("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],OU(e.shape,1)];return XI(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}LQ.className="Flatten",dS(LQ);class OQ extends PD{constructor(e){super(e),this.supportsMasking=!0,this.activation=OM(e.activation)}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e);return this.activation.apply(n)}))}getConfig(){const e={activation:_M(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}OQ.className="Activation",dS(OQ);class RQ extends PD{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Vk((()=>function(e,t){return Vk((()=>{if(2!==e.shape.length)throw new jR("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return GU(HU(e,1),[1,t,1])}))}(e=SD(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}RQ.className="RepeatVector",dS(RQ);class UQ extends PD{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let o=1,a=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==a)throw new jR("Can only specifiy one unknown dimension.");a=s}else o*=e}const i=OU(e);if(null!==a){if(0===o||i%o!==0)throw new jR(n);r[a]=i/o}else if(i!==o)throw new jR(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e),r=n.shape,o=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return XI(n,o)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}UQ.className="Reshape",dS(UQ);class DQ extends PD{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=DU(1,e.dims.length+1);if(!mv(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new LD({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=ID(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return vT(SD(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}DQ.className="Permute",dS(DQ);class PQ extends PD{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=SD(e);return SI(qN(n,this.maskValue),-1)}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e),r=SI(qN(n,this.maskValue),-1,!0);return rS(n,ZB(r,n.dtype))}))}}PQ.className="Masking",dS(PQ);class MQ extends PD{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(JR(e.inputLength))}this.inputDim=e.inputDim,uU(this.inputDim,"inputDim"),this.outputDim=e.outputDim,uU(this.outputDim,"outputDim"),this.embeddingsInitializer=CD(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=HM(e.embeddingsRegularizer),this.activityRegularizer=HM(e.activityRegularizer),this.embeddingsConstraint=rP(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Vk((()=>this.maskZero?(e=SD(e),qN(e,iS(e))):null))}computeOutputShape(e){if(e=ID(e),null==this.inputLength)return[...e,this.outputDim];const t=JR(this.inputLength);if(t.length!==e.length-1)throw new jR('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const o=t[r],a=e[r+1];if(null!=o&&null!=a&&o!==a)throw new jR('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==o&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);let n=SD(e);"int32"!==n.dtype&&(n=QU(n,"int32"));const r=YU(this.embeddings.read(),XI(n,[n.size]));return XI(r,ID(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:xD(this.embeddingsInitializer),embeddingsRegularizer:MM(this.embeddingsRegularizer),activityRegularizer:MM(this.activityRegularizer),embeddingsConstraint:tP(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}MQ.className="Embedding",dS(MQ);class QQ extends PD{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new WR}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const o=e[e.length-t.length+r],a=t[r];if(null==o||null==a||o<0||a<0)n.push(null);else if(1===o)n.push(a);else if(1===a)n.push(o);else{if(o!==a)throw new jR("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(o)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[ID(e)]),e.length<2)throw new jR("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const o of e)null!=o&&null!==o[0]&&t.push(o[0]);if(t=iU(t),t.length>1)throw new jR("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let o=1;o<e.length;++o){const t=null==e[o]?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===iU(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Vk((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=UU(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=HU(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const a of e){const e=a.rank;if(null==e){const e=a.shape,r=e[0],o=e.slice(1).concat([r]);let i=XI(a,[r].concat(OU(e.slice(1))));i=vT(i,[1,0]),i=XI(i,o),t.push(i),n=!0}else if(e>1){const r=DU(1,e).concat([0]);t.push(vT(a,r)),n=!0}else t.push(a)}let r=this.mergeFunction(t);const o=r.rank;if(n)if(null==o){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=XI(vT(XI(r,[-1,t]),[1,0]),n)}else if(o>1){const e=[o-1].concat(DU(0,o-1));r=vT(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=iU(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Vk((()=>{if(null==t)return null;if(!Array.isArray(t))throw new jR("`mask` should be an Array");if(!Array.isArray(e))throw new jR("`inputs` should be an Array");if(t.length!==e.length)throw new jR("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:oN(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=EN(n,t[e]);return n}))}}class HQ extends QQ{constructor(e){super(e)}mergeFunction(e){return Vk((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=eS(t,e[n]);return t}))}}HQ.className="Add",dS(HQ);class zQ extends QQ{constructor(e){super(e)}mergeFunction(e){return Vk((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=rS(t,e[n]);return t}))}}zQ.className="Multiply",dS(zQ);class VQ extends QQ{constructor(e){super(e)}mergeFunction(e){return Vk((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=eS(t,e[n]);return rS(1/e.length,t)}))}}VQ.className="Average",dS(VQ);class jQ extends QQ{constructor(e){super(e)}mergeFunction(e){return Vk((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=BS(t,e[n]);return t}))}}jQ.className="Maximum",dS(jQ);class WQ extends QQ{constructor(e){super(e)}mergeFunction(e){return Vk((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=zN(t,e[n]);return t}))}}WQ.className="Minimum",dS(WQ);class KQ extends QQ{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new jR("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let o=!1;for(const e of n)if(mv(e,t)){o=!0;break}o||n.push(t)}if(n.length>1)throw new jR("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Vk((()=>WU(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new jR("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const o of t.slice(1)){if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new jR("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new jR("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new jR("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Vk((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let a=0;a<e.length;++a)null==t[a]?r.push(ZB(YN(e[a]),"bool")):t[a].rank<e[a].rank?r.push(oN(t[a],-1)):r.push(t[a]);const o=JI(r,this.axis);return BI(o,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function GQ(e,t){for(;e<0;)e+=t;return e}KQ.className="Concatenate",dS(KQ);class qQ extends QQ{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){dv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new WR("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new jR("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new jR("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>GQ(t,e[n].shape.length))):[GQ(this.axes,n.shape.length),GQ(this.axes,r.shape.length)],this.normalize&&(n=gP(n,t[0]),r=gP(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new WR("batchDot is not implemented for tensors of 4D or higher rank yet");if(dv(e.shape.length>=2,(()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length))),dv(e.shape.length>=2,(()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length))),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new WR("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,o=t.shape.length;null==n&&(n=[r-1,o-2]);const a=n;return Vk((()=>{let n,i;if(r>o){n=r-o;const e=[];for(let t=0;t<n;++t)e.push(1);t=XI(t,t.shape.concat(e))}else if(o>r){n=o-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=XI(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=a[0]===a[1]?$E(rS(e,t),a[0]):$E(rS(vT(e,[1,0]),t),a[1]);else{const n=a[0]!==e.shape.length-1,r=a[1]===t.shape.length-1;i=$I(e,t,n,r)}if(n>0){let e;e=r>o?r+o-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=XF(i,t)}return 1===i.shape.length&&(i=oN(i,1)),i}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[GQ(this.axes,e.length),GQ(this.axes,t.length)],n}computeOutputShape(e){dv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new WR("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const o=t.concat(n);return 1===o.length&&o.push(1),o}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}qQ.className="Dot",dS(qQ);class XQ extends PD{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e);return tD((()=>eS(qU(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}XQ.className="GaussianNoise",dS(XQ);class YQ extends PD{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Vk((()=>{this.invokeCallHook(e,t);const n=SD(e);if(this.rate>0&&this.rate<1){return tD((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return rS(n,qU(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}YQ.className="GaussianDropout",dS(YQ);class ZQ extends PD{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||SD(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Vk((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=SD(e),r=-1.7580993408473766;let o=AN(yF(n),this.rate);o=QU(o,"float32");const a=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-a*r*this.rate,s=eS(rS(t,o),rS(eS(o,-1),r));return eS(rS(s,a),i)};return tD(r,(()=>SD(e)),t.training||!1)}return e}))}}function JQ(e,t,n,r,o){let a,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)a=iE(e,t,n,r,o,i);else if(3===e.rank)a=sE(e,t,n,r,o,i);else{if(4!==e.rank)throw new WR("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");a=cE(e,t,n,r,o,i)}return a}function $Q(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return mv(r.slice().sort(),DU(0,e.rank-1))?function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Vk((()=>{const a=WN(e,r),i=a.mean,s=a.variance;return[JQ(e,i,s,n,t,o),i,s]}))}(e,t,n,r,o):function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Vk((()=>{const a=WN(e,r),i=a.mean,s=a.variance,c=[];for(const t of DU(0,e.rank))-1!==r.indexOf(t)?c.push(1):c.push(e.shape[t]);const l=XI(i,c),u=XI(s,c),A=null==t?null:XI(t,c),h=null==n?null:XI(n,c);return[JQ(e,l,u,h,A,o),i,s]}))}(e,t,n,r,o)}ZQ.className="AlphaDropout",dS(ZQ);class eH extends PD{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CD(e.betaInitializer||"zeros"),this.gammaInitializer=CD(e.gammaInitializer||"ones"),this.movingMeanInitializer=CD(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=CD(e.movingVarianceInitializer||"ones"),this.betaConstraint=rP(e.betaConstraint),this.gammaConstraint=rP(e.gammaConstraint),this.betaRegularizer=HM(e.betaRegularizer),this.gammaRegularizer=HM(e.gammaRegularizer)}build(e){e=ID(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new jR("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new LD({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Vk((()=>{const n=null!=t.training&&t.training,r=SD(e),o=r.shape,a=o.length,i=DU(0,a),s=this.axis>=0?this.axis:this.axis+a;i.splice(s,1);const c=qR(1,a);c[s]=o[s];const l=i.slice();l.sort();const u=!mv(l,DU(0,a).slice(0,a-1));if(!n)return(()=>{if(u){const e=XI(this.movingMean.read(),c),t=XI(this.movingVariance.read(),c),n=this.center?XI(this.beta.read(),c):null,o=this.scale?XI(this.gamma.read(),c):null;return JQ(r,e,t,n,o,this.epsilon)}return JQ(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[A,h,d]=$Q(r,this.gamma.read(),this.beta.read(),i,this.epsilon),p=(e,t,n)=>{Vk((()=>{const r=1-n,o=e.read(),a=rS(vS(o,t),r);e.write(vS(o,a))}))};return(()=>{p(this.movingMean,h,this.momentum),p(this.movingVariance,d,this.momentum)})(),A}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xD(this.betaInitializer),gammaInitializer:xD(this.gammaInitializer),movingMeanInitializer:xD(this.movingMeanInitializer),movingVarianceInitializer:xD(this.movingVarianceInitializer),betaRegularizer:MM(this.betaRegularizer),gammaRegularizer:MM(this.gammaRegularizer),betaConstraint:tP(this.betaConstraint),gammaConstraint:tP(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}eH.className="BatchNormalization",dS(eH);class tH extends PD{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CD(e.betaInitializer||"zeros"),this.gammaInitializer=CD(e.gammaInitializer||"ones"),this.betaRegularizer=HM(e.betaRegularizer),this.gammaRegularizer=HM(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=ID(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=t);for(const r of this.axis)if(r<0||r>=t)throw new Error("Invalid axis: ".concat(r));if(this.axis.length!==iU(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map((t=>e[t]));this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}call(e,t){const n=SD(e),r=n.shape,o=r.length;return Vk((()=>{let{mean:e,variance:t}=WN(n,this.axis,!0);const a=qR(1,o);for(const n of this.axis)a[n]=r[n];const i=e=>null!=e&&e.shape.length!==o?XI(e,a):e;let s=this.scale?i(this.gamma.read()):null,c=this.center?i(this.beta.read()):null;const l=[],u=[];for(let n=0;n<o;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),u.push(1)):(l.push(1),u.push(r[n]));return e=iN(e,l),t=iN(t,l),null!=s&&(s=iN(s,u)),null!=c&&(c=iN(c,u)),JQ(n,e,t,c,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xD(this.betaInitializer),gammaInitializer:xD(this.gammaInitializer),betaRegularizer:MM(this.betaRegularizer),gammaRegularizer:MM(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}tH.className="LayerNormalization",dS(tH);class nH extends PD{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new jR("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new jR("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new jR("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new LD({ndim:4})]}computeOutputShape(e){let t,n;return e=ID(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return Vk((()=>function(e,t,n){return Vk((()=>{if(4!==e.rank)throw new jR("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new jR("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new jR("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],JN(e,r)}))}(SD(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function rH(e,t,n,r,o,a){return Vk((()=>{let i;CU(o),BU(a),kU(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=ZM(e,o);const s="same"===r?"same":"valid";return i="max"===a?RN(e,t,n,s):YI(e,t,n,s),"channelsFirst"===o&&(i=vT(i,[0,3,1,2])),i}))}function oH(e,t,n,r,o,a){return Vk((()=>{let i;CU(o),BU(a),kU(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==a&&(a="max"),e=JM(e,o);const s="same"===r?"same":"valid";return i="max"===a?UN(e,t,n,s):ZI(e,t,n,s),"channelsFirst"===o&&(i=vT(i,[0,4,1,2,3])),i}))}nH.className="ZeroPadding2D",dS(nH);class aH extends PD{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new jR("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(uU(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new jR("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}uU(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,kU(this.padding),this.inputSpec=[new LD({ndim:3})]}computeOutputShape(e){const t=XM((e=ID(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Vk((()=>{this.invokeCallHook(e,t),e=HU(SD(e),2);const n=this.poolingFunction(SD(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return XF(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class iH extends aH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),rH(e,t,n,r,o,"max")}}iH.className="MaxPooling1D",dS(iH);class sH extends aH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),rH(e,t,n,r,o,"avg")}}sH.className="AveragePooling1D",dS(sH);class cH extends PD{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new jR("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];uU(this.poolSize,"poolSize"),uU(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,CU(this.dataFormat),kU(this.padding),this.inputSpec=[new LD({ndim:4})]}computeOutputShape(e){e=ID(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=XM(t,this.poolSize[0],this.padding,this.strides[0]),n=XM(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return Vk((()=>(this.invokeCallHook(e,t),this.poolingFunction(SD(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class lH extends cH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),rH(e,t,n,r,o,"max")}}lH.className="MaxPooling2D",dS(lH);class uH extends cH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),rH(e,t,n,r,o,"avg")}}uH.className="AveragePooling2D",dS(uH);class AH extends PD{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new jR("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];uU(this.poolSize,"poolSize"),uU(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,CU(this.dataFormat),kU(this.padding),this.inputSpec=[new LD({ndim:5})]}computeOutputShape(e){e=ID(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=XM(t,this.poolSize[0],this.padding,this.strides[0]),n=XM(n,this.poolSize[1],this.padding,this.strides[1]),r=XM(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return Vk((()=>(this.invokeCallHook(e,t),this.poolingFunction(SD(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class hH extends AH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),oH(e,t,n,r,o,"max")}}hH.className="MaxPooling3D",dS(hH);class dH extends AH{constructor(e){super(e)}poolingFunction(e,t,n,r,o){return CU(o),kU(r),oH(e,t,n,r,o,"avg")}}dH.className="AveragePooling3D",dS(dH);class pH extends PD{constructor(e){super(e),this.inputSpec=[new LD({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new WR}}class fH extends pH{constructor(e){super(e||{})}call(e,t){return Vk((()=>{const t=SD(e);return PN(t,1)}))}}fH.className="GlobalAveragePooling1D",dS(fH);class gH extends pH{constructor(e){super(e||{})}call(e,t){return Vk((()=>{const t=SD(e);return ZE(t,1)}))}}gH.className="GlobalMaxPooling1D",dS(gH);class mH extends PD{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,CU(this.dataFormat),this.inputSpec=[new LD({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new WR}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class yH extends mH{call(e,t){return Vk((()=>{const t=SD(e);return"channelsLast"===this.dataFormat?PN(t,[1,2]):PN(t,[2,3])}))}}yH.className="GlobalAveragePooling2D",dS(yH);class vH extends mH{call(e,t){return Vk((()=>{const t=SD(e);return"channelsLast"===this.dataFormat?ZE(t,[1,2]):ZE(t,[2,3])}))}}vH.className="GlobalMaxPooling2D",dS(vH);class bH extends PD{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=fP(t.layer,n);delete t.layer;const o={layer:r};return Object.assign(o,t),new e(o)}}class wH extends bH{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=ID(e)).length<3)throw new jR("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=ID(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return Vk((()=>fQ(((e,n)=>[SD(this.layer.call(e,t)),[]]),e=SD(e),[],!1,null,null,!1,!0)[1]))}}wH.className="TimeDistributed",dS(wH);class xH extends bH{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=fP(n),t.goBackwards=!0!==t.goBackwards;const r={};var o;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=fP(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=this.mergeMode,cU(wU,"BidirectionalMergeMode",o),e.weights)throw new WR("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,o=this.forwardLayer.computeOutputShape(e);return Array.isArray(o)&&Array.isArray(o[0])||(o=[o]),this.returnState?(r=o.slice(1),t=o[0]):t=o[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):ZR(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const o=pQ(e,n,r,this.numConstants);if(e=o.inputs,n=o.initialState,r=o.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const a=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new jR("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);const r=n.map((e=>new LD({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new WR("Support for constants in Bidirectional layers is not implemented yet.");const s=a[0]instanceof OD;for(const c of a)if(c instanceof OD!==s)throw new jR("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(a),r=this.inputSpec.concat(i),o=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=o,s}return super.apply(e,t)}call(e,t){return Vk((()=>{const n=t.initialState;let r,o,a,i;if(null==n)r=this.forwardLayer.call(e,t),o=this.backwardLayer.call(e,t);else{const a=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),o=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(o.slice(1))),r=r[0],o=o[0]),this.returnSequences&&(o=BF(o,1)),"concat"===this.mergeMode?i=WU([r,o]):"sum"===this.mergeMode?i=eS(r,o):"ave"===this.mergeMode?i=rS(.5,eS(r,o)):"mul"===this.mergeMode?i=rS(r,o):null==this.mergeMode&&(i=[r,o]),this.returnState?null==this.mergeMode?i.concat(a):[i].concat(a):i}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){EU(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),EU(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=fP(t.layer);if(delete t.layer,null!=t.numConstants)throw new WR("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}xH.className="Bidirectional",dS(xH);class CH extends PD{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Vk((()=>("float32"!==(e=SD(e)).dtype&&(e=QU(e,"float32")),eS(rS(e,this.scale),this.offset))))}}CH.className="Rescaling",dS(CH);const{resizeBilinear:kH,cropAndResize:BH}=D_;class SH extends PD{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,o,a,i,s){return Vk((()=>{let c,l=!1;const u=[t/a,n/i,(r+t)/a,(o+n)/i],A=[];3===e.rank?(l=!0,c=YF([e])):c=e;for(let e=0;e<c.shape[0];e++)A.push(u);const h=Pk(A,[A.length,4]),d=bF(0,A.length,1,"int32"),p=BH(c,h,d,[r,o],"nearest");return QU(l?SD(dT(p)):p,s)}))}upsize(e,t,n,r){return Vk((()=>QU(kH(e,[t,n]),r)))}call(e,t){return Vk((()=>{const t=SD(e),n=t.dtype,r=t.shape,o=r[r.length-3],a=r[r.length-2];let i=0;o!==this.height&&(i=Math.floor((o-this.height)/2));let s=0;return a!==this.width&&(s=Math.floor((a-this.width)/2),0===s&&(s=1)),i>=0&&s>=0?this.centerCrop(t,i,s,this.height,this.width,o,a,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=ID(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}SH.className="CenterCrop",dS(SH);class IH extends PD{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=ID(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Vk((()=>{let n;if("int32"!==(e=SD(e)).dtype&&(e=QU(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new jR("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=SD(t.countWeights)}const r=ZE(e),o=JE(e),a=uN(this.numTokens,r).bufferSync().get(0),i=AN(o,0).bufferSync().get(0);if(!a||!i)throw new jR("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let o=SD(e);if("int32"!==o.dtype&&(o=QU(o,"int32")),"int"===t)return o;const a=o.shape;if(0===o.rank&&(o=oN(o,-1)),"oneHot"===t&&1!==o.shape[o.shape.length-1]&&(o=oN(o,-1)),o.rank>2)throw new jR("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(a)+" which would result in output rank ".concat(o.rank,"."));const i=["multiHot","oneHot"].includes(t),s=o;let c;if(c=FE(s,"undefined"!==typeof r&&"count"===t?r:[],n,i),"tfIdf"!==t)return c;if(r)return rS(c,r);throw new jR("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}IH.className="CategoryEncoding",dS(IH);const EH=new Set(["bilinear","nearest"]);class NH extends PD{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!EH.has(e.interpolation))throw new jR("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=ID(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Vk((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return D_.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return D_.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...EH]," are supported"))}))}}NH.className="Resizing",dS(NH);class FH{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}FH.className="RandomSeed";class TH extends PD{constructor(e){super(e),this.randomGenerator=new FH(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}TH.className="BaseRandomLayer";const _H=new Set(["bilinear","nearest"]);class LH extends TH{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new jR("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new jR("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new jR("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!_H.has(n))throw new jR("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=ID(e))[2];return[this.imgHeight,-1,t]}call(e,t){return Vk((()=>{const t=SD(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=yF([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return D_.resizeBilinear(e,o);case"nearest":return D_.resizeNearestNeighbor(e,o);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([..._H]," are supported"))}}))}}LH.className="RandomWidth",dS(LH);var OH,RH;Gv().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(OH||(OH={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(RH||(RH={}));const UH={};function DH(e){return UH[e]}function PH(e,t,n,r,o){const a=t.inputParams[e];if(a&&void 0!==a.inputIndexStart){const e=a.inputIndexStart,i=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?e+1:a.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===a.type)return MH(t.inputNames[s],n,r,o);if("tensors"===a.type){const a=t.inputs.slice(e,i),s=t.inputNames.slice(e,i).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=a[t])||void 0===n?void 0:n.op)}));return s.map((e=>MH(e,n,r,o)))}const c=MH(t.inputNames[s],n,r,o),l=c.dataSync();return"number"===a.type?l[0]:Uv(c.shape,l)}const i=t.attrParams[e];return i&&i.value}function MH(e,t,n,r){const[o,a]=VH(e,n);if(null!=r){const e=r.getHashTableHandleByName(o);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[zH(o,e)]));return void 0!==i?t[zH(o,i)][a]:void 0}function QH(e,t,n){return t[zH(e,n.currentContextId)]}function HH(e,t){const[n,r,o]=VH(e,t);return[zH(n,t&&t.currentContextId),r,o]}function zH(e,t){return t?"".concat(e,"-").concat(t):e}function VH(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let o;if(1===r.length)o=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;o=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,o),o}function jH(e,t,n){let r=PH("pad",e,t,n);if("explicit"===r){r=PH("explicitPaddings",e,t,n);const o=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)o[e][0]=r[2*e],o[e][1]=r[2*e+1];return o}return r}function WH(e){return e.kept?e:JB(e)}const KH=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],GH=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],qH=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],XH=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],YH=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],ZH=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JH=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],$H=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],ez=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],tz=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],nz=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],rz=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],oz=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],az=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],iz=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],sz=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],cz=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],lz=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],uz=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class Az{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[i,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w,x,C,k].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],o=[],a=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?o.push(e[t.name]):null!=t.input&&0!==t.input.length||a.push(e[t.name]),e)),{});let s=[];const c=[];let l={},u={};null!=t&&(l=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const A=Object.keys(i);A.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,o]=HH(e),a=i[r];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const o="".concat(r,":").concat(e);t.inputNames[n]=o}}t.inputs.push(a),a.children.push(t)}))})),0===Object.keys(u).length?A.forEach((e=>{const t=i[e];0===t.children.length&&c.push(t)})):Object.keys(u).forEach((e=>{const[t]=HH(e),n=i[t];null!=n&&(n.signatureKey=u[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((e=>{const[t]=HH(e),n=i[t];n&&(n.signatureKey=l[e],s.push(n))})):s=r;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const d={nodes:i,inputs:s,outputs:c,weights:o,placeholders:r,signature:t,functions:h};return a.length>0&&(d.initNodes=a),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=DH(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let o;switch(n.type){case"string":o=dz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=dz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":o=Cz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Cz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":o=fz(e.attr,n.tfName,n.defaultValue||0),void 0===o&&n.tfDeprecatedName&&(o=fz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":o=xz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=xz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":o=pz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=pz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":o=Bz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=Bz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":o=wz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=wz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":o=kz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=kz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":o=yz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=yz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":o=vz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=vz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":o=mz(e.attr,n.tfName,n.defaultValue),void 0===o&&n.tfDeprecatedName&&(o=mz(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:o,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const o=[],a=[];e.signature.inputArg.forEach((e=>{const[t]=HH(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:gz(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),r[t]=n}));Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[o,,a]=HH(e),i=r[o];if(null!=i.outputs){const e=i.outputs.indexOf(a);if(-1!==e){const r="".concat(o,":").concat(e);t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=HH(i[e.name]),o=r[t];null!=o&&(o.defaultOutput=n,a.push(o))}));const s=this.mapArgsToSignature(e);return{nodes:r,inputs:o,outputs:a,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function hz(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Gv().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function dz(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return null!=o?hz(o.s,r):n}function pz(e,t,n){const r=e[t];return r?r.b:n}function fz(e,t,n){const r=e[t]||{},o=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof o?o:parseInt(o,10)}function gz(e){switch("string"===typeof e&&(e=OH[e]),e){case OH.DT_FLOAT:case OH.DT_HALF:return"float32";case OH.DT_INT32:case OH.DT_INT64:case OH.DT_INT8:case OH.DT_UINT8:return"int32";case OH.DT_BOOL:return"bool";case OH.DT_DOUBLE:return"float32";case OH.DT_STRING:return"string";case OH.DT_COMPLEX64:case OH.DT_COMPLEX128:return"complex64";default:return null}}function mz(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function yz(e,t,n){const r=e[t];return r&&r.type?gz(r.type):n}function vz(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>gz(e))):n}function bz(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"===typeof e.size?e.size:parseInt(e.size,10))):[]}function wz(e,t,n){const r=e[t];return r&&r.shape?bz(r.shape):n}function xz(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"===typeof e?e:parseInt(e,10))):n}function Cz(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e[t];return o&&o.list&&o.list.s?o.list.s.map((e=>hz(e,r))):n}function kz(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>bz(e))):n}function Bz(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class Sz{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return MH(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return MH(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return fz(this.node.rawAttrs,e,t);if(null!=n.s)return dz(this.node.rawAttrs,e,t);if(null!=n.b)return pz(this.node.rawAttrs,e,t);if(null!=n.shape)return wz(this.node.rawAttrs,e,t);if(null!=n.type)return yz(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return xz(this.node.rawAttrs,e,t);if(null!=n.list.s)return Cz(this.node.rawAttrs,e,t);if(null!=n.list.shape)return kz(this.node.rawAttrs,e,t);if(null!=n.list.b)return Bz(this.node.rawAttrs,e,t);if(null!=n.list.type)return vz(this.node.rawAttrs,e,t)}return t}}function Iz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){dv(e.length===t.length,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];dv(o<0||a<0||o===a,(()=>n+" Shapes ".concat(e," and ").concat(t," must match")))}}}function Ez(e){return"number"!==typeof e&&!e.some((e=>e<0))}function Nz(e,t,n){let r=Fz(e,n);const o=!Ez(r);if(o&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(o&&t.forEach((e=>{r=Fz(e.shape,r)})),!Ez(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Fz(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let r=0;r<e.length;++r){const o=e[r],a=t[r];if(o>=0&&a>=0&&o!==a)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=o>=0?o:a}return n}class Tz{constructor(e,t,n,r,o,a,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=cS(0),Wk(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Iz(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Wk(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Pk([],[0].concat(this.elementShape));const n=this.readMany(e);return Iz(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),YF(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Pk([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return Iz(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),JI(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,dT(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const o=0===n?0:t.size/n,a=[];Vk((()=>{t=XI(t,[1,n,o]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],s=[1,e[n],o];a[n]=XI(tE(t,i,s),this.elementShape)}return a}));const i=[];for(let s=0;s<e.length;s++)i[s]=s;this.writeMany(i,a)}}class _z{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));Iz(t,e.shape,"TensorList shape mismatch: "),Wk(e)})),this.idTensor=cS(0),this.maxNumElements=r,Wk(this.idTensor)}copy(){return new _z([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));Iz(e,this.elementShape,"TensorList shape mismatch: ");const r=Nz(this.elementShape,this.tensors,e);return Vk((()=>{const e=this.tensors.map((e=>XI(e,r)));return YF(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Nz(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Iz(r.shape,e,"TensorList shape mismatch: "),XI(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(Iz(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Wk(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new _z([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));Iz(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=Nz(this.elementShape,this.tensors,t);return XI(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));Iz(this.elementShape,t.shape,"TensorList shape mismatch: "),Wk(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));Iz(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Nz(this.elementShape,this.tensors,n);return 0===e.length?Pk([],[0].concat(r)):Vk((()=>{const t=e.map((e=>XI(this.tensors[e],r)));return YF(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));Iz(this.elementShape,t,"TensorList shape mismatch: ");const n=Nz(this.elementShape,this.tensors,t);return 0===this.size()?Pk([],[0].concat(n)):Vk((()=>{const e=this.tensors.map((e=>XI(e,n)));return JI(e,0)}))}}const Lz=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=PH("thenBranch",e,t,n),o=PH("elseBranch",e,t,n),a=PH("cond",e,t,n),i=PH("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=PH("body",e,t,n),o=PH("cond",e,t,n),a=PH("args",e,t,n),i=await n.functionMap[o].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map((e=>e.id));let c=await i[0].data();i.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let l=a;for(;c[0];){const e=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);const t=l.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const a=await n.functionMap[o].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);c=await a[0].data(),a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return l}case"LoopCond":return[WH(PH("pred",e,t,n))];case"Switch":{const r=PH("pred",e,t,n);let o=PH("data",e,t,n);return o.kept||(o=WH(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==MH(e,t,n)));if(r){return[WH(MH(r,t,n))]}return}case"Enter":{const r=PH("frameName",e,t,n),o=PH("tensor",e,t,n);return n.enterFrame(r),[WH(o)]}case"Exit":{const r=PH("tensor",e,t,n);return n.exitFrame(),[WH(r)]}case"NextIteration":{const r=PH("tensor",e,t,n);return n.nextIteration(),[WH(r)]}case"TensorArrayV3":{const r=PH("size",e,t,n),o=PH("dtype",e,t,n),a=PH("elementShape",e,t,n),i=PH("dynamicSize",e,t,n),s=PH("clearAfterRead",e,t,n),c=PH("identicalElementShapes",e,t,n),l=PH("name",e,t,n),u=new Tz(l,o,r,a,c,i,s);return n.addTensorArray(u),[u.idTensor,cS(1)]}case"TensorArrayWriteV3":{const r=PH("tensorArrayId",e,t,n),o=PH("index",e,t,n),a=PH("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(o,a),[i.idTensor]}case"TensorArrayReadV3":{const r=PH("tensorArrayId",e,t,n),o=PH("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{const r=PH("tensorArrayId",e,t,n),o=PH("indices",e,t,n),a=PH("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,a)]}case"TensorArrayScatterV3":{const r=PH("tensorArrayId",e,t,n),o=PH("indices",e,t,n),a=PH("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(o,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=PH("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),a=PH("dtype",e,t,n);return[o.concat(a)]}case"TensorArraySplitV3":{const r=PH("tensorArrayId",e,t,n),o=PH("tensor",e,t,n),a=PH("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(a,o),[i.idTensor]}case"TensorArraySizeV3":{const r=PH("tensorArrayId",e,t,n);return[cS(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=PH("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{const r=PH("tensorListId",e,t,n),o=PH("index",e,t,n),a=PH("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(o,a),[i.idTensor]}case"TensorListGetItem":{const r=PH("tensorListId",e,t,n),o=PH("index",e,t,n),a=PH("elementShape",e,t,n),i=PH("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=PH("indices",e,t,n),o=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const o=Math.max(...t);if(null!=r&&-1!==r&&o>=r)throw new Error("Max index must be < array size (".concat(o,"  vs. ").concat(r,")"));const a=new _z([],n,e.dtype,r),i=dT(e,0);return t.forEach(((e,t)=>{a.setItem(e,i[t])})),a}(PH("tensor",e,t,n),r,PH("elementShape",e,t,n),PH("numElements",e,t,n));return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=PH("elementShape",e,t,n),o=PH("elementDType",e,t,n);let a;a="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=PH(a,e,t,n),s=function(e,t,n,r){return new _z([],e,t,r)}(r,o,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=PH("tensorListId",e,t,n),o=PH("indices",e,t,n),a=PH("elementShape",e,t,n),i=PH("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,i,a)]}case"TensorListStack":{const r=PH("tensorListId",e,t,n),o=PH("elementShape",e,t,n),a=PH("elementDType",e,t,n),i=PH("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,a,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));Iz(e.shape.slice(1),t,"TensorList shape mismatch: ");const o=dT(e);return new _z(o,t,r)}(PH("tensor",e,t,n),PH("elementShape",e,t,n),PH("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=PH("tensorListId",e,t,n),o=n.getTensorList(r.id),a=PH("dtype",e,t,n),i=PH("elementShape",e,t,n);return[o.concat(a,i)]}case"TensorListPushBack":{const r=PH("tensorListId",e,t,n),o=PH("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(o),[a.idTensor]}case"TensorListPopBack":{const r=PH("tensorListId",e,t,n),o=PH("elementShape",e,t,n),a=PH("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,a)]}case"TensorListSplit":{const r=PH("tensor",e,t,n),o=PH("elementShape",e,t,n),a=function(e,t,n){let r=0;const o=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));const a=Fz(e.shape.slice(1),n),i=0===r?0:e.size/r,s=Vk((()=>{const n=[];e=XI(e,[1,r,i]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:o[r-1],0],c=[1,t[r],i];n[r]=XI(tE(e,s,c),a)}return e.dispose(),n})),c=new _z([],n,e.dtype,t.length);for(let l=0;l<s.length;l++)c.setItem(l,s[l]);return c}(r,PH("lengths",e,t,n),o);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=PH("tensorListId",e,t,n);return[cS(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=PH("tensorListId",e,t,n),o=PH("size",e,t,n),a=n.getTensorList(r.id).resize(o);return n.addTensorList(a),[a.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Oz(e,t,n){const[r,o]=PH("fusedOps",e,t,n),a="biasadd"===r,i=!a,s="prelu"===o,c="fusedbatchnorm"===r,l=PH("numArgs",e,t,n);if(a){if(s&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=PH("strides",e,t,n),A=jH(e,t,n),h=PH("dataFormat",e,t,n).toUpperCase(),d=PH("dilations",e,t,n);let[p,f]=PH("args",e,t,n);i&&(f=p,p=void 0);return{stride:u,pad:A,dataFormat:h,dilations:d,biasArg:p,preluArg:f,activationFunc:o,leakyreluAlpha:PH("leakyreluAlpha",e,t,n)}}function Rz(e,t,n){return{boxes:PH("boxes",e,t,n),scores:PH("scores",e,t,n),maxOutputSize:PH("maxOutputSize",e,t,n),iouThreshold:PH("iouThreshold",e,t,n),scoreThreshold:PH("scoreThreshold",e,t,n),softNmsSigma:PH("softNmsSigma",e,t,n)}}class Uz{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=cS(0),this.tensorMap=new Map,Wk(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return cS(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Vk((()=>{const e=dT(t),r=n.length,o=e.length;dv(r===o,(()=>"The number of elements doesn't match, keys has "+"".concat(r," elements, the values has ").concat(o," ")+"elements."));for(let t=0;t<r;t++){const r=n[t],o=e[t];Wk(o),this.tensorMap.set(r,o)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Vk((()=>{const e=[];for(let r=0;r<n.length;r++){const o=n[r],a=this.findWithDefault(o,t);e.push(a)}return YF(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function Dz(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vk;const a=((e,t,n)=>{switch(e.category){case"arithmetic":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(PH("a",e,t,n),PH("b",e,t,n))];case"AddN":return[r.addN(PH("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(PH("a",e,t,n),PH("b",e,t,n))];case"Mul":return[r.mul(PH("a",e,t,n),PH("b",e,t,n))];case"RealDiv":case"Div":return[r.div(PH("a",e,t,n),PH("b",e,t,n))];case"DivNoNan":return[r.divNoNan(PH("a",e,t,n),PH("b",e,t,n))];case"FloorDiv":return[r.floorDiv(PH("a",e,t,n),PH("b",e,t,n))];case"Sub":return[r.sub(PH("a",e,t,n),PH("b",e,t,n))];case"Minimum":return[r.minimum(PH("a",e,t,n),PH("b",e,t,n))];case"Maximum":return[r.maximum(PH("a",e,t,n),PH("b",e,t,n))];case"Pow":return[r.pow(PH("a",e,t,n),PH("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(PH("a",e,t,n),PH("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"basic_math":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(PH("x",e,t,n))];case"Acos":return[r.acos(PH("x",e,t,n))];case"Acosh":return[r.acosh(PH("x",e,t,n))];case"Asin":return[r.asin(PH("x",e,t,n))];case"Asinh":return[r.asinh(PH("x",e,t,n))];case"Atan":return[r.atan(PH("x",e,t,n))];case"Atan2":return[r.atan2(PH("x",e,t,n),PH("y",e,t,n))];case"Atanh":return[r.atanh(PH("x",e,t,n))];case"Ceil":return[r.ceil(PH("x",e,t,n))];case"Complex":return[r.complex(PH("real",e,t,n),PH("imag",e,t,n))];case"Cos":return[r.cos(PH("x",e,t,n))];case"Cosh":return[r.cosh(PH("x",e,t,n))];case"Elu":return[r.elu(PH("x",e,t,n))];case"Erf":return[r.erf(PH("x",e,t,n))];case"Exp":return[r.exp(PH("x",e,t,n))];case"Expm1":return[r.expm1(PH("x",e,t,n))];case"Floor":return[r.floor(PH("x",e,t,n))];case"Log":return[r.log(PH("x",e,t,n))];case"Log1p":return[r.log1p(PH("x",e,t,n))];case"Imag":return[r.imag(PH("x",e,t,n))];case"Neg":return[r.neg(PH("x",e,t,n))];case"Reciprocal":return[r.reciprocal(PH("x",e,t,n))];case"Real":return[r.real(PH("x",e,t,n))];case"Relu":return[r.relu(PH("x",e,t,n))];case"Round":return[r.round(PH("x",e,t,n))];case"Selu":return[r.selu(PH("x",e,t,n))];case"Sigmoid":return[r.sigmoid(PH("x",e,t,n))];case"Sin":return[r.sin(PH("x",e,t,n))];case"Sign":return[r.sign(PH("x",e,t,n))];case"Sinh":return[r.sinh(PH("x",e,t,n))];case"Softplus":return[r.softplus(PH("x",e,t,n))];case"Sqrt":return[r.sqrt(PH("x",e,t,n))];case"Square":return[r.square(PH("x",e,t,n))];case"Tanh":return[r.tanh(PH("x",e,t,n))];case"Tan":return[r.tan(PH("x",e,t,n))];case"ClipByValue":return[r.clipByValue(PH("x",e,t,n),PH("clipValueMin",e,t,n),PH("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(PH("x",e,t,n))];case"Rsqrt":return[r.rsqrt(MH(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(PH("x",e,t,n),PH("alpha",e,t,n))];case"Prelu":return[r.prelu(PH("x",e,t,n),PH("alpha",e,t,n))];case"IsNan":return[r.isNaN(MH(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(MH(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(MH(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"control":return Lz(e,t,n);case"convolution":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Conv1D":{const o=PH("stride",e,t,n),a=PH("pad",e,t,n),i=PH("dataFormat",e,t,n).toUpperCase(),s=PH("dilation",e,t,n);return[r.conv1d(PH("x",e,t,n),PH("filter",e,t,n),o,a,i,s)]}case"Conv2D":{const o=PH("strides",e,t,n),a=jH(e,t,n),i=PH("dataFormat",e,t,n).toUpperCase(),s=PH("dilations",e,t,n);return[r.conv2d(PH("x",e,t,n),PH("filter",e,t,n),[o[1],o[2]],a,i,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:A}=Oz(e,t,n);return[r.fused.conv2d({x:PH("x",e,t,n),filter:PH("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:A})]}case"FusedDepthwiseConv2dNative":{const{stride:o,pad:a,dataFormat:i,dilations:s,biasArg:c,preluArg:l,activationFunc:u,leakyreluAlpha:A}=Oz(e,t,n);return[r.fused.depthwiseConv2d({x:PH("x",e,t,n),filter:PH("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:i,dilations:[s[1],s[2]],bias:c,activation:u,preluActivationWeights:l,leakyreluAlpha:A})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=PH("outputShape",e,t,n),a=PH("strides",e,t,n),i=jH(e,t,n);return[r.conv2dTranspose(PH("x",e,t,n),PH("filter",e,t,n),o,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=PH("strides",e,t,n),a=jH(e,t,n),i=PH("dilations",e,t,n),s=PH("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(PH("input",e,t,n),PH("filter",e,t,n),[o[1],o[2]],a,s,[i[1],i[2]])]}case"Conv3D":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("dataFormat",e,t,n).toUpperCase(),s=PH("dilations",e,t,n);return[r.conv3d(PH("x",e,t,n),PH("filter",e,t,n),[o[1],o[2],o[3]],a,i,[s[1],s[2],s[3]])]}case"AvgPool":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("kernelSize",e,t,n);return[r.avgPool(PH("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPool":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("kernelSize",e,t,n);return[r.maxPool(PH("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a)]}case"MaxPoolWithArgmax":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("kernelSize",e,t,n),s=PH("includeBatchInIndex",e,t,n),{result:c,indexes:l}=r.maxPoolWithArgmax(PH("x",e,t,n),[i[1],i[2]],[o[1],o[2]],a,s);return[c,l]}case"AvgPool3D":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("kernelSize",e,t,n);return[r.avgPool3d(PH("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"MaxPool3D":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("kernelSize",e,t,n);return[r.maxPool3d(PH("x",e,t,n),[i[1],i[2],i[3]],[o[1],o[2],o[3]],a)]}case"Dilation2D":{const o=PH("strides",e,t,n),a=PH("pad",e,t,n),i=PH("dilations",e,t,n),s=o[1],c=o[2],l=i[1],u=i[2];return[r.dilation2d(PH("x",e,t,n),PH("filter",e,t,n),[s,c],a,[l,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"creation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Fill":{const o=PH("shape",e,t,n),a=PH("dtype",e,t,n),i=PH("value",e,t,n);return[r.fill(o,i,a)]}case"LinSpace":{const o=PH("start",e,t,n),a=PH("stop",e,t,n),i=PH("num",e,t,n);return[r.linspace(o,a,i)]}case"Multinomial":{const o=PH("logits",e,t,n),a=PH("numSamples",e,t,n),i=PH("seed",e,t,n);return[r.multinomial(o,a,i)]}case"OneHot":{const o=PH("indices",e,t,n),a=PH("depth",e,t,n),i=PH("onValue",e,t,n),s=PH("offValue",e,t,n),c=PH("dtype",e,t,n);return[r.oneHot(o,a,i,s,c)]}case"Ones":return[r.ones(PH("shape",e,t,n),PH("dtype",e,t,n))];case"OnesLike":return[r.onesLike(PH("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(PH("shape",e,t,n),PH("dtype",e,t,n),PH("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(PH("shape",e,t,n),PH("minval",e,t,n),PH("maxval",e,t,n),PH("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(PH("shape",e,t,n),PH("minval",e,t,n),PH("maxval",e,t,n),PH("seed",e,t,n))];case"Range":{const o=PH("start",e,t,n),a=PH("stop",e,t,n),i=PH("step",e,t,n);return[r.range(o,a,i,PH("dtype",e,t,n))]}case"TruncatedNormal":{const o=PH("shape",e,t,n),a=PH("mean",e,t,n),i=PH("stdDev",e,t,n),s=PH("seed",e,t,n);return[r.truncatedNormal(o,a,i,PH("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(PH("shape",e,t,n),PH("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(PH("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"dynamic":return async function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:B;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:l}=Rz(e,t,n),u=await o.image.nonMaxSuppressionWithScoreAsync(r,a,i,s,c,l);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=Rz(e,t,n),l=PH("padToMaxOutputSize",e,t,n),u=await o.image.nonMaxSuppressionPaddedAsync(r,a,i,s,c,l);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:a,maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=Rz(e,t,n);return[await o.image.nonMaxSuppressionAsync(r,a,i,s,c)]}case"Where":{const r=o.cast(PH("condition",e,t,n),"bool"),a=[await o.whereAsync(r)];return r.dispose(),a}case"ListDiff":return o.setdiff1dAsync(PH("x",e,t,n),PH("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"LowerBound":{const o=PH("sortedSequence",e,t,n),a=PH("values",e,t,n);return[r.lowerBound(o,a)]}case"TopKV2":{const o=PH("x",e,t,n),a=PH("k",e,t,n),i=PH("sorted",e,t,n),s=r.topk(o,a,i);return[s.values,s.indices]}case"UpperBound":{const o=PH("sortedSequence",e,t,n),a=PH("values",e,t,n);return[r.upperBound(o,a)]}case"Unique":{const o=PH("x",e,t,n),a=r.unique(o);return[a.values,a.indices]}case"UniqueV2":{const o=PH("x",e,t,n),a=PH("axis",e,t,n),i=r.unique(o,a);return[i.values,i.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"image":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"ResizeBilinear":{const o=PH("images",e,t,n),a=PH("size",e,t,n),i=PH("alignCorners",e,t,n),s=PH("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[a[0],a[1]],i,s)]}case"ResizeNearestNeighbor":{const o=PH("images",e,t,n),a=PH("size",e,t,n),i=PH("alignCorners",e,t,n),s=PH("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[a[0],a[1]],i,s)]}case"CropAndResize":{const o=PH("image",e,t,n),a=PH("boxes",e,t,n),i=PH("boxInd",e,t,n),s=PH("cropSize",e,t,n),c=PH("method",e,t,n),l=PH("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,a,i,s,c,l)]}case"ImageProjectiveTransformV3":{const o=PH("images",e,t,n),a=PH("transforms",e,t,n),i=PH("outputShape",e,t,n),s=PH("fillValue",e,t,n),c=PH("interpolation",e,t,n),l=PH("fillMode",e,t,n);return[r.image.transform(o,a,c.toLowerCase(),l.toLowerCase(),s,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"graph":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const o=PH("default",e,t,n);return[MH(e.name,t,n)||o];case"Placeholder":return[MH(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[WH(PH("x",e,t,n))];case"IdentityN":return PH("x",e,t,n).map((e=>WH(e)));case"Shape":return[r.tensor1d(PH("x",e,t,n).shape,"int32")];case"ShapeN":return PH("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(PH("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(PH("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=PH("x",e,t,n),i=PH("data",e,t,n),s=PH("message",e,t,n),c=PH("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,c));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"logical":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Equal":return[r.equal(PH("a",e,t,n),PH("b",e,t,n))];case"NotEqual":return[r.notEqual(PH("a",e,t,n),PH("b",e,t,n))];case"Greater":return[r.greater(PH("a",e,t,n),PH("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(PH("a",e,t,n),PH("b",e,t,n))];case"Less":return[r.less(PH("a",e,t,n),PH("b",e,t,n))];case"LessEqual":return[r.lessEqual(PH("a",e,t,n),PH("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(PH("a",e,t,n),PH("b",e,t,n))];case"LogicalNot":return[r.logicalNot(PH("a",e,t,n))];case"LogicalOr":return[r.logicalOr(PH("a",e,t,n),PH("b",e,t,n))];case"Select":case"SelectV2":return[r.where(PH("condition",e,t,n),PH("a",e,t,n),PH("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(PH("a",e,t,n),PH("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"matrices":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(PH("a",e,t,n),PH("b",e,t,n),PH("transposeA",e,t,n),PH("transposeB",e,t,n))];case"Einsum":return[r.einsum(PH("equation",e,t,n),...PH("tensors",e,t,n))];case"Transpose":return[r.transpose(PH("x",e,t,n),PH("perm",e,t,n))];case"_FusedMatMul":const[o,a]=PH("fusedOps",e,t,n),i="biasadd"===o,s="prelu"===a,c=PH("numArgs",e,t,n),l=PH("leakyreluAlpha",e,t,n);if(i){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,A]=PH("args",e,t,n);return[r.fused.matMul({a:PH("a",e,t,n),b:PH("b",e,t,n),transposeA:PH("transposeA",e,t,n),transposeB:PH("transposeB",e,t,n),bias:u,activation:a,preluActivationWeights:A,leakyreluAlpha:l})];case"MatrixBandPart":return[r.linalg.bandPart(PH("a",e,t,n),PH("numLower",e,t,n),PH("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"normalization":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(PH("x",e,t,n),PH("axis",e,t,n),PH("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(PH("x",e,t,n),PH("mean",e,t,n),PH("variance",e,t,n),PH("offset",e,t,n),PH("scale",e,t,n),PH("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(PH("x",e,t,n),PH("radius",e,t,n),PH("bias",e,t,n),PH("alpha",e,t,n),PH("beta",e,t,n))];case"Softmax":return[r.softmax(PH("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(PH("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"ragged":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"RaggedGather":{const{outputNestedSplits:o,outputDenseValues:a}=r.raggedGather(PH("paramsNestedSplits",e,t,n),PH("paramsDenseValues",e,t,n),PH("indices",e,t,n),PH("outputRaggedRank",e,t,n));return o.concat(a)}case"RaggedRange":{const{rtNestedSplits:o,rtDenseValues:a}=r.raggedRange(PH("starts",e,t,n),PH("limits",e,t,n),PH("splits",e,t,n));return[o,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(PH("shape",e,t,n),PH("values",e,t,n),PH("defaultValue",e,t,n),PH("rowPartitionTensors",e,t,n),PH("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"reduction":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Max":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.max(PH("x",e,t,n),o,a)]}case"Mean":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.mean(PH("x",e,t,n),o,a)]}case"Min":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.min(PH("x",e,t,n),o,a)]}case"Sum":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.sum(PH("x",e,t,n),o,a)]}case"All":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.all(PH("x",e,t,n),o,a)]}case"Any":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.any(PH("x",e,t,n),o,a)]}case"ArgMax":{const o=PH("axis",e,t,n);return[r.argMax(PH("x",e,t,n),o)]}case"ArgMin":{const o=PH("axis",e,t,n);return[r.argMin(PH("x",e,t,n),o)]}case"Prod":{const o=PH("axis",e,t,n),a=PH("keepDims",e,t,n);return[r.prod(PH("x",e,t,n),o,a)]}case"Cumprod":{const o=PH("axis",e,t,n),a=PH("exclusive",e,t,n),i=PH("reverse",e,t,n);return[r.cumprod(PH("x",e,t,n),o,a,i)]}case"Cumsum":{const o=PH("axis",e,t,n),a=PH("exclusive",e,t,n),i=PH("reverse",e,t,n);return[r.cumsum(PH("x",e,t,n),o,a,i)]}case"Bincount":const o=PH("x",e,t,n),a=PH("weights",e,t,n),i=PH("size",e,t,n);return[r.bincount(o,a,i)];case"DenseBincount":{const o=PH("x",e,t,n),a=PH("weights",e,t,n),i=PH("size",e,t,n),s=PH("binaryOutput",e,t,n);return[r.denseBincount(o,a,i,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"slice_join":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"ConcatV2":case"Concat":{const o=PH("n",e,t,n),a=PH("axis",e,t,n);let i=PH("tensors",e,t,n);return i=i.slice(0,o),[r.concat(i,a)]}case"Gather":{const o=PH("x",e,t,n),a=PH("indices",e,t,n);return[r.gather(o,r.cast(a,"int32"),0)]}case"GatherV2":{const o=PH("axis",e,t,n),a=PH("batchDims",e,t,n),i=PH("x",e,t,n),s=PH("indices",e,t,n);return[r.gather(i,r.cast(s,"int32"),o,a)]}case"Reverse":{const o=PH("dims",e,t,n),a=[];for(let e=0;e<o.length;e++)o[e]&&a.push(e);const i=PH("x",e,t,n);return[r.reverse(i,a)]}case"ReverseV2":{const o=PH("axis",e,t,n),a=PH("x",e,t,n);return[r.reverse(a,o)]}case"Slice":{const o=PH("begin",e,t,n),a=PH("size",e,t,n);return[r.slice(PH("x",e,t,n),o,a)]}case"StridedSlice":{const o=PH("begin",e,t,n),a=PH("end",e,t,n),i=PH("strides",e,t,n),s=PH("beginMask",e,t,n),c=PH("endMask",e,t,n),l=PH("ellipsisMask",e,t,n),u=PH("newAxisMask",e,t,n),A=PH("shrinkAxisMask",e,t,n),h=PH("x",e,t,n);return[r.stridedSlice(h,o,a,i,s,c,l,u,A)]}case"Pack":return Vk((()=>{const o=PH("axis",e,t,n),a=PH("tensors",e,t,n),i=a[0].shape,s=r.squeeze(a[0]).shape,c=a.map((e=>{const t=mv(e.shape,i);if(!t&&!mv(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(c,o)]}));case"Unpack":{const o=PH("axis",e,t,n),a=PH("tensor",e,t,n);return r.unstack(a,o)}case"Tile":{const o=PH("reps",e,t,n);return[r.tile(PH("x",e,t,n),o)]}case"Split":case"SplitV":{const o=PH("axis",e,t,n),a=PH("numOrSizeSplits",e,t,n),i=PH("x",e,t,n);return r.split(i,a,o)}case"ScatterNd":{const o=PH("indices",e,t,n),a=PH("values",e,t,n),i=PH("shape",e,t,n);return[r.scatterND(o,a,i)]}case"GatherNd":{const o=PH("x",e,t,n),a=PH("indices",e,t,n);return[r.gatherND(o,a)]}case"SparseToDense":{const o=PH("sparseIndices",e,t,n),a=PH("outputShape",e,t,n),i=PH("sparseValues",e,t,n),s=PH("defaultValue",e,t,n);return[r.sparseToDense(o,i,a,i.dtype===s.dtype?s:r.cast(s,i.dtype))]}case"TensorScatterUpdate":{const o=PH("indices",e,t,n),a=PH("values",e,t,n),i=PH("tensor",e,t,n);return[r.tensorScatterUpdate(i,o,a)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"sparse":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:o,outputValues:a,emptyRowIndicator:i,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(PH("indices",e,t,n),PH("values",e,t,n),PH("denseShape",e,t,n),PH("defaultValue",e,t,n));return[o,a,i,s]}case"SparseReshape":{const{outputIndices:o,outputShape:a}=r.sparse.sparseReshape(PH("inputIndices",e,t,n),PH("inputShape",e,t,n),PH("newShape",e,t,n));return[o,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(PH("data",e,t,n),PH("indices",e,t,n),PH("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(PH("data",e,t,n),PH("indices",e,t,n),PH("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"spectral":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"FFT":return[r.fft(PH("x",e,t,n))];case"IFFT":return[r.ifft(PH("x",e,t,n))];case"RFFT":return[r.rfft(PH("x",e,t,n))];case"IRFFT":return[r.irfft(PH("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"string":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(PH("input",e,t,n),PH("pattern",e,t,n),PH("rewrite",e,t,n),PH("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:o,nGramsSplits:a}=r.string.stringNGrams(PH("data",e,t,n),PH("dataSplits",e,t,n),PH("separator",e,t,n),PH("nGramWidths",e,t,n),PH("leftPad",e,t,n),PH("rightPad",e,t,n),PH("padWidth",e,t,n),PH("preserveShortSequences",e,t,n));return[o,a]}case"StringSplit":{const{indices:o,values:a,shape:i}=r.string.stringSplit(PH("input",e,t,n),PH("delimiter",e,t,n),PH("skipEmpty",e,t,n));return[o,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(PH("input",e,t,n),PH("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"transformation":return o((()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;switch(e.op){case"Cast":return[r.cast(PH("x",e,t,n),PH("dtype",e,t,n))];case"ExpandDims":{const o=PH("axis",e,t,n);return[r.expandDims(PH("x",e,t,n),o)]}case"Squeeze":{const o=PH("axis",e,t,n);return[r.squeeze(PH("x",e,t,n),o)]}case"Reshape":return[r.reshape(PH("x",e,t,n),PH("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(PH("x",e,t,n),PH("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(PH("x",e,t,n),PH("padding",e,t,n),PH("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(PH("x",e,t,n),PH("padding",e,t,n),PH("constantValue",e,t,n))];case"SpaceToBatchND":{const o=PH("blockShape",e,t,n),a=PH("paddings",e,t,n);return[r.spaceToBatchND(PH("x",e,t,n),o,a)]}case"BatchToSpaceND":{const o=PH("blockShape",e,t,n),a=PH("crops",e,t,n);return[r.batchToSpaceND(PH("x",e,t,n),o,a)]}case"DepthToSpace":{const o=PH("blockSize",e,t,n),a=PH("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(PH("x",e,t,n),o,a)]}case"BroadcastTo":return[r.broadcastTo(PH("x",e,t,n),PH("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(PH("s0",e,t,n),PH("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const o=r.getHashTableHandleByName(e.name);if(null!=o)return[o];{const o=PH("keyDType",e,t,n),a=PH("valueDType",e,t,n),i=new Uz(o,a);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const o=PH("tableHandle",e,t,n,r),a=PH("keys",e,t,n),i=PH("values",e,t,n),s=r.getHashTableById(o.id);return[await s.import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const o=PH("tableHandle",e,t,n,r),a=PH("keys",e,t,n),i=PH("defaultValue",e,t,n),s=r.getHashTableById(o.id);return[await s.find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const o=PH("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,r);case"custom":const a=DH(e.op);if(a&&a.customExecutor)return a.customExecutor(new Sz(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return Vv(a)?a.then((e=>[].concat(e))):[].concat(a)}class Pz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId))).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Mz(e,t,n,r){const o=new Set,a=[];let i=null,s=null;const c=new Set,l=new Set(Object.keys(e).map((e=>VH(e)[0])));r=r||[];const u=new Set(r.map((e=>VH(e.name)[0]))),A=[...t];for(;A.length>0;){const e=A.pop();(Wz(e)||Kz(e)||Gz(e))&&null==i&&(i=e,s=i.children.map((e=>e.name)).filter((e=>o.has(e)))),o.add(e.name),null==n[e.name]&&(l.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{c.has(e.name)||(c.add(e.name),A.push(e))})):a.push(e.name)))}return{inputs:e,outputs:t,usedNodes:o,missingInputs:a,dynamicNode:i,syncInputs:s}}function Qz(e,t){const{usedNodes:n,inputs:r}=t,o=Object.keys(r).map((e=>VH(e)[0])).map((t=>e.nodes[t])),a=e.initNodes||[],i=e=>n.has("string"===typeof e?e:e.name);function s(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const c=s([...o,...e.weights,...a]).filter(i),l=s([...c,...Object.values(e.nodes)]).filter(i),u=new Map(l.map((e=>[e.name,e]))),A={};for(const f of l){A[f.name]=A[f.name]||0;for(const e of f.children)i(e)||(A[e.name]=Number.POSITIVE_INFINITY),A[e.name]=(A[e.name]||0)+1}const h=Object.entries(A).filter((e=>{let[,t]=e;return 0===t})).map((e=>{let[t]=e;return t})),d=[...h];for(;h.length>0;){const e=h.pop(),t=u.get(e);for(const n of t.children.filter(i))0===--A[n.name]&&(d.push(n.name),h.push(n.name))}const p=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),o=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const a of t.children)n.has(a.name)&&!o.has(a.name)&&(o.add(a.name),r.push(a.name))}const a=e.filter((e=>o.has(e.name)));return a}(d.map((e=>u.get(e))),c);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),o=e=>r.has("string"===typeof e?e:e.name),a=new Set(e.map((e=>e.name))),i=e=>a.has("string"===typeof e?e:e.name);for(const s of e){for(const e of s.children.filter(i)){if(!n.has(e.name))throw new Hz("Child ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(s.name)>n.get(e.name))throw new Hz("Node ".concat(s.name," is scheduled to run after its child ").concat(e.name,"."))}if(!o(s))for(const e of s.inputs){if(!n.has(e.name))throw new Hz("Input ".concat(e.name," of node ").concat(s.name," is unreachable."));if(n.get(e.name)>n.get(s.name))throw new Hz("Node ".concat(s.name," is scheduled to run before its input ").concat(e.name,"."))}}}(p,c),p}class Hz extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}}const zz=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Vz=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),jz=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Wz(e){return zz.has(e.op)}function Kz(e){return Vz.has(e.op)}function Gz(e){return jz.has(e.op)}class qz{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new qz(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=Mz(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:a}=n;if(null!=o)throw new Error("This execution contains the node '".concat(o.name,"', which has ")+"the dynamic op '".concat(o.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(a,"]"));if(r.length>0){const n=t.map((e=>e.name)),o=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(o,"]. Missing the following inputs: [").concat(r,"]"))}const i=Qz(this.graph,n),s=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>Wz(e)?n:t)),o=e=>{const n=r[t.get(e.name)];return null==n?-1:n},a=e.map(((e,t)=>e.children.map(o).reduce(((e,t)=>Math.max(e,t)),r[t]))),i=new Map;for(let s=0;s<e.length;++s){const t=a[s];if(t===n)continue;const r=e[s],o=e[t];i.has(o.name)||i.set(o.name,[]),i.get(o.name).push(r)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return Wk(t),t}cloneTensorList(e){if(!e)return null;return e.map((e=>this.cloneAndKeepTensor(e)))}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]})))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[VH(e)[0]])),o=t.map((e=>VH(e)[0])),a=new Set(o);let i=o.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const s=this.getCompilationKey(r,i);let c=this.compiledMap.get(s);null==c&&(c=this.compile(e,i),this.compiledMap.set(s,c));try{this.keepIntermediateTensors=Gv().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(A){this.keepIntermediateTensors=!1,console.warn(A.message)}const l={},u={};return Vk((()=>{const n=new Pz(this.weightMap,l,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[o,a]=VH(t,n),i=[];i[a]=e[t],r[o]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[o]=this.cloneTensorList(i))}));const o=this.getFrozenTensorIds(r),{orderedNodes:i,nodeLiveUntilMap:s}=c;for(const e of i){if(r[e.name])continue;const t=Dz(e,r,n,this._resourceManager);if(Vv(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,o,a,s.get(e.name))}return null==this.parent&&n.dispose(o),t.map((e=>MH(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,o,a,i){if(!Wz(t)&&!a.has(e)){for(const r of n[e])null!=r&&(i[r.id]=(i[r.id]||0)+t.children.length);for(const e of t.inputs){if(Wz(e))continue;const t=QH(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||o.has(e.id))continue;const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,o,a){function i(e){return Wz(e)||o.has(e.name)}if(!Wz(e)&&null!=a)for(const s of a){if(i(s))continue;const e=QH(s.name,t,n);for(const t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Gv().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(A){this.keepIntermediateTensors=!1,console.warn(A.message)}const a=new Pz(this.weightMap,r,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,a,t,n),s=t.map((e=>MH(e,i,a))),c=s.map((e=>e.id)),l=Object.keys(e).map((t=>e[t].id)),u=new Set([...c,...l,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&a.dispose(u),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const o=Object.keys(e),a=o.map((e=>this.graph.nodes[VH(e)[0]])),i=n.map((e=>VH(e)[0])),s=new Set(i);let c=i.map((e=>this.graph.nodes[e]));0===c.length&&(c=this._outputs);const{usedNodes:l,missingInputs:u,dynamicNode:A,syncInputs:h}=Mz(e,c,this.weightMap,this._initNodes),d=[...a,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),p=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=VH(t),o=[];o[r]=e[t],p[n]=o}));const f={},g=this.getFrozenTensorIds(p),m={};for(;d.length>0;){const e=this.processStack(a,d,t,p,m,g,s,f,l);await Promise.all(e)}null!=A||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=c.filter((e=>!Wz(e)&&!MH(e.name,p,t))).map((e=>e.name));if(y.length>0){let e="";throw null!=A&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(y,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(u,"]. ").concat(e))}return p}processStack(e,t,n,r,o,a,i,s,c){const l=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&PH("isConstant",e.node,r,n)&&([u]=HH(e.node.name,n)),null==r[e.node.name]){const A=Dz(e.node,r,n,this._resourceManager);u||([u]=HH(e.node.name,n));const h=n.currentContext;Vv(A)?l.push(A.then((l=>(r[u]=l,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(l)),n.currentContext=h,this.checkTensorForDisposal(u,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,c),l)))):(r[u]=A,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(A)),this.checkTensorForDisposal(u,e.node,r,n,a,i,s),this.processChildNodes(e.node,t,n,r,o,c))}else this.processChildNodes(e.node,t,n,r,o,c)}return l}processChildNodes(e,t,n,r,o,a){e.children.forEach((e=>{const[i]=HH(e.name,n);!o[i]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!MH(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!MH(e,r,n)))&&(o[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=VH(t),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){const e=o.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t));dv(t,(()=>"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]")))}o.attrParams.dtype&&o.attrParams.dtype.value&&dv(n.dtype===o.attrParams.dtype.value,(()=>"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(n.dtype)))}))}mapInputs(e){var t,n;const r={};for(const o in e){const a=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[o];null!=a?r[a.name]=e[o]:r[o]=e[o]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=VH(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=VH(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}class Xz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const Yz="?tfjs-format=file",Zz="model.json";class Jz{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new Xz}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Vv(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await tB(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new qz(Az.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=Az.Instance.transformGraph(e.modelInitializer);this.initializer=new qz(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof nk?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof nk)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce(((t,n)=>{var o,a,i;const s=null===(i=null===(a=null===(o=this.signature)||void 0===o?void 0:o.inputs)||void 0===a?void 0:a[n])||void 0===i?void 0:i.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const o=t[n[r]];this.resourceIdToCapturedInput[o.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&jk(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function $z(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(Zz).concat(Yz)}(t));const o=new Jz(t,n,r);return await o.load(),o}function eV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse){if(oV(e)){const o=Array.isArray(e)?[]:{};r.add(e);for(const a in e){const i=eV(e[a],t,n,r);o[a]=i}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,o.value),o.value}function tV(e){return nV(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:rV)}function nV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const o=t(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(oV(r)){const o=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=e.map((e=>e[a])),i=nV(r,t,n);o[a]=i}return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return o.value}function rV(e){return null===e?null:oV(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function oV(e){let t=!1;if(Gv().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(4977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof nk)&&!(e instanceof Promise)&&!t)}function aV(e){return function(e,t){return eV(e,t)}(e,iV)}function iV(e){return e instanceof nk?{value:e.clone(),recurse:!1}:oV(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class sV{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class cV extends sV{constructor(){super(cV.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function lV(e){return new dV(e)}function uV(e,t){return new kV(e,t)}cV.INITIAL_CAPACITY=32;class AV{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new bV(this,e)}filter(e){return new yV(this,e)}map(e){return new vV(this,e)}mapAsync(e){return new wV(this,e)}serialMapAsync(e){return new wV(this,e).serial()}flatmap(e){return new CV(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new mV(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rV;return this.rowMajorBatch(e,t).map((e=>tV(e,n)))}concatenate(e,t){return new kV(new hV([this,e]),t)}take(e){return e<0||null==e?this:new gV(this,e)}skip(e){return e<0||null==e?this:new fV(this,e)}prefetch(e){return new SV(this,e)}shuffle(e,t){return new IV(this,e,t)}serial(){return new pV(this)}}class hV extends AV{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:aV(e),done:!1}}}class dV extends AV{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}}class pV extends AV{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class fV extends AV{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;jk(e.value)}return this.upstream.next()}}class gV extends AV{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class mV extends AV{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class yV extends AV{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;jk(e.value)}}}class vV extends AV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=mk(e.value),n=this.transform(e.value),r=mk(n);for(const o of t)gk(o,r)||o.dispose();return{value:n,done:!1}}}class bV extends AV{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class wV extends AV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=mk(e.value),n=await this.transform(e.value),r=mk(n);for(const o of t)gk(o,r)||o.dispose();return{value:n,done:!1}}}class xV extends AV{constructor(){super(),this.outputQueue=new cV,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class CV extends xV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=mk(e.value),n=this.transform(e.value),r=mk(n);this.outputQueue.pushAll(n);for(const o of t)gk(o,r)||o.dispose();return!0}}class kV extends AV{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var BV;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(BV||(BV={}));class SV extends AV{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new sV(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class IV extends SV{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=AF.alea(n||UC().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class EV{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return dv(e>0,(()=>"batchSize needs to be positive, but it is\n      ".concat(e))),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),NV((async()=>(await n.iterator()).columnMajorBatch(e,t,FV)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,NV((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,NV((async()=>(await t.iterator()).filter((t=>Vk((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return NV((async()=>(await t.iterator()).map((t=>Vk((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return NV((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return NV((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,NV((async()=>uV(lV((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,NV((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,o=AF.alea(t||UC().toString());return NV((async()=>{let t=o.int32();return n&&(t+=o.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,NV((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function NV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends EV{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function FV(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof nk||MC(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof nk?YF(e):Pk(e)}(e),recurse:!1}}return{value:null,recurse:!0}}EV.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function TV(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&dv("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors in the CPU backend.")))}))}const _V=gT;class LV extends iv{nextDataId(){return LV.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new av(this,Hk())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Gv().get("IS_NODE")&&lC("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Nv(n[0])){const o=n.map((e=>DC(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,o){this.data.set(e,{values:t,dtype:r,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return fL(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>PC(e)));return YB(e.shape,e.dtype,n)}catch(Vge){throw new Error("Failed to decode encoded string bytes into utf-8")}return YB(e.shape,e.dtype,t)}makeOutput(e,t,n){return Hk().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=UC();e();return{kernelMs:UC()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){TV([e],"where");const t=this.readSync(e.dataId);return _V(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}LV.nextDataId=0;function OV(e){return(t,n,r)=>{const o=Sv(n,t.length);for(let a=0;a<t.length;++a)o[a]=e(t[a],r);return o}}function RV(e,t,n){return UV(e,OV(t),n)}function UV(e,t,n){return r=>{let{inputs:o,attrs:a,backend:i}=r;const{x:s}=o;TV(s,e);const c=i,l=c.data.get(s.dataId).values;let u;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=XL(l)}else u=l;const A=n||s.dtype,h=t(u,A,a);return c.makeTensorInfo(s.shape,A,h)}}Kk("cpu",(()=>new LV),1);const DV=RV(Yb,(e=>e>=0?e:Math.exp(e)-1)),PV={kernelName:Yb,backendName:"cpu",kernelFunc:DV};function MV(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const QV={kernelName:dw,backendName:"cpu",kernelFunc:MV};function HV(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r;TV([o],"leakyRelu");const i=gv(o.shape),s=n.data.get(o.dataId).values,c=Bv("float32",i);for(let l=0;l<s.length;l++)c[l]=s[l]<0?a*s[l]:s[l];return n.makeTensorInfo(o.shape,"float32",c)}const zV={kernelName:vw,backendName:"cpu",kernelFunc:HV};function VV(e){return(t,n,r,o,a)=>{const i=kS(t,n),s=i.length,c=Ov(i),l=Bv(a,gv(i)),u=t.length,A=n.length,h=Ov(t),d=Ov(n),p=xS(t,i),f=xS(n,i);if(p.length+f.length===0)for(let g=0;g<l.length;++g)l[g]=e(r[g%r.length],o[g%o.length]);else for(let g=0;g<l.length;++g){const t=zv(g,s,c),n=t.slice(-u);p.forEach((e=>n[e]=0));const a=Hv(n,u,h),i=t.slice(-A);f.forEach((e=>i[e]=0));const m=Hv(i,A,d);l[g]=e(r[a],o[m])}return[l,i]}}const jV=VV(((e,t)=>e<0?t*e:e));function WV(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t;TV([r,o],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[s,c]=jV(r.shape,o.shape,a,i,"float32");return n.makeTensorInfo(c,"float32",s)}const KV={kernelName:ex,backendName:"cpu",kernelFunc:WV},GV=RV(cx,(e=>Math.max(0,e))),qV={kernelName:cx,backendName:"cpu",kernelFunc:GV},XV=RV(px,(e=>Math.min(Math.max(0,e),6))),YV={kernelName:px,backendName:"cpu",kernelFunc:XV},ZV=OV((e=>1/(1+Math.exp(-e)))),JV=RV(Ix,(e=>1/(1+Math.exp(-e)))),$V={kernelName:Ix,backendName:"cpu",kernelFunc:JV};function ej(e,t,n,r,o){if("linear"===n)return MV({inputs:{x:t},backend:e});if("relu"===n)return GV({inputs:{x:t},backend:e});if("elu"===n)return DV({inputs:{x:t},backend:e});if("relu6"===n)return XV({inputs:{x:t},backend:e});if("prelu"===n)return WV({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return HV({inputs:{x:t},backend:e,attrs:{alpha:o}});if("sigmoid"===n)return JV({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function tj(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(o.shape,"float32",i)},s}const nj={kernelName:kb,backendName:"cpu",kernelFunc:tj};function rj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return tj({inputs:{real:rj(e,t,"float32"),imag:rj(e,t,"float32")},backend:e})}const r=Pv(gv(t),n);return e.makeTensorInfo(t,n,r)}function oj(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const aj={kernelName:ix,backendName:"cpu",kernelFunc:oj};function ij(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=RC([0],n),[o,a]=VV(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[a,"bool",o]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function sj(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dtype:a}=r;if("complex64"===a){if("complex64"===o.dtype)return MV({inputs:{x:o},backend:n});const e=rj(n,o.shape,o.dtype),t=sj({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),r=tj({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===o.dtype){const e=oj({inputs:{input:o},backend:n}),t=sj({inputs:{x:e},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(e),t}if(!Iv(o.dtype,a)){const e=MV({inputs:{x:o},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:a}}const i=n.data.get(o.dataId).values,[s,c,l]=ij(i,o.shape,o.dtype,a);return n.makeTensorInfo(s,c,l)}const cj={kernelName:wb,backendName:"cpu",kernelFunc:sj};function lj(e,t,n,r){return null==n?n=>{let{inputs:o,backend:a}=n;const{a:i,b:s}=o,c=a;TV([i,s],e);const l=c.data.get(i.dataId).values,u=c.data.get(s.dataId).values,A="string"===i.dtype?XL(l):l,h="string"===i.dtype?XL(u):u,d=r||i.dtype,[p,f]=t(i.shape,s.shape,A,h,d);return c.makeTensorInfo(f,d,p)}:e=>{let{inputs:o,backend:a}=e;const{a:i,b:s}=o,c=a;if("complex64"===i.dtype||"complex64"===s.dtype){const e=sj({inputs:{x:i},backend:c,attrs:{dtype:"complex64"}}),t=c.data.get(e.dataId),r=t.complexTensorInfos.real,o=t.complexTensorInfos.imag,a=c.data.get(r.dataId).values,l=c.data.get(o.dataId).values,u=sj({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),A=c.data.get(u.dataId),h=A.complexTensorInfos.real,d=A.complexTensorInfos.imag,p=c.data.get(h.dataId).values,f=c.data.get(d.dataId).values,[g,m,y]=n(i.shape,s.shape,a,l,p,f),v=c.makeTensorInfo(y,"float32",g),b=c.makeTensorInfo(y,"float32",m),w=tj({inputs:{real:v,imag:b},backend:c});return c.disposeIntermediateTensorInfo(e),c.disposeIntermediateTensorInfo(u),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(b),w}{const e=c.data.get(i.dataId).values,n=c.data.get(s.dataId).values,o=r||i.dtype,[a,l]=t(i.shape,s.shape,e,n,o);return c.makeTensorInfo(l,o,a)}}}function uj(e){return(t,n,r,o,a,i)=>{const s=kS(t,n),c=gv(s),l=s.length,u=Ov(s),A=Bv("float32",c),h=Bv("float32",c),d=xS(t,s),p=xS(n,s),f=fL(r,o),g=fL(a,i),m=t.length,y=Ov(t),v=n.length,b=Ov(n);if(d.length+p.length===0)for(let w=0;w<A.length;w++){const t=w%f.length,n=w%g.length,r=e(f[2*t],f[2*t+1],g[2*n],g[2*n+1]);A[w]=r.real,h[w]=r.imag}else for(let w=0;w<A.length;w++){const t=zv(w,l,u),n=t.slice(-m);d.forEach((e=>n[e]=0));const r=Hv(n,m,y),o=t.slice(-v);p.forEach((e=>o[e]=0));const a=Hv(o,v,b),i=e(f[2*r],f[2*r+1],g[2*a],g[2*a+1]);A[w]=i.real,h[w]=i.imag}return[A,h,s]}}const Aj=VV(((e,t)=>e+t)),hj=uj(((e,t,n,r)=>({real:e+n,imag:t+r}))),dj=lj(tb,Aj,hj),pj={kernelName:tb,backendName:"cpu",kernelFunc:dj};function fj(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=gv(o.shape),s=xv(a,i),c=gv(s);dv(i===c,(()=>"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(o.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements.")),n.incRef(o.dataId);const l=n.data.get(o.dataId);if(null!=l.complexTensorInfos){const e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:o.dataId,shape:s,dtype:o.dtype}}const gj={kernelName:lx,backendName:"cpu",kernelFunc:fj};function mj(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;TV([o,a],"matMul");const c=o.shape.length,l=a.shape.length,u=i?o.shape[c-2]:o.shape[c-1],A=s?a.shape[l-1]:a.shape[l-2],h=i?o.shape[c-1]:o.shape[c-2],d=s?a.shape[l-2]:a.shape[l-1],p=o.shape.slice(0,-2),f=a.shape.slice(0,-2),g=gv(p),m=gv(f),y=kS(o.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,d]);dv(u===A,(()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(A,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(a.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")));const v=s?[m,d,A]:[m,A,d],b=fj({inputs:{x:o},backend:n,attrs:{shape:i?[g,u,h]:[g,h,u]}}),w=fj({inputs:{x:a},backend:n,attrs:{shape:v}}),x=i?b.shape[1]:b.shape[2],C=i?b.shape[2]:b.shape[1],k=s?w.shape[1]:w.shape[2],B=Math.max(g,m),S=n.data.get(b.dataId).values,I=n.data.get(w.dataId).values,E=Ov(b.shape),N=Ov(w.shape),[F,T,_]=i?[E[0],1,E[1]]:[E[0],E[1],1],[L,O,R]=s?[1,N[1],N[0]]:[N[1],1,N[0]],U=C*k,D=YB([B,C,k],b.dtype),P=D.values,M=n.blockSize;for(let Q=0;Q<B;Q++){const e=Q%g,t=Q%m;for(let n=0;n<C;n+=M){const r=Math.min(n+M,C);for(let o=0;o<k;o+=M){const a=Math.min(o+M,k);for(let i=0;i<x;i+=M){const s=Math.min(i+M,x);for(let c=n;c<r;c++)for(let n=o;n<a;n++){let r=0;for(let o=i;o<s;o++){r+=S[e*F+c*T+o*_]*I[o*L+n*O+t*R]}P[Q*U+(c*k+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,D.dtype,D.values)}const yj={kernelName:gb,backendName:"cpu",kernelFunc:mj};const vj={kernelName:iC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:A}=r;let h,d,p;const f=[];h=mj({inputs:{a:o,b:a},attrs:{transposeA:c,transposeB:l},backend:n}),i&&(d=dj({inputs:{a:h,b:i},backend:n}),f.push(h),h=d),u&&(p=ej(n,h,u,s,A),f.push(h),h=p);for(const g of f)n.disposeIntermediateTensorInfo(g);return h}};function bj(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const wj={kernelName:Jv,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;TV(t,"abs");let r=new Float32Array(gv(t.shape));return r=bj(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},xj=RV($v,(e=>Math.acos(e))),Cj={kernelName:$v,backendName:"cpu",kernelFunc:xj},kj=RV(eb,(e=>Math.acosh(e))),Bj={kernelName:eb,backendName:"cpu",kernelFunc:kj};const Sj={kernelName:nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;TV(t,"addN");const o=r.map((e=>n.data.get(e.dataId).values)),a=YB(r[0].shape,r[0].dtype),i=a.values;for(let s=0;s<r.length;s++){const e=o[s];for(let t=0;t<i.length;t++)i[t]+=e[t]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function Ij(e,t,n,r,o){const a=t.length,i=gv(t),s=Ov(t),c=Ov(o),l=Bv(n,gv(o));for(let u=0;u<i;++u){const t=zv(u,a,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];l[Hv(n,a,c)]=e[u]}return l}function Ej(e){const{inputs:t,attrs:n,backend:r}=e,{x:o}=t,{perm:a}=n;TV(o,"transpose");const i=o.shape.length,s=new Array(i);for(let l=0;l<s.length;l++)s[l]=o.shape[a[l]];const c=Ij(r.data.get(o.dataId).values,o.shape,o.dtype,a,s);return{dataId:r.write(c,s,o.dtype),shape:s,dtype:o.dtype}}const Nj={kernelName:Jx,backendName:"cpu",kernelFunc:Ej};const Fj={kernelName:rb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;TV(o,"all");const s=Cv(a,o.shape);let c=s;const l=qE(c,o.shape.length);let u=o;null!=l&&(u=Ej({inputs:{x:o},backend:n,attrs:{perm:l}}),c=YE(c.length,o.shape.length)),GE("all",c,u.shape.length);const[A,h]=WE(u.shape,c),d=gv(h),p=Pv(gv(A),u.dtype),f=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const e=m*d;let t=f[e];for(let n=0;n<d;++n){const r=f[e+n];t=t&&r}p[m]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,p);if(i){const e=fj({inputs:{x:g},backend:n,attrs:{shape:KE(A,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Tj={kernelName:ob,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;TV(o,"any");const s=Cv(a,o.shape);let c=s;const l=qE(c,o.shape.length);let u=o;null!=l&&(u=Ej({inputs:{x:o},backend:n,attrs:{perm:l}}),c=YE(c.length,o.shape.length)),GE("any",c,u.shape.length);const[A,h]=WE(u.shape,c),d=gv(h),p=Pv(gv(A),u.dtype),f=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const e=m*d;let t=f[e];for(let n=0;n<d;++n){const r=f[e+n];t=t||r}p[m]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,p);if(i){const e=fj({inputs:{x:g},backend:n,attrs:{shape:KE(A,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const _j={kernelName:ab,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;TV(o,"argMax");let i=Cv(a,o.shape);const s=qE(i,o.shape.length);let c=o;const l=[];null!=s&&(c=Ej({inputs:{x:o},backend:n,attrs:{perm:s}}),l.push(c),i=YE(i.length,c.shape.length)),i=[i[0]],GE("argMax",i,c.shape.length);const[u,A]=WE(c.shape,i),h=Pv(gv(u),"int32"),d=gv(A),p=n.data.get(c.dataId).values;for(let f=0;f<h.length;++f){const e=f*d;let t=p[e],n=0;for(let r=0;r<d;++r){const o=p[e+r];o>t&&(t=o,n=r)}h[f]=n}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}};const Lj={kernelName:ib,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;TV(o,"argMin");let i=Cv(a,o.shape);const s=qE(i,o.shape.length);let c=o;const l=[];null!=s&&(c=Ej({inputs:{x:o},backend:n,attrs:{perm:s}}),l.push(c),i=YE(i.length,c.shape.length)),i=[i[0]],GE("argMin",i,c.shape.length);const[u,A]=WE(c.shape,i),h=Pv(gv(u),"int32"),d=gv(A),p=n.data.get(c.dataId).values;for(let f=0;f<h.length;++f){const e=f*d;let t=p[e],n=0;for(let r=0;r<d;++r){const o=p[e+r];o<t&&(t=o,n=r)}h[f]=n}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}},Oj=RV(sb,(e=>Math.asin(e))),Rj={kernelName:sb,backendName:"cpu",kernelFunc:Oj},Uj=RV(cb,(e=>Math.asinh(e))),Dj={kernelName:cb,backendName:"cpu",kernelFunc:Uj},Pj=RV(lb,(e=>Math.atan(e))),Mj={kernelName:lb,backendName:"cpu",kernelFunc:Pj},Qj=VV(((e,t)=>Math.atan2(e,t))),Hj=lj(Ab,Qj),zj={kernelName:Ab,backendName:"cpu",kernelFunc:Hj},Vj=RV(ub,(e=>Math.atanh(e))),jj={kernelName:ub,backendName:"cpu",kernelFunc:Vj};function Wj(e,t,n,r,o,a){const i=o.strideHeight,s=o.strideWidth,c=o.dilationHeight,l=o.dilationWidth,u=o.effectiveFilterHeight,A=o.effectiveFilterWidth,h=o.padInfo.top,d=o.padInfo.left,p="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=YB(o.outShape,n),g=f.values,m=o.outShape[1]*o.outShape[2]*o.outShape[3],y=o.outShape[2]*o.outShape[3],v=o.outShape[3];for(let b=0;b<o.batchSize;++b){const t=b*m,n=b*r[0];for(let f=0;f<o.inChannels;++f)for(let m=0;m<o.outHeight;++m){const b=m*i-h,w=Math.max(0,b),x=Math.min(o.inHeight,u+b),C=t+m*y;for(let t=0;t<o.outWidth;++t){const i=t*s-d,u=Math.max(0,i),h=Math.min(o.inWidth,A+i);let m=p,y=0,b=0;for(let t=w;t<x;t+=c){const o=n+t*r[1];for(let t=u;t<h;t+=l){const n=e[o+t*r[2]+f];"max"===a&&n>m?m=n:"avg"===a&&(y+=n,b++)}if(isNaN(m))break}g[C+t*v+f]="avg"===a?y/b:m}}}return f}function Kj(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=YB(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,A=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,f=YB(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-d;let m=n;for(;m<0;)m+=l;const y=Math.min(r.inHeight,A+n);for(let s=0;s<r.outWidth;++s){const A=s*c-p;let d=A;for(;d<0;)d+=u;const v=Math.min(r.inWidth,h+A);let b=Number.NEGATIVE_INFINITY,w=-1;for(let t=m;t<y;t+=l){const i=t-n;for(let n=d;n<v;n+=u){const s=n-A,c=f.get(g,t,n,e);c>b&&(b=c,w=o?a?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:i*h+s)}}i.set(w,g,t,s,e)}}return i}function Gj(e,t,n,r,o,a){const i=o.strideDepth,s=o.strideHeight,c=o.strideWidth,l=o.dilationDepth,u=o.dilationHeight,A=o.dilationWidth,h=o.effectiveFilterDepth,d=o.effectiveFilterHeight,p=o.effectiveFilterWidth,f=o.padInfo.front,g=o.padInfo.top,m=o.padInfo.left,y="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=YB(o.outShape,n),b=v.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],x=o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[3]*o.outShape[4],k=o.outShape[4];for(let B=0;B<o.batchSize;++B){const t=B*w,n=B*r[0];for(let v=0;v<o.inChannels;++v)for(let w=0;w<o.outDepth;++w){const B=w*i-f;let S=B;for(;S<0;)S+=l;const I=Math.min(o.inDepth,h+B),E=t+w*x;for(let t=0;t<o.outHeight;++t){const i=t*s-g;let h=i;for(;h<0;)h+=u;const f=Math.min(o.inHeight,d+i),w=E+t*C;for(let t=0;t<o.outWidth;++t){const i=t*c-m;let s=i;for(;s<0;)s+=A;const d=Math.min(o.inWidth,p+i),g=w+t*k;let x=y,C=0,B=0;for(let t=S;t<I;t+=l){const o=n+t*r[1];for(let t=h;t<f;t+=u){const n=o+t*r[2];for(let t=s;t<d;t+=A){const o=e[n+t*r[3]+v];if("max"===a&&o>x?x=o:"avg"===a&&(C+=o,B++),isNaN(x))break}if(isNaN(x))break}if(isNaN(x))break}b[g+v]="avg"===a?C/Math.max(B,1):x}}}}return v}const qj={kernelName:hb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;TV(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;dv(WI(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const l=RI(o.shape,a,i,1,s,c);let u;if(1===l.filterWidth&&1===l.filterHeight&&mv(l.inShape,l.outShape))u=MV({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=Ov(o.shape),r=Wj(e,o.shape,o.dtype,t,l,"avg");u=n.makeTensorInfo(l.outShape,o.dtype,r.values)}return u}};const Xj={kernelName:pb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:l}=r;TV(o,"avgPool3d");const u=UI(o.shape,a,i,1,s,c,l),A=Gj(n.data.get(o.dataId).values,o.shape,o.dtype,Ov(o.shape),u,"avg");return n.makeTensorInfo(A.shape,"float32",A.values)}};const Yj={kernelName:fb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:l}=r;TV([o,a],"avgPool3DGrad");const u=UI(a.shape,i,s,1,c,l),A=u.strideDepth,h=u.strideHeight,d=u.strideWidth,p=u.filterDepth,f=u.filterHeight,g=u.filterWidth,m=u.dilationDepth,y=u.dilationHeight,v=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,x=u.effectiveFilterWidth,C=b-1-u.padInfo.front,k=x-1-u.padInfo.left,B=w-1-u.padInfo.top,S=YB(a.shape,"float32"),I=1/(p*f*g),E=n.bufferSync(o);for(let N=0;N<u.batchSize;++N)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-C,a=n-B,i=r-k;let s=0;for(let t=0;t<b;t+=m){const n=(o+t)/A;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=y){const r=(a+t)/h;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<x;t+=v){const o=(i+t)/d;if(o<0||o>=u.outWidth||Math.floor(o)!==o)continue;s+=E.get(N,n,r,o,e)}}}S.set(s*I,N,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const Zj={kernelName:db,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;TV([o,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:l}=r,u=RI(i.shape,s,c,1,l),A=u.strideHeight,h=u.strideWidth,d=u.filterHeight,p=u.filterWidth,f=u.dilationHeight,g=u.dilationWidth,m=u.effectiveFilterHeight,y=u.effectiveFilterWidth,v=y-1-u.padInfo.left,b=m-1-u.padInfo.top,w=YB(i.shape,"float32"),x=1/(d*p),C=n.data.get(o.dataId).values,k=YB(o.shape,"float32",C);for(let B=0;B<u.batchSize;++B)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-b,o=n-v;let a=0;for(let t=0;t<m;t+=f){const n=(r+t)/A;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<y;t+=g){const r=(o+t)/h;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;a+=k.get(B,n,r,e)}}w.set(a*x,B,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const Jj={kernelName:cw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,scale:a,offset:i,mean:s,variance:c}=t;dv(s.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),dv(null==i||s.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),dv(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),TV([o,s,c,a,i],"batchNorm");let{varianceEpsilon:l}=r;null==l&&(l=.001);const u=n.data.get(o.dataId).values,A=n.data.get(s.dataId).values,h=n.data.get(c.dataId).values,d=a?n.data.get(a.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),f=new Float32Array(u.length),g=p.length,m=d.length,y=h.length,v=A.length;let b=0,w=0,x=0,C=0;for(let k=0;k<u.length;++k)f[k]=p[b++]+(u[k]-A[w++])*d[x++]/Math.sqrt(h[C++]+l),b>=g&&(b=0),w>=v&&(w=0),x>=m&&(x=0),C>=y&&(C=0);return n.makeTensorInfo(o.shape,o.dtype,f)}};function $j(e,t,n,r,o){const a=mI(r,t,n),i=gv(n),s=Ov(r);if(a){const n=yI(t,s);return"string"===o?e.slice(n,n+i):e.subarray(n,n+i)}const c=YB(r,o,"string"===o?XL(e):e),l=YB(n,o);for(let u=0;u<l.size;++u){const e=l.indexToLoc(u),n=e.map(((e,n)=>e+t[n]));l.set(c.get(...n),...e)}return"string"===o?YL(l.values):l.values}function eW(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r;TV(o,"slice");const[s,c]=vI(o,a,i);aI(o,s,c);const l=$j(n.data.get(o.dataId).values,s,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,l)}const tW={kernelName:Cx,backendName:"cpu",kernelFunc:eW};const nW={kernelName:mb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;TV([o],"batchToSpaceND");const s=a.reduce(((e,t)=>e*t)),c=tL(o.shape,a,s),l=nL(c.length,a.length),u=rL(o.shape,a,s),A=oL(i,a.length),h=aL(u,i,a.length),d=fj({inputs:{x:o},backend:n,attrs:{shape:c}}),p=Ej({inputs:{x:d},backend:n,attrs:{perm:l}}),f=fj({inputs:{x:p},backend:n,attrs:{shape:u}}),g=eW({inputs:{x:f},backend:n,attrs:{begin:A,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}};function rW(e,t,n,r,o){const a=gv(r),i=Pv(o,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=o||(i[n]+=a>0?t[s]:1)}return i}function oW(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=e.shape[0],a=e.shape[1],i=YB([o,n],t.dtype);for(let s=0;s<o;s++)for(let o=0;o<a;o++){const a=e.get(s,o);if(a<0)throw new Error("Input x must be non-negative!");a>=n||(r?i.set(1,s,a):t.size>0?i.set(i.get(s,a)+t.get(s,o),s,a):i.set(i.get(s,a)+1,s,a))}return i}const aW={kernelName:yb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=rW(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,s)}},iW=VV(((e,t)=>e&t)),sW=lj(vb,iW),cW={kernelName:vb,backendName:"cpu",kernelFunc:sW};const lW={kernelName:bb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,s=kS(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},uW=OV((e=>Math.ceil(e))),AW=UV(xb,uW),hW={kernelName:xb,backendName:"cpu",kernelFunc:AW},dW=RV(Cb,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),pW={kernelName:Cb,backendName:"cpu",kernelFunc:dW},fW={kernelName:Bb,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(gv(t.shape)),o=n.data.get(t.dataId),a=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values;for(let l=0;l<s.length;l++){const e=s[l],t=c[l];r[l]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function gW(e,t,n,r){const o=Sv(n,gv(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=gv(e.shape);o.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const a="string"===n?XL(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)o[s+t]=a[i++]}r+=e.shape[1]}))}return o}function mW(e){const{inputs:t,backend:n}=e,{input:r}=t,o=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,a)}const yW={kernelName:fw,backendName:"cpu",kernelFunc:mW};function vW(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=Cv(o,t[0].shape)[0];W_(t.map((e=>e.shape)),a);let i=K_(t.map((e=>e.shape)),a);if(0===gv(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>gv(e.shape)>0));if(1===s.length)return MV({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map((e=>oj({inputs:{input:e},backend:n}))),t=s.map((e=>mW({inputs:{input:e},backend:n}))),r=vW({inputs:e,backend:n,attrs:{axis:a}}),o=vW({inputs:t,backend:n,attrs:{axis:a}}),i=tj({inputs:{real:r,imag:o},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),i}const c=s.map((e=>{const t=gv(e.shape.slice(a));return fj({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=c.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));i=K_(c.map((e=>e.shape)),1);const u=1===c[0].shape[0],A=gW(l,i,t[0].dtype,u),h=K_(s.map((e=>e.shape)),a),d=n.makeTensorInfo(h,t[0].dtype,A);return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}const bW={kernelName:Sb,backendName:"cpu",kernelFunc:vW};function wW(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:c,dilations:l,dimRoundingMode:u}=r;TV([o,a],"conv2d");const A=GI(c),h=DI(o.shape,a.shape,i,l,s,u,!1,A),d=h.filterHeight,p=h.filterWidth,f=h.dilationHeight,g=h.dilationWidth,m=h.padInfo.left,y=h.padInfo.top,v="channelsLast"===h.dataFormat,b=new JC(h.outShape,o.dtype),w=Ov(o.shape),x=Ov(a.shape),C=w[0],k=v?w[1]:w[2],B=v?w[2]:1,S=v?1:w[1],I=b.strides[0],E=v?b.strides[1]:b.strides[2],N=v?b.strides[2]:1,F=v?1:b.strides[1],T=n.data.get(o.dataId).values,_=n.data.get(a.dataId).values,L=b.values;for(let O=0;O<h.batchSize;++O){const e=O*C,t=O*I;for(let n=0;n<h.outHeight;++n){const r=t+n*E,o=n*h.strideHeight-y;for(let t=0;t<d;++t){const n=o+t*f;if(n<0||n>=h.inHeight)continue;const a=t*x[0],i=e+n*k;for(let e=0;e<h.outWidth;++e){const t=r+e*N,n=e*h.strideWidth-m;for(let e=0;e<p;++e){const r=n+e*g;if(r<0||r>=h.inWidth)continue;const o=i+r*B;let s=a+e*x[1];for(let e=0;e<h.inChannels;++e){const n=T[o+e*S];for(let e=0;e<h.outChannels;++e)L[t+e*F]+=n*_[s+e];s+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,L)}const xW={kernelName:Ib,backendName:"cpu",kernelFunc:wW};const CW={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:l,filterShape:u}=r;TV([o,a],"conv2dBackpropFilter");const A=GI(c),h=DI(o.shape,u,i,1,s,l,!1,A),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:g}=h,m="channelsLast"===h.dataFormat,y=new JC(h.filterShape,"float32"),v=h.padInfo.left,b=h.padInfo.top,w=n.data.get(o.dataId).values,x=n.data.get(a.dataId).values,C=new JC(o.shape,o.dtype,w),k=new JC(a.shape,a.dtype,x);for(let B=0;B<f;++B){const e=Math.max(0,Math.ceil((b-B)/d)),t=Math.min(h.outHeight,(h.inHeight+b-B)/d);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((v-n)/p)),o=Math.min(h.outWidth,(h.inWidth+v-n)/p);for(let a=0;a<h.inChannels;++a)for(let i=0;i<h.outChannels;++i){let s=0;for(let c=0;c<h.batchSize;++c)for(let l=e;l<t;++l){const e=B+l*d-b;for(let t=r;t<o;++t){const r=n+t*p-v;s+=m?C.get(c,e,r,a)*k.get(c,l,t,i):C.get(c,a,e,r)*k.get(c,i,l,t)}}y.set(s,B,n,a,i)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const kW={kernelName:Nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:c,dataFormat:l,dimRoundingMode:u}=r;TV([o,a],"conv2dBackpropInput");const A=Ov(a.shape),h=Ov(o.shape);let d=GI(l);const p=DI(i,a.shape,s,1,c,u,!1,d),f=new JC(p.inShape,"float32"),g=f.values,m=n.data.get(o.dataId).values,y=n.data.get(a.dataId).values,[v,b,w]=A,{batchSize:x,filterHeight:C,filterWidth:k,inChannels:B,inHeight:S,inWidth:I,outChannels:E,outHeight:N,outWidth:F,strideHeight:T,strideWidth:_}=p;d=p.dataFormat;const L=C-1-p.padInfo.top,O=k-1-p.padInfo.left,R="channelsLast"===d,U=f.strides[0],D=R?f.strides[1]:f.strides[2],P=R?f.strides[2]:1,M=R?1:f.strides[1],Q=h[0],H=R?h[1]:h[2],z=R?h[2]:1,V=R?1:h[1];for(let j=0;j<x;++j)for(let e=0;e<B;++e)for(let t=0;t<S;++t){const n=t-L,r=Math.max(0,Math.ceil(n/T)),o=Math.min(N,(C+n)/T);for(let a=0;a<I;++a){const i=a-O,s=Math.max(0,Math.ceil(i/_)),c=Math.min(F,(k+i)/_);let l=0;for(let t=r;t<o;++t){const r=t*T-n;for(let n=s;n<c;++n){const o=Q*j+H*t+z*n,a=v*(C-1-r)+b*(k-1-(n*_-i))+w*e;for(let e=0;e<E;++e){l+=m[o+V*e]*y[a+e]}}}g[U*j+D*t+P*a+M*e]=l}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const BW={kernelName:Fb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r;TV([o,a],"conv3d");const l=PI(o.shape,a.shape,i,c,s),{filterDepth:u,filterHeight:A,filterWidth:h,dilationDepth:d,dilationHeight:p,dilationWidth:f,padInfo:g}=l,m=g.front,y=g.left,v=g.top,b=new JC(l.outShape,o.dtype),w=n.data.get(o.dataId).values,x=n.data.get(a.dataId).values,C=b.values,k=Ov(o.shape),B=Ov(a.shape);for(let S=0;S<l.batchSize;++S){const e=S*k[0],t=S*b.strides[0];for(let n=0;n<l.outDepth;++n){const r=t+n*b.strides[1],o=n*l.strideDepth-m;for(let t=0;t<u;++t){const n=o+t*d;if(n<0||n>=l.inDepth)continue;const a=t*B[0],i=e+n*k[1];for(let e=0;e<l.outHeight;++e){const t=r+e*b.strides[2],n=e*l.strideHeight-v;for(let e=0;e<A;++e){const r=n+e*p;if(r<0||r>=l.inHeight)continue;const o=a+e*B[1],s=i+r*k[2];for(let e=0;e<l.outWidth;++e){const n=t+e*l.outChannels,r=e*l.strideWidth-y;for(let e=0;e<h;++e){const t=r+e*f;if(t<0||t>=l.inWidth)continue;const a=o+e*B[2],i=s+t*l.inChannels;let c=a;for(let e=0;e<l.inChannels;++e){const t=w[i+e];for(let e=0;e<l.outChannels;++e)C[n+e]+=t*x[c+e];c+=l.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const SW={kernelName:Tb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:c}=r;TV([o,a],"conv3dBackpropFilterV2");const l=Ov(o.shape),u=Ov(a.shape),A=PI(o.shape,c,i,1,s),h=A.strideDepth,d=A.strideHeight,p=A.strideWidth,f=A.filterDepth,g=A.filterHeight,m=A.filterWidth,y=new JC(A.filterShape,"float32"),v=y.values,[b,w,x,C]=y.strides,k=n.data.get(a.dataId).values,[B,S,I,E]=u,N=n.data.get(o.dataId).values,[F,T,_,L]=l,O=A.padInfo.front,R=A.padInfo.left,U=A.padInfo.top;for(let D=0;D<f;++D){const e=Math.max(0,Math.ceil((O-D)/h)),t=Math.min(A.outDepth,(A.inDepth+O-D)/h),n=D*b;for(let r=0;r<g;++r){const o=Math.max(0,Math.ceil((U-r)/d)),a=Math.min(A.outHeight,(A.inHeight+U-r)/d),i=r*w+n;for(let n=0;n<m;++n){const s=Math.max(0,Math.ceil((R-n)/p)),c=Math.min(A.outWidth,(A.inWidth+R-n)/p),l=n*x+i;for(let i=0;i<A.inChannels;++i){const u=i*C+l;for(let l=0;l<A.outChannels;++l){let f=0;for(let u=0;u<A.batchSize;++u){const A=u*F,g=u*B;for(let u=e;u<t;++u){const e=(D+u*h-O)*T+A,t=u*S+g;for(let u=o;u<a;++u){const o=(r+u*d-U)*_+e,a=u*I+t;for(let e=s;e<c;++e){const t=e*E+a;f+=N[(n+e*p-R)*L+o+i]*k[t+l]}}}}v[u+l]=f}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const IW={kernelName:_b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:c}=r;TV([o],"conv3dBackpropInputV2");const l=Ov(o.shape),u=Ov(a.shape),A=PI(c,a.shape,s,1,i),h=new JC(A.inShape,"float32"),d=h.values,[p,f,g,m]=h.strides,y=n.data.get(o.dataId).values,[v,b,w,x]=l,C=n.data.get(a.dataId).values,[k,B,S,I]=u,{batchSize:E,filterDepth:N,filterHeight:F,filterWidth:T,inChannels:_,inDepth:L,inHeight:O,inWidth:R,outChannels:U,outDepth:D,outHeight:P,outWidth:M,strideDepth:Q,strideHeight:H,strideWidth:z}=A,V=N-1-A.padInfo.front,j=F-1-A.padInfo.top,W=T-1-A.padInfo.left;for(let K=0;K<E;++K)for(let e=0;e<_;++e)for(let t=0;t<L;++t){const n=t-V,r=Math.max(0,Math.ceil(n/Q)),o=Math.min(D,(N+n)/Q);for(let a=0;a<O;++a){const i=a-j,s=Math.max(0,Math.ceil(i/H)),c=Math.min(P,(F+i)/H);for(let l=0;l<R;++l){const u=l-W,A=Math.max(0,Math.ceil(u/z)),h=Math.min(M,(T+u)/z);let E=0;for(let t=r;t<o;++t){const r=t*Q-n;for(let n=s;n<c;++n){const o=n*H-i;for(let a=A;a<h;++a){const i=v*K+b*t+w*n+x*a,s=k*(N-1-r)+B*(F-1-o)+S*(T-1-(a*z-u))+I*e;for(let e=0;e<U;++e){E+=y[i+e]*C[s+e]}}}}d[p*K+f*t+g*a+m*l+e]=E}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},EW=RV(Lb,(e=>Math.cos(e))),NW={kernelName:Lb,backendName:"cpu",kernelFunc:EW},FW=RV(Ob,(e=>Math.cosh(e))),TW={kernelName:Ob,backendName:"cpu",kernelFunc:FW};const _W={kernelName:Db,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:l}=r,[u,A,h,d]=o.shape,p=a.shape[0],[f,g]=s,m=YB([p,f,g,d],"float32"),y=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,w=Ov(o.shape),x=Ov(m.shape);for(let C=0;C<p;C++){const e=4*C,t=y[e],n=y[e+1],r=y[e+2],o=y[e+3],a=v[C];if(a>=u)continue;const i=f>1?(r-t)*(A-1)/(f-1):0,s=g>1?(o-n)*(h-1)/(g-1):0;for(let u=0;u<f;u++){const e=f>1?t*(A-1)+u*i:.5*(t+r)*(A-1);if(e<0||e>A-1)for(let t=0;t<g;t++)for(let e=0;e<d;e++){const n=e+t*x[2]+u*x[1]+C*x[0];m.values[n]=l}else if("bilinear"===c){const t=Math.floor(e),r=Math.ceil(e),i=e-t;for(let e=0;e<g;e++){const c=g>1?n*(h-1)+e*s:.5*(n+o)*(h-1);if(c<0||c>h-1){for(let t=0;t<d;t++){const n=t+e*x[2]+u*x[1]+C*x[0];m.values[n]=l}continue}const A=Math.floor(c),p=Math.ceil(c),f=c-A;for(let n=0;n<d;n++){let o=n+A*w[2]+t*w[1]+a*w[0];const s=b[o];o=n+p*w[2]+t*w[1]+a*w[0];const c=b[o];o=n+A*w[2]+r*w[1]+a*w[0];const l=b[o];o=n+p*w[2]+r*w[1]+a*w[0];const h=s+(c-s)*f,d=l+(b[o]-l)*f;o=n+e*x[2]+u*x[1]+C*x[0],m.values[o]=h+(d-h)*i}}}else for(let t=0;t<g;++t){const r=g>1?n*(h-1)+t*s:.5*(n+o)*(h-1);if(r<0||r>h-1){for(let e=0;e<d;e++){const n=e+t*x[2]+u*x[1]+C*x[0];m.values[n]=l}continue}const i=Math.round(r),c=Math.round(e);for(let e=0;e<d;e++){const n=e+i*w[2]+c*w[1]+a*w[0],r=e+t*x[2]+u*x[1]+C*x[0];m.values[r]=b[n]}}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const LW={kernelName:Rb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;TV(o,"cumprod");const c=qE([a],o.shape.length);let l=o;null!=c&&(l=Ej({inputs:{x:o},backend:n,attrs:{perm:c}}));const u=YE(1,o.shape.length)[0];if(u!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(u));const A=Ak(l.dtype,"int32"),h=Dv(gv(l.shape),A),d=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],f=s?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let m=0;m<d.length;m+=p)for(let e=0;e<p;e++){const t=f(m,e);if(0===e)h[t]=i?1:d[t];else{const n=f(m,e-1);h[t]=i?d[n]*h[n]:d[t]*h[n]}}const g=n.makeTensorInfo(l.shape,A,h);if(null!=c){const e=Ej({inputs:{x:g},backend:n,attrs:{perm:XE(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),e}return g}};const OW={kernelName:Ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;TV(o,"cumsum");const c=qE([a],o.shape.length);let l=o;null!=c&&(l=Ej({inputs:{x:o},backend:n,attrs:{perm:c}}));const u=YE(1,o.shape.length)[0];if(u!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(u));const A=Ak(l.dtype,"int32"),h=Pv(gv(l.shape),A),d=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],f=s?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let m=0;m<d.length;m+=p)for(let e=0;e<p;e++){const t=f(m,e);if(0===e)h[t]=i?0:d[t];else{const n=f(m,e-1);h[t]=i?d[n]+h[n]:d[t]+h[n]}}const g=n.makeTensorInfo(l.shape,A,h);if(null!=c){const e=Ej({inputs:{x:g},backend:n,attrs:{perm:XE(c)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),e}return g}};const RW={kernelName:Pb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=rW(n.data.get(o.dataId).values,n.data.get(a.dataId).values,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,e)}if(2===o.shape.length){const e=oW(n.bufferSync(o),n.bufferSync(a),i,s);return n.makeTensorInfo(e.shape,a.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};const UW={kernelName:Mb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r;dv("NHWC"===i,(()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)));const s=o.shape[0],c=o.shape[1],l=o.shape[2],u=o.shape[3],A=c*a,h=l*a,d=u/(a*a),p=n.data.get(o.dataId).values,f=new Float32Array(s*A*h*d);let g=0;for(let m=0;m<s;++m)for(let e=0;e<A;++e){const t=Math.floor(e/a),n=e%a;for(let e=0;e<h;++e){const r=Math.floor(e/a),o=(n*a+e%a)*d;for(let e=0;e<d;++e){const n=e+o+u*(r+l*(t+c*m));f[g++]=p[n]}}}return n.makeTensorInfo([s,A,h,d],o.dtype,f)}};function DW(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c,dimRoundingMode:l}=r;TV([o,a],"depthwiseConv2DNative");const u=Ov(o.shape),A=Ov(a.shape);let h=c;null==h&&(h=[1,1]),dv(WI(i,h),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(h,"'")));const d=DI(o.shape,a.shape,i,h,s,l,!0),{filterHeight:p,filterWidth:f,dilationHeight:g,dilationWidth:m,padInfo:y}=d,v=y.left,b=y.top,w=d.outChannels/d.inChannels,x=new JC(d.outShape,o.dtype),C=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,B=x.values;for(let S=0;S<d.batchSize;++S){const e=S*u[0],t=S*x.strides[0];for(let n=0;n<d.outHeight;++n){const r=t+n*x.strides[1],o=n*d.strideHeight-b;for(let t=0;t<p;++t){const n=o+t*g;if(n<0||n>=d.inHeight)continue;const a=t*A[0],i=e+n*u[1];for(let e=0;e<d.outWidth;++e){const t=r+e*x.strides[2],n=e*d.strideWidth-v;for(let e=0;e<f;++e){const r=n+e*m;if(r<0||r>=d.inWidth)continue;const o=a+e*A[1],s=i+r*d.inChannels;let c=t,l=o;for(let e=0;e<d.inChannels;++e){const t=C[s+e];for(let e=0;e<w;++e)B[c+e]+=t*k[l+e];c+=w,l+=w}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const PW={kernelName:Qb,backendName:"cpu",kernelFunc:DW};const MW={kernelName:Hb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:l,filterShape:u}=r;TV([o,a],"depthwiseConv2dNativeBackpropFilter");const A=DI(o.shape,u,i,s,c,l,!0),{strideHeight:h,strideWidth:d,filterHeight:p,filterWidth:f}=A,g=new JC(A.filterShape,"float32"),m=A.padInfo.left,y=A.padInfo.top,v=A.outChannels/A.inChannels,b=n.data.get(o.dataId).values,w=new JC(o.shape,o.dtype,b),x=n.data.get(a.dataId).values,C=new JC(a.shape,a.dtype,x);for(let k=0;k<p;++k){const e=Math.max(0,Math.ceil((y-k)/h)),t=Math.min(A.outHeight,(A.inHeight+y-k)/h);for(let n=0;n<f;++n){const r=Math.max(0,Math.ceil((m-n)/d)),o=Math.min(A.outWidth,(A.inWidth+m-n)/d);for(let a=0;a<A.outChannels;++a){const i=Math.trunc(a/v),s=a%v;let c=0;for(let l=0;l<A.batchSize;++l)for(let s=e;s<t;++s){const e=k+s*h-y;for(let t=r;t<o;++t){const r=n+t*d-m;c+=w.get(l,e,r,i)*C.get(l,s,t,a)}}g.set(c,k,n,i,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const QW={kernelName:zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:l,inputShape:u}=r;TV([o,a],"depthwiseConv2DNativeBackpropInput");const A=Ov(o.shape),h=Ov(a.shape),d=DI(u,a.shape,i,s,c,l,!0),p=new JC(d.inShape,"float32"),f=p.values,[g,m,y]=p.strides,v=n.data.get(o.dataId).values,[b,w,x]=A,C=n.data.get(a.dataId).values,[k,B,S]=h,{batchSize:I,filterHeight:E,filterWidth:N,inChannels:F,inHeight:T,inWidth:_,outChannels:L,outHeight:O,outWidth:R,strideHeight:U,strideWidth:D}=d,P=E-1-d.padInfo.top,M=N-1-d.padInfo.left,Q=L/F;for(let H=0;H<I;++H)for(let e=0;e<F;++e)for(let t=0;t<T;++t){const n=t-P,r=Math.max(0,Math.ceil(n/U)),o=Math.min(O,(E+n)/U);for(let a=0;a<_;++a){const i=a-M,s=Math.max(0,Math.ceil(i/D)),c=Math.min(R,(N+i)/D);let l=0;for(let t=r;t<o;++t){const r=t*U-n;for(let n=s;n<c;++n){const o=b*H+w*t+x*n,a=k*(E-1-r)+B*(N-1-(n*D-i))+S*e;for(let t=0;t<Q;++t){l+=v[o+(e*Q+t)]*C[a+t]}}}f[g*H+m*t+y*a+e]=l}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};const HW={kernelName:Vb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=gv(r.shape),a=n.data.get(r.dataId).values,i=YB([o,o],r.dtype),s=i.values;for(let l=0;l<a.length;l++)s[l*o+l]=a[l];const c=[...r.shape,...r.shape];return n.makeTensorInfo(c,i.dtype,i.values)}},zW={kernelName:jb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r,l=n,u=l.data.get(o.dataId).values,A=o.shape.length,h=l.data.get(a.dataId).values,d=a.shape.length,{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:v,padInfo:b,strideHeight:w,strideWidth:x,filterHeight:C,filterWidth:k,dilationHeight:B,dilationWidth:S,outShape:I}=OI(o.shape,a.shape,i,s,"NHWC",c),E=gv(I),N=I.length,F=Sv(o.dtype,E);for(let T=0;T<p;++T)for(let e=0;e<y;++e){const t=e*w-b.top;for(let n=0;n<v;++n){const r=n*x-b.left;for(let i=0;i<m;++i){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<C;++e){const n=t+e*B;if(n>=0&&n<f)for(let t=0;t<k;++t){const c=r+t*S;if(c>=0&&c<g){const r=Hv([T,n,c,i],A,Ov(o.shape)),l=Hv([e,t,i],d,Ov(a.shape)),p=u[r]+h[l];p>s&&(s=p)}}}F[Hv([T,e,n,i],N,Ov(I))]=s}}}return{dataId:l.write(RC(F,o.dtype),I,o.dtype),shape:I,dtype:o.dtype}}},VW={kernelName:Kb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:c,dilations:l}=r,u=n,A=Uv(o.shape,u.data.get(o.dataId).values),h=Uv(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:g,outHeight:m,outWidth:y,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:x,filterWidth:C,dilationHeight:k,dilationWidth:B,outShape:S}=OI(o.shape,a.shape,s,c,"NHWC",l);dv(i.rank===S.length,(()=>"Error in ".concat(Kb,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(i.rank)));const I=Uv(S,u.data.get(i.dataId).values),E=Mv(a.shape,a.dtype);for(let N=0;N<d;++N)for(let e=0;e<m;++e){const t=e*b-v.top;for(let n=0;n<y;++n){const r=n*w-v.left;for(let o=0;o<g;++o){let a=Number.MIN_SAFE_INTEGER,i=0,s=0;for(let e=0;e<x;++e){const n=t+e*k;if(n>=0&&n<p)for(let t=0;t<C;++t){const c=r+t*B;if(c>=0&&c<f){const r=A[N][n][c][o]+h[e][t][o];r>a&&(a=r,i=e,s=t)}}}E[i][s][o]+=I[N][e][n][o]}}}return{dataId:u.write(RC(E,o.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},jW={kernelName:Wb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,filter:a,dy:i}=t,{strides:s,pad:c,dilations:l}=r,u=n,A=Uv(o.shape,u.data.get(o.dataId).values),h=Uv(a.shape,u.data.get(a.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:g,outHeight:m,outWidth:y,padInfo:v,strideHeight:b,strideWidth:w,filterHeight:x,filterWidth:C,dilationHeight:k,dilationWidth:B,outShape:S}=OI(o.shape,a.shape,s,c,"NHWC",l);dv(i.rank===S.length,(()=>"Error in ".concat(Wb,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(i.rank)));const I=Uv(S,u.data.get(i.dataId).values),E=Mv(o.shape,o.dtype);for(let N=0;N<d;++N)for(let e=0;e<m;++e){const t=e*b-v.top;for(let n=0;n<y;++n){const r=n*w-v.left;for(let o=0;o<g;++o){let a=Number.MIN_SAFE_INTEGER,i=t<0?0:t,s=r<0?0:r;for(let e=0;e<x;++e){const n=t+e*k;if(n>=0&&n<p)for(let t=0;t<C;++t){const c=r+t*B;if(c>=0&&c<f){const r=A[N][n][c][o]+h[e][t][o];r>a&&(a=r,i=n,s=c)}}}E[N][i][s][o]+=I[N][e][n][o]}}}return{dataId:u.write(RC(E,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};const WW={kernelName:Gb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o}=t,{canvas:a,options:i}=r,{contextOptions:s,imageOptions:c}=i||{},l=(null===c||void 0===c?void 0:c.alpha)||1,u=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(s.contextType," is not supported by the CPU backend."));const A=a.getContext(u,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==A)throw new Error("Could not get the context with ".concat(u," type."));const[h,d]=o.shape.slice(0,2),p=2===o.shape.length?1:o.shape[2],f=n.data.get(o.dataId).values,g="float32"===o.dtype?255:1,m=new Uint8ClampedArray(d*h*4);for(let v=0;v<h*d;++v){const e=[0,0,0,255*l];for(let n=0;n<p;n++){const t=f[v*p+n];if("float32"===o.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===o.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===p?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*v;m[t+0]=Math.round(e[0]),m[t+1]=Math.round(e[1]),m[t+2]=Math.round(e[2]),m[t+3]=Math.round(e[3])}a.width=d,a.height=h;const y=new ImageData(m,d,h);return A.putImageData(y,0,0),o}},KW=VV(((e,t)=>e*t)),GW=uj(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),qW=lj(Vw,KW,GW),XW={kernelName:Vw,backendName:"cpu",kernelFunc:qW};function YW(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;let s;TV(o,"sum"),s="bool"===o.dtype?sj({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):MV({inputs:{x:o},backend:n});const c=s.shape.length,l=Cv(a,s.shape),u=qE(l,c);let A=l,h=s;null!=u&&(h=Ej({inputs:{x:s},backend:n,attrs:{perm:u}}),A=YE(A.length,c)),GE("sum",A,h.shape.length);const[d,p]=WE(h.shape,A);let f=rj(n,d,Ak(h.dtype,"int32"));const g=gv(p),m=n.data.get(f.dataId).values,y=n.data.get(h.dataId).values;for(let v=0;v<m.length;++v){const e=v*g;let t=0;for(let n=0;n<g;++n)t+=y[e+n];m[v]=t}if(i){const e=f;f=fj({inputs:{x:f},backend:n,attrs:{shape:KE(f.shape,l)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=u&&n.disposeIntermediateTensorInfo(h),f}const ZW={kernelName:Fx,backendName:"cpu",kernelFunc:YW};const JW={kernelName:Xb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:c}=IL(o,a.length);NL(i.length,c,a);const{path:l,steps:u}=FL(s,c),A=u.length;let h=null,d=i.length;const p=[];for(let f=0;f<A;++f){for(const e of u[f]){const{permutationIndices:t,expandDims:r}=EL(d,c[e]);let o;TL(t)?o=a[e]:(o=Ej({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),p.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);mv(o.shape,i)||(o=fj({inputs:{x:o},backend:n,attrs:{shape:i}}),p.push(o)),null===h?h=o:(h=qW({inputs:{a:o,b:h},backend:n}),p.push(h))}f<A-1&&(l[f]>=0&&(h=YW({inputs:{x:h},backend:n,attrs:{axis:l[f]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(const f of p)f!==h&&n.disposeIntermediateTensorInfo(f);return h}};const $W={kernelName:Zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:o}=t;TV([r,o],"eluGrad");const a=new Float32Array(gv(o.shape)),i=n.data.get(o.dataId).values,s=n.data.get(r.dataId).values;for(let c=0;c<i.length;++c){const e=i[c];a[c]=e>=0?s[c]:s[c]*(e+1)}return n.makeTensorInfo(o.shape,"float32",a)}},eK=VV(((e,t)=>e===t?1:0)),tK=lj($b,eK,null,"bool"),nK={kernelName:$b,backendName:"cpu",kernelFunc:tK},rK=lL,oK=uL,aK=AL,iK=hL,sK=dL,cK=pL,lK=RV(Jb,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+rK*n);return t*(1-((((cK*r+sK)*r+iK)*r+aK)*r+oK)*r*Math.exp(-n*n))})),uK={kernelName:Jb,backendName:"cpu",kernelFunc:lK},AK=OV((e=>Math.exp(e))),hK=UV(ew,AK,"float32"),dK={kernelName:ew,backendName:"cpu",kernelFunc:hK};function pK(e){const{inputs:t,backend:n,attrs:r}=e,{input:o}=t,{dim:a}=r,i=o.shape.length,s=o.shape.slice();let c=a;return a<0&&(dv(-(i+1)<=a,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),c=i+a+1),s.splice(c,0,1),fj({inputs:{x:o},backend:n,attrs:{shape:s}})}const fK={kernelName:tw,backendName:"cpu",kernelFunc:pK},gK=OV((e=>Math.expm1(e))),mK=UV(nw,gK),yK={kernelName:nw,backendName:"cpu",kernelFunc:mK},vK=VV(((e,t)=>e/t)),bK=lj(qb,vK),wK={kernelName:qb,backendName:"cpu",kernelFunc:bK},xK=VV(((e,t)=>e-t)),CK=uj(((e,t,n,r)=>({real:e-n,imag:t-r}))),kK=lj(Kx,xK,CK),BK={kernelName:Kx,backendName:"cpu",kernelFunc:kK};function SK(e,t,n){const r=e.shape,o=r[0],a=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,c=i.complexTensorInfos.imag,l=[o,a],u=gv(l),A=Bv("float32",u),h=Bv("float32",u);for(let g=0;g<o;g++){const e=eW({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,a]}}),r=eW({inputs:{x:c},backend:n,attrs:{begin:[g,0],size:[1,a]}}),o=tj({inputs:{real:e,imag:r},backend:n}),{real:i,imag:l}=IK(o,t,n),u=fL(i,l);for(let t=0;t<a;t++){const e=vL(u,t);A[g*a+t]=e.real,h[g*a+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o)}const d=n.makeTensorInfo(l,"float32",A),p=n.makeTensorInfo(l,"float32",h),f=tj({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}function IK(e,t,n){const r=gv(e.shape),o=n.data.get(e.dataId),a=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0===((s=r)&s-1)){const o=EK(a,i,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",o.real),t=n.makeTensorInfo(s,"float32",o.imag),a=n.makeTensorInfo([],"float32",OC(r,"float32")),i=MV({inputs:{x:a},backend:n}),c=wK.kernelFunc({inputs:{a:e,b:a},backend:n}),l=wK.kernelFunc({inputs:{a:t,b:i},backend:n}),u=n.data.get(c.dataId).values,A=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),{real:u,imag:A}}return o}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let o=0;o<t;o++){let a=0,i=0;for(let r=0;r<t;r++){const s=xL(o*r,t,n),c=vL(e,r);a+=c.real*s.real-c.imag*s.imag,i+=c.real*s.imag+c.imag*s.real}n&&(a/=t,i/=t),bL(r,a,i,o)}return r}(fL(a,i),r,t);return gL(e)}var s}function EK(e,t,n,r,o){if(1===n)return{real:e,imag:t};const a=fL(e,t),i=n/2,s=mL(a),c=s.real,l=s.imag,u=[c.length],A=o.makeTensorInfo(u,"float32",c),h=o.makeTensorInfo(u,"float32",l),d=tj({inputs:{real:A,imag:h},backend:o}),p=yL(a),f=p.real,g=p.imag,m=[f.length],y=o.makeTensorInfo(m,"float32",f),v=o.makeTensorInfo(m,"float32",g),b=tj({inputs:{real:y,imag:v},backend:o}),w=EK(c,l,i,r,o),x=w.real,C=w.imag,k=[x.length],B=o.makeTensorInfo(k,"float32",x),S=o.makeTensorInfo(k,"float32",C),I=tj({inputs:{real:B,imag:S},backend:o}),E=EK(f,g,i,r,o),N=E.real,F=E.imag,T=[N.length],_=o.makeTensorInfo(T,"float32",N),L=o.makeTensorInfo(T,"float32",F),O=tj({inputs:{real:_,imag:L},backend:o}),R=wL(n,r),U=[R.real.length],D=o.makeTensorInfo(U,"float32",R.real),P=o.makeTensorInfo(U,"float32",R.imag),M=tj({inputs:{real:D,imag:P},backend:o}),Q=qW({inputs:{a:M,b:O},backend:o}),H=dj({inputs:{a:I,b:Q},backend:o}),z=kK({inputs:{a:I,b:Q},backend:o}),V=oj({inputs:{input:H},backend:o}),j=oj({inputs:{input:z},backend:o}),W=mW({inputs:{input:H},backend:o}),K=mW({inputs:{input:z},backend:o}),G=vW({inputs:[V,j],backend:o,attrs:{axis:0}}),q=vW({inputs:[W,K],backend:o,attrs:{axis:0}}),X=o.data.get(G.dataId).values,Y=o.data.get(q.dataId).values;return o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(q),{real:X,imag:Y}}const NK={kernelName:rw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=gv(r.shape),a=r.shape[r.shape.length-1],i=fj({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=SK(i,!1,n),c=fj({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}};function FK(e){const{backend:t,attrs:n}=e,{shape:r,value:o,dtype:a}=n,i=a||Tv(o),s=Sv(i,gv(r));return function(e,t,n){e.fill(t)}(s,o),t.makeTensorInfo(r,i,s)}const TK={kernelName:ow,backendName:"cpu",kernelFunc:FK};const _K={kernelName:aw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,a=r,i=Bv(o.dtype,gv(o.shape)),[s,c,l,u]=o.shape,A=a.data.get(o.dataId).values;for(let h=0;h<s;h++){const e=h*l*c*u;for(let t=0;t<c;t++){const n=t*(l*u);for(let t=0;t<l;t++){const r=t*u;for(let o=0;o<u;o++){const a=Math.round(l-t-1),s=e+n+r+o;let c=A[s];if(a>=0&&a<l){c=A[e+n+a*u+o]}i[s]=c}}}}return{dataId:a.write(i,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},LK=OV((e=>Math.floor(e))),OK=UV(iw,LK),RK={kernelName:iw,backendName:"cpu",kernelFunc:OK},UK=VV(((e,t)=>Math.floor(e/t))),DK=lj(sw,UK,null,"int32"),PK={kernelName:sw,backendName:"cpu",kernelFunc:DK};const MK={kernelName:sC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:l,dataFormat:u,dilations:A,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let f=wW({inputs:{x:o,filter:a},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:A,dimRoundingMode:h}});if(i){const e=f;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=fj({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});f=dj({inputs:{a:f,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else f=dj({inputs:{a:f,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(d){const e=f;if("NCHW"===u&&"prelu"===d&&1===s.shape.length&&1!==s.shape[0]){const e=fj({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});f=ej(n,f,d,e,p),n.disposeIntermediateTensorInfo(e)}else f=ej(n,f,d,s,p);n.disposeIntermediateTensorInfo(e)}return f}};const QK={kernelName:cC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:l,dataFormat:u,dilations:A,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let f=DW({inputs:{x:o,filter:a},backend:n,attrs:{strides:c,pad:l,dataFormat:u,dilations:A,dimRoundingMode:h}});if(i){const e=f;f=dj({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(d){const e=f;f=ej(n,f,d,s,p),n.disposeIntermediateTensorInfo(e)}return f}};function HK(e,t,n,r,o,a,i,s,c){const l=YB([r,a],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<o;t++){const a=e[u*o+t];r+=a*i[t],n.push(a)}if(r<0||r>=c/a)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(s));for(let e=0;e<a;e++)l.values[u*a+e]=t.get(...t.indexToLoc(r*a+e))}return l}const zK={kernelName:uw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=gv(r.shape),i=o.shape,s=i[i.length-1],[c,l,u,A]=iL(r,o);if(0===l)return n.makeTensorInfo(c,r.dtype,[]);const h=HK(n.data.get(o.dataId).values,n.bufferSync(r),r.dtype,l,s,u,A,r.shape,a);return n.makeTensorInfo(c,r.dtype,h.values)}};function VK(e,t,n){const r=YB(n,e.dtype);for(let o=0;o<r.size;++o){const n=r.indexToLoc(o).slice(),a=n[0],i=n[2],s=t.locToIndex([a,i]);n[2]=t.values[s];const c=e.locToIndex(n);0<=c&&c<e.values.length&&(r.values[o]=e.values[c])}return r}const jK={kernelName:lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r;TV([o,a],"gatherV2");const c=Cv(i,o.shape)[0],l=n.data.get(a.dataId).values,u=o.shape[c];for(let v=0;v<l.length;++v){const e=l[v];dv(e<=u-1&&e>=0,(()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]")))}let A=s;null==s&&(A=0);const h=gv(a.shape),d=qL(o,a,c,A),p=fj({inputs:{x:o},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),f=fj({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,h/d.batchSize]}}),g=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],m=n.bufferSync(f),y=VK(n.bufferSync(p),m,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(d.outputShape,y.dtype,y.values)}},WK=VV(((e,t)=>e>t?1:0)),KK=lj(Aw,WK,null,"bool"),GK={kernelName:Aw,backendName:"cpu",kernelFunc:KK},qK=VV(((e,t)=>e>=t?1:0)),XK=lj(hw,qK,null,"bool"),YK={kernelName:hw,backendName:"cpu",kernelFunc:XK};const ZK={kernelName:pw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,o=gv(r.shape),a=r.shape[r.shape.length-1],i=fj({inputs:{x:r},backend:n,attrs:{shape:[o/a,a]}}),s=SK(i,!0,n),c=fj({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),c}},JK=RV(gw,(e=>Number.isFinite(e)?1:0),"bool"),$K={kernelName:gw,backendName:"cpu",kernelFunc:JK},eG=RV(mw,(e=>Math.abs(e)===1/0?1:0),"bool"),tG={kernelName:mw,backendName:"cpu",kernelFunc:eG},nG=RV(yw,(e=>Number.isNaN(e)?1:0),"bool"),rG={kernelName:yw,backendName:"cpu",kernelFunc:nG},oG=VV(((e,t)=>e<t?1:0)),aG=lj(bw,oG,null,"bool"),iG={kernelName:bw,backendName:"cpu",kernelFunc:aG},sG=VV(((e,t)=>e<=t?1:0)),cG=lj(ww,sG,null,"bool"),lG={kernelName:ww,backendName:"cpu",kernelFunc:cG};function uG(e,t,n){const r=(t-e)/(n-1),o=Pv(n,"float32");o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+r;return o}const AG={kernelName:xw,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=uG(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},hG=OV((e=>Math.log(e))),dG=UV(Cw,hG),pG={kernelName:Cw,backendName:"cpu",kernelFunc:dG},fG=RV(kw,(e=>Math.log1p(e))),gG={kernelName:kw,backendName:"cpu",kernelFunc:fG},mG=VV(((e,t)=>e&&t)),yG=lj(Bw,mG,null,"bool"),vG={kernelName:Bw,backendName:"cpu",kernelFunc:yG},bG=RV(Sw,(e=>e?0:1),"bool"),wG={kernelName:Sw,backendName:"cpu",kernelFunc:bG},xG=VV(((e,t)=>e||t)),CG=lj(Iw,xG,null,"bool"),kG={kernelName:Iw,backendName:"cpu",kernelFunc:CG};const BG={kernelName:Ew,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:c}=r;TV(o,"LRN");const l=o.shape[3],u=l-1,A=n.data.get(o.dataId).values,h=gv(o.shape),d=new Float32Array(h);function p(e){const t=e%l;let n=e-t+Math.max(0,t-a);const r=e-t+Math.min(t+a,u);let o=0;for(;n<=r;n++){const e=A[n];o+=e*e}return o}for(let f=0;f<h;f++){const e=p(f),t=A[f]*Math.pow(i+s*e,-c);d[f]=t}return n.makeTensorInfo(o.shape,o.dtype,d)}};const SG={kernelName:Nw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:c,alpha:l,beta:u}=r;TV(i,"LRNGrad");const A=gv(i.shape),h=i.shape[3],d=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,f=n.data.get(a.dataId).values,g=new Float32Array(A),m=A;for(let y=0;y<m;y++){const e=y%h,t=y-e+Math.max(0,e-s),n=y-e+Math.min(h,e+s+1);let r=0;for(let o=t;o<n;o++)r+=Math.pow(p[o],2);r=l*r+c;for(let o=t;o<n;o++){let e=-2*l*u*p[o]*f[y]/r;y===o&&(e+=Math.pow(r,-u)),e*=d[y],g[o]+=e}}return n.makeTensorInfo(i.shape,o.dtype,g)}};function IG(e,t,n,r){const o=Bv(r,gv(n));for(let a=0;a<o.length;++a){const n=a*t;let r=e[n];for(let o=0;o<t;++o){const t=e[n+o];(Number.isNaN(t)||t>r)&&(r=t)}o[a]=r}return o}function EG(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=n;let c=o.shape;const l=c.length,u=Cv(a,c);let A=u;const h=qE(A,l);let d=s.data.get(o.dataId).values;if(null!=h){const e=new Array(l);for(let t=0;t<e.length;t++)e[t]=c[h[t]];d=Ij(d,c,o.dtype,h,e),A=YE(A.length,l),c=e}TV(o,"max"),GE("max",A,l);const[p,f]=WE(c,A),g=IG(d,gv(f),p,o.dtype),m=s.write(g,p,o.dtype);let y=p;if(i){y=KE(p,u)}return{dataId:m,shape:y,dtype:o.dtype}}const NG={kernelName:Fw,backendName:"cpu",kernelFunc:EG},FG=VV(((e,t)=>Math.max(e,t))),TG=lj(Tw,FG),_G={kernelName:Tw,backendName:"cpu",kernelFunc:TG};const LG={kernelName:_w,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;TV(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;dv(WI(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const l=RI(o.shape,a,i,1,s,c);let u;if(1===l.filterWidth&&1===l.filterHeight&&mv(l.inShape,l.outShape))u=MV({inputs:{x:o},backend:n});else{const e=n.data.get(o.dataId).values,t=Ov(o.shape),r=Wj(e,o.shape,o.dtype,t,l,"max");u=n.makeTensorInfo(l.outShape,o.dtype,r.values)}return u}};const OG={kernelName:Ow,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:l}=r;TV(o,"maxPool3d");const u=UI(o.shape,a,i,1,s,c,l),A=Gj(n.data.get(o.dataId).values,o.shape,o.dtype,Ov(o.shape),u,"max");return n.makeTensorInfo(A.shape,"float32",A.values)}};const RG={kernelName:Rw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,{filterSize:i,strides:s,pad:c,dimRoundingMode:l}=r;TV([o,a],"maxPool3DGrad");const u=UI(a.shape,i,s,1,c,l),A=function(e,t){const n=YB(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,A=t.effectiveFilterWidth,h=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left;for(let f=0;f<t.batchSize;++f)for(let g=0;g<t.inChannels;++g)for(let m=0;m<t.outDepth;++m){const y=m*r-h;let v=y;for(;v<0;)v+=i;const b=Math.min(t.inDepth,l+y);for(let r=0;r<t.outHeight;++r){const l=r*o-d;let h=l;for(;h<0;)h+=s;const w=Math.min(t.inHeight,u+l);for(let o=0;o<t.outWidth;++o){const d=o*a-p;let x=d;for(;x<0;)x+=c;const C=Math.min(t.inWidth,A+d);let k=Number.NEGATIVE_INFINITY,B=-1;for(let t=v;t<b;t+=i){const n=t-y;for(let r=h;r<w;r+=s){const o=r-l;for(let a=x;a<C;a+=c){const i=a-d,s=e.get(f,t,r,a,g);s>=k&&(k=s,B=n*u*A+o*u+i)}}}n.set(B,f,m,r,o,g)}}}return n}(n.bufferSync(a),u),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.dilationDepth,g=u.dilationHeight,m=u.dilationWidth,y=u.effectiveFilterDepth,v=u.effectiveFilterHeight,b=u.effectiveFilterWidth,w=y-1-u.padInfo.front,x=b-1-u.padInfo.left,C=v-1-u.padInfo.top,k=YB(a.shape,"float32"),B=n.bufferSync(o);for(let S=0;S<u.batchSize;++S)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const o=t-w,a=n-C,i=r-x;let s=0;for(let t=0;t<y;t+=f){const n=(o+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<v;r+=g){const o=(a+r)/d;if(!(o<0||o>=u.outHeight||Math.floor(o)!==o))for(let a=0;a<b;a+=m){const c=(i+a)/p;if(c<0||c>=u.outWidth||Math.floor(c)!==c)continue;const l=y*v*b-1-A.get(S,n,o,c,e)===t*v*b+r*b+a?1:0;if(0===l)continue;s+=B.get(S,n,o,c,e)*l}}}k.set(s,S,t,n,r,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};const UG={kernelName:Lw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;TV([a,i],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:A}=r,h=RI(s.shape,c,l,1,u,A),d=n.data.get(s.dataId).values,p=YB(h.outShape,s.dtype,Kj(d,s.shape,s.dtype,h).values),f=h.strideHeight,g=h.strideWidth,m=h.dilationHeight,y=h.dilationWidth,v=h.effectiveFilterHeight,b=h.effectiveFilterWidth,w=b-1-h.padInfo.left,x=v-1-h.padInfo.top,C=YB(s.shape,"float32"),k=n.data.get(o.dataId).values,B=YB(o.shape,"float32",k);for(let S=0;S<h.batchSize;++S)for(let e=0;e<h.inChannels;++e)for(let t=0;t<h.inHeight;++t)for(let n=0;n<h.inWidth;++n){const r=t-x,o=n-w;let a=0;for(let t=0;t<v;t+=m){const n=(r+t)/f;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<b;r+=y){const i=(o+r)/g;if(i<0||i>=h.outWidth||Math.floor(i)!==i)continue;const s=v*b-1-p.get(S,n,i,e)===t*b+r?1:0;if(0===s)continue;a+=B.get(S,n,i,e)*s}}C.set(a,S,t,n,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const DG={kernelName:Uw,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:c}=n,l=r;TV(o,"MaxPoolWithArgmax");const u=l.data.get(o.dataId).values,A=RI(o.shape,a,i,[1,1],s),[h,d]=function(e,t,n,r,o){const a=Wj(e,0,n,Ov(t),o,"max"),i=Kj(e,t,n,o,!0,r);return[a.values,i.values]}(u,o.shape,o.dtype,c,A),p=l.write(h,A.outShape,o.dtype),f=l.write(d,A.outShape,o.dtype);return[{dataId:p,shape:A.outShape,dtype:o.dtype},{dataId:f,shape:A.outShape,dtype:"int32"}]}};const PG={kernelName:Dw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=Cv(a,o.shape),c=gv(WE(o.shape,s)[1]),l=[],u=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(u);const A=sj({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});l.push(A);const h=bK({inputs:{a:A,b:u},backend:n});l.push(h);const d=YW({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:i}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const MG={kernelName:Pw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;TV(o,"min");const s=Cv(a,o.shape);let c=s;const l=qE(c,o.shape.length);let u=o;null!=l&&(u=Ej({inputs:{x:o},backend:n,attrs:{perm:l}}),c=YE(c.length,o.shape.length)),GE("min",c,u.shape.length);const[A,h]=WE(u.shape,c),d=gv(h),p=Pv(gv(A),u.dtype),f=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const e=m*d;let t=f[e];for(let n=0;n<d;++n){const r=f[e+n];(Number.isNaN(r)||r<t)&&(t=r)}p[m]=t}null!=l&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(A,u.dtype,p);if(i){const e=fj({inputs:{x:g},backend:n,attrs:{shape:KE(A,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},QG=VV(((e,t)=>Math.min(e,t))),HG=lj(Mw,QG),zG={kernelName:Mw,backendName:"cpu",kernelFunc:HG};const VG={kernelName:Qw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,mode:i}=r;TV(o,"mirrorPad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),c=a.map((e=>e[0])),l=a.map(((e,t)=>e[0]+o.shape[t])),u="reflect"===i?0:1,A=n.data.get(o.dataId).values,h=o.shape.length,d=Ov(o.shape),p=gv(s),f=s.length,g=Ov(s),m=Bv(o.dtype,p);for(let y=0;y<p;y++){let e=zv(y,f,g);for(let n=0;n<f;n++)e[n]<c[n]?e[n]=2*c[n]-e[n]-u:e[n]>=l[n]&&(e[n]=2*(l[n]-1)-e[n]+u);e=e.map(((e,t)=>e-c[t]));const t=Hv(e,h,d);m[y]=A[t]}return{dataId:n.write(m,s,o.dtype),shape:s,dtype:o.dtype}}},jG=VV(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),WG=lj(Hw,jG),KG={kernelName:Hw,backendName:"cpu",kernelFunc:WG};function GG(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=o.shape.length;let s=a;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));const c=Cv([s],o.shape),l=EG({inputs:{x:o},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),u=KE(l.shape,c),A=fj({inputs:{x:l},backend:n,attrs:{shape:u}}),h=kK({inputs:{a:o,b:A},backend:n}),d=hK({inputs:{x:h},backend:n}),p=YW({inputs:{x:d},backend:n,attrs:{axis:c,keepDims:!1}}),f=fj({inputs:{x:p},backend:n,attrs:{shape:u}}),g=bK({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}const qG={kernelName:Lx,backendName:"cpu",kernelFunc:GG};const XG={kernelName:zw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r;TV(o,"multinomial");const c=s?o:GG({inputs:{logits:o},backend:n,attrs:{dim:-1}}),l=c.shape[0],u=c.shape[1],A=n.data.get(c.dataId).values,h=[l,a],d=Pv(gv(h),"int32");for(let p=0;p<l;++p){const e=p*u,t=new Float32Array(u-1);t[0]=A[e];for(let o=1;o<t.length;++o)t[o]=t[o-1]+A[e+o];const n=AF.alea(i.toString()),r=p*a;for(let o=0;o<a;++o){const e=n();d[r+o]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){d[r+o]=n;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(h,"int32",d)}};function YG(e,t,n){const r=OC(-1,n);return KW([],t,r,e,n)}const ZG={kernelName:jw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;TV(r,"neg");const o=n.data.get(r.dataId).values,[a,i]=YG(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}},JG=ZT;const $G={kernelName:Kw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=r;TV(o,"NonMaxSuppression");const l=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,{selectedIndices:A}=JG(l,u,i,s,c);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}},eq=JT;const tq={kernelName:Gw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:l}=r;TV(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,A=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:d}=eq(u,A,i,s,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},nq=$T;const rq={kernelName:qw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:l}=r;TV(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,A=n.data.get(a.dataId).values,h=i,d=s,p=c,f=l,{selectedIndices:g,selectedScores:m}=nq(u,A,h,d,p,f);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}},oq=VV(((e,t)=>e!==t?1:0)),aq=lj(Ww,oq,null,"bool"),iq={kernelName:Ww,backendName:"cpu",kernelFunc:aq};const sq={kernelName:Yw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:c}=r;TV(o,"oneHot");const l=gv(o.shape),u=new Float32Array(l*i);u.fill(c);const A=n.data.get(o.dataId).values;for(let h=0;h<l;++h)A[h]>=0&&A[h]<i&&(u[h*i+A[h]]=s);return n.makeTensorInfo([...o.shape,i],a,u)}};function cq(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=oj({inputs:{input:r},backend:n}),t=cq({inputs:{x:e},backend:n}),o=mW({inputs:{input:r},backend:n}),a=cq({inputs:{x:o},backend:n}),i=tj({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return FK({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const lq={kernelName:nC,backendName:"cpu",kernelFunc:cq};const uq={kernelName:Xw,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===o.dtype){const t=oj({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=mW({inputs:{input:o},backend:r}),i=cq({inputs:{x:a},backend:r}),s=tj({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return FK({backend:r,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}};function Aq(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return pK({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{pv(a,e.shape,"All tensors passed to stack must have matching shapes"),dv(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=vW({inputs:t.map((e=>{const t=pK({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const hq={kernelName:Zw,backendName:"cpu",kernelFunc:Aq};const dq={kernelName:Jw,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;TV(o,"pad");const s=a.map(((e,t)=>e[0]+o.shape[t]+e[1])),c=a.map((e=>e[0])),l=n.data.get(o.dataId).values,u=gv(o.shape),A=o.shape.length,h=Ov(o.shape),d=gv(s),p=s.length,f=Ov(s),g=Bv(o.dtype,d);0!==i&&g.fill(i);for(let m=0;m<u;m++){const e=zv(m,A,h).map(((e,t)=>e+c[t]));g[Hv(e,p,f)]=l[m]}return{dataId:n.write(g,s,o.dtype),shape:s,dtype:o.dtype}}},pq=VV(((e,t)=>Math.pow(e,t))),fq=lj($w,pq),gq={kernelName:$w,backendName:"cpu",kernelFunc:fq};function mq(e,t,n,r){const[o,a]=WE(e,r),i=Ak(t,"int32"),s=Pv(gv(o),i),c=gv(a);for(let l=0;l<s.length;++l){const e=l*c;let t=1;for(let r=0;r<c;++r)t*=n[e+r];s[l]=t}return{outVals:s,outShape:o,outDtype:i}}const yq={kernelName:tx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;TV(o,"prod");const s=o.shape.length,c=Cv(a,o.shape),l=qE(c,s);let u=c,A=o;const h=[];null!=l&&(A=Ej({inputs:{x:o},backend:n,attrs:{perm:l}}),h.push(A),u=YE(u.length,s));const d=n.data.get(A.dataId).values,{outVals:p,outShape:f,outDtype:g}=mq(A.shape,A.dtype,d,u);let m=f;return i&&(m=KE(f,c)),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(m,g,p)}};function vq(e,t,n,r){const o=[];let a=0;const i=t.length-1+n.length,s=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],o=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let c=1;for(let l=0;l<t.length-1;++l){c*=t[l];const e=t[l+1];for(let t=1;t<c+1;++t)s[l].push(t*e)}for(let l=0;l<e.length;++l){let r=e[l],i=e[l]+1;for(let e=0;e<n.length;++e){const o=n[e],a=e+t.length-1;if(a>=0){const e=s[a],t=e[e.length-1]-o[r];for(let n=r;n<i;++n)s[a].push(o[n+1]+t)}r=o[r],i=o[i]}i!==r&&(o.push([r,i]),a+=i-r)}return{outSplits:s,valueSlices:o,numValues:a}}function bq(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function wq(e,t,n,r,o){const a=t.slice();a[0]=o;const i=Sv(n,gv(a)),s=e.length;return function(e,t,n,r,o,a){const i=bq(t,2)[1],s=bq(a,2)[1];let c=0;for(const l of n)for(let t=l[0];t<l[1];++t){for(let n=0;n<r;++n)o[c*s+n]=e[t*i+n];++c}}(e,t,r,0===s?0:s/t[0],i,a),[i,a]}function xq(e,t,n,r,o,a,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const o=zv(r,t.length,Ov(t)).join(",");throw new Error("indices[".concat(o,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(a,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:l,valueSlices:u,numValues:A}=vq(a,i,e,c),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=Sv("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(l),d=wq(n,r,o,u,A);return[h,d[0],d[1]]}const Cq={kernelName:nx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,c=o.map((e=>n.data.get(e.dataId).values)),l=o.map((e=>e.shape)),u=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,[h,d,p]=xq(c,l,u,a.shape,a.dtype,A,i.shape),f=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(p,a.dtype,d);return f.concat([g])}},kq=2147483647;function Bq(e,t,n,r,o,a,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,c=0===o.length,l=0===i.length,u=[];s||u.push(t[0]),c||u.push(o[0]),l||u.push(i[0]);for(let f=1;f<u.length;++f)if(u[f]!==u[f-1])throw new Error("starts, limits, and deltas must have the same shape");const A=0===u.length?1:u[0],h=Sv("int32",A+1);h[0]=0;for(let f=0;f<A;++f){const t=s?e[0]:e[f],n=c?r[0]:r[f],o=l?a[0]:a[f];if(0===o)throw new Error("Requires delta != 0");let i;if(o>0&&n<t||o<0&&n>t)i=0;else if(i=Math.ceil(Math.abs((n-t)/o)),i>kq)throw new Error("Requires ((limit - start) / delta) <= ".concat(kq));h[f+1]=h[f]+i}const d=Sv(n,h[A]);let p=0;for(let f=0;f<A;++f){const t=h[f+1]-h[f];let n=s?e[0]:e[f];const r=l?a[0]:a[f];for(let e=0;e<t;++e)d[p++]=n,n+=r}return[h,d]}const Sq={kernelName:rx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,[l,u]=Bq(i,r.shape,r.dtype,s,o.shape,c,a.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([u.length],r.dtype,u)]}};var Iq=G_;class Eq{constructor(e,t,n,r,o,a,i,s,c,l){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=s,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=X_(l),this.raggedRank=Y_(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Iq.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Iq.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Iq.VALUE_ROWIDS:return Eq.getMaxWidthValueRowID(t);case Iq.ROW_SPLITS:return Eq.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(Iq[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],o=0;for(let a=1;a<t;++a){const t=e[a];t!==r&&(r=t,o=Math.max(a-n,o),n=a)}return Math.max(t-n,o)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Fq(e,n)}calculateOutputSize(e){const t=this.valuesShape;Z_(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=q_(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let o=1;o<=this.raggedRank;++o)r[o]<0&&(r[o]=this.getMaxWidth(o));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),o=[];let a=0;for(let i=0;i<r;++i,a+=t)o.push(a);for(let i=r;i<e;++i)o.push(-1);return dv(o.length===e,(()=>"Final length of result must be equal to firstDimension.")),o}calculateOutputIndexRowSplit(e,t,n,r){const o=e.length,a=[];for(let i=0;i<o-1;++i){const o=e[i+1]-e[i];let s=Math.min(r,o),c=t[i];-1===c&&(s=0);for(let e=0;e<s;++e)a.push(c),c+=n;for(let e=0;e<o-s;++e)a.push(-1)}if(o>0&&a.length!==e[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,t,n,r){const o=e.length,a=[];if(0===o)return[];let i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));let c=t[s];a.push(c);for(let l=1;l<o;++l){const o=e[l];if(o===s)c>=0&&(++i,i<r?c+=n:c=-1);else{if(i=0,s=o,o>=t.length)throw new Error("Got nextValueRowId=".concat(o," which is not less than ").concat(t.length));c=t[o]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,t,n,r){const o=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case Iq.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,t,n,r);case Iq.ROW_SPLITS:if(o.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(o.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(o,t,n,r);default:throw new Error("Unsupported partition type: ".concat(Iq[a]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Iq.FIRST_DIM_SIZE:return e[0];case Iq.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Iq.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(Iq[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let a=n.length-2;a>=0;--a)n[a]=n[a+1]*t[a+1];const r=Fq(t,!1),o=Sv(this.valuesDType,gv(r));if(n[0]*t[0]>0){let a=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){a=this.calculateOutputIndex(e-1,a,n[e],t[e])}this.setOutput(this.raggedRank,a,o,r)}return[r,o]}setOutput(e,t,n,r){if(0===n.length)return;const o=this.values,a=n;let i=r.slice();i=i.slice(e+1);const s=gv(i),c=t.length;let l=this.defaultValue;if(l.length!==s&&1!==l.length){const e=this.defaultValueShape;Vk((()=>{const t=XI(l,e),n=hE(t,i);l=n.dataSync()}))}let u=0,A=0,h=0;for(let d=0;d<=c;++d){let e=d<c?t[d]:-1;if(e!==h){if(A<h){const e=o.subarray(u*s);Nq(a.subarray(A*s),e,(h-A)*s)}if(d>=c){const t=n.length;e=Math.floor(t/s)}if(e>h)if(1===this.defaultValue.length)a.subarray(h*s,e*s).fill(this.defaultValue[0]),h=e;else for(;e>h;){Nq(a.slice(h*s),l,s),++h}e<0?(u=d+1,A=h):(u=d,A=h,h=A+1)}else++h}}}function Nq(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Fq(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function Tq(e,t,n,r,o,a,i,s,c,l){return new Eq(e,t,n,r,o,a,i,s,c,l).compute()}const _q={kernelName:ox,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:c}=r,l=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,h=s.map((e=>n.data.get(e.dataId).values)),d=s.map((e=>e.shape)),[p,f]=Tq(l,o.shape,u,a.shape,a.dtype,A,i.shape,h,d,c);return n.makeTensorInfo(p,a.dtype,f)}};function Lq(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Pv(0,r);const o=Pv(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(let a=1;a<o.length;a++)o[a]=o[a-1]+n;return o}const Oq={kernelName:ax,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,dtype:a,step:i}=n,s=Lq(r,o,i,a);return t.makeTensorInfo([s.length],a,s)}},Rq=RV(sx,(e=>1/e)),Uq={kernelName:sx,backendName:"cpu",kernelFunc:Rq};const Dq={kernelName:hx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;TV(o,"resizeBilinear");const c=Ov(o.shape),[l,u]=s,[A,h,d,p]=o.shape,f=n.data.get(o.dataId).values,g=new Float32Array(gv([A,l,u,p])),m=[a&&l>1?h-1:h,a&&u>1?d-1:d],y=[a&&l>1?l-1:l,a&&u>1?u-1:u];let v=0;const b=m[0]/y[0],w=m[1]/y[1];for(let x=0;x<A;x++)for(let e=0;e<l;e++){let t;t=i?b*(e+.5)-.5:b*e;const n=Math.max(0,Math.floor(t)),r=t-n,o=Math.min(h-1,Math.ceil(t)),a=x*c[0]+n*c[1],s=x*c[0]+o*c[1];for(let e=0;e<u;e++){let t;t=i?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),o=t-n,l=Math.min(d-1,Math.ceil(t)),u=a+n*c[2],A=s+n*c[2],h=a+l*c[2],m=s+l*c[2];for(let e=0;e<p;e++){const t=f[u+e],n=f[A+e],a=t+(f[h+e]-t)*o,i=a+(n+(f[m+e]-n)*o-a)*r;g[v++]=i}}}return n.makeTensorInfo([A,l,u,p],"float32",g)}};const Pq={kernelName:dx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;TV([a,o],"resizeBilinearGrad");const s=Ov(o.shape),[c,l,u,A]=o.shape,[,h,d]=a.shape,p=new Float32Array(c*l*u*A),f=[i&&h>1?l-1:l,i&&d>1?u-1:u],g=[i&&h>1?h-1:h,i&&d>1?d-1:d],m=f[0]/g[0],y=f[1]/g[1],v=n.data.get(a.dataId).values;let b=0;for(let w=0;w<c;w++){const e=w*s[0];for(let t=0;t<h;t++){const n=t*m,r=Math.floor(n),o=Math.min(Math.ceil(n),l-1),a=e+r*s[1],i=e+o*s[1],c=n-r,h=1-c;for(let e=0;e<d;e++){const t=e*y,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),o=t-n,l=1-o,d=a+n*s[2],f=a+r*s[2],g=i+n*s[2],m=i+r*s[2],w=h*l,x=h*o,C=c*l,k=c*o;for(let e=0;e<A;e++){const t=v[b++];p[d+e]+=t*w,p[f+e]+=t*x,p[g+e]+=t*C,p[m+e]+=t*k}}}}return n.makeTensorInfo([c,u,l,A],"float32",p)}};const Mq={kernelName:ux,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r;TV(o,"resizeNearestNeighbor");const c=Ov(o.shape),[l,u]=s,[A,h,d,p]=o.shape,f=n.data.get(o.dataId).values,g=new Float32Array(A*l*u*p),m=[a&&l>1?h-1:h,a&&u>1?d-1:d],y=[a&&l>1?l-1:l,a&&u>1?u-1:u],v=m[0]/y[0],b=m[1]/y[1];let w=0;for(let x=0;x<A;x++){const e=x*c[0];for(let t=0;t<l;t++){const n=i?v*(t+.5):v*t;let r=Math.min(h-1,a?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const o=e+r*c[1];for(let e=0;e<u;e++){const t=i?b*(e+.5):b*e;let n=Math.min(d-1,a?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=o+n*c[2];for(let e=0;e<p;e++){const t=f[r+e];g[w++]=t}}}}return n.makeTensorInfo([A,l,u,p],o.dtype,g)}};const Qq={kernelName:Ax,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r;TV([a,o],"resizeNearestNeighborGrad");const s=Ov(o.shape),c=Ov(a.shape),[l,u,A,h]=o.shape,[,d,p]=a.shape,f=new Float32Array(l*u*A*h),g=n.data.get(a.dataId).values,m=[i&&d>1?u-1:u,i&&p>1?A-1:A],y=[i&&d>1?d-1:d,i&&p>1?p-1:p],v=m[0]/y[0],b=m[1]/y[1],w=1/v,x=1/b,C=2*Math.ceil(w)+2,k=2*Math.ceil(x)+2;for(let B=0;B<l;B++){const e=B*s[0];for(let t=0;t<u;t++){const n=e+t*s[1],r=Math.floor(t*w),o=Math.floor(r-C/2);for(let a=0;a<A;a++){const r=n+a*s[2],l=Math.floor(a*x),m=Math.floor(l-k/2);for(let n=0;n<h;n++){let s=0;for(let r=0;r<C;r++){const l=r+o;if(l<0||l>=d)continue;const h=e+l*c[1],f=l*v;if(t===Math.min(u-1,i?Math.round(f):Math.floor(f)))for(let e=0;e<k;e++){const t=e+m;if(t<0||t>=p)continue;const r=h+t*c[2],o=t*b;a===Math.min(A-1,i?Math.round(o):Math.floor(o))&&(s+=g[r+n])}}f[r+n]=s}}}}return n.makeTensorInfo(o.shape,o.dtype,f)}};const Hq={kernelName:fx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r;TV(o,"reverse");const i=o.shape.length,s=Cv(a,o.shape);if(0===i)return MV({inputs:{x:o},backend:n});const c=new JC(o.shape,o.dtype),l=n.bufferSync(o);for(let u=0;u<c.size;u++){const e=c.indexToLoc(u),t=e.slice();s.forEach((e=>t[e]=o.shape[e]-1-t[e])),c.set(l.get(...t),...e)}return n.makeTensorInfo(c.shape,c.dtype,c.values)}},zq={kernelName:aC,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,c=r,l=Bv(o.dtype,gv(o.shape)),[u,A,h,d]=o.shape,[p,f]=eL(s,A,h),g=Math.sin(a),m=Math.cos(a),y=c.data.get(o.dataId).values;for(let v=0;v<u;v++){const e=v*h*A*d;for(let t=0;t<A;t++){const n=t*(h*d);for(let r=0;r<h;r++){const o=r*d;for(let a=0;a<d;a++){const s=[u,t,r,a],c=s[2],v=s[1];let b=(c-p)*m-(v-f)*g,w=(c-p)*g+(v-f)*m;b=Math.round(b+p),w=Math.round(w+f);let x=i;if("number"!==typeof i&&(x=3===a?255:i[a]),b>=0&&b<h&&w>=0&&w<A){x=y[e+w*(h*d)+b*d+a]}l[e+n+o+a]=x}}}}return{dataId:c.write(l,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Vq=RV(gx,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),jq={kernelName:gx,backendName:"cpu",kernelFunc:Vq},Wq=OV((e=>1/Math.sqrt(e))),Kq=UV(mx,Wq),Gq={kernelName:mx,backendName:"cpu",kernelFunc:Kq};function qq(e,t,n,r,o,a,i,s,c,l){const u=[r/o,o],A=e.values,h=t.values;if(0===r)return YB(n,t.dtype);const d=c instanceof JC?c:YB(u,t.dtype);"string"===typeof c||"number"===typeof c?d.values.fill(c):"boolean"===typeof c&&d.values.fill(+c);for(let p=0;p<a;p++){const e=[];let a=0;for(let t=0;t<i;t++){const n=A[p*i+t];e.push(n),a+=n*s[t]}if(a<0||a>=r/o)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<o;n++)l?d.values[a*o+n]+=h[p*o+n]:d.values[a*o+n]=0===t.rank?h[0]:h[p*o+n]}return d}const Xq={kernelName:yx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:c,sliceSize:l,strides:u,outputSize:A}=sT(0,o,i),h=qq(n.bufferSync(o),n.bufferSync(a),i,A,l,c,s,u,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};function Yq(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<t?n=o+1:r=o;return r}function Zq(e,t){let n=0,r=e.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),e[o]<=t?n=o+1:r=o;return r}const Jq={kernelName:bx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=function(e,t,n,r,o,a){const i=Sv("int32",n*o);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),c=s*o;for(let e=0;e<o;++e)i[c+e]="left"===a?Yq(n,t[e+c]):Zq(n,t[e+c])}return i}(n.data.get(o.dataId).values,n.data.get(a.dataId).values,o.shape[0],o.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",s)}};const $q={kernelName:wx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t;TV([r,o,a],"select");const i=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,u=Ak(o.dtype,a.dtype),A=Pv(gv(o.shape),u);let h=0;const d=0===i||i>1||1===o.shape.length?1:gv(o.shape.slice(1));for(let p=0;p<s.length;p++)for(let e=0;e<d;e++)1===s[p]?A[h++]=c[p]:A[h++]=l[p];return n.makeTensorInfo(o.shape,u,A)}},eX=sL,tX=cL,nX=RV(xx,(e=>e>=0?tX*e:eX*(Math.exp(e)-1))),rX={kernelName:xx,backendName:"cpu",kernelFunc:nX},oX=RV(Sx,(e=>e<0?-1:e>0?1:0)),aX={kernelName:Sx,backendName:"cpu",kernelFunc:oX},iX=RV(kx,(e=>Math.sin(e))),sX={kernelName:kx,backendName:"cpu",kernelFunc:iX},cX=RV(Bx,(e=>Math.sinh(e))),lX={kernelName:Bx,backendName:"cpu",kernelFunc:cX},uX=Math.log(1.1920928955078125e-7)+2,AX=RV(Ex,(e=>{const t=e>-uX,n=e<uX,r=Math.exp(e);let o;return o=n?r:t?e:Math.log(1+r),o})),hX={kernelName:Ex,backendName:"cpu",kernelFunc:AX};const dX={kernelName:Tx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;TV([o],"spaceToBatchND");const s=gv(a),c=[[0,0]];c.push(...i);for(let g=1+a.length;g<o.shape.length;++g)c.push([0,0]);const l=dq.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),u=tL(l.shape,a,s,!1),A=nL(u.length,a.length,!1),h=rL(l.shape,a,s,!1),d=fj({inputs:{x:l},backend:n,attrs:{shape:u}}),p=Ej({inputs:{x:d},backend:n,attrs:{perm:A}}),f=fj({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}};function pX(e,t,n,r,o,a,i){const s=t[0],c=a[0],l=new Array(c),u=new Array(s),A=t[1];if(0===c){if(0!==s)throw new Error(OL(s));return[Sv(n,0),[0,A],Sv(o,0),l,u]}let h=!0,d=0;const p=new Array(c).fill(0);for(let g=0;g<s;++g){const t=e[g*A];if(t<0)throw new Error(RL(g,t));if(t>=c)throw new Error(UL(g,t,c));++p[t],h=h&&t>=d,d=t}let f=!0;for(let g=0;g<c;++g){const e=0===p[g];l[g]=e,f=f&&!e,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(f&&h){const t=e,n=r;for(let e=0;e<s;++e)u[e]=e;return[t,[s,A],n,l,u]}{const t=p[c-1],a=Sv(n,t*A),h=Sv(o,t),d=new Array(c).fill(0);for(let n=0;n<s;++n){const t=e[n*A],o=d[t],i=(0===t?0:p[t-1])+o;d[t]++;for(let r=0;r<A;++r)a[i*A+r]=e[n*A+r];h[i]=r[n],u[n]=i}for(let e=0;e<c;++e){if(0===d[e]){const t=0===e?0:p[e-1];a[t*A+0]=e;for(let e=1;e<A;++e)a[t*A+e]=0;h[t]=i}}return[a,[t,A],h,l,u]}}const fX={kernelName:Ox,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(a.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(o.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values[0],[A,h,d,p,f]=pX(s,r.shape,r.dtype,c,o.dtype,l,u);return[n.makeTensorInfo(h,r.dtype,A),n.makeTensorInfo([h[0]],o.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map((e=>Number(e))))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};function gX(e,t,n,r,o){const a=gv(r),i=t[0],s=o.length,c=[];let l=1,u=-1;for(let f=0;f<s;++f){const e=o[f];if(-1===e){if(-1!==u)throw new Error(DL(u,f));u=f,c.push(1)}else{if(e<0)throw new Error(PL(f,e));l*=e,c.push(e)}}if(-1!==u){if(l<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(a/l);if(l*e!==a)throw new Error(QL(r,c));c[u]=e}if(gv(c)!==a)throw new Error(HL(r,c));const A=r.length,h=[];if(A>0){h[A-1]=1;for(let e=A-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const d=[];if(s>0){d[s-1]=1;for(let e=s-2;e>=0;--e)d[e]=d[e+1]*c[e+1]}const p=Sv(n,i*s);for(let f=0;f<i;++f){let t=0;for(let n=0;n<A;++n)t+=e[f*A+n]*h[n];for(let e=0;e<s;++e)p[f*s+e]=Math.trunc(t/d[e]),t%=d[e]}return[p,[i,s],c]}const mX={kernelName:Rx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(o.shape));if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(a.shape));const i=Array.from(n.data.get(o.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(a.dataId).values),[l,u,A]=gX(s,r.shape,r.dtype,i,c);return[n.makeTensorInfo(u,r.dtype,l),n.makeTensorInfo([A.length],a.dtype,new Int32Array(A))]}};function yX(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,c=[t[0],e.length/t[0]],l=c[1],u=s>0?o[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const A=t.slice();A[0]=u;const h=Sv(n,A.reduce(((e,t)=>e*t),1));if(0===s)return u>0&&h.fill(i),[h,A];if(u<=0)throw new Error("segment ids must be >= 0");let d=0,p=1,f=0,g=o[d];for(;;){let t=0;if(p<s){if(t=o[p],g===t){++p;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=u)throw new Error(jL(g,u));g>f&&h.fill(i,f*l,g*l);for(let n=d;n<p;++n){const t=r[n];if(t<0||t>=c[0])throw new Error(WL(n,r[n],c[0]));for(let n=0;n<l;n++)h[g*l+n]+=e[t*l+n]}if(a)for(let e=0;e<l;e++)h[g*l+e]/=p-d;if(d=p,++p,f=g+1,g=t,p>s)break}return f<u&&h.fill(i,f*l,u*l),[h,A]}const vX={kernelName:Ux,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(a.shape));if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,[l,u]=yX(i,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(u,r.dtype,l)}};const bX={kernelName:Dx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(a.shape));if(o.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,s=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values,[l,u]=yX(i,r.shape,r.dtype,s,c);return n.makeTensorInfo(u,r.dtype,l)}};const wX={kernelName:Px,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:l,sliceSize:u,strides:A,outputSize:h}=sT(0,o,s),d=!1,p=n.bufferSync(o);let f;switch(a.dtype){case"bool":f=qq(p,n.bufferSync(a),s,h,u,l,c,A,Boolean(n.data.get(i.dataId).values[0]),d);break;case"float32":f=qq(p,n.bufferSync(a),s,h,u,l,c,A,n.data.get(i.dataId).values[0],d);break;case"int32":f=qq(p,n.bufferSync(a),s,h,u,l,c,A,n.data.get(i.dataId).values[0],d);break;case"string":f=qq(p,n.bufferSync(a),s,h,u,l,c,A,PC(n.data.get(i.dataId).values[0]),d);break;default:throw new Error("Unsupported type ".concat(a.dtype))}return n.makeTensorInfo(s,f.dtype,f.values)}};const xX={kernelName:_x,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=Cv(i,o.shape)[0],c=LL(o,a,s),l=new Array(o.shape.length).fill(0),u=o.shape.slice();return c.map((e=>{const t=[...u];t[s]=e;const r=eW({inputs:{x:o},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},CX=OV((e=>Math.sqrt(e))),kX=RV(Nx,(e=>Math.sqrt(e))),BX={kernelName:Nx,backendName:"cpu",kernelFunc:kX},SX={kernelName:Qx,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,o=n;TV(r,"square");const a=o.data.get(r.dataId).values,i=new Float32Array(a.length);for(let s=0;s<a.length;++s){const e=a[s];i[s]=e*e}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},IX=VV(((e,t)=>{const n=e-t;return n*n})),EX=lj(Mx,IX),NX={kernelName:Mx,backendName:"cpu",kernelFunc:EX},FX=OV(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=t;return e.replace(new RegExp(n,r?"g":""),o)})),TX=UV(Hx,FX),_X={kernelName:Hx,backendName:"cpu",kernelFunc:TX},LX=RV(rC,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),OX={kernelName:rC,backendName:"cpu",kernelFunc:LX};function RX(e,t,n,r){const o=YB(e,t.dtype);for(let a=0;a<o.size;a++){const e=o.indexToLoc(a),i=new Array(e.length);for(let t=0;t<i.length;t++)i[t]=e[t]*n[t]+r[t];o.set(t.get(...i),...e)}return o}const UX={kernelName:zx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:h}=r;TV(o,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:f,sliceDim0:g,isSimpleSlice:m,begin:y,end:v,strides:b}=bI(o.shape,a,i,s,c,l,u,A,h);let w;if(f)w=fj({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||m){dv(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=sI(y,v,b),t=eW({inputs:{x:o},backend:n,attrs:{begin:y,size:e}});w=fj({inputs:{x:t},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(t)}else{const e=RX(d,n.bufferSync(o),b,y);w=n.makeTensorInfo(p,e.dtype,e.values)}return w}};class DX{constructor(e,t,n,r,o,a){this.separator=DC(e),this.nGramWidths=t,this.leftPad=DC(n),this.rightPad=DC(r),this.padWidth=o,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,o,a){for(let i=0;i<o;++i){const s=this.getPadWidth(a),c=Math.max(0,s-i),l=Math.max(0,s-(o-(i+1))),u=a-(c+l),A=t+(c>0?0:i-s);let h=0;h+=c*this.leftPad.length;for(let t=0;t<u;++t)h+=e[A+t].length;h+=l*this.rightPad.length;h+=(c+l+u-1)*this.separator.length,n[r+i]=new Uint8Array(h);const d=n[r+i];let p=0;const f=e=>e.forEach((e=>d[p++]=e));for(let e=0;e<c;++e)f(this.leftPad),f(this.separator);for(let t=0;t<u-1;++t)f(e[A+t]),f(this.separator);if(u>0){f(e[A+u-1]);for(let e=0;e<l;++e)f(this.separator),f(this.rightPad)}else{for(let e=0;e<l-1;++e)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let o=1;o<r;++o){let r=t[o]>=e;if(r=r&&t[o]<=n,!r)throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(e,", ").concat(n,"]"));e=t[o]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const o=r-1,a=Sv("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=o;++t)a[t]=0;return[e,a]}a[0]=0;for(let s=1;s<=o;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),a[s]=a[s-1]+n}const i=new Array(a[o]);for(let s=0;s<o;++s){const n=t[s];let r=a[s];if(this.nGramWidths.forEach((o=>{const a=t[s+1]-t[s],c=this.getNumNGrams(a,o);this.createNGrams(e,n,i,r,c,o),r+=c})),this.preserveShort&&r===a[s]){const o=t[s+1]-t[s];if(0===o)continue;const a=o+2*this.padWidth,c=1;this.createNGrams(e,n,i,r,c,a)}}return[i,a]}}function PX(e,t,n,r,o,a,i,s){return new DX(n,r,o,a,i,s).compute(e,t)}const MX={kernelName:Vx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:l}=r,{data:u,dataSplits:A}=t,h=n.data.get(u.dataId).values,d=n.data.get(A.dataId).values,[p,f]=PX(h,d,o,a,i,s,c,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(A.shape,"int32",f)]}};function QX(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const o=t[0];let a=e.indexOf(o);for(;-1!==a;){const t=e.subarray(0,a);n&&0===t.length||r.push(t),a=(e=e.subarray(a+1)).indexOf(o)}return void(n&&0===e.length||r.push(e))}let o=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==t.indexOf(e[a])){const t=e.subarray(o,a);n&&0===t.length||r.push(t),o=a+1}}function HX(e,t,n){const r=e.length,o=[];let a=0,i=0;const s=new Array(r);for(let h=0;h<r;++h){const r=o.length;QX(e[h],t,n,o);const c=o.length-r;s[h]=c,a+=c,i=Math.max(i,c)}const c=Sv("int32",2*a),l=new Array(a),u=[r,i];let A=0;for(let h=0;h<r;++h)for(let e=0;e<s[h];++e)c[2*A]=h,c[2*A+1]=e,l[A]=o[A],++A;return[c,l,u]}const zX={kernelName:jx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values[0],[l,u,A]=HX(s,c,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}};function VX(e,t){const n=Sv("int32",e.length);for(let r=0;r<e.length;++r)n[r]=LC(e[r]).modulo(t).getLowBitsUnsigned();return n}const jX={kernelName:Wx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=VX(n.data.get(a.dataId).values,o);return n.makeTensorInfo(a.shape,"int32",i)}},WX=RV(Gx,(e=>Math.tan(e))),KX={kernelName:Gx,backendName:"cpu",kernelFunc:WX},GX=RV(qx,(e=>Math.tanh(e)));const qX={kernelName:vx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:o,updates:a}=t,{sliceRank:i,numUpdates:s,sliceSize:c,strides:l,outputSize:u}=sT(0,o,r.shape),A=n.bufferSync(o),h=n.bufferSync(a),d=n.bufferSync(r),p=qq(A,h,r.shape,u,c,s,i,l,d,!1);return n.makeTensorInfo(r.shape,p.dtype,p.values)}};function XX(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const r=YB(n,e.dtype);for(let o=0;o<r.values.length;++o){const t=r.indexToLoc(o),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const a=e.locToIndex(n);r.values[o]=e.values[a]}return r}const YX={kernelName:Xx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;TV(o,"tile");const i=XX(n.bufferSync(o),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},ZX=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function JX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,i=Math.log(o),s=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*s*(o-s)/o)*Math.sign(a-o/2);JX(e,t,Math.max(n,Math.floor(t-a*s/o+c)),Math.min(r,Math.floor(t+(o-a)*s/o+c)))}const o=e[t];let a=n,i=r;for(hv(e,n,t),ZX(e[r],o)>0&&hv(e,n,r);a<i;){for(hv(e,a,i),a++,i--;ZX(e[a],o)<0;)a+=1;for(;ZX(e[i],o)>0;)i-=1}0===ZX(e[n],o)?hv(e,n,i):(i+=1,hv(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function $X(e,t,n,r,o){const a=t[t.length-1],[i,s]=[e.length/a,a],c=Bv(n,i*r),l=Bv("int32",i*r);for(let A=0;A<i;A++){const t=A*s,n=e.subarray(t,t+s);let a=new Array(n.length);n.forEach(((e,t)=>a[t]={value:e,index:t})),r<a.length&&(JX(a,r),a=a.slice(0,r)),o&&a.sort(ZX);const i=A*r,u=c.subarray(i,i+r),h=l.subarray(i,i+r);for(let e=0;e<r;e++)u[e]=a[e].value,h[e]=a[e].index}const u=t.slice();return u[u.length-1]=r,[YB(u,n,c),YB(u,"int32",l)]}const eY={kernelName:Yx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r;TV(o,"topk");const s=n.data.get(o.dataId).values,[c,l]=$X(s,o.shape,o.dtype,a,i);return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};const tY={kernelName:Zx,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:l}=n,[u,A,h,d]=o.shape,[p,f]=null!=l?l:[A,h],g=[u,p,f,d],m=Ov(o.shape),y=m[0],v=m[1],b=m[2],w=Ov(g),x=w[0],C=w[1],k=w[2],B=Bv(o.dtype,gv(g));B.fill(c);const S=r.data.get(o.dataId).values,I=r.data.get(a.dataId).values;for(let E=0;E<u;++E){const e=1===a.shape[0]?I:I.subarray(8*E,8*E+8);for(let t=0;t<p;++t)for(let n=0;n<f;++n)for(let r=0;r<d;++r){let o;const a=e[6]*n+e[7]*t+1;if(0===a)continue;const l=(e[0]*n+e[1]*t+e[2])/a,u=(e[3]*n+e[4]*t+e[5])/a,d=nY(l,h,s),p=nY(u,A,s);switch(i){case"nearest":o=oY(S,A,h,y,v,b,E,p,d,r,c);break;case"bilinear":o=aY(S,A,h,y,v,b,E,p,d,r,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}B[E*x+t*C+n*k+r]=o}return r.makeTensorInfo(g,o.dtype,B)}return{dataId:r.write(B,g,o.dtype),shape:o.shape,dtype:o.dtype}}};function nY(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return uv(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return uv(0,n,t-1)}(e,t);case"nearest":return function(e,t){return uv(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function rY(e,t,n,r,o,a,i,s,c,l,u){return 0<=s&&s<t&&0<=c&&c<n?e[i*r+s*o+c*a+l]:u}function oY(e,t,n,r,o,a,i,s,c,l,u){return rY(e,t,n,r,o,a,i,Math.round(s),Math.round(c),l,u)}function aY(e,t,n,r,o,a,i,s,c,l,u){const A=Math.floor(s),h=Math.floor(c),d=A+1,p=h+1;return(d-s)*((p-c)*rY(e,t,n,r,o,a,i,A,h,l,u)+(c-h)*rY(e,t,n,r,o,a,i,A,p,l,u))+(s-A)*((p-c)*rY(e,t,n,r,o,a,i,d,h,l,u)+(c-h)*rY(e,t,n,r,o,a,i,d,p,l,u))}function iY(e,t,n,r){const o=Cv(t,n)[0],a=[1,n[0],1];for(let p=0;p<o;p++)a[0]*=n[p];a[1]=n[o];for(let p=o+1;p<n.length;p++)a[2]*=n[p];const i=new Map,s=new Int32Array(n[o]),c=new JC(a,r,e),l=[],u=1===a[0]&&1===a[2];for(let p=0;p<n[o];p++){let t;if(u)t=e[p].toString();else{const e=[];for(let t=0;t<a[0];t++)for(let n=0;n<a[2];n++)e.push(c.get(t,p,n));t=e.join(",")}const n=i.get(t);if(null!=n)s[p]=n;else{const e=i.size;i.set(t,e),s[p]=e,l.push(p)}}const A=a.slice();A[1]=i.size;const h=new JC(A,r);l.forEach(((e,t)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)h.set(c.get(n,e,r),n,t,r)}));const d=n.slice();return d[o]=A[1],{outputValues:h.values,outputShape:d,indices:s}}const sY={kernelName:$x,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;TV(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:s,outputShape:c,indices:l}=iY(i,o,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};const cY={kernelName:eC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o.shape.length,s=o.shape[a],c=new Array(i-1);let l=0;for(let d=0;d<i;d++)d!==a&&(c[l++]=o.shape[d]);const u=new Array(i).fill(0),A=o.shape.slice();A[a]=1;const h=new Array(s);for(let d=0;d<h.length;d++){u[a]=d;const e=eW({inputs:{x:o},backend:n,attrs:{begin:u,size:A}});h[d]=fj({inputs:{x:e},backend:n,attrs:{shape:c}}),n.disposeIntermediateTensorInfo(e)}return h}};const lY={kernelName:tC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r;TV(o,"unsortedSegmentSum");const s=[],c=[],l=o.shape.length-a.shape.length;let u=a;for(let h=0;h<l;++h){const e=pK({inputs:{input:u},backend:n,attrs:{dim:h+1}});u=e,c.push(e)}for(let h=0;h<i;++h){const e=OC(h,"int32"),t=n.makeTensorInfo([],"int32",e),r=tK({inputs:{a:t,b:u},backend:n}),a=sj({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),i=qW({inputs:{a:a,b:o},backend:n}),l=YW({inputs:{x:i},backend:n,attrs:{axis:0,keepDims:!1}});s.push(l),c.push(t),c.push(r),c.push(a),c.push(i),c.push(l)}const A=Aq({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}},uY=[vj,wj,Cj,Bj,pj,Sj,Fj,Tj,_j,Lj,Rj,Dj,Mj,zj,jj,qj,Xj,Yj,Zj,yj,Jj,nW,aW,cW,lW,cj,hW,pW,nj,fW,bW,xW,CW,kW,BW,SW,IW,NW,TW,_W,LW,OW,RW,UW,PW,MW,QW,HW,zW,VW,jW,WW,JW,PV,$W,nK,uK,dK,fK,yK,NK,TK,_K,RK,PK,MK,QK,zK,jK,GK,YK,QV,ZK,yW,$K,tG,rG,zV,iG,lG,AG,pG,gG,vG,wG,kG,BG,SG,NG,_G,LG,OG,RG,UG,DG,PG,MG,zG,VG,KG,XG,XW,ZG,$G,tq,rq,iq,sq,uq,hq,dq,gq,KV,yq,Cq,Sq,_q,Oq,aj,wK,Uq,qV,YV,gj,Dq,Pq,Mq,Qq,Hq,zq,jq,Gq,Xq,Jq,$q,rX,$V,aX,sX,lX,tW,qG,hX,dX,fX,mX,vX,bX,wX,xX,BX,SX,NX,_X,OX,UX,MX,zX,jX,BK,ZW,KX,{kernelName:qx,backendName:"cpu",kernelFunc:GX},qX,YX,eY,tY,Nj,sY,cY,lY,lq];for(const n of uY)gC(n);const AY={},hY={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dY(e,t){if(!(e in AY)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Gv().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete AY[e]}),!1),Gv().getBool("SOFTWARE_WEBGL_ENABLED")&&(hY.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",hY)||n.getContext("experimental-webgl",hY);return n.getContext("webgl2",hY)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;AY[e]=n}const n=AY[e];return null==n||n.isContextLost()?(delete AY[e],dY(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),AY[e])}var pY,fY,gY;function mY(e,t){return[t,e]}function yY(e){const t=gv(e);return vv(Math.ceil(t/4))}function vY(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function bY(e,t){const n=e;let r,o,a,i,s,c,l,u,A,h;return 2===Gv().getNumber("WEBGL_VERSION")?(r=n.R32F,o=n.R16F,a=n.RGBA16F,i=n.RGBA32F,s=n.RED,l=4,u=1,A=n.HALF_FLOAT,h=n.FLOAT,c=n.RGBA8):(r=e.RGBA,o=e.RGBA,a=e.RGBA,i=n.RGBA,s=e.RGBA,l=4,u=4,A=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,c=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:c,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:A,textureTypeFloat:h}}function wY(e,t){const n=t();return Gv().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(pY||(pY={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(fY||(fY={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(gY||(gY={}));function xY(e){return!!(Gv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function CY(e,t){return _Y(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const kY=/ERROR: [0-9]+:([0-9]+):/g;function BY(e,t){const n=kY.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map(((e,t)=>bv((t+1).toString(),a)+e));let s=0;for(let A=0;A<i.length;A++)s=Math.max(i[A].length,s);const c=i.slice(0,r-1),l=i.slice(r-1,r),u=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(bv(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function SY(e,t){if(wY(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function IY(e,t,n,r,o,a,i){const s=e.getAttribLocation(t,n);return-1!==s&&(wY(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),wY(e,(()=>e.vertexAttribPointer(s,o,e.FLOAT,!1,a,i))),wY(e,(()=>e.enableVertexAttribArray(s))),!0)}function EY(e,t,n,r){wY(e,(()=>function(e,t,n){LY(e,n),wY(e,(()=>e.activeTexture(e.TEXTURE0+n))),wY(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),wY(e,(()=>e.uniform1i(n,r)))}function NY(e,t,n){wY(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),wY(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function FY(e,t){wY(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),wY(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function TY(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function _Y(e,t,n){const r=wY(e,(()=>t()));if(null==r)throw new Error(n);return r}function LY(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function OY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return gv(e.slice(0,e.length-t))}function RY(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function UY(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[OY(e),...RY(e)]),t}function DY(e){return e%2===0}function PY(e,t){if(mv(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(DY(n)&&DY(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&DY(e[0])&&DY(t[0])}let MY,QY;function HY(e,t){return null!=e.getExtension(t)}function zY(e){try{if(null!=dY(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function VY(e){if(0===e)return!1;const t=dY(e);if(1!==e){if(HY(t,"EXT_color_buffer_float"))return jY(t);const e="EXT_color_buffer_half_float";if(HY(t,e)){const n=t.getExtension(e);return function(e,t){const n=bY(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const o=1,a=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,n)}return!1}if(!HY(t,"OES_texture_float"))return!1;if(!HY(t,"WEBGL_color_buffer_float"))return!1;return jY(t)}function jY(e){const t=bY(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function WY(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&dv("complex64"!==e.dtype,(()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."))}))}const KY=Gv();function GY(){let e,t,n,r,o,a,i,s,c,l;return 2===Gv().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=Gv().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function qY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Ov(t);return r.map(((t,o)=>{const a="int ".concat(e[o]," = ").concat(n," / ").concat(t),i=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * ").concat(t):"index -= ".concat(e[o]," * ").concat(t);return"".concat(a,"; ").concat(i,";")})).join("")}function XY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Ov(t);return r.map(((t,o)=>{const a="int ".concat(e[o]," = ").concat(n," / outShapeStrides[").concat(o,"]"),i=o===r.length-1?"int ".concat(e[o+1]," = ").concat(n," - ").concat(e[o]," * outShapeStrides[").concat(o,"]"):"index -= ".concat(e[o]," * outShapeStrides[").concat(o,"]");return"".concat(a,"; ").concat(i,";")})).join("")}function YY(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map(((e,t)=>t)),o=function(e,t){const n=e.length,r=e.map((e=>"".concat(t,"[").concat(e,"]"))),o=new Array(n-1);o[n-2]=r[n-1];for(let a=n-3;a>=0;--a)o[a]="(".concat(o[a+1]," * ").concat(r[a+1],")");return o}(r,t);return o.map(((t,r)=>{const a="int ".concat(e[r]," = ").concat(n," / ").concat(o[r]),i=r===o.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(o[r]):"index -= ".concat(e[r]," * ").concat(o[r]);return"".concat(a,"; ").concat(i,";")})).join("")}function ZY(e){const t=Ov(e).map((e=>e.toString()));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}KY.registerFlag("HAS_WEBGL",(()=>KY.getNumber("WEBGL_VERSION")>0)),KY.registerFlag("WEBGL_VERSION",(()=>zY(2)?2:zY(1)?1:0)),KY.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),KY.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===KY.get("WEBGL_VERSION"))),KY.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),KY.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),KY.registerFlag("WEBGL_PACK",(()=>KY.getBool("HAS_WEBGL"))),KY.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_CLIP",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_REDUCE",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_LAZILY_UNPACK",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_CONV_IM2COL",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>KY.getBool("WEBGL_PACK"))),KY.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==MY){const t=dY(e);MY=t.getParameter(t.MAX_TEXTURE_SIZE)}return MY}(KY.getNumber("WEBGL_VERSION")))),KY.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==QY){const t=dY(e);QY=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QY)}(KY.getNumber("WEBGL_VERSION")))),KY.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=KY.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=dY(e);return t=HY(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:HY(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),KY.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>KY.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Sk())),KY.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=dY(e);if(1===e){if(!HY(t,"OES_texture_float"))return!1}else if(!HY(t,"EXT_color_buffer_float"))return!1;return jY(t)}(KY.getNumber("WEBGL_VERSION")))),KY.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!KY.getBool("WEBGL_FORCE_F16_TEXTURES")&&KY.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),KY.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>VY(KY.getNumber("WEBGL_VERSION")))),KY.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=KY.getNumber("WEBGL_VERSION"))&&null!=dY(e).fenceSync;var e})),KY.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>KY.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),KY.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),KY.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Sk()?1:-1),(e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),KY.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),KY.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),KY.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),KY.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),KY.registerFlag("WEBGL_EXP_CONV",(()=>!1)),KY.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>KY.getBool("IS_TEST"))),KY.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),KY.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),KY.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),KY.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const JY="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:$Y}=a;function eZ(e,t,n){const r=[];if(e.forEach((e=>{const t=gv(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=uZ(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));const o=r.join("\n"),a=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o="";o+=n?nZ(e,r):tZ(e,r);const a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(o+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,s=$Y(e.shapeInfo.logicalShape,t.logicalShape),c=lZ(i),l=i-a;let u;const A=["x","y","z","w","u","v"];u=0===a?"":i<2&&s.length>=1?"coords = 0;":s.map((e=>"coords.".concat(A[e+l]," = 0;"))).join("\n");let h="";h=i<2&&a>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(A[t+l]))).join(", ");let d="return outputValue;";const p=1===gv(e.shapeInfo.logicalShape),f=gv(t.logicalShape),g=1===f;if(1!==a||p||g){if(p&&!g)d=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=a-2,t=a-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?d="return vec4(outputValue.x);":s.indexOf(e)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(h,");\n      ").concat(d,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&mv(i,a))return"\n      float ".concat(o,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const l=lZ(c),u=$Y(e.shapeInfo.logicalShape,t.logicalShape),A=c-s;let h;const d=["x","y","z","w","u","v"];h=0===s?"":c<2&&u.length>=1?"coords = 0;":u.map((e=>"coords.".concat(d[e+A]," = 0;"))).join("\n");let p="";p=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>"coords.".concat(d[t+A]))).join(", ");return"\n    float ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(h,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}(e,t));return o}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,s=GY(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(s);let l,u,A=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(rZ,"\n    ").concat(oZ,"\n    ").concat(aZ,"\n  ");return t}(s);t.isPacked?(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(mv(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const o=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),a=o*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),a=o*Math.ceil(e[e.length-2]/2);let i=a,s="",c="b, r, c";for(let l=2;l<e.length-1;l++)i*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(i,";\n      index -= b").concat(l," * ").concat(i,";\n    ")+s,c="b".concat(l,", ")+c;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(o,");\n      int c = imod(index, ").concat(o,") * 2;\n\n      return ivec").concat(e.length,"(").concat(c,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(s)):(l=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(mv(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=XY(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=qY(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=XY(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=qY(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=qY(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=qY(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(s)),n.packedInputs&&(A+=iZ);return[A,c,u,o,l,a,n.userCode].join("\n")}function tZ(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[o,a]=e.shapeInfo.texShape;if(1===o&&1===a)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const i=sZ(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[s,c]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", ").concat(i,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(cZ(e),"\n      }\n    ");const o=e.shapeInfo.texShape,a=o[0],i=o[1];if(1===i&&1===a)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=sZ(n);if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===a)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&mv(n,a)){if(t)return"\n      float ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=a[0],n=a[1];return"\n    float ".concat(o,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:i,keptDims:s}=kv(n),c=i;if(c.length<n.length){const n=AZ(e,c),r=["row","col"];return"\n      ".concat(tZ(n,t),"\n      float ").concat(o,"(int row, int col) {\n        return ").concat(o,"(").concat(hZ(r,s),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(cZ(e),"\n      }\n    ");const l=a[0],u=a[1],A=sZ(r);if(1===u)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===l)return t?"\n      float ".concat(o,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(o,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(A,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(o,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(A,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:s,keptDims:c}=kv(n),l=s;if(l.length<n.length){const n=AZ(e,l),r=["row","col","depth"];return"\n        ".concat(tZ(n,t),"\n        float ").concat(o,"(int row, int col, int depth) {\n          return ").concat(o,"(").concat(hZ(r,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(i,", 1)));\n        ").concat(cZ(e),"\n      }\n    ");const u=e.shapeInfo.texShape,A=u[0],h=u[1],d=e.shapeInfo.flatOffset;if(h===a&&null==d)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(o,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(A,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==d)return t?"\n      float ".concat(o,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(o,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(A,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const p=sZ(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(o,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(i," + depth + ").concat(p,";\n        vec2 uv = uvFromFlat(").concat(A,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,s=n[1]*i,{newShape:c,keptDims:l}=kv(n);if(c.length<n.length){const n=AZ(e,c),r=["row","col","depth","depth2"];return"\n      ".concat(tZ(n,t),"\n      float ").concat(o,"(int row, int col, int depth, int depth2) {\n        return ").concat(o,"(").concat(hZ(r,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(a,", 1)));\n        ").concat(cZ(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,h=A[0],d=A[1],p="int stride2 = ".concat(r,"Shape[3];"),f="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(d===s&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        ").concat(p,"\n        ").concat(f,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(d,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(d===a&&null==u)return t?"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(o,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(d,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const m=sZ(r);if(t)return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(p,"\n      ").concat(f,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(m,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(o,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index + ").concat(m,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,{newShape:c,keptDims:l}=kv(t);if(c.length<t.length){const t=AZ(e,c),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(tZ(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(hZ(n,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(a,", ").concat(o,")) +\n          depth3;\n        ").concat(cZ(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,h=A[0],d=A[1];if(d===s&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(a,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(d,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(d===o&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(d,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const p=sZ(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(a," +\n          depth2 * ").concat(o," + depth3 + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:a}=kv(t);if(o.length<t.length){const t=AZ(e,o),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(tZ(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(hZ(n,a),");\n      }\n    ")}const i=t[5],s=t[4]*i,c=t[3]*s,l=t[2]*c,u=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(l,", ").concat(c,", ").concat(s,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(i,", 1)));\n        ").concat(cZ(e),"\n      }\n    ");const A=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===u&&null==A)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(s,", ").concat(i,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===i&&null==A)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=sZ(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(s," + depth3 * ").concat(i," + depth4 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function nZ(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=GY();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=GY();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=a[0],s=a[1],c=GY();if(null!=a&&mv(n,a))return t?"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(o,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(c.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(o,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){const r=[1,2],a=AZ(e,n.slice(1)),i=["b","row","col"];return"\n        ".concat(nZ(a,t),"\n        vec4 ").concat(o,"(int b, int row, int col) {\n          return ").concat(o,"(").concat(hZ(i,r),");\n        }\n      ")}const s=GY();if(t)return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=i[0],l=i[1],u=Math.ceil(n[2]/2),A=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(o,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(l,", ").concat(A,", ").concat(u,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=GY();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const a=e.shapeInfo.logicalShape,i=a.length,s=e.shapeInfo.texShape,c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=c[0],u=c[1],A=Math.ceil(a[i-1]/2);let h=A*Math.ceil(a[i-2]/2),d="int b, int row, int col",p="b * ".concat(h," + (row / 2) * ").concat(A," + (col / 2)");for(let f=2;f<i-1;f++)d="int b".concat(f,", ")+d,h*=a[i-f-1],p="b".concat(f," * ").concat(h," + ")+p;return"\n    vec4 ".concat(r,"(").concat(d,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(l,");\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const rZ="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",oZ="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",aZ="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",iZ="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function sZ(e){return"offset".concat(e)}function cZ(e){const t=e.name,n=gv(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function lZ(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function uZ(e,t,n){const{newShape:r,keptDims:o}=kv(t),a=t.length,i=e&&3===a&&1===t[0],s=i?t.slice(1):r,c=!e&&a>1&&!mv(t,n)&&r.length<a||i;return{useSqueezeShape:c,uniformShape:c?s:t,keptDims:o}}function AZ(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function hZ(e,t){return t.map((t=>e[t])).join(", ")}function dZ(e,t,n,r){const o=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=eZ(o,i,t),c=function(e,t){const n=_Y(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(wY(e,(()=>e.shaderSource(n,t))),wY(e,(()=>e.compileShader(n))),Gv().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw BY(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(c);return Gv().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(l),Object.assign({program:t,fragmentShader:c,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:i},pZ(e,t,l)))}function pZ(e,t,n){const r=[],o=[];let a,i,s,c=null,l=null;l=e.getUniformLocation(n,"NAN",!1),1===Gv().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const A of t.variableNames){const o={name:A,uniform:e.getUniformLocation(n,A,u),offset:e.getUniformLocation(n,"offset".concat(A),u)};t.enableShapeUniforms&&(o.shape=e.getUniformLocation(n,"".concat(A,"Shape"),u),o.texShape=e.getUniformLocation(n,"".concat(A,"TexShape"),u)),r.push(o)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",u),s=e.getUniformLocation(n,"outShapeStrides",u),i=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const A of t.customUniforms)o.push(e.getUniformLocation(n,A.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:c,nanLoc:l,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:i}}function fZ(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach(((e,n)=>{const r=e.logicalShape,o=t[n],a=o.shape;if(!mv(r,a))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(a," must match"));if(e.isUniform&&o.isUniform)return;const i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!mv(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}))}function gZ(e){return Gv().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class mZ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pY.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=GY();this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?XY(["r","c","d"],e):qY(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class yZ{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pY.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=GY();this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?XY(["r","c","d"],e):qY(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class vZ{constructor(e){this.variableNames=["A"],this.outTexUsage=fY.DOWNLOAD;const t=GY();this.outputShape=e,this.userCode="\n      ".concat(JY,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class bZ{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=fY.DOWNLOAD;const t=GY();this.outputShape=e,this.userCode="\n      ".concat(JY,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const wZ={R:0,G:1,B:2,A:3};class xZ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=GY();this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length);let o="result";t&&(o="floor(result * 255. + 0.5)");let a="";for(let i=0;i<n.length;i++){const e=n[i];a+="\n          if(offset == ".concat(i,") {\n            result = values[").concat(wZ[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ZY(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(a,"\n        }\n        ").concat(r.output," = vec4(").concat(o,", 0., 0., 0.);\n      }\n    ")}}class CZ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=GY();this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length);let r="",o="result";t&&(o="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let t=0;t<=1;t++){const o=2*a+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(a," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(a,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(o,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(o,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(o,"] = values[2];\n            } else {\n              result[").concat(o,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ZY(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(o,";\n        }\n    ")}}function kZ(e){const t=GY();return function(e,t){const n=_Y(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(wY(e,(()=>e.shaderSource(n,t))),wY(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function BZ(e){return function(e,t){const n=_Y(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return wY(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),wY(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function SZ(e){return function(e,t){const n=_Y(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return wY(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),wY(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function IZ(e,t,n,r,o,a){!function(e,t){const n=Gv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);const i=function(e){return _Y(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return wY(e,(()=>e.bindTexture(s,i))),wY(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),wY(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),wY(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),wY(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===Gv().getNumber("WEBGL_VERSION")?wY(e,(()=>e.texImage2D(s,0,r,t,n,0,o,a,null))):wY(e,(()=>e.texStorage2D(s,1,r,t,n))),wY(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function EZ(e){return e.internalFormatFloat}function NZ(e){return e.internalFormatHalfFloat}function FZ(e){return e.downloadTextureFormat}function TZ(e){return e.internalFormatPackedFloat}function _Z(e){return e.internalFormatPackedHalfFloat}function LZ(e,t,n,r,o,a,i,s){const c=e,l=new Float32Array(function(e,t){const[n,r]=vY(e,t);return n*r*4}(a,i));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}class OZ{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Gv().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){AY[e]=t}(t,e)):this.gl=dY(t),e=this.gl,2===Gv().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>wY(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>wY(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>wY(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>wY(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>wY(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>wY(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>wY(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>wY(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Gv().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=CY(this.gl,e),HY(this.gl,t))this.textureHalfFloatExtension=CY(this.gl,t);else if(Gv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),HY(this.gl,r))this.colorBufferHalfFloatExtension=CY(this.gl,r);else if(Gv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",HY(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!HY(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=BZ(this.gl),this.indexBuffer=SZ(this.gl),this.framebuffer=function(e){return _Y(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=bY(this.gl,this.textureHalfFloatExtension)}get debug(){return Gv().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;wY(e,(()=>e.finish())),wY(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),wY(e,(()=>e.deleteFramebuffer(this.framebuffer))),wY(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),wY(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),wY(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=mY(t,n);return IZ(e,o,a,EZ(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=mY(t,n);return IZ(e,o,a,NZ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=mY(t,n);return IZ(e,o,a,FZ(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){wY(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===Gv().getNumber("WEBGL_VERSION")?wY(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):wY(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===Gv().getNumber("WEBGL_VERSION")?wY(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):wY(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),wY(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,o,a){let i,s,c;wY(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),o instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,c=a.internalFormatPackedFloat),i.set(o),2===Gv().getNumber("WEBGL_VERSION")?wY(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i))):wY(e,(()=>e.texImage2D(e.TEXTURE_2D,0,c,n,r,0,e.RGBA,s,i))),wY(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=vY(t,n);return IZ(e,o,a,_Z(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[o,a]=vY(t,n);return IZ(e,o,a,TZ(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(FY(this.gl,this.framebuffer),this.outputTexture=null),wY(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[o,a]=mY(t,n),i=new Uint8Array(t*n*4);return wY(e,(()=>e.readPixels(0,0,o,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,o,a){return LZ(this.gl,e,0,0,0,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n,r){const o=e.createBuffer();wY(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o)));const a=16*t*n;return wY(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),wY(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),wY(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),o}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Gv().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(o,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=o}else Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return wY(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=kZ(t));const n=function(e){return _Y(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);wY(t,(()=>t.attachShader(n,this.vertexShader))),wY(t,(()=>t.attachShader(n,e))),function(e,t){if(wY(e,(()=>e.linkProgram(t))),!Gv().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&SY(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;wY(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){wY(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),IY(e,t,"clipSpacePos",n,3,20,0)&&IY(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(wY(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&SY(this.gl,this.program),wY(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return _Y(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),wY(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),EY(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,o]=vY(t,n);this.setOutputMatrixTextureDriver(e,r,o)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&SY(this.gl,this.program),TY(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}wY(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),wY(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=CY(this.gl,2===Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await wv((()=>this.disposed||this.isQueryAvailable(e,Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Gv().platform&&(n=Gv().platform.setTimeoutCustom.bind(Gv().platform)),wv((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),NY(this.gl,e,this.framebuffer),this.debug&&TY(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(NY(this.gl,this.outputTexture,this.framebuffer),this.debug&&TY(this.gl)):FY(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;NY(r,e,this.framebuffer),this.debug&&TY(r),this.outputTexture=e,wY(r,(()=>r.viewport(0,0,t,n))),wY(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),wY(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:RZ,bincountImpl:UZ,bincountReduceImpl:DZ,bitwiseAndImpl:PZ,castImpl:MZ,ceilImpl:QZ,concatImpl:HZ,equalImpl:zZ,expImpl:VZ,expm1Impl:jZ,floorImpl:WZ,gatherNdImpl:KZ,gatherV2Impl:GZ,greaterImpl:qZ,greaterEqualImpl:XZ,lessImpl:YZ,lessEqualImpl:ZZ,linSpaceImpl:JZ,logImpl:$Z,maxImpl:eJ,maximumImpl:tJ,minimumImpl:nJ,multiplyImpl:rJ,negImpl:oJ,notEqualImpl:aJ,prodImpl:iJ,raggedGatherImpl:sJ,raggedRangeImpl:cJ,raggedTensorToTensorImpl:lJ,rangeImpl:uJ,rsqrtImpl:AJ,scatterImpl:hJ,sigmoidImpl:dJ,simpleAbsImpl:pJ,sliceImpl:fJ,sparseFillEmptyRowsImpl:gJ,sparseReshapeImpl:mJ,sparseSegmentReductionImpl:yJ,sqrtImpl:vJ,staticRegexReplaceImpl:bJ,stridedSliceImpl:wJ,stringNGramsImpl:xJ,stringSplitImpl:CJ,stringToHashBucketFastImpl:kJ,subImpl:BJ,tileImpl:SJ,topKImpl:IJ,transposeImpl:EJ,uniqueImpl:NJ}=S;function FJ(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>"".concat(e,".").concat(t)))}function TJ(e,t){return 1===t?[e]:FJ(e,t)}class _J{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=gZ(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=TJ("rc",this.rank),t=lZ(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let o="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)o="".concat(e[e.length-1-t],",")+o;t.push(o)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class LJ{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?YY(["r","c","d"],"inputShape"):qY(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":ZY(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class OJ{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=UJ(t,n),o=DJ(e,r,n);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=RJ(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const e=this.freeTextures[o].pop();return this.usedTextures[o].push(e),e}let i;return r===gY.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===gY.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===gY.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===gY.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===gY.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const o=UJ(n,r),a=DJ(t,o,r);a in this.freeTextures||(this.freeTextures[a]=[]);const i=RJ(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Gv().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const c=this.usedTextures[a],l=c&&c.indexOf(e);if(null==l||l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[l]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function RJ(e,t,n,r,o){const a=function(e,t){switch(e){case gY.PACKED_2X2_FLOAT32:return TZ(t);case gY.PACKED_2X2_FLOAT16:return _Z(t);case gY.UNPACKED_FLOAT32:return EZ(t);case gY.UNPACKED_FLOAT16:return NZ(t);case gY.PACKED_4X1_UNSIGNED_BYTE:return FZ(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let i;if(o){const[t,n]=vY(e[0],e[1]);i=t*n}else{const[t,n]=mY(e[0],e[1]);i=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,a);return i*s}function UJ(e,t){if(e===fY.UPLOAD)return gY.PACKED_2X2_FLOAT32;if(e===fY.RENDER||null==e)return function(e){return Gv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?gY.PACKED_2X2_FLOAT32:gY.UNPACKED_FLOAT32:e?gY.PACKED_2X2_FLOAT16:gY.UNPACKED_FLOAT16}(t);if(e===fY.DOWNLOAD||e===fY.PIXELS)return gY.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function DJ(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class PJ{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const MJ="if (isnan(x)) return x;",QJ="return x;",HJ="return abs(x);";const zJ="return (x >= 0.0) ? x : (exp(x) - 1.0);",VJ=MJ+"\n  return (x < 0.0) ? 0.0 : x;\n",jJ=MJ+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",WJ="return x;",KJ="return 1.0 / (1.0 + exp(-1.0 * x));",GJ="return x;",qJ="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",XJ="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",YJ="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ZJ="return 1.0 / (1.0 + exp(-1.0 * x));";class JJ{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class $J{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length);const t=e.length,n=TJ("rc",t),r=lZ(t),o=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2(".concat(a.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(i,"));\n      }\n    ")}}const e$=gT,t$={};const n$=Gv().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class r$ extends iv{nextDataId(){return r$.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Gv().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof OZ)t=e;else{const n=dY(Gv().getNumber("WEBGL_VERSION"),e);t=new OZ(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=dY(Gv().getNumber("WEBGL_VERSION"));t=new OZ(e),this.binaryCache=((n=Gv().getNumber("WEBGL_VERSION"))in t$||(t$[n]={}),t$[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new OJ(this.gpgpu),this.numMBBeforeWarning=null==Gv().global.screen?1024:Gv().global.screen.height*Gv().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new av(this,Hk())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,o,a){const i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,o]},s.texShape=[r,o];const c=UY(t),l=new xZ(c,!1,a),u=this.runWebGLProgram(l,[i],n,[[r,o]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,n){if((Gv().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Gv().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:fY.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,o){if(Gv().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:fY.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:o,slice:a,shape:i,isPacked:s}=t;if(null!=a){let t;t=s?new JJ(i,WJ):new PJ(i,WJ);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),o=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const c=null!=this.activeTimers;let l,u;if(c&&(l=UC()),"complex64"===r){u=fL(this.readSync(o.real.dataId),this.readSync(o.imag.dataId))}else u=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=UC()-l),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:o,dtype:a,complexTensorInfos:i,isPacked:s}=t;if(null!=o){let t;t=s?new JJ(r,WJ):new PJ(r,WJ);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:a}],a),o=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),o}if(null!=n)return this.convertAndCacheOnCPU(e);if(Gv().getBool("DEBUG")&&!Gv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Gv().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c,l,u=null;if("complex64"!==a&&Gv().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const t=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...yY(r))}if(this.pendingRead.set(e,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);l=fL(e[0],e[1])}else if(null==u)l=this.getValuesFromTexture(e);else{const e=gv(r);l=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=c&&this.disposeIntermediateTensorInfo(c),null!=u){const e=this.gpgpu.gl;wY(e,(()=>e.deleteBuffer(u)))}const A=this.convertAndCacheOnCPU(e,l),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(A))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Hk().removeDataId(e,this),this.pendingDeletes--),A}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:o,slice:a,dtype:i,isPacked:s,texture:c}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=a){let n;n=s?new JJ(o,WJ):new PJ(o,WJ);const r=this.runWebGLProgram(n,[{dataId:e,shape:o,dtype:i}],i),a=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),a}if(null==c)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const l=this.decode(e,t.customTexShape),u=Hk().makeTensorFromTensorInfo(l),A=this.texData.get(l.dataId);return Object.assign({tensorRef:u},A.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>PC(e)));return YB(e.shape,e.dtype,n)}catch(Vge){throw new Error("Failed to decode encoded string bytes into utf-8")}return YB(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!xY(n)){if(Gv().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),o=gv(t);if(Gv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...yY(t)).subarray(0,o);return this.disposeIntermediateTensorInfo(n),a}const a=Gv().getBool("WEBGL_PACK")&&!0===r,i=a?UY(t):t,s=a?new bZ(i):new vZ(i),c=this.runWebGLProgram(s,[{shape:i,dtype:n,dataId:e}],"float32"),l=this.texData.get(c.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),u}timerAvailable(){return Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const o=QC(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),a=QC(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(o);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:a[t],ms:e}))).map((e=>"".concat(e.name,": ").concat(e.ms))).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:UC(),endMs:null}}endTimer(e){return Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=UC(),e)}async getQueryTime(e){if(Gv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:o,isPacked:a,slice:i}=this.texData.get(e),s=i&&i.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,o,a)));const l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n$;return Gv().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&gv(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){lC("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return e$(e.shape,t)}packedUnaryOp(e,t,n){const r=new JJ(e.shape,t),o=this.compileAndRun(r,[e],n);return Hk().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=pJ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Gv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,HJ,e.dtype);const t=new PJ(e.shape,HJ),n=this.compileAndRun(t,[e]);return Hk().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Nv(n[0])){const o=n.map((e=>DC(e)));r=this.write(o,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return Hk().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new $J(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new _J(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[OY(e.shape),...RY(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[OY(t),...RY(t)],a=new LJ(o,n),i=[n],s=this.runWebGLProgram(a,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:o,dtype:a}=n;if(null!=t){dv(gv(o)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const i=UY(o);let s;s=r?new yZ(i):new mZ(i);const c=[null!=t?t:yY(i)];return{dtype:a,shape:o,dataId:this.runWebGLProgram(s,[{shape:i,dtype:a,dataId:e}],a,c,!0,t).dataId}}runWebGLProgram(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;const i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===pY.DENSE){const t=null!=a?a:yY(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===gv(i.shape))return s.values=Bv(i.dtype,0),i;const c=[],l=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&gv(t.shape)<=Gv().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),c.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!PY(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),c.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:s,isUniform:!1},A=function(e,t,n){let r="";t.concat(n).forEach((t=>{const o=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const a=t.texData.texShape,{useSqueezeShape:i,uniformShape:s,keptDims:c}=uZ(e.packedInputs,t.shape,a);let l="",u="",A="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];l="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=Ov(s);A="".concat(e[0]===a[1],"_").concat(e[e.length-1]===a[1])}}else u="".concat(s[0]>1,"_").concat(s[1]>1);const h=t.shape.length,d=2===s.length&&mv(t.shape,a),p=1===gv(t.shape),f=xS(t.shape,n.shape),g=!e.packedInputs&&h===n.shape.length&&mv(a,n.texData.texShape),m=e.packedInputs||s.length>2?"":"".concat(a[0]>1,"_").concat(a[1]>1);r+="".concat(h,"_").concat(g,"_").concat(i?c:"","_").concat(s.length,"_").concat(p,"_").concat(f,"_").concat(d,"_").concat(l,"_").concat(u,"_").concat(A,"_").concat(m,"_").concat(o)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(o)}}));const o=e.userCode;let a=e.constructor.name;return a+="_"+r+"_"+o+"".concat(Gv().getNumber("WEBGL_VERSION")),a}(e,l,u),h=this.getAndSaveBinary(A,(()=>dZ(this.gpgpu,e,l,u))),d=null!=this.activeTimers;let p;d&&(p=this.startTimer()),Gv().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,o){t.program.enableShapeUniforms||(fZ(t.inShapeInfos,n),fZ([t.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):e.setOutputMatrixTexture(a.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Gv().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let c=0;c<n.length;++c){const r=n[c],{uniform:o,offset:a,shape:i,texShape:s}=t.variablesLocations[c];if(i){const{uniformShape:n}=uZ(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(i,new Int32Array(n));break;case 2:e.gl.uniform2iv(i,new Int32Array(n));break;case 3:e.gl.uniform3iv(i,new Int32Array(n));break;case 4:e.gl.uniform4iv(i,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=o)if(r.isUniform)if(gv(r.shape)<2)e.gl.uniform1f(o,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=r.texData.slice&&null!=a&&e.gl.uniform1i(a,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,o,c)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=Ov(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&o)for(let c=0;c<t.program.customUniforms.length;++c){const n=t.program.customUniforms[c],r=t.customUniformLocations[c],a=o[c];if("float"===n.type)e.gl.uniform1fv(r,a);else if("vec2"===n.type)e.gl.uniform2fv(r,a);else if("vec3"===n.type)e.gl.uniform3fv(r,a);else if("vec4"===n.type)e.gl.uniform4fv(r,a);else if("int"===n.type)e.gl.uniform1iv(r,a);else if("ivec2"===n.type)e.gl.uniform2iv(r,a);else if("ivec3"===n.type)e.gl.uniform3iv(r,a);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,a)}}e.executeProgram()}(this.gpgpu,h,l,u,r),c.forEach((e=>this.disposeIntermediateTensorInfo(e))),d&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));const f=Gv().getNumber("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=UC();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Gv().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,o)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Gv().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Vk((()=>{if(!Gv().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Gv().getBool("DEBUG");Gv().set("DEBUG",!1);const t=this.abs(cS(1e-8)).dataSync()[0];if(Gv().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:o,texture:a,usage:i,isPacked:s}=t;if(null!=a)return;const c=null!=this.activeTimers;let l;c&&(l=UC());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Gv().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Gv().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Gv().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?Av(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=kv(e);e=t.newShape}let o=gv(e),a=null;e.length<=1&&o<=n?a=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?a=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);const i=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(null==a||i)if(t){const t=OY(e);let n=2,r=2;e.length&&([n,r]=RY(e)),o=t*(n/2)*(r/2),a=vv(o).map((e=>2*e))}else a=vv(o);return a}(n,s),t.texShape=u),null!=o){const e=UY(n);let a,i=u[1],A=u[0];const h=o instanceof Uint8Array||o instanceof Uint8ClampedArray;!s&&h||([i,A]=vY(u[0],u[1])),a=s?new CZ(e,h):new xZ(e,h);const d=h?[A,i]:u,p=this.makeTensorInfo(d,r),f=this.texData.get(p.dataId);f.usage=h?fY.PIXELS:fY.UPLOAD,f.texShape=d,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),i,A,o);const g=[[A,i]],m=!0,y=this.runWebGLProgram(a,[p],r,g,m),v=this.texData.get(y.dataId);t.texShape=v.texShape,t.isPacked=v.isPacked,t.usage=v.usage,Gv().get("ENGINE_COMPILE_ONLY")?this.disposeData(y.dataId):(t.texture=v.texture,t.values=null,this.texData.delete(y.dataId)),this.disposeIntermediateTensorInfo(p),c&&(this.uploadWaitMs+=UC()-l)}else{const e=this.acquireTexture(u,i,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*Ev(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await j_(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw BY(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:s}=pZ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=o,e.outShapeLocation=a,e.outShapeStridesLocation=i,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:o,width:a,channels:i}=e,s=Hk().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=s.writeTexture(r,t,n,o,a,i);return Hk().makeTensorFromDataId(c,t,n,s)}}r$.nextDataId=0;Ik()&&Kk("webgl",(()=>new r$),2);const o$="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class a${constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=kS(t,n),this.enableShapeUniforms=gZ(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const i$="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class s${constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kS(t,n);const o=this.outputShape.length;this.enableShapeUniforms=gZ(o);let a="";if(r)if(0===o||1===gv(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=lZ(o);if(a="\n          ".concat(e," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?a+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":a+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=TJ("coords",o);this.enableShapeUniforms?a+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):a+="\n            bool nextRowOutOfBounds =\n              (".concat(e[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")}}function c$(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const l$={kernelName:dw,backendName:"webgl",kernelFunc:c$};function u$(e){const{inputs:t,backend:n}=e,{real:r,imag:o}=t,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),s=c$({inputs:{x:r},backend:n}),c=c$({inputs:{x:o},backend:n});return i.complexTensorInfos={real:s,imag:c},a}const A$={kernelName:kb,backendName:"webgl",kernelFunc:u$},h$="return (a < 0.) ? b * a : a;",d$="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const p$={kernelName:vw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{alpha:a}=r,i=n.makeTensorInfo([],"float32",OC(a,"float32")),s=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s$(d$,o.shape,i.shape):new a$(h$,o.shape,i.shape),c=n.runWebGLProgram(s,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),c}},f$="return (a < 0.) ? b * a : a;",g$="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const m$={kernelName:ex,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:o}=t,a=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s$(g$,r.shape,o.shape):new a$(f$,r.shape,o.shape);return n.runWebGLProgram(a,[r,o],"float32")}},y$="if (isnan(x)) return x;";function v$(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:o}=e;return e=>{let{inputs:a,backend:i}=e;const{x:s}=a,c=i,l=o||s.dtype;if(c.shouldExecuteOnCPU([s])&&null!=r){const e=c.texData.get(s.dataId),t=r(e.values,l);return c.makeTensorInfo(s.shape,l,t)}let u;return u=Gv().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new JJ(s.shape,n):new PJ(s.shape,t),c.runWebGLProgram(u,[s],l)}}function b$(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:o=!1,cpuKernelImpl:a,dtype:i}=e;return e=>{let{inputs:s,backend:c}=e;const{a:l,b:u}=s,A=c;if(o&&"complex64"===l.dtype){const e=A.texData.get(l.dataId),n=A.texData.get(u.dataId),[r,o]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,o={dataId:n.dataId,dtype:n.dtype,shape:l.shape},a={dataId:r.dataId,dtype:r.dtype,shape:u.shape},i=new a$(t,l.shape,u.shape);return A.runWebGLProgram(i,[o,a],Ak(n.dtype,r.dtype))})),a=u$({inputs:{real:r,imag:o},backend:A});return A.disposeIntermediateTensorInfo(r),A.disposeIntermediateTensorInfo(o),a}const h=i||Ak(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||A.shouldExecuteOnCPU([l,u]))&&null!=a){const e=A.texData.get(l.dataId).values,t=A.texData.get(u.dataId).values,n="string"===l.dtype?XL(e):e,r="string"===l.dtype?XL(t):t,[o,i]=a(l.shape,u.shape,n,r,h),s=A.makeTensorInfo(i,h);return A.texData.get(s.dataId).values=o,s}let d;return d=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new s$(n,l.shape,u.shape,r):new a$(t,l.shape,u.shape),A.runWebGLProgram(d,[l,u],h)}}function w$(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?GJ:QJ;if("relu"===e)return t?XJ:VJ;if("elu"===e)return t?qJ:zJ;if("relu6"===e)return t?YJ:jJ;if("prelu"===e)return t?g$:f$;if("leakyrelu"===e)return t?d$:h$;if("sigmoid"===e)return t?ZJ:KJ;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class x${constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=gZ(this.outputShape.length);const l=r?e[1]:e[2],u=Math.ceil(l/2),A=r?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",g="";i&&(f=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(i,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(i,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(i,"\n        }"),g="result = activation(result);");const m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",v="rc.x";e[0]<t[0]?y="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(v="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(f,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(y,";\n        int batchB = ").concat(v,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(A,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(d[0]," * ").concat(p[0],");\n          result += (").concat(d[1]," * ").concat(p[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(m,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")}}const C$={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class k${constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kS(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const B$="return a * b;";function S$(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=Ak(r.dtype,o.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),a=new k$(C$.REAL,r.shape,o.shape),i=new k$(C$.IMAG,r.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],c=n.runWebGLProgram(a,s,"float32"),l=n.runWebGLProgram(i,s,"float32"),u=u$({inputs:{real:c,imag:l},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),u}if(n.shouldExecuteOnCPU([r,o])){const e=n.texData.get(r.dataId),t=n.texData.get(o.dataId),[i,s]=rJ(r.shape,o.shape,e.values,t.values,a),c=n.makeTensorInfo(s,a);return n.texData.get(c.dataId).values=i,c}let i;return i=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s$(B$,r.shape,o.shape):new a$(B$,r.shape,o.shape),n.runWebGLProgram(i,[r,o],a)}const I$={kernelName:Vw,backendName:"webgl",kernelFunc:S$};function E$(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{shape:a}=r,i=n,s=gv(o.shape),c=xv(a,s),l=gv(c);dv(s===l,(()=>"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(o.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."));const u=i.texData.get(o.dataId);return!u.isPacked||PY(o.shape,c)||null!==u.texture&&PY(u.shape,c)?(i.incRef(o.dataId),{dataId:o.dataId,shape:c,dtype:o.dtype}):function(e,t,n){const r=[OY(e.shape),...RY(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},a=[OY(t),...RY(t)],i=new LJ(a,r),s=[r],c=n.runWebGLProgram(i,[o],e.dtype,s,!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}(o,c,i)}const N$={kernelName:lx,backendName:"webgl",kernelFunc:E$};class F${constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];const i=4*Math.floor(n/4),s=n%4;let c="sumValue += dot(values, ones);";if(null!=t){const e=1/t;c="sumValue += dot(values * ".concat(yv(e)?e.toPrecision(2):e,", ones);")}let l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(i,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(i,";\n        if (").concat(1===s,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===s,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class T${constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:o,outSize:a}=e;this.outputShape=[r,a];let i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");let c="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?c="sumValue":"prod"===t?c="prodValue":"all"===t?c="allValue":"any"===t&&(c="anyValue");const l=4*Math.floor(n/4),u=n%4;let A="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(s,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===t?(i="1.0",A="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",A="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(i,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(i,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(A,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(A,"\n        } else if (").concat(2===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(A,"\n        } else if (").concat(3===u,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(A,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}}function _$(e,t,n,r){const o=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=$_(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let a=e;for(let i=0;i<o.length;i++){const{inSize:s,windowSize:c,outSize:l}=o[i];let u,A;u="mean"===n?0===i?new F$({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:l},s):new F$({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:l}):new T$({windowSize:c,inSize:s,batchSize:e.shape[0],outSize:l},n),A=a,a=r.runWebGLProgram(u,[a],t),A.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(A)}return a}class L${constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;const r=lZ(this.rank),o=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}}class O${constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let l=0;l<n.length;l++)n[l]=e[t[l]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=lZ(this.rank),o=FJ("rc",this.rank),a=new Array(this.rank);for(let l=0;l<t.length;l++)a[t[l]]=o[l];const i="vec2(".concat(a.slice(-2).join(),")"),s="++".concat(o[this.rank-1]," < ").concat(n[this.rank-1]),c="getChannel(getA(".concat(a.join(),"), ").concat(i,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(c,";\n      if(").concat(s,") {\n        result[1] = ").concat(c,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(c,";\n        if(").concat(s,") {\n          result[3] = ").concat(c,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function R$(e,t,n){const r=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new O$(e.shape,t):new L$(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function U$(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r;return function(e,t,n,r){const o=t,a=e.shape.length,i=Cv(o,e.shape);let s=i;const c=qE(s,a),l=null!=c;let u=e;l&&(u=R$(e,c,r),s=YE(s.length,a)),GE("sum",s,a);const[A,h]=WE(u.shape,s);let d=A;n&&(d=KE(A,i));const p=gv(h),f=E$({inputs:{x:u},attrs:{shape:[gv(e.shape)/p,p]},backend:r}),g=_$(f,hk(e.dtype),"sum",r),m=E$({inputs:{x:g},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(g),l&&r.disposeIntermediateTensorInfo(u),m}(o,a,i,n)}const D$={kernelName:Fx,backendName:"webgl",kernelFunc:U$};function P$(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{perm:a}=r,i=n,s=o.shape.length,c=new Array(s);for(let u=0;u<c.length;u++)c[u]=o.shape[a[u]];let l;if(i.shouldExecuteOnCPU([o])){const e=i.texData.get(o.dataId).values,t=EJ(e,o.shape,o.dtype,a,c);l=i.makeTensorInfo(c,o.dtype);i.texData.get(l.dataId).values=t}else l=R$(o,a,i);return l}const M$={kernelName:Jx,backendName:"webgl",kernelFunc:P$},Q$=1e3;function H$(e){let{a:t,b:n,transposeA:r,transposeB:o,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:c=0,activation:l=null}=e;const u=t.shape.length,A=n.shape.length,h=r?t.shape[u-2]:t.shape[u-1],d=o?n.shape[A-1]:n.shape[A-2],p=r?t.shape[u-1]:t.shape[u-2],f=o?n.shape[A-2]:n.shape[A-1],g=t.shape.slice(0,-2),m=n.shape.slice(0,-2),y=gv(g),v=gv(m),b=kS(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([p,f]);dv(h===d,(()=>"Error in matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(o," must match.")));const w=r?[y,h,p]:[y,p,h],x=o?[v,f,d]:[v,d,f],C=E$({inputs:{x:t},backend:a,attrs:{shape:w}}),k=E$({inputs:{x:n},backend:a,attrs:{shape:x}}),B=[C,k],S=Math.max(y,v),I=r?C.shape[1]:C.shape[2],E=null!=i,N=null!=s,F="leakyrelu"===l,T=null!=l?w$(l,!0):null;let _;if((1===p||1===f)&&I>Q$&&!1===(E||N||F||null!=T)){let e=C,t=k;r&&(e=P$({inputs:{x:C},backend:a,attrs:{perm:[0,2,1]}}),B.push(e)),o&&(t=P$({inputs:{x:k},backend:a,attrs:{perm:[0,2,1]}}),B.push(t));const n=1===f;let i=e;1!==f&&(i=E$({inputs:{x:e},backend:a,attrs:{shape:[S,I,1]}}),B.push(i));const s=1===f?2:1;let c=t;n&&(c=E$({inputs:{x:t},backend:a,attrs:{shape:[S,1,I]}}),B.push(c));const l=S$({inputs:{a:i,b:c},backend:a});_=U$({inputs:{x:l},backend:a,attrs:{axis:s,keepDims:!0}}),B.push(l)}else{const e=Ak(t.dtype,n.dtype),l=new x$(w,x,[S,p,f],r,o,E,T,N,F),u=[C,k];if(null!=i&&u.push(i),N&&u.push(s),F){const e=a.makeTensorInfo([],"float32",OC(c,"float32"));u.push(e),B.push(e)}_=a.runWebGLProgram(l,u,e)}const L=E$({inputs:{x:_},backend:a,attrs:{shape:b}});B.push(_);for(const O of B)a.disposeIntermediateTensorInfo(O);return L}const z$={kernelName:iC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a,bias:i,preluActivationWeights:s}=t,{transposeA:c,transposeB:l,activation:u,leakyreluAlpha:A}=r;return H$({a:o,b:a,transposeA:c,transposeB:l,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:A,activation:u})}},V$="return abs(x);";const j$={kernelName:Jv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=pJ(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let o;return o=Gv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new JJ(r.shape,V$):new PJ(r.shape,V$),n.runWebGLProgram(o,[r],r.dtype)}},W$=v$({opSnippet:MJ+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),K$={kernelName:$v,backendName:"webgl",kernelFunc:W$},G$=v$({opSnippet:MJ+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),q$={kernelName:eb,backendName:"webgl",kernelFunc:G$},X$="return a + b;",Y$=b$({opSnippet:X$,packedOpSnippet:X$,supportsComplex:!0,cpuKernelImpl:RZ}),Z$={kernelName:tb,backendName:"webgl",kernelFunc:Y$};class J${constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class $${constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>"T".concat(t)));const n=[];this.variableNames.forEach((e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));const r=this.variableNames.map((e=>"v".concat(e))).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const e0={kernelName:nb,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,o=n;if(1===o.length)return c$({inputs:{x:o[0]},backend:r});if(o.length>Gv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(o.length/2),n=e({inputs:o.slice(0,t),backend:r}),a=e({inputs:o.slice(t),backend:r});return e({inputs:[n,a],backend:r})}const a=o.map((e=>e.dtype)).reduce(((e,t)=>Ak(e,t))),i=o.map((e=>e.shape)),s=Gv().getBool("WEBGL_PACK")?new $$(o[0].shape,i):new J$(o[0].shape,i);return r.runWebGLProgram(s,o,a)}};const t0={kernelName:rb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Cv(a,o.shape);let l=c;const u=qE(l,s);let A=o;null!=u&&(A=P$({inputs:{x:o},backend:n,attrs:{perm:u}}),l=YE(l.length,s)),GE("all",l,s);const[h,d]=WE(A.shape,l),p=E$({inputs:{x:A},backend:n,attrs:{shape:[-1,gv(d)]}}),f=_$(p,p.dtype,"all",n);let g;if(i){g=E$({inputs:{x:f},backend:n,attrs:{shape:KE(h,c)}})}else g=E$({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(A),g}};const n0={kernelName:ob,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Cv(a,o.shape);let l=c;const u=qE(l,s);let A=o;null!=u&&(A=P$({inputs:{x:o},backend:n,attrs:{perm:u}}),l=YE(l.length,s)),GE("any",l,s);const[h,d]=WE(A.shape,l),p=E$({inputs:{x:A},backend:n,attrs:{shape:[-1,gv(d)]}}),f=_$(p,p.dtype,"any",n);let g;if(i){g=E$({inputs:{x:f},backend:n,attrs:{shape:KE(h,c)}})}else g=E$({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(A),g}};class r0{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:o,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(i," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class o0{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,dv(e.length>2,(()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2.")));const o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,s=i.length,c=lZ(s),l=TJ("coords",s);let u,A;if(1===a){A=s+1;const e=lZ(A);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[s-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(l.join(),", 0);\n        ++").concat(l[s-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[s-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(l.join(),", 0);\n        --").concat(l[s-2],";")}else A=s,u="\n        ".concat(c," sourceLocR = coords;\n        ++").concat(l[s-1],";\n        ").concat(c," sourceLocG = coords;\n        ++").concat(l[s-2],";\n        ").concat(c," sourceLocA = coords;\n        --").concat(l[s-1],";\n        ").concat(c," sourceLocB = coords;\n        --").concat(l[s-2],";");const h=["x","y","z","w","u","v"].slice(0,A),d="."+h[A-1],p=h.map((e=>"int "+e)),f=TJ("sourceLocR",A-1).concat("inIdx.r"),g=TJ("sourceLocG",A-1).concat("inIdx.g"),m=TJ("sourceLocB",A-1).concat("inIdx.b"),y=TJ("sourceLocA",A-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",b=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(f.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),")));"),w="vec4(\n            getAChannel(".concat(f.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(y.join(),") : 0.)"),x=r?"":"\n      float getBestIndicesAChannel(".concat(p.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(p.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(x,"\n      void main() {\n        ").concat(c," coords = getOutputCoords();\n        bool hasNextCol = ").concat(l[s-1]," < ").concat(i[s-1]-1,";\n        bool hasNextRow = ").concat(l[s-2]," < ").concat(i[s-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(d,", sourceLocG").concat(d,",\n          sourceLocB").concat(d,", sourceLocA").concat(d,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(b,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(v,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function a0(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=t.shape[0],a=t.shape[1];null!=r&&(o=r.shape[0],a=r.shape[1]);const i=$_(a),s={windowSize:i,inSize:a,batchSize:o,outSize:Math.ceil(a/i)},c=new r0(s,n,null==r),l=[t];null!=r&&l.push(r);const u=e.runWebGLProgram(c,l,"int32");if(1===u.shape[1])return u;const A=a0(e,t,n,u);return e.disposeIntermediateTensorInfo(u),A}function i0(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=null!=r?r.shape:t.shape,a=$_(o[o.length-1]),i=new o0(o,a,n,null==r),s=null==r?[t]:[t,r],c=e.runWebGLProgram(i,s,"int32");if(c.shape.length===t.shape.length){const r=i0(e,t,n,c);return e.disposeIntermediateTensorInfo(c),r}return c}function s0(e,t,n,r){const o=[n];if(GE("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Gv().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],a=e.texData.get(t.dataId);let i=t;null!==a&&a.isPacked&&(i=e.unpackTensor(t),n.push(i));const[s,c]=WE(i.shape,o),l=gv(c),u=E$({inputs:{x:i},backend:e,attrs:{shape:[-1,l]}});n.push(u);const A=a0(e,u,r);n.push(A);const h=E$({inputs:{x:A},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return i0(e,t,r)}const c0={kernelName:ab,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=Cv(a,o.shape);const s=qE(i,o.shape.length);let c=o;const l=[];null!=s&&(c=P$({inputs:{x:o},backend:n,attrs:{perm:s}}),l.push(c),i=YE(i.length,c.shape.length)),GE("argMax",[i[0]],c.shape.length);const u=s0(n,c,i[0],"max");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}};const l0={kernelName:ib,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a}=r;let i=Cv(a,o.shape);const s=qE(i,o.shape.length);let c=o;const l=[];null!=s&&(c=P$({inputs:{x:o},backend:n,attrs:{perm:s}}),l.push(c),i=YE(i.length,c.shape.length)),GE("argMin",[i[0]],c.shape.length);const u=s0(n,c,i[0],"min");return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},u0=v$({opSnippet:MJ+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),A0={kernelName:sb,backendName:"webgl",kernelFunc:u0},h0=v$({opSnippet:MJ+"return log(x + sqrt(x * x + 1.0));"}),d0={kernelName:cb,backendName:"webgl",kernelFunc:h0},p0=v$({opSnippet:MJ+"\n  return atan(x);\n"}),f0={kernelName:lb,backendName:"webgl",kernelFunc:p0},g0=b$({opSnippet:o$+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i$+"\n  return result;\n"}),m0={kernelName:Ab,backendName:"webgl",kernelFunc:g0},y0=v$({opSnippet:MJ+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),v0={kernelName:ub,backendName:"webgl",kernelFunc:y0};class b0{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideHeight,s=e.strideWidth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterHeight,A=e.effectiveFilterWidth,h=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;const p="avg"===t,f="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let m="0.0";if(p||(m="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(d,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(A,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?o?f:g:"wR * ".concat(A," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let y="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / max(count, 1.0)");const v=4*Math.floor(a/4),b=a%4,w="\n      if (".concat(p,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(d,");\n      const float initializationValue = ").concat(m,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(m,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(w,"\n          }\n\n          int xC = xCCorner + ").concat(v,";\n          if (").concat(1===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(2===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(w,"\n          } else if (").concat(3===b,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(w,"\n          }\n        }\n        setOutput(").concat(y,");\n      }\n    ")}}class w0{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,i=e.strideDepth,s=e.strideHeight,c=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,A=e.dilationWidth,h=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.front,g=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let v="0.0";if(y||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(i,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(f,", ").concat(g,", ").concat(m,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(d,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(p,";\n                  wC += ").concat(A,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?o?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(d," * ").concat(p," +\n                      wR * ").concat(p," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const w=4*Math.floor(a/4),x=a%4,C="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(i,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(f,", ").concat(g,", ").concat(m,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(A,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(A,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(w,";\n            if (").concat(1===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(A,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}const x0={kernelName:hb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;WY(o,"avgPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;dv(WI(i,1),(()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const l=RI(o.shape,a,i,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&mv(l.inShape,l.outShape))return c$({inputs:{x:o},backend:n});const u=new b0(l,"avg",!1);return n.runWebGLProgram(u,[o],"float32")}};const C0={kernelName:pb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:c,dataFormat:l}=r,u=UI(o.shape,a,i,[1,1,1],s,c,l),A=new w0(u,"avg",!1);return n.runWebGLProgram(A,[o],"float32")}};class k0{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.top,u=c-1-e.padInfo.left,A=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(u,");\n      const float avgMultiplier = float(").concat(A,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(i,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class B0{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,A=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=u-1-e.padInfo.front,p=A-1-e.padInfo.top,f=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(p,", ").concat(f,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(A,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const S0={kernelName:fb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:c,pad:l,dimRoundingMode:u}=r,A=UI(i.shape,s,c,[1,1,1],l,u),h=new B0(A);return n.runWebGLProgram(h,[o],i.dtype)}};const I0={kernelName:db,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a;WY([o,a],"avgPoolGrad");const{filterSize:s,strides:c,pad:l}=r,u=RI(i.shape,s,c,1,l),A=new k0(u);return n.runWebGLProgram(A,[o],i.dtype)}};const E0={kernelName:gb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:o,b:a}=t,{transposeA:i,transposeB:s}=r;return H$({a:o,b:a,transposeA:i,transposeB:s,backend:n})}};class N0{constructor(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],kS(e,t),kS(e,n);let i="0.0";null!=r&&(kS(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="1.0";null!=o&&(kS(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(i,";\n        float scale = ").concat(s,";\n        float inv = scale * inversesqrt(variance + float(").concat(a,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class F0{constructor(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],kS(e,t),kS(e,n);let i="vec4(0.0)";null!=r&&(kS(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=o&&(kS(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(i,";\n        vec4 scale = ").concat(s,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(a,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const T0={kernelName:cw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o,mean:a,variance:i,offset:s,scale:c}=t;dv(a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),dv(null==s||a.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),dv(null==c||a.shape.length===c.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=r;null==l&&(l=.001);const u=[o,a,i];let A=null;null!=s&&(A=s.shape,u.push(s));let h=null;null!=c&&(h=c.shape,u.push(c));const d=Gv().getBool("WEBGL_PACK_NORMALIZATION")?new F0(o.shape,a.shape,i.shape,A,h,l):new N0(o.shape,a.shape,i.shape,A,h,l);return n.runWebGLProgram(d,u,u[0].dtype)}};class _0{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=lZ(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return L0.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const o=e.map(((e,t)=>"sourceLoc.".concat(L0[t]," = start[").concat(t,"] + coords.").concat(L0[t],";")));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const L0=["x","y","z","w","u","v"];class O0{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=lZ(this.rank),n=TJ("coords",this.rank),r=TJ("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),a="getChannel(getSource(".concat(r.join(),"), ").concat(o,")"),i="\n      result.x = ".concat(a,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(a,";\n        --").concat(r[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(a,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(a,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map(((e,t)=>"start[".concat(t,"]"))).join(),");"):e.map(((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];"))).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(i,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}}function R0(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,size:i}=r,[s,c]=vI(o,a,i);if(aI(o,s,c),0===gv(c))return n.makeTensorInfo(c,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){const e=n.texData.get(o.dataId),t=fJ(e.values,s,c,o.shape,o.dtype);return n.makeTensorInfo(c,o.dtype,t)}const{isPacked:l}=n.texData.get(o.dataId),u=mI(o.shape,s,c);if(l||!u){const e=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new O0(c):new _0(c),t=[s];return n.runWebGLProgram(e,[o],o.dtype,t)}return n.uploadToGPU(o.dataId),function(e,t,n,r){const o=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),i=r.texData.get(a.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let s=yI(t,Ov(e.shape));o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};const c=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,c+1),a}(o,s,c,n)}const U0={kernelName:Cx,backendName:"webgl",kernelFunc:R0},D0={kernelName:mb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,crops:i}=r;dv(o.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=tL(o.shape,a,s),l=nL(c.length,a.length),u=rL(o.shape,a,s),A=oL(i,a.length),h=aL(u,i,a.length),d=[],p=E$({inputs:{x:o},backend:n,attrs:{shape:c}}),f=P$({inputs:{x:p},backend:n,attrs:{perm:l}}),g=E$({inputs:{x:f},backend:n,attrs:{shape:u}}),m=R0({inputs:{x:g},backend:n,attrs:{begin:A,size:h}});return d.push(p),d.push(f),d.push(g),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}};const P0={kernelName:yb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i}=r,s=n.readSync(o.dataId),c=n.readSync(a.dataId),l=UZ(s,c,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,l)}};const M0={kernelName:vb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:o}=t,a=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Gv().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(o.dataId).values,[a,i]=PZ(r.shape,o.shape,e,t,r.dtype),s=n.makeTensorInfo(i,r.dtype);return n.texData.get(s.dataId).values=a,s}let s;return s=a?new s$("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,o.shape,!1):new a$("\n  return float(int(a.r) & int(b.r));\n",r.shape,o.shape),n.runWebGLProgram(s,[r,o],r.dtype)}};const Q0={kernelName:bb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:o}=t,a=n.readSync(r.dataId),i=n.readSync(o.dataId),s=kS(Array.from(a),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},H0=b$({opSnippet:"return float(a != b);",cpuKernelImpl:aJ,dtype:"bool"}),z0={kernelName:Ww,backendName:"webgl",kernelFunc:H0};function V0(e){const{inputs:t,backend:n}=e,{input:r}=t;return c$({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const j0={kernelName:ix,backendName:"webgl",kernelFunc:V0},W0="return float(int(x));";const K0={kernelName:wb,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:o}=t,{x:a}=n,{dtype:i}=o;if("complex64"===i){if("complex64"===a.dtype)return c$({inputs:{x:a},backend:r});const t=MN(a.shape),n=e({inputs:{x:a},backend:r,attrs:{dtype:"float32"}}),o=u$({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),o}if("complex64"===a.dtype){const t=V0({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!Iv(a.dtype,i)){const e=c$({inputs:{x:a},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([a])){const e=r.texData.get(a.dataId).values,[t,n,o]=MZ(e,a.shape,a.dtype,i);return r.makeTensorInfo(t,n,o)}if("int32"===i)return function(e,t){const n=new PJ(e.shape,W0),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(a,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",Bv("bool",1)),t=H0({inputs:{a:a,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}},G0="return ceil(x);",q0=v$({opSnippet:G0,packedOpSnippet:G0,cpuKernelImpl:QZ}),X0={kernelName:xb,backendName:"webgl",kernelFunc:q0};class Y0{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Z0{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const J0={kernelName:Cb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{clipValueMin:a,clipValueMax:i}=r;let s;s=Gv().getBool("WEBGL_PACK_CLIP")?new Z0(o.shape):new Y0(o.shape);const c=[[a],[i]];return n.runWebGLProgram(s,[o],o.dtype,c)}};class $0{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function e1(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const t1={kernelName:Bb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=n.texData.get(r.dataId),a=new $0(r.shape),i=[e1(r,o.complexTensorInfos.real),e1(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}};class n1{constructor(e){this.outputShape=[],this.outputShape=K_(e,1),this.variableNames=e.map(((e,t)=>"T".concat(t)));const t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let a=1;a<t.length;a++){const e=t[a-1];n.push("else if (yC < ".concat(t[a],") ")+"setOutput(getT".concat(a,"(yR, yC-").concat(e,"));"))}const r=t.length,o=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(o,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class r1{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=K_(e,t);const n=this.outputShape,r=n.length,o=lZ(r),a=TJ("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>"T".concat(t)));const s=new Array(e.length-1);s[0]=e[0][t];for(let p=1;p<s.length;p++)s[p]=s[p-1]+e[p][t];const c=i[t],l=i.slice(-2),u=i.join();let A="if (".concat(c," < ").concat(s[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(l.join(),"));\n        }");for(let p=1;p<s.length;p++){const e=s[p-1];A+="\n        if (".concat(c," < ").concat(s[p],"  && ").concat(c," >= ").concat(s[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(o1(i,c,e),"),\n            vec2(").concat(o1(l,c,e),"));\n        }")}const h=s.length,d=s[s.length-1];A+="\n        return getChannel(\n          getT".concat(h,"(").concat(o1(i,c,d),"),\n          vec2(").concat(o1(l,c,d),"));"),this.userCode="\n      float getValue(".concat(i.map((e=>"int "+e)),") {\n        ").concat(A,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(a,"), 0., 0., 0.);\n\n        ").concat(a[r-1]," = ").concat(a[r-1]," + 1;\n        if (").concat(a[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(a,");\n        }\n\n        ").concat(a[r-2]," = ").concat(a[r-2]," + 1;\n        if (").concat(a[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(a,");\n        }\n\n        ").concat(a[r-1]," = ").concat(a[r-1]," - 1;\n        if (").concat(a[r-2]," < ").concat(n[r-2]," &&\n            ").concat(a[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(a,");\n        }\n        setOutput(result);\n      }\n    ")}}function o1(e,t,n){const r=e.indexOf(t),o=e.map(((e,t)=>t===r?"".concat(e," - ").concat(n):e));return o.join()}function a1(e){const{inputs:t,backend:n}=e,{input:r}=t;return c$({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const i1={kernelName:fw,backendName:"webgl",kernelFunc:a1};function s1(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>V0({inputs:{input:e},backend:n}))),o=e.map((e=>a1({inputs:{input:e},backend:n}))),a=s1(r,t,n),i=s1(o,t,n),s=u$({inputs:{real:a,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),o.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}let o=n.shouldExecuteOnCPU(e);if("string"===r&&(o=!0),o){const o=e.map((e=>{const r=gv(e.shape.slice(t));return E$({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),a=o.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=K_(o.map((e=>e.shape)),1),s=1===o[0].shape[0],c=HZ(a,i,r,s),l=K_(e.map((e=>e.shape)),t),u=n.makeTensorInfo(l,r,c);return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const a=e.filter((e=>gv(e.shape)>0)),i=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){const t=i?new PJ(e[0].shape,WJ):new JJ(e[0].shape,WJ);return n.runWebGLProgram(t,e,r)}const s=Gv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const e=[];for(let o=0;o<a.length;o+=s){const r=a.slice(o,o+s);e.push(s1(r,t,n))}const r=s1(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new r1(a.map((e=>e.shape)),t);return n.runWebGLProgram(e,a,r)}const{tensors2D:c,outShape:l}=function(e,t,n){const r=K_(e.map((e=>e.shape)),t),o=e.map((e=>E$({inputs:{x:e},attrs:{shape:[-1,gv(e.shape.slice(t))]},backend:n})));return{tensors2D:o,outShape:r}}(a,t,n),u=new n1(c.map((e=>e.shape))),A=n.runWebGLProgram(u,c,r);c.forEach((e=>n.disposeIntermediateTensorInfo(e)));const h=E$({inputs:{x:A},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(A),h}function c1(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r,a=Cv(o,t[0].shape)[0];W_(t.map((e=>e.shape)),a);const i=K_(t.map((e=>e.shape)),a);if(0===gv(i))return n.makeTensorInfo(i,t[0].dtype,[]);const s=t.filter((e=>gv(e.shape)>0));return 1===s.length?c$({inputs:{x:s[0]},backend:n}):s1(s,a,n)}const l1={kernelName:Sb,backendName:"webgl",kernelFunc:c1};class u1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,i=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,A=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,f="channelsLast"===e.dataFormat,g=f?1:2,m=f?2:3,y=f?3:1;let v="",b="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),b="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(m,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(A,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(f,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===p,") {\n\n              if (").concat(f,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(d,") *\n                    getW(wR, wC, ").concat(d,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(d,", xR, xC) *\n                    getW(wR, wC, ").concat(d,", d2);\n              }\n\n            } else if (").concat(2===p,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2)\n              );\n\n              if (").concat(f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===p,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(d,", d2),\n                getW(wR, wC, ").concat(d," + 1, d2),\n                getW(wR, wC, ").concat(d," + 2, d2)\n              );\n\n              if (").concat(f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(d,"),\n                  getX(batch, xR, xC, ").concat(d," + 1),\n                  getX(batch, xR, xC, ").concat(d," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(d,", xR, xC),\n                  getX(batch, ").concat(d," + 1, xR, xC),\n                  getX(batch, ").concat(d," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")}}class A1{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,c=e.dilationHeight,l=e.dilationWidth,u=e.filterDepth,A=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(a,", ").concat(i,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(A,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(d,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===p,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(d,") *\n                  getW(wF, wR, wC, ").concat(d,", d2);\n              } else if (").concat(2===p,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===p,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(d,"),\n                  getX(batch, xF, xR, xC, ").concat(d," + 1),\n                  getX(batch, xF, xR, xC, ").concat(d," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(d,", d2),\n                  getW(wF, wR, wC, ").concat(d," + 1, d2),\n                  getW(wF, wR, wC, ").concat(d," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class h1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=gZ(this.outputShape.length);const a=e.padInfo.left,i=e.strideWidth,s=e.dilationWidth,c=e.filterHeight,l=e.filterWidth,u=l;let A="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let f=0;f<l;f++)A+="\n           vec4 xTexelC".concat(2*f,";\n           int xTexelC").concat(2*f,"Ready;\n           vec4 xTexelC").concat(2*f+1,";\n           int xTexelC").concat(2*f+1,"Ready;\n           vec4 xC").concat(f,";");A+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let f=0;f<l;f++)A+="\n           xTexelC".concat(2*f," = vec4(0.0);\n           xTexelC").concat(2*f,"Ready = 0;\n           xTexelC").concat(2*f+1," = vec4(0.0);\n           xTexelC").concat(2*f+1,"Ready = 0;\n           xC").concat(f," = vec4(0.0);");A+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let f=0;f<(u+1)/2;f++){const t=2*f;if(A+="\n           xC = xCCorner + ".concat(t*s,";\n           "),1===i){if(t<l&&(a%2===1?(A+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),A+=1===s&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):A+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<l)){const e=a%2===0?Av(s):s;s%2===0&&a%2===1||s%2!==0&&a%2!==1?(A+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),A+=s>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):A+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<l&&(a%2===1?(A+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<l&&(A+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(A+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<l&&(A+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<l&&(A+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<l&&(A+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}A+="\n     }\n   ",A+="\n     }\n   ",A+="\n     }\n   ";let h="",d="";n&&(h=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),d="result = activation(result);");const p=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(h,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(A,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(p,"\n         ").concat(d,"\n         setOutput(result);\n       }\n     ")}}class d1{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=gZ(this.outputShape.length);const{dataFormat:n}=t,r=GY(),o="channelsLast"===n,a=o?1:2,i=o?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let c="";for(let l=0;l<=1;l++)for(let e=0;e<=1;e++)c+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(s,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(a,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(i,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function p1(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function f1(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const l=t.shape,u=o.texData.get(t.dataId),A=r.inChannels,h=l[0]*l[1]*l[2],d=r.outChannels,p="channelsLast"===r.dataFormat;let f;const g=[];if(null!=i){const e=p1(i.shape,p);null!=e&&(i=E$({inputs:{x:i},backend:o,attrs:{shape:e}}),g.push(i))}if(null!=a){const e=p1(a.shape,p);null!=e&&(a=E$({inputs:{x:a},backend:o,attrs:{shape:e}}),g.push(a))}if(!((1===h||1===d)&&A>Q$)&&u.isPacked&&p&&null!=u.texture&&l[2]%2!==0&&mv(u.shape.slice(-3),l.slice(-3))){const e=l[0]*l[1]*(l[2]+1),A={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},h=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,dv(PY(u.shape,A.shape),(()=>"packed reshape ".concat(u.shape," to ").concat(A.shape," isn't free")));const d=E$({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}});g.push(d);const p=H$({a:A,b:d,backend:o,transposeA:false,transposeB:false,bias:a,activation:c,preluActivationWeights:i,leakyreluAlpha:s}),m=o.texData.get(p.dataId);dv(m.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=h,m.shape=r.outShape,f=c$({inputs:{x:p},backend:o}),f.shape=r.outShape,g.push(p)}else{const e=r.outHeight*r.outWidth,l=E$({inputs:{x:t},backend:o,attrs:{shape:p?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=E$({inputs:{x:n},backend:o,attrs:{shape:[1,r.inChannels,r.outChannels]}}),A=H$({a:p?l:u,b:p?u:l,transposeA:!p,transposeB:false,backend:o,bias:a,activation:c,preluActivationWeights:i,leakyreluAlpha:s});f=E$({inputs:{x:A},backend:o,attrs:{shape:r.outShape}}),g.push(l),g.push(u),g.push(A)}for(const m of g)o.disposeIntermediateTensorInfo(m);return f}function g1(e){let{x:t,filter:n,convInfo:r,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:c=null}=e;const{filterWidth:l,filterHeight:u,inChannels:A,outWidth:h,outHeight:d,dataFormat:p}=r,f="channelsLast"===p,g=l*u*A,m=d*h,y=[r.batchSize,g,m],v=[];if(null!=i){const e=p1(i.shape,f);null!=e&&(i=E$({inputs:{x:i},backend:o,attrs:{shape:e}}),v.push(i))}if(null!=a){const e=p1(a.shape,f);null!=e&&(a=E$({inputs:{x:a},backend:o,attrs:{shape:e}}),v.push(a))}const b=E$({inputs:{x:n},backend:o,attrs:{shape:[1,g,gv(n.shape)/g]}});v.push(b);const w=new d1(y,r),x=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=o.runWebGLProgram(w,[t],"float32",x),k=E$({inputs:{x:C},backend:o,attrs:{shape:y}});v.push(C),v.push(k);const B=null!=a,S=null!=i,I="leakyrelu"===c,E=c?w$(c,!0):null,N=new x$(f?k.shape:b.shape,f?b.shape:k.shape,f?[r.batchSize,m,r.outChannels]:[r.batchSize,r.outChannels,m],!0,!1,B,E,S,I),F=f?[k,b]:[b,k];if(a&&F.push(a),S&&F.push(i),I){const e=o.makeTensorInfo([],"float32",OC(s,"float32"));F.push(e),v.push(e)}const T=o.runWebGLProgram(N,F,"float32"),_=E$({inputs:{x:T},backend:o,attrs:{shape:r.outShape}});v.push(T);for(const L of v)o.disposeIntermediateTensorInfo(L);return _}const m1={kernelName:Ib,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dataFormat:c,dilations:l,dimRoundingMode:u}=r,A=GI(c),h=DI(o.shape,a.shape,i,l,s,u,!1,A);let d;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===A&&Gv().getBool("WEBGL_EXP_CONV")){const e=new h1(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=n.runWebGLProgram(e,[o,a],"float32",t)}else if(Gv().getBool("WEBGL_CONV_IM2COL"))d=g1({x:o,filter:a,convInfo:h,backend:n});else{const e=new u1(h);d=n.runWebGLProgram(e,[o,a],"float32")}else d=f1({x:o,filter:a,convInfo:h,backend:n});const p=E$({inputs:{x:d},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(d),p}};class y1{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(a?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class v1{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,c=a?1:2,l=a?2:3,u=a?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(a,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class b1{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class w1{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,c=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const x1={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,dataFormat:c,dimRoundingMode:l,filterShape:u}=r,A=GI(c),h=DI(o.shape,u,i,1,s,l,!1,A),d=new y1(h);return n.runWebGLProgram(d,[o,a],"float32")}};class C1{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=gZ(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,o=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const k1={kernelName:Nb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{inputShape:i,strides:s,pad:c,dataFormat:l,dimRoundingMode:u}=r,A=GI(l),h=DI(i,a.shape,s,1,c,u,!1,A);if(Gv().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===A){const e=[[h.strideHeight,h.strideWidth]],t=new C1(h);return n.runWebGLProgram(t,[o,a],"float32",e)}{const e=new v1(h);return n.runWebGLProgram(e,[o,a],"float32")}}};const B1={kernelName:Fb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r,l=PI(o.shape,a.shape,i,c,s),u=new A1(l);return n.runWebGLProgram(u,[o,a],"float32")}};const S1={kernelName:Tb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,pad:s,filterShape:c}=r,l=PI(o.shape,c,i,1,s),u=new b1(l);return n.runWebGLProgram(u,[o,a],"float32")}};const I1={kernelName:_b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{pad:i,strides:s,inputShape:c}=r,l=PI(c,a.shape,s,1,i),u=new w1(l);return n.runWebGLProgram(u,[o,a],"float32")}},E1=v$({opSnippet:y$+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(i$,"\n  return result;\n")}),N1={kernelName:Lb,backendName:"webgl",kernelFunc:E1},F1=v$({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),T1={kernelName:Ob,backendName:"webgl",kernelFunc:F1};class _1{constructor(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,c]=e,[l]=t,[u,A]=n;this.outputShape=[l,u,A,c];const h="bilinear"===r?1:0,[d,p]=["".concat(i-1,".0"),"".concat(s-1,".0")],[f,g,m]=u>1?["".concat((i-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(d," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(d)],[y,v,b]=A>1?["".concat((s-1)/(A-1)),"(x2-x1) * width_ratio","x1*".concat(p," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(p)];this.userCode="\n      const float height_ratio = float(".concat(f,");\n      const float width_ratio = float(").concat(y,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(a,") {\n          return;\n        }\n\n        float height_scale = ").concat(g,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(m,";\n        if( in_y < 0.0 || in_y > ").concat(d," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(b,";\n        if( in_x < 0.0 || in_x > ").concat(p," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(h," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const L1={kernelName:Db,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:o,boxes:a,boxInd:i}=t,{cropSize:s,method:c,extrapolationValue:l}=r,u=new _1(o.shape,a.shape,s,c,l);return n.runWebGLProgram(u,[o,a,i],"float32")}};var O1;!function(e){e.Prod="*",e.Sum="+"}(O1||(O1={}));class R1{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,a=this.op===O1.Prod?"1.0":"0.0",i=n?a:"getX(".concat(U1(o,"coords",this.op),")"),s=this.outputShape[this.outputShape.length-1];let c="",l="";n?(c=r?"end != ".concat(s-1):"end != 0",l=r?"end + 1":"end - 1"):(c=r?"end + pow2 < ".concat(s):"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(lZ(o)," coords = getOutputCoords();\n        int end = ").concat(D1(o,"coords",this.op),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(D1(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(U1(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function U1(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function D1(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function P1(e,t,n,r,o,a){const i=t.shape.length,s=qE([r],i);let c=t;null!=s&&(c=P$({inputs:{x:t},backend:n,attrs:{perm:s}}));const l=YE(1,i)[0];if(l!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=c.shape[l];let A=c$({inputs:{x:c},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const t=new R1(e,c.shape,!1,a),r=[[h]],o=A;A=n.runWebGLProgram(t,[A],A.dtype,r),n.disposeIntermediateTensorInfo(o)}if(o){const t=new R1(e,c.shape,o,a),r=A;A=n.runWebGLProgram(t,[A],A.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=P$({inputs:{x:A},backend:n,attrs:{perm:XE(s)}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(c),e}return A}const M1={kernelName:Rb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return P1(O1.Prod,o,n,a,i,s)}};const Q1={kernelName:Ub,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,exclusive:i,reverse:s}=r;return P1(O1.Sum,o,n,a,i,s)}};const H1={kernelName:Pb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,weights:a}=t,{size:i,binaryOutput:s}=r;if(1===o.shape.length){const e=n.readSync(o.dataId),t=n.readSync(a.dataId),r=UZ(e,t,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,r)}if(2===o.shape.length){const e=n.bufferSync(o),t=n.bufferSync(a),r=DZ(e,t,i,s);return n.makeTensorInfo(r.shape,a.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(o.shape.length,"."))}};class z1{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const V1={kernelName:Mb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockSize:a,dataFormat:i}=r,s=o.shape[0],c=("NHWC"===i?o.shape[1]:o.shape[2])*a,l=("NHWC"===i?o.shape[2]:o.shape[3])*a,u=("NHWC"===i?o.shape[3]:o.shape[1])/(a*a),A=new z1("NHWC"===i?[s,c,l,u]:[s,u,c,l],a,i);return n.runWebGLProgram(A,[o],o.dtype)}};class j1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=gZ(this.outputShape.length);const a=e.filterHeight,i=e.filterWidth,s=e.outChannels/e.inChannels;let c="",l="";n&&(c=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),l="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(s,";\n        int q = d2 - d1 * ").concat(s,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(a,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}}class W1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=gZ(this.outputShape.length);const a=e.outChannels/e.inChannels,i=e.padInfo.left,s=e.strideWidth,c=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,A=u;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)h+="\n          vec4 xTexelC".concat(2*g,";\n          int xTexelC").concat(2*g,"Ready;\n          vec4 xTexelC").concat(2*g+1,";\n          int xTexelC").concat(2*g+1,"Ready;\n          vec4 xC").concat(g,";");h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(let g=0;g<u;g++)h+="\n          xTexelC".concat(2*g," = vec4(0.0);\n          xTexelC").concat(2*g,"Ready = 0;\n          xTexelC").concat(2*g+1," = vec4(0.0);\n          xTexelC").concat(2*g+1,"Ready = 0;\n          xC").concat(g," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(A+1)/2;g++){const e=2*g;if(h+="\n          xC = xCCorner + ".concat(e*c,";\n          "),1===s){if(e<u&&(i%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),h+=1===c&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=i%2===0?Av(c):c;c%2===0&&i%2===1||c%2!==0&&i%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),h+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):h+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(i%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(h+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(h+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(h+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";let d="",p="";n&&(d=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(d,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(a,";\n        int q = d2 - d1 * ").concat(a,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(f,"\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const K1={kernelName:Qb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c,dimRoundingMode:l}=r;let u=c;null==u&&(u=[1,1]),dv(WI(i,u),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(u,"'")));const A=DI(o.shape,a.shape,i,u,s,l,!0);let h;h=Gv().getBool("WEBGL_PACK_DEPTHWISECONV")&&A.strideWidth<=2&&A.outChannels/A.inChannels===1?new W1(A):new j1(A);const d=[[A.padInfo.top,A.padInfo.left],[A.strideHeight,A.strideWidth],[A.dilationHeight,A.dilationWidth],[A.inHeight,A.inWidth]];return n.runWebGLProgram(h,[o,a],"float32",d)}};class G1{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(a," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class q1{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const X1={kernelName:Hb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,dy:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:l,filterShape:u}=r,A=DI(o.shape,u,i,s,c,l,!0),h=new G1(A);return n.runWebGLProgram(h,[o,a],"float32")}};const Y1={kernelName:zb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,filter:a}=t,{strides:i,dilations:s,pad:c,dimRoundingMode:l,inputShape:u}=r,A=DI(u,a.shape,i,s,c,l,!0),h=new q1(A);return n.runWebGLProgram(h,[o,a],"float32")}};class Z1{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const J1={kernelName:Vb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,o=[...r.shape,...r.shape],a=gv(r.shape),i=E$({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new Z1(a),c=n.runWebGLProgram(s,[i],i.dtype),l=E$({inputs:{x:c},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),l}};class $1{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:o,strideWidth:a,filterHeight:i,filterWidth:s,dilationHeight:c,dilationWidth:l}=e,{top:u,left:A}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(a,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(A,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(i,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const e2={kernelName:jb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a}=t,{strides:i,pad:s,dilations:c}=r,l=OI(o.shape,a.shape,i,s,"NHWC",c);let u;const A=new $1(l);u=n.runWebGLProgram(A,[o,a],"float32");const h=E$({inputs:{x:u},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(u),h}};const t2={kernelName:Xb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:o}=r,a=t,{allDims:i,summedDims:s,idDims:c}=IL(o,a.length);NL(i.length,c,a);const{path:l,steps:u}=FL(s,c),A=u.length;let h=null,d=i.length;const p=[];for(let f=0;f<A;++f){for(const e of u[f]){const{permutationIndices:t,expandDims:r}=EL(d,c[e]);let o;TL(t)?o=a[e]:(o=P$({inputs:{x:a[e]},backend:n,attrs:{perm:t}}),p.push(o));const i=o.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);mv(o.shape,i)||(o=E$({inputs:{x:o},backend:n,attrs:{shape:i}}),p.push(o)),null===h?h=o:(h=S$({inputs:{a:o,b:h},backend:n}),p.push(h))}f<A-1&&(l[f]>=0&&(h=U$({inputs:{x:h},backend:n,attrs:{axis:l[f]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(const f of p)f!==h&&n.disposeIntermediateTensorInfo(f);return h}},n2=v$({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),r2={kernelName:Yb,backendName:"webgl",kernelFunc:n2},o2={kernelName:Zb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:o}=t,a=Gv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new s$("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,o.shape):new a$("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,o.shape);return n.runWebGLProgram(a,[r,o],r.dtype)}},a2=b$({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:zZ}),i2={kernelName:$b,backendName:"webgl",kernelFunc:a2},s2=v$({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(lL,";\n  float a1 = ").concat(uL,";\n  float a2 = ").concat(AL,";\n  float a3 = ").concat(hL,";\n  float a4 = ").concat(dL,";\n  float a5 = ").concat(pL,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),c2={kernelName:Jb,backendName:"webgl",kernelFunc:s2},l2=v$({opSnippet:y$+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:VZ,dtype:"float32"}),u2={kernelName:ew,backendName:"webgl",kernelFunc:l2};function A2(e){const{inputs:t,attrs:n,backend:r}=e,{dim:o}=n,{input:a}=t,i=a.shape.length,s=a.shape.slice();let c=o;return o<0&&(dv(-(i+1)<=o,(()=>"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]"))),c=i+o+1),s.splice(c,0,1),E$({inputs:{x:a},backend:r,attrs:{shape:s}})}const h2={kernelName:tw,backendName:"webgl",kernelFunc:A2},d2="return exp(x) - 1.0;",p2=v$({opSnippet:d2,packedOpSnippet:d2,cpuKernelImpl:jZ}),f2={kernelName:nw,backendName:"webgl",kernelFunc:p2};class g2{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const o=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),a=n?"".concat(r,".0"):"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(a,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function m2(e,t,n){const r=n.texData.get(e.dataId),o=gv(e.shape),a=e.shape[e.shape.length-1],i=E$({inputs:{x:e},backend:n,attrs:{shape:[o/a,a]}}),s=i.shape,c=new g2("real",s,t),l=new g2("imag",s,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],A=n.runWebGLProgram(c,u,"float32"),h=n.runWebGLProgram(l,u,"float32"),d=u$({inputs:{real:A,imag:h},backend:n});n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(h);const p=E$({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(d),p}const y2={kernelName:rw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return m2(r,!1,n)}};class v2{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function b2(e){const{backend:t,attrs:n}=e,{shape:r,value:o}=n;let{dtype:a}=n;if(a=a||Tv(o),"string"===a){const e=Sv(a,gv(r));return e.fill(o),t.makeTensorInfo(r,a,e)}{const e=new v2(r,o),n=[[o]];return t.runWebGLProgram(e,[],a,n)}}const w2={kernelName:ow,backendName:"webgl",kernelFunc:b2};class x2{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const C2={kernelName:aw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,o=n,a=new x2(r.shape);return o.runWebGLProgram(a,[r],r.dtype)}},k2="return floor(x);",B2=v$({opSnippet:k2,packedOpSnippet:k2,cpuKernelImpl:WZ}),S2={kernelName:iw,backendName:"webgl",kernelFunc:B2},I2=b$({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),E2={kernelName:sw,backendName:"webgl",kernelFunc:I2};class N2{constructor(e){this.variableNames=["A"];const t=GY(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class F2{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=GY(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const T2={kernelName:oC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:o}=t;const{numChannels:a}=r,i="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,[c,l]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[l,c],A=[l,c,a];if(s||i){const e=Gv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=_2&&e===L2||(L2=e,_2=document.createElement("canvas").getContext("2d",{willReadFrequently:L2})),_2.canvas.width=c,_2.canvas.height=l,_2.drawImage(o,0,0,c,l),o=_2.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=fY.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);const d=Gv().getBool("WEBGL_PACK")?new F2(A):new N2(A),p=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),p}};let _2,L2=Gv().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const O2={kernelName:sC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:l,dataFormat:u,dilations:A,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=GI(u),g=DI(o.shape,a.shape,c,A,l,h,!1,f);let m;const y=[],v=null!=i,b=null!=s,w="leakyrelu"===d,x=()=>{const e=[o,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=E$({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return y.push(t),t}return e};if(v&&e.push(t(i,u)),b&&e.push(t(s,u)),w){const t=n.makeTensorInfo([],"float32",OC(p,"float32"));e.push(t),y.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===f&&Gv().getBool("WEBGL_EXP_CONV")){const e=d?w$(d,!0):null,t=new h1(g,v,e,b,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],o=x();m=n.runWebGLProgram(t,o,"float32",r)}else if(Gv().getBool("WEBGL_CONV_IM2COL"))m=g1({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else{const e=d?w$(d,!1):null,t=new u1(g,v,e,b,w),r=x();m=n.runWebGLProgram(t,r,"float32")}else m=f1({x:o,filter:a,convInfo:g,backend:n,bias:i,activation:d,preluActivationWeights:s,leakyreluAlpha:p});const C=E$({inputs:{x:m},backend:n,attrs:{shape:g.outShape}});return y.push(m),y.forEach((e=>n.disposeIntermediateTensorInfo(e))),C}};const R2={kernelName:cC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,filter:a,bias:i,preluActivationWeights:s}=t,{strides:c,pad:l,dilations:u,dimRoundingMode:A,activation:h,leakyreluAlpha:d}=r,p=[];let f=u;null==f&&(f=[1,1]),dv(WI(c,f),(()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(f,"'")));const g=DI(o.shape,a.shape,c,f,l,A,!0),m=Gv().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=h?w$(h,m):null,v=[o,a],b=null!=i,w=null!=s,x="leakyrelu"===h;if(b&&v.push(i),w&&v.push(s),x){const e=n.makeTensorInfo([],"float32",OC(d,"float32"));v.push(e),p.push(e)}let C;C=m?new W1(g,b,y,w,x):new j1(g,b,y,w,x);const k=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],B=n.runWebGLProgram(C,v,"float32",k);return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),B}};class U2{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const o=lZ(n.length);let a="\n    int index;";for(let i=0;i<this.sliceDim;i++)a+="\n          index = round(getIndices(coords[0], ".concat(i,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[i],";\n          flattenIndex += index * ").concat(this.strides[i],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(a,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const D2={kernelName:uw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:o}=t,a=o.shape,i=a[a.length-1],s=gv(r.shape),[c,l,u,A]=iL(r,o),h=E$({inputs:{x:o},backend:n,attrs:{shape:[l,i]}}),d=E$({inputs:{x:r},backend:n,attrs:{shape:[gv(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.readSync(o.dataId),t=n.bufferSync(r),a=KZ(e,t,r.dtype,l,i,u,A,r.shape,s);return n.makeTensorInfo(c,r.dtype,a.values)}const p=new U2(i,A,[l,u],r.shape),f=n.runWebGLProgram(p,[d,h],d.dtype),g=E$({inputs:{x:f},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),g}};class P2{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=lZ(this.rank),r=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<e.length;o++)2===o?r.push("index"):r.push("".concat(n[o]));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function M2(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,indices:a}=t,{axis:i,batchDims:s}=r,c=Cv(i,o.shape)[0];if(Gv().get("DEBUG")){const e=n.readSync(a.dataId),t=o.shape[c];for(let n=0;n<e.length;++n){const r=e[n];dv(r<=t-1&&r>=0,(()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")))}}const l=qL(o,a,c,s),u=gv(a.shape),A=[],h=E$({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),d=E$({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,u/l.batchSize]}});A.push(h),A.push(d);const p=[l.batchSize,l.outerSize,u/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([o,a])||"string"===o.dtype){const e=n.bufferSync(d),t=n.bufferSync(h),r=GZ(t,e,p);return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}const f=new P2(h.shape,p),g=n.runWebGLProgram(f,[h,d],h.dtype);A.push(g);const m=E$({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}const Q2={kernelName:lw,backendName:"webgl",kernelFunc:M2},H2=b$({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:qZ,dtype:"bool"}),z2={kernelName:Aw,backendName:"webgl",kernelFunc:H2},V2=b$({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:XZ}),j2={kernelName:hw,backendName:"webgl",kernelFunc:V2};const W2={kernelName:pw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return m2(r,!0,n)}},K2=v$({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),G2={kernelName:gw,backendName:"webgl",kernelFunc:K2},q2=v$({opSnippet:"return float(isinf(x));",dtype:"bool"}),X2={kernelName:mw,backendName:"webgl",kernelFunc:q2},Y2=v$({opSnippet:"return float(isnan(x));",dtype:"bool"}),Z2={kernelName:yw,backendName:"webgl",kernelFunc:Y2},J2=b$({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:YZ,dtype:"bool"}),$2={kernelName:bw,backendName:"webgl",kernelFunc:J2},e5=b$({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:ZZ,dtype:"bool"}),t5={kernelName:ww,backendName:"webgl",kernelFunc:e5};const n5={kernelName:xw,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:o,num:a}=n,i=JZ(r,o,a);return t.makeTensorInfo([i.length],"float32",i)}},r5=v$({opSnippet:y$+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:$Z}),o5={kernelName:Cw,backendName:"webgl",kernelFunc:r5},a5=v$({opSnippet:y$+"\n  return log(1.0 + x);\n"}),i5={kernelName:kw,backendName:"webgl",kernelFunc:a5},s5=b$({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),c5={kernelName:Bw,backendName:"webgl",kernelFunc:s5},l5=v$({opSnippet:"return float(!(x >= 1.0));"}),u5={kernelName:Sw,backendName:"webgl",kernelFunc:l5},A5=b$({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),h5={kernelName:Iw,backendName:"webgl",kernelFunc:A5};class d5{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];const a=t,i=e[3]-1;let s;this.outputShape=e;const c="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(a,"; j <= ").concat(a,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(i,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(s,";\n        setOutput(val);\n      }\n    ")}}class p5{constructor(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=t,i=e[3]-1;let s;this.outputShape=e;const c="float(".concat(n,") + float(").concat(r,") * sum");s=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(a,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(a,"; j <= ").concat(a,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(i,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(s,";\n        setOutput(result);\n      }\n    ")}}const f5={kernelName:Ew,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{depthRadius:a,bias:i,alpha:s,beta:c}=r,l=Gv().getBool("WEBGL_PACK_NORMALIZATION")?new p5(o.shape,a,i,s,c):new d5(o.shape,a,i,s,c);return n.runWebGLProgram(l,[o],o.dtype)}};class g5{constructor(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const m5={kernelName:Nw,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o,y:a,dy:i}=t,{depthRadius:s,bias:c,alpha:l,beta:u}=r,A=new g5(o.shape,s,c,l,u);return n.runWebGLProgram(A,[o,a,i],o.dtype)}};function y5(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reductionIndices:a,keepDims:i}=r,s=o.shape.length,c=Cv(a,o.shape);let l=c;const u=qE(l,s),A=null!=u,h=n.shouldExecuteOnCPU([o]);let d=o;if(A){if(h){const e=n.texData.get(d.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=o.shape[u[n]];const r=EJ(e,o.shape,o.dtype,u,t);d=n.makeTensorInfo(t,o.dtype);n.texData.get(d.dataId).values=r}else d=R$(o,u,n);l=YE(l.length,s)}GE("max",l,s);const[p,f]=WE(d.shape,l);let g,m=p;if(i&&(m=KE(p,c)),h){const e=n.texData.get(d.dataId).values,t=eJ(e,gv(f),m,o.dtype);g=n.makeTensorInfo(m,o.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const o=gv(t),a=E$({inputs:{x:e},attrs:{shape:[gv(e.shape)/o,o]},backend:r}),i=_$(a,e.dtype,"max",r),s=E$({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(d,f,m,n);return A&&n.disposeIntermediateTensorInfo(d),g}const v5={kernelName:Fw,backendName:"webgl",kernelFunc:y5},b5=b$({opSnippet:o$+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i$+"\n  return result;\n",cpuKernelImpl:tJ}),w5={kernelName:Tw,backendName:"webgl",kernelFunc:b5};const x5={kernelName:_w,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;WY(o,"maxPool");const{filterSize:a,strides:i,pad:s,dimRoundingMode:c}=r;dv(WI(i,1),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")));const l=RI(o.shape,a,i,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&mv(l.inShape,l.outShape))return c$({inputs:{x:o},backend:n});const u=new b0(l,"max",!1);return n.runWebGLProgram(u,[o],o.dtype)}};const C5={kernelName:Ow,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{filterSize:a,strides:i,pad:s,dataFormat:c,dimRoundingMode:l}=r,u=UI(o.shape,a,i,[1,1,1],s,l,c),A=new w0(u,"max",!1);return n.runWebGLProgram(A,[o],o.dtype)}};class k5{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,c=o*a-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(a,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(a," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class B5{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,c=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.front,A=c-1-e.padInfo.top,h=l-1-e.padInfo.left,d=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(A,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(a,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(i,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(d," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const S5={kernelName:Rw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a}=t,i=a,{filterSize:s,strides:c,pad:l,dimRoundingMode:u}=r,A=UI(i.shape,s,c,[1,1,1],l,u),h=new w0(A,"max",!0),d=n.runWebGLProgram(h,[i],i.dtype),p=new B5(A),f=n.runWebGLProgram(p,[o,d],i.dtype);return n.disposeIntermediateTensorInfo(d),f}};const I5={kernelName:Lw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:o,input:a,output:i}=t,s=a;WY([a,i],"maxPoolGrad");const{filterSize:c,strides:l,pad:u,dimRoundingMode:A}=r,h=RI(s.shape,c,l,1,u,A),d=new b0(h,"max",!0),p=n.runWebGLProgram(d,[s],s.dtype),f=new k5(h),g=n.runWebGLProgram(f,[o,p],s.dtype);return n.disposeIntermediateTensorInfo(p),g}};const E5={kernelName:Uw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{filterSize:a,strides:i,pad:s,includeBatchInIndex:c}=n,l=r;dv(4===o.shape.length,(()=>"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")));const u=[1,1];dv(WI(i,u),(()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(u,"'")));const A=RI(o.shape,a,i,u,s),[h,d]=function(e,t,n,r){let o=new b0(n,"max",!1);const a=r.runWebGLProgram(o,[e],"float32");return o=new b0(n,"max",!0,!0,t),[a,r.runWebGLProgram(o,[e],"float32")]}(o,c,A,l);return[h,d]}};const N5={kernelName:Dw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,{keepDims:a,axis:i}=n,s=r,c=o.shape.length,l=Cv(i,o.shape);let u=l;const A=qE(u,c),h=null!=A,d=s.shouldExecuteOnCPU([o]),p=[];let f=o;if(h){if(d){const e=s.texData.get(f.dataId).values,t=new Array(c);for(let r=0;r<t.length;r++)t[r]=o.shape[A[r]];const n=EJ(e,o.shape,o.dtype,A,t);f=s.makeTensorInfo(t,o.dtype);s.texData.get(f.dataId).values=n}else f=R$(o,A,s);p.push(f),u=YE(u.length,c)}GE("sum",u,c);const[g,m]=WE(f.shape,u);let y=g;a&&(y=KE(g,l));const v=function(e,t,n,r){const o=gv(t),a=E$({inputs:{x:e},attrs:{shape:[gv(e.shape)/o,o]},backend:r}),i=_$(a,"float32","mean",r),s=E$({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}(f,m,y,s);for(const b of p)s.disposeIntermediateTensorInfo(b);return v}};const F5={kernelName:Pw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=Cv(a,o.shape);let l=c;const u=qE(l,s);let A=o;null!=u&&(A=P$({inputs:{x:o},backend:n,attrs:{perm:u}}),l=YE(l.length,o.shape.length)),GE("min",l,s);const[h,d]=WE(A.shape,l),p=E$({inputs:{x:A},backend:n,attrs:{shape:[-1,gv(d)]}}),f=_$(p,p.dtype,"min",n);let g;if(i){g=E$({inputs:{x:f},backend:n,attrs:{shape:KE(h,c)}})}else g=E$({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(A),g}},T5=b$({opSnippet:o$+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+i$+"\n  return result;\n",cpuKernelImpl:nJ}),_5={kernelName:Mw,backendName:"webgl",kernelFunc:T5};class L5{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=lZ(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(a,");\n      ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(a,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class O5{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=lZ(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=TJ("rc",r),c=TJ("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),A="reflect"===n?0:1;let h="";if(1===r){const e="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(A,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(A,";\n        }\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(A,") +\n                gte * ((end - 1) * 2 - source + ").concat(A,");\n        source -= start;\n      ");h="\n        ".concat(o," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        ").concat(s[r-1]," += 1;\n        if(").concat(l,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(s[r-2]," += 1;\n        if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          ").concat(s[r-1]," += 1;\n          if(").concat(l,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(a,");\n      const ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}}const R5={kernelName:Qw,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:o}=t,{paddings:a,mode:i}=r,s=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new O5(o.shape,a,i):new L5(o.shape,a,i);return n.runWebGLProgram(s,[o],o.dtype)}},U5=b$({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+i$+"\n  return result;\n"}),D5={kernelName:Hw,backendName:"webgl",kernelFunc:U5};class P5{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const M5=b$({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Q5={kernelName:qb,backendName:"webgl",kernelFunc:M5},H5="return a - b;",z5=b$({opSnippet:H5,packedOpSnippet:H5,supportsComplex:!0,cpuKernelImpl:BJ}),V5={kernelName:Kx,backendName:"webgl",kernelFunc:z5};function j5(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{dim:a}=r,i=Cv([a],o.shape),s=y5({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),c=KE(s.shape,i),l=E$({inputs:{x:s},backend:n,attrs:{shape:c}}),u=z5({inputs:{a:o,b:l},backend:n}),A=l2({inputs:{x:u},backend:n}),h=U$({inputs:{x:A},backend:n,attrs:{axis:i,keepDims:!1}}),d=E$({inputs:{x:h},backend:n,attrs:{shape:c}}),p=M5({inputs:{a:A,b:d},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}const W5={kernelName:Lx,backendName:"webgl",kernelFunc:j5};const K5={kernelName:zw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:o}=t,{numSamples:a,seed:i,normalized:s}=r,c=s?o:j5({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),l=c.shape[0],u=c.shape[1],A=new P5(l,u,a),h=[[i]],d=n.runWebGLProgram(A,[c],"int32",h);return s||n.disposeIntermediateTensorInfo(c),d}},G5=MJ+"\n  return -x;\n";const q5={kernelName:jw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,o]=oJ(e.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,t)}let o;return o=Gv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new JJ(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new PJ(r.shape,G5),n.runWebGLProgram(o,[r],r.dtype)}},X5=ZT;const Y5={kernelName:Kw,backendName:"webgl",kernelFunc:function(e){lC("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c}=r,l=n.readSync(o.dataId),u=n.readSync(a.dataId),{selectedIndices:A}=X5(l,u,i,s,c);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}},Z5=JT;const J5={kernelName:Gw,backendName:"webgl",kernelFunc:function(e){lC("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,padToMaxOutputSize:l}=r,u=n.readSync(o.dataId),A=n.readSync(a.dataId),{selectedIndices:h,validOutputs:d}=Z5(u,A,i,s,c,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},$5=$T;const e4={kernelName:qw,backendName:"webgl",kernelFunc:function(e){lC("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:o,scores:a}=t,{maxOutputSize:i,iouThreshold:s,scoreThreshold:c,softNmsSigma:l}=r,u=n.readSync(o.dataId),A=n.readSync(a.dataId),h=i,d=s,p=c,f=l,{selectedIndices:g,selectedScores:m}=$5(u,A,h,d,p,f);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}};class t4{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const n4={kernelName:Yw,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:o}=t,{dtype:a,depth:i,onValue:s,offValue:c}=r,l=gv(o.shape),u=new t4(l,i,s,c),A=E$({inputs:{x:o},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(u,[A],a);n.disposeIntermediateTensorInfo(A);const d=E$({inputs:{x:h},backend:n,attrs:{shape:[...o.shape,i]}});return n.disposeIntermediateTensorInfo(h),d}};function r4(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=V0({inputs:{input:r},backend:n}),t=r4({inputs:{x:e},backend:n}),o=a1({inputs:{input:r},backend:n}),a=r4({inputs:{x:o},backend:n}),i=u$({inputs:{real:t,imag:a},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),i}return b2({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const o4={kernelName:nC,backendName:"webgl",kernelFunc:r4};const a4={kernelName:Xw,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:o}=n;if("string"===o.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===o.dtype){const t=V0({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r}),a=a1({inputs:{input:o},backend:r}),i=r4({inputs:{x:a},backend:r}),s=u$({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(i),s}return b2({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:r})}};const i4={kernelName:Zw,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:o}=r;if(1===t.length)return A2({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const a=t[0].shape,i=t[0].dtype;t.forEach((e=>{pv(a,e.shape,"All tensors passed to stack must have matching shapes"),dv(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],c=c1({inputs:t.map((e=>{const t=A2({inputs:{input:e},backend:n,attrs:{dim:o}});return s.push(t),t})),backend:n,attrs:{axis:o}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};class s4{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=lZ(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(o," start = ").concat(o,"(").concat(a,");\n      ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(a,";\n        int end = ").concat(i,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class c4{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,o=lZ(r),a=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),s=TJ("rc",r),c=TJ("source",r),l="".concat(s[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(c.slice(-2).join(),")"),A=["".concat(o," rc = outputLoc;"),"".concat(s[r-1]," += 1;\n       if(").concat(l,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(s[r-2]," += 1;\n       if(").concat(s[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(s[r-1]," += 1;\n         if(").concat(l,") {")],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let d="";for(let p=0,f=1===r?2:4;p<f;p++)d+="\n        ".concat(A[p],"\n        if (").concat(h,") {\n          result[").concat(p,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(p,"] = getChannel(getX(").concat(c.join(),"), ").concat(u,");\n        }\n      ");d+=1===r?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(a,");\n      const ").concat(o," end = ").concat(o,"(").concat(i,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const l4=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{paddings:a,constantValue:i}=r;if(0===gv(o.shape)){const e=a.map(((e,t)=>e[0]+o.shape[t]+e[1]));return b2({backend:n,attrs:{shape:e,value:i,dtype:o.dtype}})}const s=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new c4(o.shape,a,i):new s4(o.shape,a,i),c=[[i]];return n.runWebGLProgram(s,[o],o.dtype,c)},u4={kernelName:Jw,backendName:"webgl",kernelFunc:l4},A4=b$({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+i$+"\n  return result;\n"}),h4={kernelName:$w,backendName:"webgl",kernelFunc:A4};const d4={kernelName:tx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{axis:a,keepDims:i}=r,s=o.shape.length,c=[],l=Cv(a,o.shape);let u=l;const A=qE(u,s);let h,d=o;if(null!=A&&(d=P$({inputs:{x:o},backend:n,attrs:{perm:A}}),u=YE(u.length,s),c.push(d)),GE("prod",u,s),n.shouldExecuteOnCPU([d])){const e=n.texData.get(d.dataId).values,{outVals:t,outShape:r,outDtype:o}=iJ(d.shape,d.dtype,e,u);h=n.makeTensorInfo(r,o,t)}else{const[e,t]=WE(d.shape,u),r=gv(t),a=E$({inputs:{x:d},backend:n,attrs:{shape:[-1,r]}}),i=_$(a,hk(o.dtype),"prod",n);h=E$({inputs:{x:i},backend:n,attrs:{shape:e}}),c.push(a),c.push(i)}if(i){c.push(h);const e=KE(h.shape,l);h=E$({inputs:{x:h},backend:n,attrs:{shape:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const p4={kernelName:nx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:o,paramsDenseValues:a,indices:i}=t,{outputRaggedRank:s}=r,c=o.map((e=>n.readSync(e.dataId))),l=o.map((e=>e.shape)),u=n.readSync(a.dataId),A=n.readSync(i.dataId),[h,d,p]=sJ(c,l,u,a.shape,a.dtype,A,i.shape,s),f=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(p,a.dtype,d);return f.concat([g])}};const f4={kernelName:rx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:o,deltas:a}=t,i=n.readSync(r.dataId),s=n.readSync(o.dataId),c=n.readSync(a.dataId),[l,u]=cJ(i,r.shape,r.dtype,s,o.shape,c,a.shape);return[n.makeTensorInfo([l.length],"int32",l),n.makeTensorInfo([u.length],r.dtype,u)]}};const g4={kernelName:ox,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:o,values:a,defaultValue:i,rowPartitionTensors:s}=t,{rowPartitionTypes:c}=r,l=n.readSync(o.dataId),u=n.readSync(a.dataId),A=n.readSync(i.dataId),h=s.map((e=>n.readSync(e.dataId))),d=s.map((e=>e.shape)),[p,f]=lJ(l,o.shape,u,a.shape,a.dtype,A,i.shape,h,d,c);return n.makeTensorInfo(p,a.dtype,f)}},m4=e=>{const{backend:t,attrs:n}=e,{start:r,stop:o,step:a,dtype:i}=n,s=uJ(r,o,a,i);return t.makeTensorInfo([s.length],i,s)},y4={kernelName:ax,backendName:"webgl",kernelFunc:m4},v4=v$({opSnippet:"return 1.0 / x;"}),b4={kernelName:sx,backendName:"webgl",kernelFunc:v4},w4=v$({opSnippet:MJ+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),x4={kernelName:cx,backendName:"webgl",kernelFunc:w4},C4=v$({opSnippet:MJ+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),k4={kernelName:px,backendName:"webgl",kernelFunc:C4};class B4{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let A;A=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(A,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class S4{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let A;A=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(A,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const I4={kernelName:hx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[c,l]=s,u=Gv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new S4(o.shape,c,l,a,i):new B4(o.shape,c,l,a,i);return n.runWebGLProgram(u,[o],"float32")}};class E4{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],c=[n&&a>1?a-1:a,n&&i>1?i-1:i],l=s[0]/c[0],u=s[1]/c[1],A=1/l,h=1/u,d=2*Math.ceil(A)+2,p=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(A,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(d,");\n        const int winWidth = int(").concat(p,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(a,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const N4={kernelName:dx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new E4(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class F4{constructor(e,t,n,r,o){this.variableNames=["A"],this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],A=r?"0.5":"0.0";let h;h=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(i,".0, ").concat(s,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(A,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class T4{constructor(e,t,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,s,c]=e;this.outputShape=[a,t,n,c];const l=[r&&t>1?i-1:i,r&&n>1?s-1:s],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],A=r?"0.5":"0.0";let h;h=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(l[0]/u[0],",\n          ").concat(l[1]/u[1],",\n          ").concat(l[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(i,".0, ").concat(s,".0,\n                                     ").concat(s,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(A,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const _4={kernelName:ux,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o}=t,{alignCorners:a,halfPixelCenters:i,size:s}=r,[c,l]=s,u=Gv().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new T4(o.shape,c,l,a,i):new F4(o.shape,c,l,a,i);return n.runWebGLProgram(u,[o],o.dtype)}};class L4{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,o]=t,[,a,i]=e,s=[n&&a>1?r-1:r,n&&i>1?o-1:o],c=[n&&a>1?a-1:a,n&&i>1?i-1:i],l=s[0]/c[0],u=s[1]/c[1],A=1/l,h=1/u,d=2*Math.ceil(A)+2,p=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(l,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(A,");\n        const float invWidthScale = float(").concat(h,");\n\n        const int winHeight = int(").concat(d,");\n        const int winWidth = int(").concat(p,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(a,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(i,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(s[0],") *\n                (float(dyR) / float(").concat(c[0],"));\n\n            float sourceFracCol =\n                float(").concat(s[1],") *\n                  (float(dyC) / float(").concat(c[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const O4={kernelName:Ax,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:o,dy:a}=t,{alignCorners:i}=r,s=new L4(a.shape,o.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}};class R4{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r))).join(","),o=lZ(n);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class U4{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=TJ("rc",n),o="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),a="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),i=lZ(n);function s(n){const r=e.map(((r,o)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(o,n))),o=r.join(","),a=r.slice(-2).join(",");return"getChannel(getX(".concat(o,"), vec2(").concat(a,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(i," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(r.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice()),";\n          }\n          if(").concat(a,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const D4={kernelName:fx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{dims:a}=r,i=o.shape.length,s=Cv(a,o.shape);if(0===i)return c$({inputs:{x:o},backend:n});const c=Gv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U4(o.shape,s):new R4(o.shape,s);return n.runWebGLProgram(c,[o],o.dtype)}};class P4{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let o="";o="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const M4={kernelName:aC,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:o}=t,{radians:a,fillValue:i,center:s}=n,c=r,l=new P4(o.shape,i),[u,A]=eL(s,o.shape[1],o.shape[2]),h=[[u,A,Math.sin(a),Math.cos(a)]];return c.runWebGLProgram(l,[o],o.dtype,h)}},Q4=v$({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),H4={kernelName:gx,backendName:"webgl",kernelFunc:Q4},z4=v$({opSnippet:"return inversesqrt(x);",cpuKernelImpl:AJ}),V4={kernelName:mx,backendName:"webgl",kernelFunc:z4};class j4{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const s=lZ(o.length),c=lZ(a.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let A="";1===r?A="i":2===r&&(A="i, coords[1]");const h="getUpdates(".concat(A,")");let d="";i&&(d="coords[0], coords[1]");const p="getDefaultValue(".concat(d,")"),f=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(p,", sum, float(found)));\n        }\n      ")}}class W4{constructor(e,t,n,r,o,a){let i=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const s=lZ(o.length),c=lZ(a.length);let l="";1===n?l="i":2===n&&(l="i, j");const u="getIndices(".concat(l,")");let A="";1===r?A="i":2===r&&(A="i, coords[1]");const h="getUpdates(".concat(A,")");let d="";i&&(d="coords[0], coords[1]");const p="getDefaultValue(".concat(d,")"),f=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(f,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(p,", sum, found));\n        }\n      ")}}const K4={kernelName:yx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:o,updates:a}=t,{shape:i}=r,{sliceRank:s,numUpdates:c,sliceSize:l,strides:u,outputSize:A}=sT(0,o,i),h=[A/l,l];if(0===A)return n.makeTensorInfo(i,o.dtype);const d=E$({inputs:{x:o},backend:n,attrs:{shape:[c,s]}}),p=E$({inputs:{x:a},backend:n,attrs:{shape:[c,l]}}),f=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=Gv().getBool("WEBGL_PACK")?new W4(c,s,d.shape.length,p.shape.length,u,h):new j4(c,s,d.shape.length,p.shape.length,u,h);const m=n.runWebGLProgram(g,[p,d,f],p.dtype),y=E$({inputs:{x:m},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),y}};class G4{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),a=2===Gv().getNumber("WEBGL_VERSION")?"while (left < right) {":o,i="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(a,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(i," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const q4={kernelName:bx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:o,values:a}=t,{side:i}=r,s=new G4(o.shape[0],o.shape[1],a.shape[1],i),c=[[o.shape[1]]];return n.runWebGLProgram(s,[o,a],"int32",c)}};class X4{constructor(e,t,n){let r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)o="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let r=0;r<t.length;r++)i.push("".concat(n[r])),r<e&&a.push("".concat(n[r]));r=a.join(),o=i.join()}const a=lZ(n);this.userCode="\n      void main() {\n        ".concat(a," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}}const Y4={kernelName:wx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:o,e:a}=t,i=new X4(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,a],Ak(o.dtype,a.dtype))}},Z4=v$({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(sL,";\n  float scale = ").concat(cL,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),J4={kernelName:xx,backendName:"webgl",kernelFunc:Z4},$4=v$({opSnippet:y$+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:dJ}),e3={kernelName:Ix,backendName:"webgl",kernelFunc:$4},t3=v$({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),n3={kernelName:Sx,backendName:"webgl",kernelFunc:t3},r3=v$({opSnippet:y$+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(i$,"\n  return result;\n")}),o3={kernelName:kx,backendName:"webgl",kernelFunc:r3},a3=v$({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),i3={kernelName:Bx,backendName:"webgl",kernelFunc:a3},s3=v$({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),c3={kernelName:Ex,backendName:"webgl",kernelFunc:s3},l3={kernelName:Tx,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{blockShape:a,paddings:i}=r;dv(o.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=a.reduce(((e,t)=>e*t)),c=[[0,0]];c.push(...i);for(let m=1+a.length;m<o.shape.length;++m)c.push([0,0]);const l=[],u=l4({inputs:{x:o},backend:n,attrs:{paddings:c,constantValue:0}}),A=tL(u.shape,a,s,!1),h=nL(A.length,a.length,!1),d=rL(u.shape,a,s,!1),p=E$({inputs:{x:u},backend:n,attrs:{shape:A}}),f=P$({inputs:{x:p},backend:n,attrs:{perm:h}}),g=E$({inputs:{x:f},backend:n,attrs:{shape:d}});return l.push(u),l.push(p),l.push(f),l.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const u3={kernelName:Ox,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:o,denseShape:a,defaultValue:i}=t;if(1!==a.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(a.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==o.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(o.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));const s=n.readSync(r.dataId),c=n.readSync(o.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId)[0],[A,h,d,p,f]=gJ(s,r.shape,r.dtype,c,o.dtype,l,u);return[n.makeTensorInfo(h,r.dtype,A),n.makeTensorInfo([h[0]],o.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map((e=>Number(e))))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};const A3={kernelName:Rx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:o,newShape:a}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==o.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(o.shape));if(1!==a.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(a.shape));const i=Array.from(n.readSync(o.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(a.dataId)),[l,u,A]=mJ(s,r.shape,r.dtype,i,c);return[n.makeTensorInfo(u,r.dtype,l),n.makeTensorInfo([A.length],a.dtype,new Int32Array(A))]}};const h3={kernelName:Ux,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(a.shape));const i=n.readSync(r.dataId),s=n.readSync(o.dataId),c=n.readSync(a.dataId),[l,u]=yJ(i,r.shape,r.dtype,s,c,!0);return n.makeTensorInfo(u,r.dtype,l)}};const d3={kernelName:Dx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:o,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==o.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(o.shape));if(1!==a.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(a.shape));const i=n.readSync(r.dataId),s=n.readSync(o.dataId),c=n.readSync(a.dataId),[l,u]=yJ(i,r.shape,r.dtype,s,c);return n.makeTensorInfo(u,r.dtype,l)}};const p3={kernelName:Px,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:o,sparseValues:a,defaultValue:i}=t,{outputShape:s}=r,{sliceRank:c,numUpdates:l,sliceSize:u,strides:A,outputSize:h}=sT(0,o,s);if("string"===a.dtype){const e=n.bufferSync(o),t=n.bufferSync(a),r=PC(n.readSync(i.dataId)[0]),d=hJ(e,t,s,h,u,l,c,A,r,false);return n.makeTensorInfo(s,d.dtype,d.values)}const d=new j4(l,c,o.shape.length,a.shape.length,A,[h,1],false),p=n.runWebGLProgram(d,[a,o,i],a.dtype),f=E$({inputs:{x:p},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),f}};const f3={kernelName:_x,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{numOrSizeSplits:a,axis:i}=r,s=Cv(i,o.shape)[0],c=LL(o,a,s),l=o.shape.length,u=new Array(l).fill(0),A=o.shape.slice();return c.map((e=>{const t=[...A];t[s]=e;const r=R0({inputs:{x:o},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},g3="return sqrt(x);",m3=v$({opSnippet:g3,packedOpSnippet:g3,cpuKernelImpl:vJ}),y3={kernelName:Nx,backendName:"webgl",kernelFunc:m3},v3={kernelName:Qx,backendName:"webgl",kernelFunc:v$({opSnippet:"return x * x;"})},b3="return (a - b) * (a - b);",w3=b$({opSnippet:b3,packedOpSnippet:b3}),x3={kernelName:Mx,backendName:"webgl",kernelFunc:w3};const C3={kernelName:Hx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");const a=XL(n.readSync(o.dataId)),i=bJ(a,"string",r);return n.makeTensorInfo(o.shape,"string",i)}};const k3={kernelName:rC,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:o}=t,a=MJ+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new PJ(o.shape,a);return r.runWebGLProgram(i,[o],o.dtype)}};class B3{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,o=lZ(n.length),a=lZ(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]")))).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(e,");\n      ").concat(o," strides = ").concat(o,"(").concat(t,");\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(i,"));\n      }\n    ")}}const S3={kernelName:zx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{begin:a,end:i,strides:s,beginMask:c,endMask:l,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:f,sliceDim0:g,isSimpleSlice:m,begin:y,end:v,strides:b}=bI(o.shape,a,i,s,c,l,u,A,h);let w;if(f)w=E$({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||m){dv(o.shape.length>=1,(()=>"Input must have rank at least 1, got: ".concat(o.shape.length)));const e=sI(y,v,b),t=R0({inputs:{x:o},backend:n,attrs:{begin:y,size:e}});w=E$({inputs:{x:t},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([o])){const e=n.readSync(o.dataId),t=YB(o.shape,o.dtype,e),r=wJ(d,t,b,y);w=n.makeTensorInfo(p,o.dtype,r.values)}else{const e=new B3(y,b,d);w=n.runWebGLProgram(e,[o],o.dtype)}}const x=E$({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),x}};const I3={kernelName:Vx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:o,nGramWidths:a,leftPad:i,rightPad:s,padWidth:c,preserveShortSequences:l}=r,{data:u,dataSplits:A}=t,h=n.readSync(u.dataId),d=n.readSync(A.dataId),[p,f]=xJ(h,d,o,a,i,s,c,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(A.shape,"int32",f)]}};const E3={kernelName:jx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:o}=r,{input:a,delimiter:i}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));const s=n.readSync(a.dataId),c=n.readSync(i.dataId)[0],[l,u,A]=CJ(s,c,o),h=u.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}};const N3={kernelName:Wx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:o}=r,{input:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),s=kJ(i,o);return n.makeTensorInfo(a.shape,"int32",s)}},F3=v$({opSnippet:"return tan(x);"}),T3={kernelName:Gx,backendName:"webgl",kernelFunc:F3},_3=v$({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),L3={kernelName:qx,backendName:"webgl",kernelFunc:_3};const O3={kernelName:vx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:o,indices:a,updates:i}=t,{}=r,{sliceRank:s,numUpdates:c,sliceSize:l,strides:u,outputSize:A}=sT(0,a,o.shape),h=[A/l,l];if(0===A)return n.makeTensorInfo(o.shape,a.dtype);const d=E$({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),p=E$({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),f=E$({inputs:{x:o},backend:n,attrs:{shape:h}}),g=new j4(c,s,d.shape.length,p.shape.length,u,h,!1,!0),m=n.runWebGLProgram(g,[p,d,f],f.dtype),y=E$({inputs:{x:m},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}};class R3{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;const r=lZ(this.rank),o=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<e.length;o++)r.push("imod(".concat(n[o],", ").concat(e[o],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}}function U3(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{reps:a}=r;if("string"===o.dtype||o.shape.length>5){const e=n.readSync(o.dataId),t="string"===o.dtype?e.map((e=>PC(e))):e,r=YB(o.shape,o.dtype,t),i=SJ(r,a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new R3(o.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const D3={kernelName:Xx,backendName:"webgl",kernelFunc:U3};class P3{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class M3{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Q3(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function H3(e){let t=1;for(;t<e;)t*=2;return t}const z3={kernelName:Yx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o}=t,{k:a,sorted:i}=r,s=Gv().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=Gv().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=o.shape,u=l[l.length-1];if(n.shouldExecuteOnCPU([o])||u<s||a>c){const e=n.readSync(o.dataId),[t,r]=IJ(e,l,o.dtype,a,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===a)return l[l.length-1]=0,[n.makeTensorInfo(l,o.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===u)return[o,b2({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const A=n.texData.get(o.dataId),h=null!==A&&A.isPacked,d=h?n.unpackTensor(o):o,p=gv(l)/u,f=E$({inputs:{x:d},attrs:{shape:[p,u]},backend:n});h&&Q3(n,d);const g=H3(a),m=H3(u);let y=null;const v=()=>null===y?[f,f]:[f,y],b=(e,t,r)=>{const o=v(),a=new P3(r),i=[[u],[null===y?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=y;y=n.runWebGLProgram(a,o,"int32",i),Q3(n,s)};for(let B=1;B<g;B*=2){const e=2*B;for(let t=B;t>=1;t/=2)b(e,t,[p,m])}for(let B=m;B>g;B/=2){const e=v(),t=new M3([p,B/2]),r=[[u],[null===y?1:0],[g]],o=y;y=n.runWebGLProgram(t,e,"int32",r),Q3(n,o);const a=g/2,i=2*a;for(let n=a;n>=1;n/=2)b(i,n,y.shape)}let w=y;y=R0({inputs:{x:y},backend:n,attrs:{begin:0,size:[p,a]}}),Q3(n,w);let x=M2({inputs:{x:f,indices:y},backend:n,attrs:{axis:1,batchDims:1}});Q3(n,f);const C=l.slice(0,-1);C.push(a),w=y,y=E$({inputs:{x:y},attrs:{shape:C},backend:n}),Q3(n,w);const k=x;return x=E$({inputs:{x:x},attrs:{shape:C},backend:n}),Q3(n,k),[x,y]}};class V3{constructor(e,t,n,r,o,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(i," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const j3={kernelName:Zx,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:o,transforms:a}=t,{interpolation:i,fillMode:s,fillValue:c,outputShape:l}=r,[u,A,h,d]=o.shape,[p,f]=null!=l?l:[A,h],g=new V3(A,h,i,s,c,[u,p,f,d]);return n.runWebGLProgram(g,[o,a],"float32")}};const W3={kernelName:$x,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:o}=n,{x:a}=t;WY(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:s,outputShape:c,indices:l}=NJ(i,o,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};const K3={kernelName:eC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:o}=t;let{axis:a}=r;a<0&&(a+=o.shape.length);const i=o,s=i.shape.length,c=o.shape[a],l=new Array(s-1);let u=0;for(let f=0;f<s;f++)f!==a&&(l[u++]=i.shape[f]);const A=[],h=new Array(s).fill(0),d=i.shape.slice();d[a]=1;const p=new Array(c);for(let f=0;f<p.length;f++){h[a]=f;const e=R0({inputs:{x:i},backend:n,attrs:{begin:h,size:d}}),t=E$({inputs:{x:e},backend:n,attrs:{shape:l}});p[f]=t,A.push(e)}return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};class G3{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];const s=4*Math.floor(n/4),c=n%4,l="\n        sumValue += dot(values, segFilter);\n    ";let u="";o%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));let A="";o%n>0&&(A="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(A,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(a,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(a,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const q3={kernelName:tC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:o,segmentIds:a}=t,{numSegments:i}=r,s=o.shape.length,c=[];let l=0;const u=qE([l],s);let A=o;null!=u&&(A=P$({inputs:{x:o},backend:n,attrs:{perm:u}}),c.push(A),l=YE(1,s)[0]);const h=GL(A.shape,l,i),d=gv([A.shape[l]]),p=E$({inputs:{x:A},backend:n,attrs:{shape:[-1,d]}});c.push(p);const f=hk(o.dtype),g=(e,t,r,o,a)=>{const i=e.shape[0],s=e.shape[1],l=KL(s,a),u=new G3({windowSize:l,inSize:s,batchSize:i,numSegments:a},t),A=n.compileAndRun(u,[e,r],o);if(c.push(A),A.shape[1]===a)return A;const h=m4({backend:n,attrs:{start:0,stop:a,step:1,dtype:"float32"}}),d=U3({inputs:{x:h},backend:n,attrs:{reps:[s/l]}});c.push(h),c.push(d);return g(A,t,d,o,a)},m=E$({inputs:{x:g(p,"unsortedSegmentSum",a,f,i)},backend:n,attrs:{shape:h}});let y=m;if(null!=u){c.push(m);const e=XE(u);y=P$({inputs:{x:y},backend:n,attrs:{perm:e}})}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}},X3=[z$,j$,K$,q$,Z$,e0,t0,n0,c0,l0,A0,d0,f0,m0,v0,x0,C0,S0,I0,E0,T0,D0,P0,M0,Q0,K0,X0,J0,A$,t1,l1,m1,x1,k1,B1,S1,I1,N1,T1,L1,M1,Q1,H1,V1,K1,X1,Y1,J1,e2,t2,r2,o2,i2,c2,u2,h2,f2,y2,w2,C2,S2,E2,T2,O2,R2,D2,Q2,z2,j2,l$,W2,i1,G2,X2,Z2,p$,$2,t5,n5,o5,i5,c5,u5,h5,f5,m5,v5,w5,x5,C5,S5,I5,E5,N5,F5,_5,R5,D5,K5,I$,q5,Y5,J5,e4,z0,n4,a4,i4,u4,h4,m$,d4,p4,f4,g4,y4,j0,Q5,b4,x4,k4,N$,I4,N4,_4,O4,D4,M4,H4,V4,K4,q4,Y4,J4,e3,n3,o3,i3,U0,W5,c3,l3,u3,A3,h3,d3,p3,f3,y3,v3,x3,C3,k3,S3,I3,E3,N3,V5,D$,T3,L3,O3,D3,z3,j3,M$,W3,K3,q3,o4];for(const n of X3)gC(n);var Y3=n(1418),Z3=n.n(Y3),J3=n(4942);function $3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$3(Object(n),!0).forEach((function(t){(0,J3.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function t6(e,t){var n=e6({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}function n6(e,t,n){var r=(n||{}).atBegin;return function(e,t,n){var r,o=n||{},a=o.noTrailing,i=void 0!==a&&a,s=o.noLeading,c=void 0!==s&&s,l=o.debounceMode,u=void 0===l?void 0:l,A=!1,h=0;function d(){r&&clearTimeout(r)}function p(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=this,l=Date.now()-h;function p(){h=Date.now(),t.apply(s,o)}function f(){r=void 0}A||(c||!u||r||p(),d(),void 0===u&&l>e?c?(h=Date.now(),i||(r=setTimeout(u?f:p,e))):p():!0!==i&&(r=setTimeout(u?f:p,void 0===u?e-l:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;d(),A=!n},p}(e,t,{debounceMode:!1!==(void 0!==r&&r)})}const{isValidElement:r6}=T;function o6(e,t){return function(e,t,n){return r6(e)?F.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}const a6="anticon",i6=F.createContext({getPrefixCls:(e,t)=>t||(e?"ant-".concat(e):"ant"),iconPrefixCls:a6}),{Consumer:s6}=i6;function c6(e){if(Array.isArray(e))return e}function l6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u6(e,t){if(e){if("string"===typeof e)return l6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l6(e,t):void 0}}function A6(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h6(e,t){return c6(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,t)||u6(e,t)||A6()}function d6(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function p6(e){return function(e){if(Array.isArray(e))return l6(e)}(e)||d6(e)||u6(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const f6=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function g6(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function m6(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var y6="data-rc-order",v6="data-rc-priority",b6="rc-util-key",w6=new Map;function x6(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):b6}function C6(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function k6(e){return Array.from((w6.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function B6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!g6())return null;var n=t.csp,r=t.prepend,o=t.priority,a=void 0===o?0:o,i=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),s="prependQueue"===i,c=document.createElement("style");c.setAttribute(y6,i),s&&a&&c.setAttribute(v6,"".concat(a)),null!==n&&void 0!==n&&n.nonce&&(c.nonce=null===n||void 0===n?void 0:n.nonce),c.innerHTML=e;var l=C6(t),u=l.firstChild;if(r){if(s){var A=k6(l).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(y6)))return!1;var t=Number(e.getAttribute(v6)||0);return a>=t}));if(A.length)return l.insertBefore(c,A[A.length-1].nextSibling),c}l.insertBefore(c,u)}else l.appendChild(c);return c}function S6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k6(C6(t)).find((function(n){return n.getAttribute(x6(t))===e}))}function I6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=S6(e,t);n&&C6(t).removeChild(n)}function E6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){var n=w6.get(e);if(!n||!m6(document,n)){var r=B6("",t),o=r.parentNode;w6.set(e,o),e.removeChild(r)}}(C6(n),n);var r=S6(t,n);if(r){var o,a,i;if(null!==(o=n.csp)&&void 0!==o&&o.nonce&&r.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce))r.nonce=null===(i=n.csp)||void 0===i?void 0:i.nonce;return r.innerHTML!==e&&(r.innerHTML=e),r}var s=B6(e,n);return s.setAttribute(x6(n),t),s}function N6(e,t,n){var r=F.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}var F6=n(1002),T6={},_6=[];function L6(e,t){}function O6(e,t){}function R6(e,t,n){t||T6[n]||(e(!1,n),T6[n]=!0)}function U6(e,t){R6(L6,e,t)}U6.preMessage=function(e){_6.push(e)},U6.resetWarned=function(){T6={}},U6.noteOnce=function(e,t){R6(O6,e,t)};const D6=U6;const P6=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=r.has(t);if(D6(!i,"Warning: There may be circular references"),i)return!1;if(t===o)return!0;if(n&&a>1)return!1;r.add(t);var s=a+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c],o[c],s))return!1;return!0}if(t&&o&&"object"===(0,F6.Z)(t)&&"object"===(0,F6.Z)(o)){var l=Object.keys(t);return l.length===Object.keys(o).length&&l.every((function(n){return e(t[n],o[n],s)}))}return!1}(e,t)};function M6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Q6=n(9142);function H6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,Q6.Z)(r.key),r)}}function z6(e,t,n){return t&&H6(e.prototype,t),n&&H6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var V6=function(){function e(t){M6(this,e),(0,J3.Z)(this,"instanceId",void 0),(0,J3.Z)(this,"cache",new Map),this.instanceId=t}return z6(e,[{key:"get",value:function(e){return this.cache.get(e.join("%"))||null}},{key:"update",value:function(e,t){var n=e.join("%"),r=t(this.cache.get(n));null===r?this.cache.delete(n):this.cache.set(n,r)}}]),e}();const j6=V6;var W6="data-token-hash",K6="data-css-hash",G6="__cssinjs_instance__";function q6(){var e=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(K6,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[G6]=t[G6]||e,t[G6]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(K6,"]"))).forEach((function(t){var n,o=t.getAttribute(K6);r[o]?t[G6]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[o]=!0}))}return new j6(e)}var X6=F.createContext({hashPriority:"low",cache:q6(),defaultCache:!0});const Y6=X6;var Z6=function(){function e(){M6(this,e),(0,J3.Z)(this,"cache",void 0),(0,J3.Z)(this,"keys",void 0),(0,J3.Z)(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return z6(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={map:this.cache};return e.forEach((function(e){var t;o?o=null===(t=o)||void 0===t||null===(t=t.map)||void 0===t?void 0:t.get(e):o=void 0})),null!==(t=o)&&void 0!==t&&t.value&&r&&(o.value[1]=this.cacheCallTimes++),null===(n=o)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var o=this.keys.reduce((function(e,t){var n=h6(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),a=h6(o,1)[0];this.delete(a)}this.keys.push(t)}var i=this.cache;t.forEach((function(e,o){if(o===t.length-1)i.set(e,{value:[n,r.cacheCallTimes++]});else{var a=i.get(e);a?a.map||(a.map=new Map):i.set(e,{map:new Map}),i=i.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var o=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),o}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();(0,J3.Z)(Z6,"MAX_CACHE_SIZE",20),(0,J3.Z)(Z6,"MAX_CACHE_OFFSET",5);var J6=0,$6=function(){function e(t){M6(this,e),(0,J3.Z)(this,"derivatives",void 0),(0,J3.Z)(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=J6,0===t.length&&t.length,J6+=1}return z6(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),e8=new Z6;function t8(e){var t=Array.isArray(e)?e:[e];return e8.has(t)||e8.set(t,new $6(t)),e8.get(t)}var n8=new WeakMap,r8={};var o8=new WeakMap;function a8(e){var t=o8.get(e)||"";return t||(Object.keys(e).forEach((function(n){var r=e[n];t+=n,r instanceof $6?t+=r.id:r&&"object"===(0,F6.Z)(r)?t+=a8(r):t+=r})),o8.set(e,t)),t}function i8(e,t){return f6("".concat(t,"_").concat(a8(e)))}var s8="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),c8="_bAmBoO_";function l8(e,t,n){if(g6()){var r,o;E6(e,s8);var a=document.createElement("div");a.style.position="fixed",a.style.left="0",a.style.top="0",null===t||void 0===t||t(a),document.body.appendChild(a);var i=n?n(a):null===(r=getComputedStyle(a).content)||void 0===r?void 0:r.includes(c8);return null===(o=a.parentNode)||void 0===o||o.removeChild(a),I6(s8),i}return!1}var u8=void 0;var A8=g6();function h8(e){return"number"===typeof e?"".concat(e,"px"):e}function d8(e,t,n){var r;if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return e;var o=e6(e6({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),{},(r={},(0,J3.Z)(r,W6,t),(0,J3.Z)(r,K6,n),r)),a=Object.keys(o).map((function(e){var t=o[e];return t?"".concat(e,'="').concat(t,'"'):null})).filter((function(e){return e})).join(" ");return"<style ".concat(a,">").concat(e,"</style>")}var p8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(t?"".concat(t,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},f8=function(e,t,n){return Object.keys(e).length?".".concat(t).concat(null!==n&&void 0!==n&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(e).map((function(e){var t=h6(e,2),n=t[0],r=t[1];return"".concat(n,":").concat(r,";")})).join(""),"}"):""},g8=function(e,t,n){var r={},o={};return Object.entries(e).forEach((function(e){var t,a,i=h6(e,2),s=i[0],c=i[1];if(null!==n&&void 0!==n&&null!==(t=n.preserve)&&void 0!==t&&t[s])o[s]=c;else if(("string"===typeof c||"number"===typeof c)&&(null===n||void 0===n||null===(a=n.ignore)||void 0===a||!a[s])){var l,u=p8(s,null===n||void 0===n?void 0:n.prefix);r[u]="number"!==typeof c||null!==n&&void 0!==n&&null!==(l=n.unitless)&&void 0!==l&&l[s]?String(c):"".concat(c,"px"),o[s]="var(".concat(u,")")}})),[o,f8(r,t,{scope:null===n||void 0===n?void 0:n.scope})]},m8=g6()?F.useLayoutEffect:F.useEffect,y8=function(e,t){var n=F.useRef(!0);m8((function(){return e(n.current)}),t),m8((function(){return n.current=!1,function(){n.current=!0}}),[])};const v8=y8;var b8=e6({},T).useInsertionEffect;const w8=b8?function(e,t,n){return b8((function(){return e(),t()}),n)}:function(e,t,n){F.useMemo(e,n),v8((function(){return t(!0)}),n)};var x8="undefined"!==typeof e6({},T).useInsertionEffect?function(e){var t=[],n=!1;return F.useEffect((function(){return n=!1,function(){n=!0,t.length&&t.forEach((function(e){return e()}))}}),e),function(e){n||t.push(e)}}:function(){return function(e){e()}};const C8=x8;const k8=function(){return!1};function B8(e,t,n,r,o){var a=F.useContext(Y6).cache,i=[e].concat(p6(t)),s=i.join("_"),c=C8([s]),l=(k8(),function(e){a.update(i,(function(t){var r=h6(t||[void 0,void 0],2),o=r[0];var a=[void 0===o?0:o,r[1]||n()];return e?e(a):a}))});F.useMemo((function(){l()}),[s]);var u=a.get(i)[1];return w8((function(){null===o||void 0===o||o(u)}),(function(e){return l((function(t){var n=h6(t,2),r=n[0],a=n[1];return e&&0===r&&(null===o||void 0===o||o(u)),[r+1,a]})),function(){a.update(i,(function(t){var n=h6(t||[],2),o=n[0],s=void 0===o?0:o,l=n[1];return 0===s-1?(c((function(){!e&&a.get(i)||null===r||void 0===r||r(l,!1)})),null):[s-1,l]}))}}),[s]),u}var S8={},I8="css",E8=new Map;var N8=0;function F8(e,t){E8.set(e,(E8.get(e)||0)-1);var n=Array.from(E8.keys()),r=n.filter((function(e){return(E8.get(e)||0)<=0}));n.length-r.length>N8&&r.forEach((function(e){!function(e,t){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(W6,'="').concat(e,'"]')).forEach((function(e){var n;e[G6]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),E8.delete(e)}))}var T8=function(e,t,n,r){var o=e6(e6({},n.getDerivativeToken(e)),t);return r&&(o=r(o)),o},_8="token";function L8(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,F.useContext)(Y6),o=r.cache.instanceId,a=r.container,i=n.salt,s=void 0===i?"":i,c=n.override,l=void 0===c?S8:c,u=n.formatToken,A=n.getComputedToken,h=n.cssVar,d=function(e,t){for(var n=n8,r=0;r<t.length;r+=1){var o=t[r];n.has(o)||n.set(o,new WeakMap),n=n.get(o)}return n.has(r8)||n.set(r8,e()),n.get(r8)}((function(){return Object.assign.apply(Object,[{}].concat(p6(t)))}),t),p=a8(d),f=a8(l),g=h?a8(h):"",m=B8(_8,[s,e.id,p,f,g],(function(){var t,n=A?A(d,l,e):T8(d,l,e,u),r=e6({},n),o="";if(h){var a=h6(g8(n,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),2);n=a[0],o=a[1]}var i=i8(n,s);n._tokenKey=i,r._tokenKey=i8(r,s);var c=null!==(t=null===h||void 0===h?void 0:h.key)&&void 0!==t?t:i;n._themeKey=c,function(e){E8.set(e,(E8.get(e)||0)+1)}(c);var p="".concat(I8,"-").concat(f6(i));return n._hashId=p,[n,p,r,o,(null===h||void 0===h?void 0:h.key)||""]}),(function(e){F8(e[0]._themeKey,o)}),(function(e){var t=h6(e,4),n=t[0],r=t[3];if(h&&r){var i=E6(r,f6("css-variables-".concat(n._themeKey)),{mark:K6,prepend:"queue",attachTo:a,priority:-999});i[G6]=o,i.setAttribute(W6,n._themeKey)}}));return m}function O8(){return O8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O8.apply(this,arguments)}const R8={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var U8="comm",D8="rule",P8="decl",M8="@import",Q8="@keyframes",H8="@layer",z8=Math.abs,V8=String.fromCharCode;Object.assign;function j8(e){return e.trim()}function W8(e,t,n){return e.replace(t,n)}function K8(e,t,n){return e.indexOf(t,n)}function G8(e,t){return 0|e.charCodeAt(t)}function q8(e,t,n){return e.slice(t,n)}function X8(e){return e.length}function Y8(e,t){return t.push(e),e}function Z8(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function J8(e,t,n,r){switch(e.type){case H8:if(e.children.length)break;case M8:case P8:return e.return=e.return||e.value;case U8:return"";case Q8:return e.return=e.value+"{"+Z8(e.children,r)+"}";case D8:if(!X8(e.value=e.props.join(",")))return""}return X8(n=Z8(e.children,r))?e.return=e.value+"{"+n+"}":""}var $8=1,e7=1,t7=0,n7=0,r7=0,o7="";function a7(e,t,n,r,o,a,i,s){return{value:e,root:t,parent:n,type:r,props:o,children:a,line:$8,column:e7,length:i,return:"",siblings:s}}function i7(){return r7=n7>0?G8(o7,--n7):0,e7--,10===r7&&(e7=1,$8--),r7}function s7(){return r7=n7<t7?G8(o7,n7++):0,e7++,10===r7&&(e7=1,$8++),r7}function c7(){return G8(o7,n7)}function l7(){return n7}function u7(e,t){return q8(o7,e,t)}function A7(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function h7(e){return $8=e7=1,t7=X8(o7=e),n7=0,[]}function d7(e){return o7="",e}function p7(e){return j8(u7(n7-1,m7(91===e?e+2:40===e?e+1:e)))}function f7(e){for(;(r7=c7())&&r7<33;)s7();return A7(e)>2||A7(r7)>3?"":" "}function g7(e,t){for(;--t&&s7()&&!(r7<48||r7>102||r7>57&&r7<65||r7>70&&r7<97););return u7(e,l7()+(t<6&&32==c7()&&32==s7()))}function m7(e){for(;s7();)switch(r7){case e:return n7;case 34:case 39:34!==e&&39!==e&&m7(r7);break;case 40:41===e&&m7(e);break;case 92:s7()}return n7}function y7(e,t){for(;s7()&&e+r7!==57&&(e+r7!==84||47!==c7()););return"/*"+u7(t,n7-1)+"*"+V8(47===e?e:s7())}function v7(e){for(;!A7(c7());)s7();return u7(e,n7)}function b7(e){return d7(w7("",null,null,null,[""],e=h7(e),0,[0],e))}function w7(e,t,n,r,o,a,i,s,c){for(var l=0,u=0,A=i,h=0,d=0,p=0,f=1,g=1,m=1,y=0,v="",b=o,w=a,x=r,C=v;g;)switch(p=y,y=s7()){case 40:if(108!=p&&58==G8(C,A-1)){-1!=K8(C+=W8(p7(y),"&","&\f"),"&\f",z8(l?s[l-1]:0))&&(m=-1);break}case 34:case 39:case 91:C+=p7(y);break;case 9:case 10:case 13:case 32:C+=f7(p);break;case 92:C+=g7(l7()-1,7);continue;case 47:switch(c7()){case 42:case 47:Y8(C7(y7(s7(),l7()),t,n,c),c);break;default:C+="/"}break;case 123*f:s[l++]=X8(C)*m;case 125*f:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==m&&(C=W8(C,/\f/g,"")),d>0&&X8(C)-A&&Y8(d>32?k7(C+";",r,n,A-1,c):k7(W8(C," ","")+";",r,n,A-2,c),c);break;case 59:C+=";";default:if(Y8(x=x7(C,t,n,l,u,o,s,v,b=[],w=[],A,a),a),123===y)if(0===u)w7(C,t,x,x,b,a,A,s,w);else switch(99===h&&110===G8(C,3)?100:h){case 100:case 108:case 109:case 115:w7(e,x,x,r&&Y8(x7(e,x,x,0,0,o,s,v,o,b=[],A,w),w),o,w,A,s,r?b:w);break;default:w7(C,x,x,x,[""],w,0,s,w)}}l=u=d=0,f=m=1,v=C="",A=i;break;case 58:A=1+X8(C),d=p;default:if(f<1)if(123==y)--f;else if(125==y&&0==f++&&125==i7())continue;switch(C+=V8(y),y*f){case 38:m=u>0?1:(C+="\f",-1);break;case 44:s[l++]=(X8(C)-1)*m,m=1;break;case 64:45===c7()&&(C+=p7(s7())),h=c7(),u=A=X8(v=C+=v7(l7())),y++;break;case 45:45===p&&2==X8(C)&&(f=0)}}return a}function x7(e,t,n,r,o,a,i,s,c,l,u,A){for(var h=o-1,d=0===o?a:[""],p=function(e){return e.length}(d),f=0,g=0,m=0;f<r;++f)for(var y=0,v=q8(e,h+1,h=z8(g=i[f])),b=e;y<p;++y)(b=j8(g>0?d[y]+" "+v:W8(v,/&\f/g,d[y])))&&(c[m++]=b);return a7(e,t,n,0===o?D8:s,c,l,u,A)}function C7(e,t,n,r){return a7(e,t,n,U8,V8(r7),q8(e,2,-2),0,r)}function k7(e,t,n,r,o){return a7(e,t,n,P8,q8(e,0,r),q8(e,r+1,-1),r,o)}var B7,S7="data-ant-cssinjs-cache-path",I7="_FILE_STYLE__";var E7=!0;function N7(e){return function(){if(!B7&&(B7={},g6())){var e=document.createElement("div");e.className=S7,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";(t=t.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(e){var t=h6(e.split(":"),2),n=t[0],r=t[1];B7[n]=r}));var n,r=document.querySelector("style[".concat(S7,"]"));r&&(E7=!1,null===(n=r.parentNode)||void 0===n||n.removeChild(r)),document.body.removeChild(e)}}(),!!B7[e]}var F7="_multi_value_";function T7(e){return Z8(b7(e),J8).replace(/\{%%%\:[^;];}/g,";")}var _7=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},o=r.root,a=r.injectHash,i=r.parentSelectors,s=n.hashId,c=n.layer,l=(n.path,n.hashPriority),u=n.transformers,A=void 0===u?[]:u,h=(n.linters,""),d={};function p(t){var r=t.getName(s);if(!d[r]){var o=h6(e(t.style,n,{root:!1,parentSelectors:i}),1)[0];d[r]="@keyframes ".concat(t.getName(s)).concat(o)}}var f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);if(f.forEach((function(t){var r="string"!==typeof t||o?t:{};if("string"===typeof r)h+="".concat(r,"\n");else if(r._keyframe)p(r);else{var c=A.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(c).forEach((function(t){var r=c[t];if("object"!==(0,F6.Z)(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===(0,F6.Z)(e)&&e&&("_skip_check_"in e||F7 in e)}(r)){var u;function w(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;R8[e]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!==t&&void 0!==t&&t._keyframe&&(p(t),r=t.getName(s)),h+="".concat(n,":").concat(r,";")}var A=null!==(u=null===r||void 0===r?void 0:r.value)&&void 0!==u?u:r;"object"===(0,F6.Z)(r)&&null!==r&&void 0!==r&&r[F7]&&Array.isArray(A)?A.forEach((function(e){w(t,e)})):w(t,A)}else{var f=!1,g=t.trim(),m=!1;(o||a)&&s?g.startsWith("@")?f=!0:g=function(e,t,n){if(!t)return e;var r=".".concat(t),o="low"===n?":where(".concat(r,")"):r,a=e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",a=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(a).concat(o).concat(r.slice(a.length))].concat(p6(n.slice(1))).join(" ")}));return a.join(",")}(t,s,l):!o||s||"&"!==g&&""!==g||(g="",m=!0);var y=h6(e(r,n,{root:m,injectHash:f,parentSelectors:[].concat(p6(i),[g])}),2),v=y[0],b=y[1];d=e6(e6({},d),b),h+="".concat(g).concat(v)}}))}})),o){if(c&&(void 0===u8&&(u8=l8("@layer ".concat(s8," { .").concat(s8,' { content: "').concat(c8,'"!important; } }'),(function(e){e.className=s8}))),u8)){var g=c.split(","),m=g[g.length-1].trim();h="@layer ".concat(m," {").concat(h,"}"),g.length>1&&(h="@layer ".concat(c,"{%%%:%}").concat(h))}}else h="{".concat(h,"}");return[h,d]};function L7(e,t){return f6("".concat(e.join("%")).concat(t))}function O7(){return null}var R7="style";function U7(e,t){var n=e.token,r=e.path,o=e.hashId,a=e.layer,i=e.nonce,s=e.clientOnly,c=e.order,l=void 0===c?0:c,u=F.useContext(Y6),A=u.autoClear,h=(u.mock,u.defaultCache),d=u.hashPriority,p=u.container,f=u.ssrInline,g=u.transformers,m=u.linters,y=u.cache,v=n._tokenKey,b=[v].concat(p6(r)),w=A8;var x=B8(R7,b,(function(){var e=b.join("|");if(N7(e)){var n=function(e){var t=B7[e],n=null;if(t&&g6())if(E7)n=I7;else{var r=document.querySelector("style[".concat(K6,'="').concat(B7[e],'"]'));r?n=r.innerHTML:delete B7[e]}return[n,t]}(e),i=h6(n,2),c=i[0],u=i[1];if(c)return[c,v,u,{},s,l]}var A=t(),h=h6(_7(A,{hashId:o,hashPriority:d,layer:a,path:r.join("-"),transformers:g,linters:m}),2),p=h[0],f=h[1],y=T7(p),w=L7(b,y);return[y,v,w,f,s,l]}),(function(e,t){var n=h6(e,3)[2];(t||A)&&A8&&I6(n,{mark:K6})}),(function(e){var t=h6(e,4),n=t[0],r=(t[1],t[2]),o=t[3];if(w&&n!==I7){var a={mark:K6,prepend:"queue",attachTo:p,priority:l},s="function"===typeof i?i():i;s&&(a.csp={nonce:s});var c=E6(n,r,a);c[G6]=y.instanceId,c.setAttribute(W6,v),Object.keys(o).forEach((function(e){E6(T7(o[e]),"_effect-".concat(e),a)}))}})),C=h6(x,3),k=C[0],B=C[1],S=C[2];return function(e){var t,n;f&&!w&&h?t=F.createElement("style",O8({},(n={},(0,J3.Z)(n,W6,B),(0,J3.Z)(n,K6,S),n),{dangerouslySetInnerHTML:{__html:k}})):t=F.createElement(O7,null);return F.createElement(F.Fragment,null,t,e)}}var D7="cssVar";const P7=function(e,t){var n=e.key,r=e.prefix,o=e.unitless,a=e.ignore,i=e.token,s=e.scope,c=void 0===s?"":s,l=(0,F.useContext)(Y6),u=l.cache.instanceId,A=l.container,h=i._tokenKey,d=[].concat(p6(e.path),[n,c,h]),p=B8(D7,d,(function(){var e=t(),i=h6(g8(e,n,{prefix:r,unitless:o,ignore:a,scope:c}),2),s=i[0],l=i[1];return[s,l,L7(d,l),n]}),(function(e){var t=h6(e,3)[2];A8&&I6(t,{mark:K6})}),(function(e){var t=h6(e,3),r=t[1],o=t[2];if(r){var a=E6(r,o,{mark:K6,prepend:"queue",attachTo:A,priority:-999});a[G6]=u,a.setAttribute(W6,n)}}));return p};var M7;M7={},(0,J3.Z)(M7,R7,(function(e,t,n){var r=h6(e,6),o=r[0],a=r[1],i=r[2],s=r[3],c=r[4],l=r[5],u=(n||{}).plain;if(c)return null;var A=o,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(l)};return A=d8(o,a,i,h,u),s&&Object.keys(s).forEach((function(e){if(!t[e]){t[e]=!0;var n=T7(s[e]);A+=d8(n,a,"_effect-".concat(e),h,u)}})),[l,i,A]})),(0,J3.Z)(M7,_8,(function(e,t,n){var r=h6(e,5),o=r[2],a=r[3],i=r[4],s=(n||{}).plain;if(!a)return null;var c=o._tokenKey;return[-999,c,d8(a,i,c,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]})),(0,J3.Z)(M7,D7,(function(e,t,n){var r=h6(e,4),o=r[1],a=r[2],i=r[3],s=(n||{}).plain;if(!o)return null;return[-999,a,d8(o,i,a,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},s)]}));var Q7=function(){function e(t,n){M6(this,e),(0,J3.Z)(this,"name",void 0),(0,J3.Z)(this,"style",void 0),(0,J3.Z)(this,"_keyframe",!0),this.name=t,this.style=n}return z6(e,[{key:"getName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e,"-").concat(this.name):this.name}}]),e}();const H7=Q7;function z7(e){return e.notSplit=!0,e}z7(["borderTop","borderBottom"]),z7(["borderTop"]),z7(["borderBottom"]),z7(["borderLeft","borderRight"]),z7(["borderLeft"]),z7(["borderRight"]);const V7=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},j7=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),W7=(e,t)=>{const{fontFamily:n,fontSize:r}=e,o='[class^="'.concat(t,'"], [class*=" ').concat(t,'"]');return{[o]:{fontFamily:n,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[o]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},K7=e=>({outline:"".concat(h8(e.lineWidthFocus)," solid ").concat(e.colorPrimaryBorder),outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),G7=e=>({"&:focus-visible":Object.assign({},K7(e))});function q7(e){var t=F.useRef();t.current=e;var n=F.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function X7(e){var t=F.useRef(!1),n=h6(F.useState(e),2),r=n[0],o=n[1];return F.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}var Y7=n(3873);function Z7(e,t){"function"===typeof e?e(t):"object"===(0,F6.Z)(e)&&e&&"current"in e&&(e.current=t)}function J7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Z7(t,e)}))}}function $7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N6((function(){return J7.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))}function e9(e){var t,n,r=(0,Y7.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}function t9(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function n9(e,t,n,r){if(!t.length)return n;var o,a,i=c6(o=t)||d6(o)||u6(o)||A6(),s=i[0],c=i.slice(1);return a=e||"number"!==typeof s?Array.isArray(e)?p6(e):e6({},e):[],r&&void 0===n&&1===c.length?delete a[s][c[0]]:a[s]=n9(a[s],c,n,r),a}function r9(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!t9(e,t.slice(0,-1))?e:n9(e,t,n,r)}function o9(e){return Array.isArray(e)?[]:{}}var a9="undefined"===typeof Reflect?Object.keys:Reflect.ownKeys;function i9(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=o9(t[0]);return t.forEach((function(e){!function t(n,o){var a,i=new Set(o),s=t9(e,n),c=Array.isArray(s);if(c||(a=s,"object"===(0,F6.Z)(a)&&null!==a&&Object.getPrototypeOf(a)===Object.prototype)){if(!i.has(s)){i.add(s);var l=t9(r,n);c?r=r9(r,n,[]):l&&"object"===(0,F6.Z)(l)||(r=r9(r,n,o9(s))),a9(s).forEach((function(e){t([].concat(p6(n),[e]),i)}))}}else r=r9(r,n,s)}([])})),r}const s9="5.13.1";function c9(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function l9(e){return Math.min(1,Math.max(0,e))}function u9(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function A9(e){return e<=1?"".concat(100*Number(e),"%"):e}function h9(e){return 1===e.length?"0"+e:String(e)}function d9(e,t,n){e=c9(e,255),t=c9(t,255),n=c9(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),a=0,i=0,s=(r+o)/2;if(r===o)i=0,a=0;else{var c=r-o;switch(i=s>.5?c/(2-r-o):c/(r+o),r){case e:a=(t-n)/c+(t<n?6:0);break;case t:a=(n-e)/c+2;break;case n:a=(e-t)/c+4}a/=6}return{h:a,s:i,l:s}}function p9(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function f9(e,t,n){e=c9(e,255),t=c9(t,255),n=c9(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),a=0,i=r,s=r-o,c=0===r?0:s/r;if(r===o)a=0;else{switch(r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:c,v:i}}function g9(e,t,n,r){var o=[h9(Math.round(e).toString(16)),h9(Math.round(t).toString(16)),h9(Math.round(n).toString(16))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function m9(e){return Math.round(255*parseFloat(e)).toString(16)}function y9(e){return v9(e)/255}function v9(e){return parseInt(e,16)}var b9={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function w9(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,a=null,i=!1,s=!1;return"string"===typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(b9[e])e=b9[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=B9.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=B9.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=B9.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=B9.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=B9.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=B9.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=B9.hex8.exec(e),n)return{r:v9(n[1]),g:v9(n[2]),b:v9(n[3]),a:y9(n[4]),format:t?"name":"hex8"};if(n=B9.hex6.exec(e),n)return{r:v9(n[1]),g:v9(n[2]),b:v9(n[3]),format:t?"name":"hex"};if(n=B9.hex4.exec(e),n)return{r:v9(n[1]+n[1]),g:v9(n[2]+n[2]),b:v9(n[3]+n[3]),a:y9(n[4]+n[4]),format:t?"name":"hex8"};if(n=B9.hex3.exec(e),n)return{r:v9(n[1]+n[1]),g:v9(n[2]+n[2]),b:v9(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(S9(e.r)&&S9(e.g)&&S9(e.b)?(t=function(e,t,n){return{r:255*c9(e,255),g:255*c9(t,255),b:255*c9(n,255)}}(e.r,e.g,e.b),i=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):S9(e.h)&&S9(e.s)&&S9(e.v)?(r=A9(e.s),o=A9(e.v),t=function(e,t,n){e=6*c9(e,360),t=c9(t,100),n=c9(n,100);var r=Math.floor(e),o=e-r,a=n*(1-t),i=n*(1-o*t),s=n*(1-(1-o)*t),c=r%6;return{r:255*[n,i,a,a,s,n][c],g:255*[s,n,n,i,a,a][c],b:255*[a,a,s,n,n,i][c]}}(e.h,r,o),i=!0,s="hsv"):S9(e.h)&&S9(e.s)&&S9(e.l)&&(r=A9(e.s),a=A9(e.l),t=function(e,t,n){var r,o,a;if(e=c9(e,360),t=c9(t,100),n=c9(n,100),0===t)o=n,a=n,r=n;else{var i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;r=p9(s,i,e+1/3),o=p9(s,i,e),a=p9(s,i,e-1/3)}return{r:255*r,g:255*o,b:255*a}}(e.h,r,a),i=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=u9(n),{ok:i,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var x9="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),C9="[\\s|\\(]+(".concat(x9,")[,|\\s]+(").concat(x9,")[,|\\s]+(").concat(x9,")\\s*\\)?"),k9="[\\s|\\(]+(".concat(x9,")[,|\\s]+(").concat(x9,")[,|\\s]+(").concat(x9,")[,|\\s]+(").concat(x9,")\\s*\\)?"),B9={CSS_UNIT:new RegExp(x9),rgb:new RegExp("rgb"+C9),rgba:new RegExp("rgba"+k9),hsl:new RegExp("hsl"+C9),hsla:new RegExp("hsla"+k9),hsv:new RegExp("hsv"+C9),hsva:new RegExp("hsva"+k9),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function S9(e){return Boolean(B9.CSS_UNIT.exec(String(e)))}var I9=2,E9=.16,N9=.05,F9=.05,T9=.15,_9=5,L9=4,O9=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function R9(e){var t=f9(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function U9(e){var t=e.r,n=e.g,r=e.b;return"#".concat(g9(t,n,r,!1))}function D9(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-I9*t:Math.round(e.h)+I9*t:n?Math.round(e.h)+I9*t:Math.round(e.h)-I9*t)<0?r+=360:r>=360&&(r-=360),r}function P9(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-E9*t:t===L9?e.s+E9:e.s+N9*t)>1&&(r=1),n&&t===_9&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function M9(e,t,n){var r;return(r=n?e.v+F9*t:e.v-T9*t)>1&&(r=1),Number(r.toFixed(2))}function Q9(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=w9(e),o=_9;o>0;o-=1){var a=R9(r),i=U9(w9({h:D9(a,o,!0),s:P9(a,o,!0),v:M9(a,o,!0)}));n.push(i)}n.push(U9(r));for(var s=1;s<=L9;s+=1){var c=R9(r),l=U9(w9({h:D9(c,s),s:P9(c,s),v:M9(c,s)}));n.push(l)}return"dark"===t.theme?O9.map((function(e){var r=e.index,o=e.opacity,a=U9(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(w9(t.backgroundColor||"#141414"),w9(n[r]),100*o));return a})):n}var H9={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},z9={},V9={};Object.keys(H9).forEach((function(e){z9[e]=Q9(H9[e]),z9[e].primary=z9[e][5],V9[e]=Q9(H9[e],{theme:"dark",backgroundColor:"#141414"}),V9[e].primary=V9[e][5]}));z9.red,z9.volcano,z9.gold,z9.orange,z9.yellow,z9.lime,z9.green,z9.cyan;var j9=z9.blue;z9.geekblue,z9.purple,z9.magenta,z9.grey,z9.grey;const W9=e=>{const{controlHeight:t}=e;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}};const K9={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},G9=Object.assign(Object.assign({},K9),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});var q9=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var o=w9(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=u9(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=f9(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=f9(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=d9(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=d9(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),g9(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,o){var a=[h9(Math.round(e).toString(16)),h9(Math.round(t).toString(16)),h9(Math.round(n).toString(16)),h9(m9(r))];return o&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*c9(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*c9(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+g9(this.r,this.g,this.b,!1),t=0,n=Object.entries(b9);t<n.length;t++){var r=n[t],o=r[0];if(e===r[1])return o}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=l9(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=l9(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=l9(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=l9(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),o=new e(t).toRgb(),a=n/100;return new e({r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),o=360/n,a=[this];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,o=n.s,a=n.v,i=[],s=1/t;t--;)i.push(new e({h:r,s:o,v:a})),a=(a+s)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),o=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/o,g:(n.g*n.a+r.g*r.a*(1-n.a))/o,b:(n.b*n.a+r.b*r.a*(1-n.a))/o,a:o})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,o=[this],a=360/t,i=1;i<t;i++)o.push(new e({h:(r+i*a)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const X9=e=>{let t=e,n=e,r=e,o=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?o=4:e>=8&&(o=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:o}};const Y9=(e,t)=>new q9(e).setAlpha(t).toRgbString(),Z9=(e,t)=>new q9(e).darken(t).toHexString(),J9=e=>{const t=Q9(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},$9=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:Y9(r,.88),colorTextSecondary:Y9(r,.65),colorTextTertiary:Y9(r,.45),colorTextQuaternary:Y9(r,.25),colorFill:Y9(r,.15),colorFillSecondary:Y9(r,.06),colorFillTertiary:Y9(r,.04),colorFillQuaternary:Y9(r,.02),colorBgLayout:Z9(n,4),colorBgContainer:Z9(n,0),colorBgElevated:Z9(n,0),colorBgSpotlight:Y9(r,.85),colorBgBlur:"transparent",colorBorder:Z9(n,15),colorBorderSecondary:Z9(n,6)}};function eee(e){return(e+8)/e}const tee=e=>{const t=function(e){const t=new Array(10).fill(null).map(((t,n)=>{const r=n-1,o=e*Math.pow(2.71828,r/5),a=n>1?Math.floor(o):Math.ceil(o);return 2*Math.floor(a/2)}));return t[1]=e,t.map((e=>({size:e,lineHeight:eee(e)})))}(e),n=t.map((e=>e.size)),r=t.map((e=>e.lineHeight)),o=n[1],a=n[0],i=n[2],s=r[1],c=r[0],l=r[2];return{fontSizeSM:a,fontSize:o,fontSizeLG:i,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:s,lineHeightLG:l,lineHeightSM:c,fontHeight:Math.round(s*o),fontHeightLG:Math.round(l*i),fontHeightSM:Math.round(c*a),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};const nee=t8((function(e){const t=Object.keys(K9).map((t=>{const n=Q9(e[t]);return new Array(10).fill(1).reduce(((e,r,o)=>(e["".concat(t,"-").concat(o+1)]=n[o],e["".concat(t).concat(o+1)]=n[o],e)),{})})).reduce(((e,t)=>e=Object.assign(Object.assign({},e),t)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),function(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:o,colorWarning:a,colorError:i,colorInfo:s,colorPrimary:c,colorBgBase:l,colorTextBase:u}=e,A=n(c),h=n(o),d=n(a),p=n(i),f=n(s),g=r(l,u),m=n(e.colorLink||e.colorInfo);return Object.assign(Object.assign({},g),{colorPrimaryBg:A[1],colorPrimaryBgHover:A[2],colorPrimaryBorder:A[3],colorPrimaryBorderHover:A[4],colorPrimaryHover:A[5],colorPrimary:A[6],colorPrimaryActive:A[7],colorPrimaryTextHover:A[8],colorPrimaryText:A[9],colorPrimaryTextActive:A[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:d[1],colorWarningBgHover:d[2],colorWarningBorder:d[3],colorWarningBorderHover:d[4],colorWarningHover:d[4],colorWarning:d[6],colorWarningActive:d[7],colorWarningTextHover:d[8],colorWarningText:d[9],colorWarningTextActive:d[10],colorInfoBg:f[1],colorInfoBgHover:f[2],colorInfoBorder:f[3],colorInfoBorderHover:f[4],colorInfoHover:f[4],colorInfo:f[6],colorInfoActive:f[7],colorInfoTextHover:f[8],colorInfoText:f[9],colorInfoTextActive:f[10],colorLinkHover:m[4],colorLink:m[6],colorLinkActive:m[7],colorBgMask:new q9("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}(e,{generateColorPalettes:J9,generateNeutralColorPalettes:$9})),tee(e.fontSize)),function(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),W9(e)),function(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:o}=e;return Object.assign({motionDurationFast:"".concat((n+t).toFixed(1),"s"),motionDurationMid:"".concat((n+2*t).toFixed(1),"s"),motionDurationSlow:"".concat((n+3*t).toFixed(1),"s"),lineWidthBold:o+1},X9(r))}(e))})),ree={token:G9,override:{override:G9},hashed:!0},oee=F.createContext(ree);function aee(e){return e>=0&&e<=255}const iee=function(e,t){const{r:n,g:r,b:o,a:a}=new q9(e).toRgb();if(a<1)return e;const{r:i,g:s,b:c}=new q9(t).toRgb();for(let l=.01;l<=1;l+=.01){const e=Math.round((n-i*(1-l))/l),t=Math.round((r-s*(1-l))/l),a=Math.round((o-c*(1-l))/l);if(aee(e)&&aee(t)&&aee(a))return new q9({r:e,g:t,b:a,a:Math.round(100*l)/100}).toRgbString()}return new q9({r:n,g:r,b:o,a:1}).toRgbString()};var see=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function cee(e){const{override:t}=e,n=see(e,["override"]),r=Object.assign({},t);Object.keys(G9).forEach((e=>{delete r[e]}));const o=Object.assign(Object.assign({},n),r),a=1200,i=1600;if(!1===o.motion){const e="0s";o.motionDurationFast=e,o.motionDurationMid=e,o.motionDurationSlow=e}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:iee(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:iee(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:iee(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:4*o.lineWidth,lineWidth:o.lineWidth,controlOutlineWidth:2*o.lineWidth,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:iee(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:a,screenXLMin:a,screenXLMax:1599,screenXXL:i,screenXXLMin:i,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:"\n      0 1px 2px -2px ".concat(new q9("rgba(0, 0, 0, 0.16)").toRgbString(),",\n      0 3px 6px 0 ").concat(new q9("rgba(0, 0, 0, 0.12)").toRgbString(),",\n      0 5px 12px 4px ").concat(new q9("rgba(0, 0, 0, 0.09)").toRgbString(),"\n    "),boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var lee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const uee={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},Aee={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},hee={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},dee=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:o}=t,a=lee(t,["override"]);let i=Object.assign(Object.assign({},r),{override:o});return i=cee(i),a&&Object.entries(a).forEach((e=>{let[t,n]=e;const{theme:r}=n,o=lee(n,["theme"]);let a=o;r&&(a=dee(Object.assign(Object.assign({},i),o),{override:o},r)),i[t]=a})),i};function pee(){const{token:e,hashed:t,theme:n,override:r,cssVar:o}=F.useContext(oee),a="".concat(s9,"-").concat(t||""),i=n||nee,[s,c,l]=L8(i,[G9,e],{salt:a,override:r,getComputedToken:dee,formatToken:cee,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:uee,ignore:Aee,preserve:hee}});return[i,l,t?c:"",s,o]}function fee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gee(e,t){if(t&&("object"===(0,F6.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fee(e)}function mee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mee=function(){return!!e})()}function yee(e){return yee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yee(e)}function vee(e,t){return vee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vee(e,t)}function bee(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vee(e,t)}const wee=z6((function e(){M6(this,e)}));let xee=function(e){function t(e){var n;return M6(this,t),n=function(e,t,n){return t=yee(t),gee(e,mee()?Reflect.construct(t,n||[],yee(e).constructor):t.apply(e,n))}(this,t),n.result=0,e instanceof t?n.result=e.result:"number"===typeof e&&(n.result=e),n}return bee(t,e),z6(t,[{key:"add",value:function(e){return e instanceof t?this.result+=e.result:"number"===typeof e&&(this.result+=e),this}},{key:"sub",value:function(e){return e instanceof t?this.result-=e.result:"number"===typeof e&&(this.result-=e),this}},{key:"mul",value:function(e){return e instanceof t?this.result*=e.result:"number"===typeof e&&(this.result*=e),this}},{key:"div",value:function(e){return e instanceof t?this.result/=e.result:"number"===typeof e&&(this.result/=e),this}},{key:"equal",value:function(){return this.result}}]),t}(wee);const Cee="CALC_UNIT";function kee(e){return"number"===typeof e?"".concat(e).concat(Cee):e}let Bee=function(e){function t(e){var n;return M6(this,t),n=function(e,t,n){return t=yee(t),gee(e,mee()?Reflect.construct(t,n||[],yee(e).constructor):t.apply(e,n))}(this,t),n.result="",e instanceof t?n.result="(".concat(e.result,")"):"number"===typeof e?n.result=kee(e):"string"===typeof e&&(n.result=e),n}return bee(t,e),z6(t,[{key:"add",value:function(e){return e instanceof t?this.result="".concat(this.result," + ").concat(e.getResult()):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," + ").concat(kee(e))),this.lowPriority=!0,this}},{key:"sub",value:function(e){return e instanceof t?this.result="".concat(this.result," - ").concat(e.getResult()):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," - ").concat(kee(e))),this.lowPriority=!0,this}},{key:"mul",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof t?this.result="".concat(this.result," * ").concat(e.getResult(!0)):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," * ").concat(e)),this.lowPriority=!1,this}},{key:"div",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof t?this.result="".concat(this.result," / ").concat(e.getResult(!0)):"number"!==typeof e&&"string"!==typeof e||(this.result="".concat(this.result," / ").concat(e)),this.lowPriority=!1,this}},{key:"getResult",value:function(e){return this.lowPriority||e?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(e){const{unit:t=!0}=e||{},n=new RegExp("".concat(Cee),"g");return this.result=this.result.replace(n,t?"px":""),"undefined"!==typeof this.lowPriority?"calc(".concat(this.result,")"):this.result}}]),t}(wee);const See=e=>{const t="css"===e?Bee:xee;return e=>new t(e)};const Iee="undefined"!==typeof CSSINJS_STATISTIC;let Eee=!0;function Nee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!Iee)return Object.assign.apply(Object,[{}].concat(t));Eee=!1;const r={};return t.forEach((e=>{Object.keys(e).forEach((t=>{Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:()=>e[t]})}))})),Eee=!0,r}const Fee={};function Tee(){}const _ee=e=>{let t,n=e,r=Tee;return Iee&&"undefined"!==typeof Proxy&&(t=new Set,n=new Proxy(e,{get:(e,n)=>(Eee&&t.add(n),e[n])}),r=(e,n)=>{var r;Fee[e]={global:Array.from(t),component:Object.assign(Object.assign({},null===(r=Fee[e])||void 0===r?void 0:r.component),n)}}),{token:n,keys:t,flush:r}},Lee=(e,t)=>{const[n,r]=pee();return U7({theme:n,token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>null===t||void 0===t?void 0:t.nonce},(()=>[{[".".concat(e)]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{[".".concat(e," .").concat(e,"-icon")]:{display:"block"}})}]))},Oee=(e,t,n)=>{var r;return"function"===typeof n?n(Nee(t,null!==(r=t[e])&&void 0!==r?r:{})):null!==n&&void 0!==n?n:{}},Ree=(e,t,n,r)=>{const o=Object.assign({},t[e]);if(null===r||void 0===r?void 0:r.deprecatedTokens){const{deprecatedTokens:e}=r;e.forEach((e=>{let[t,n]=e;var r;((null===o||void 0===o?void 0:o[t])||(null===o||void 0===o?void 0:o[n]))&&(null!==(r=o[n])&&void 0!==r||(o[n]=null===o||void 0===o?void 0:o[t]))}))}const a=Object.assign(Object.assign({},n),o);return Object.keys(a).forEach((e=>{a[e]===t[e]&&delete a[e]})),a};function Uee(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=Array.isArray(e)?e:[e,e],[a]=o,i=o.join("-");return e=>{const[o,s,c,l,u]=pee(),{getPrefixCls:A,iconPrefixCls:h,csp:d}=(0,F.useContext)(i6),p=A(),f=u?"css":"js",g=See(f),{max:m,min:y}=function(e){return"js"===e?{max:Math.max,min:Math.min}:{max:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"max(".concat(t.map((e=>h8(e))).join(","),")")},min:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"min(".concat(t.map((e=>h8(e))).join(","),")")}}}(f),v={theme:o,token:l,hashId:c,nonce:()=>null===d||void 0===d?void 0:d.nonce,clientOnly:r.clientOnly,order:r.order||-999};U7(Object.assign(Object.assign({},v),{clientOnly:!1,path:["Shared",p]}),(()=>[{"&":j7(l)}])),Lee(h,d);const b=U7(Object.assign(Object.assign({},v),{path:[i,e,h]}),(()=>{if(!1===r.injectStyle)return[];const{token:o,flush:i}=_ee(l),A=Oee(a,s,n),d=".".concat(e),f=Ree(a,s,A,{deprecatedTokens:r.deprecatedTokens});u&&Object.keys(A).forEach((e=>{A[e]="var(".concat(p8(e,((e,t)=>"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")))(a,u.prefix)),")")}));const v=Nee(o,{componentCls:d,prefixCls:e,iconCls:".".concat(h),antCls:".".concat(p),calc:g,max:m,min:y},u?A:f),b=t(v,{hashId:c,prefixCls:e,rootPrefixCls:p,iconPrefixCls:h});return i(a,f),[!1===r.resetStyle?null:W7(v,e),b]}));return[b,c]}}const Dee=(e,t,n,r)=>{const o=Uee(e,t,n,Object.assign({resetStyle:!1,order:-998},r));return e=>{let{prefixCls:t}=e;return o(t),null}},Pee=(e,t,n,r)=>{const o=Uee(e,t,n,r),a=((e,t,n)=>{function r(t){return"".concat(e).concat(t.slice(0,1).toUpperCase()).concat(t.slice(1))}const{unitless:o={},injectStyle:a=!0}=null!==n&&void 0!==n?n:{},i={[r("zIndexPopup")]:!0};Object.keys(o).forEach((e=>{i[r(e)]=o[e]}));const s=o=>{let{rootCls:a,cssVar:s}=o;const[,c]=pee();return P7({path:[e],prefix:s.prefix,key:null===s||void 0===s?void 0:s.key,unitless:Object.assign(Object.assign({},uee),i),ignore:Aee,token:c,scope:a},(()=>{const o=Oee(e,c,t),a=Ree(e,c,o,{deprecatedTokens:null===n||void 0===n?void 0:n.deprecatedTokens});return Object.keys(o).forEach((e=>{a[r(e)]=a[e],delete a[e]})),a})),null};return t=>{const[,,,,n]=pee();return[r=>a&&n?F.createElement(F.Fragment,null,F.createElement(s,{rootCls:t,cssVar:n,component:e}),r):r,null===n||void 0===n?void 0:n.key]}})(Array.isArray(e)?e[0]:e,n,r);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const[,n]=o(e),[r,i]=a(t);return[r,n,i]}},Mee=new H7("antSpinMove",{to:{opacity:1}}),Qee=new H7("antRotate",{to:{transform:"rotate(405deg)"}}),Hee=e=>{const{componentCls:t,calc:n}=e;return{["".concat(t)]:Object.assign(Object.assign({},V7(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:"transform ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOutCirc),"&-spinning":{position:"static",display:"inline-block",opacity:1},["".concat(t,"-text")]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:"all ".concat(e.motionDurationMid),"&-show":{opacity:1,visibility:"visible"},["".concat(t,"-dot ").concat(t,"-dot-item")]:{backgroundColor:e.colorWhite},["".concat(t,"-text")]:{color:e.colorTextLightSolid}},"&-nested-loading":{position:"relative",["> div > ".concat(t)]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,["".concat(t,"-dot")]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},["".concat(t,"-text")]:{position:"absolute",top:"50%",width:"100%",textShadow:"0 1px 2px ".concat(e.colorBgContainer)},["&".concat(t,"-show-text ").concat(t,"-dot")]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{["".concat(t,"-dot")]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},["".concat(t,"-text")]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},["&".concat(t,"-show-text ").concat(t,"-dot")]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{["".concat(t,"-dot")]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},["".concat(t,"-text")]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},["&".concat(t,"-show-text ").concat(t,"-dot")]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},["".concat(t,"-container")]:{position:"relative",transition:"opacity ".concat(e.motionDurationSlow),"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:"all ".concat(e.motionDurationSlow),content:'""',pointerEvents:"none"}},["".concat(t,"-blur")]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},["".concat(t,"-dot")]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Mee,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Qee,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},["&-sm ".concat(t,"-dot")]:{fontSize:e.dotSizeSM,i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},["&-lg ".concat(t,"-dot")]:{fontSize:e.dotSizeLG,i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},["&".concat(t,"-show-text ").concat(t,"-text")]:{display:"block"}})}},zee=Pee("Spin",(e=>{const t=Nee(e,{spinDotDefault:e.colorTextDescription});return[Hee(t)]}),(e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:.35*t,dotSizeLG:n}}));var Vee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};let jee=null;const Wee=e=>{const{prefixCls:t,spinning:n=!0,delay:r=0,className:o,rootClassName:a,size:i="default",tip:s,wrapperClassName:c,style:l,children:u,fullscreen:A}=e,h=Vee(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen"]),{getPrefixCls:d}=F.useContext(i6),p=d("spin",t),[f,g,m]=zee(p),[y,v]=F.useState((()=>n&&!function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(n,r)));F.useEffect((()=>{if(n){const e=n6(r,(()=>{v(!0)}));return e(),()=>{var t;null===(t=null===e||void 0===e?void 0:e.cancel)||void 0===t||t.call(e)}}v(!1)}),[r,n]);const b=F.useMemo((()=>"undefined"!==typeof u&&!A),[u,A]);const{direction:w,spin:x}=F.useContext(i6),C=Z3()(p,null===x||void 0===x?void 0:x.className,{["".concat(p,"-sm")]:"small"===i,["".concat(p,"-lg")]:"large"===i,["".concat(p,"-spinning")]:y,["".concat(p,"-show-text")]:!!s,["".concat(p,"-fullscreen")]:A,["".concat(p,"-fullscreen-show")]:A&&y,["".concat(p,"-rtl")]:"rtl"===w},o,a,g,m),k=Z3()("".concat(p,"-container"),{["".concat(p,"-blur")]:y}),B=t6(h,["indicator"]),S=Object.assign(Object.assign({},null===x||void 0===x?void 0:x.style),l),I=F.createElement("div",Object.assign({},B,{style:S,className:C,"aria-live":"polite","aria-busy":y}),function(e,t){const{indicator:n}=t,r="".concat(e,"-dot");return null===n?null:r6(n)?o6(n,{className:Z3()(n.props.className,r)}):r6(jee)?o6(jee,{className:Z3()(jee.props.className,r)}):F.createElement("span",{className:Z3()(r,"".concat(e,"-dot-spin"))},F.createElement("i",{className:"".concat(e,"-dot-item"),key:1}),F.createElement("i",{className:"".concat(e,"-dot-item"),key:2}),F.createElement("i",{className:"".concat(e,"-dot-item"),key:3}),F.createElement("i",{className:"".concat(e,"-dot-item"),key:4}))}(p,e),s&&(b||A)?F.createElement("div",{className:"".concat(p,"-text")},s):null);return f(b?F.createElement("div",Object.assign({},B,{className:Z3()("".concat(p,"-nested-loading"),c,g,m)}),y&&F.createElement("div",{key:"loading"},I),F.createElement("div",{className:k,key:"container"},u)):I)};Wee.setDefaultIndicator=e=>{jee=e};const Kee=Wee,Gee=()=>{const[e,t]=(0,F.useState)(null),[n,r]=(0,F.useState)(!1),o=(0,F.useRef)(null);(0,F.useEffect)((()=>{(async()=>{try{const e=await $z("/js_seg_model/v4_2k_640x640/model.json");t(e)}catch(e){console.error("Failed to load model",e)}})()}),[]);const a=(e,t)=>{const n=i(t);(async function(e,t){let n=_k(e,"img","toPixels");if(!(e instanceof nk)){const e=n;n=ZB(e,"int32"),e.dispose()}tI(n);const[r,o]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2],i=await n.data(),s="float32"===n.dtype?255:1,c=new Uint8ClampedArray(o*r*4);for(let l=0;l<r*o;++l){const e=[0,0,0,255];for(let r=0;r<a;r++){const t=i[l*a+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===a?(e[0]=t*s,e[1]=t*s,e[2]=t*s):e[r]=t*s}const t=4*l;c[t+0]=Math.round(e[0]),c[t+1]=Math.round(e[1]),c[t+2]=Math.round(e[2]),c[t+3]=Math.round(e[3])}if(null!=t){$S||null!=dC(Gb,Ck.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),$S=!0),t.width=o,t.height=r;const e=t.getContext("2d"),n=new ImageData(c,o,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),c})(s(e,n),o.current).then((()=>{console.log("Masked image visualized on canvas."),c()})).catch((e=>{console.error("Error visualizing masked image on canvas:",e)}))},i=e=>Vk((()=>e.squeeze([0]).argMax(-1).expandDims(-1).cast("float32"))),s=(e,t)=>Vk((()=>{const n=t.tile([1,1,3]);return e.mul(n).squeeze().div(255)})),c=()=>{if(o.current){const e=o.current.toDataURL("image/png");sessionStorage.setItem("segmentedImage",e),console.log("Segmented image saved to Session Storage.")}},l=Ie();return(0,ev.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ev.jsx)("div",{children:n&&(0,ev.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex justify-center items-center",children:(0,ev.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center",children:[(0,ev.jsx)("p",{className:"text-xl md:text-2xl font-semibold text-gray-800 mb-4",children:"H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n v\xe0 ch\u1ea9n \u0111o\xe1n b\u1ec7nh. Vui l\xf2ng \u0111\u1ee3i!!"}),(0,ev.jsx)(Kee,{size:"large"})]})})}),(0,ev.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600",onClick:async()=>{r(!0);const t=sessionStorage.getItem("croppedImage");if(t&&e){const n=new Image;n.src=t,n.onload=async()=>{const t=nI(n).resizeNearestNeighbor([640,640]).expandDims(),o=(await e.executeAsync(t))[0];a(t,o),r(!1)}}},style:{minWidth:"170px"},children:"Segment Image"}),(0,ev.jsx)("div",{className:"flex justify-center mt-4",children:(0,ev.jsx)("div",{className:"overflow-hidden rounded-lg shadow-md",style:{width:"300px",height:"300px"},children:(0,ev.jsx)("canvas",{ref:o,style:{width:"300px",height:"300px"}})})}),(0,ev.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600",onClick:()=>{l("/infor")},style:{minWidth:"170px"},children:"Ti\u1ebfp"})]})};const qee=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xee=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Yee={};function Zee(e,t){return((t||Yee).jsx?Xee:qee).test(e)}const Jee=/[ \t\n\f\r]/g;function $ee(e){return""===e.replace(Jee,"")}class ete{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function tte(e,t){const n={},r={};let o=-1;for(;++o<e.length;)Object.assign(n,e[o].property),Object.assign(r,e[o].normal);return new ete(n,r,t)}function nte(e){return e.toLowerCase()}ete.prototype.property={},ete.prototype.normal={},ete.prototype.space=null;class rte{constructor(e,t){this.property=e,this.attribute=t}}rte.prototype.space=null,rte.prototype.boolean=!1,rte.prototype.booleanish=!1,rte.prototype.overloadedBoolean=!1,rte.prototype.number=!1,rte.prototype.commaSeparated=!1,rte.prototype.spaceSeparated=!1,rte.prototype.commaOrSpaceSeparated=!1,rte.prototype.mustUseProperty=!1,rte.prototype.defined=!1;let ote=0;const ate=hte(),ite=hte(),ste=hte(),cte=hte(),lte=hte(),ute=hte(),Ate=hte();function hte(){return 2**++ote}const dte=Object.keys(I);class pte extends rte{constructor(e,t,n,r){let o=-1;if(super(e,t),fte(this,"space",r),"number"===typeof n)for(;++o<dte.length;){const e=dte[o];fte(this,dte[o],(n&I[e])===I[e])}}}function fte(e,t,n){n&&(e[t]=n)}pte.prototype.defined=!0;const gte={}.hasOwnProperty;function mte(e){const t={},n={};let r;for(r in e.properties)if(gte.call(e.properties,r)){const o=e.properties[r],a=new pte(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[nte(r)]=r,n[nte(a.attribute)]=r}return new ete(t,n,e.space)}const yte=mte({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),vte=mte({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function bte(e,t){return t in e?e[t]:t}function wte(e,t){return bte(e,t.toLowerCase())}const xte=mte({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:wte,properties:{xmlns:null,xmlnsXLink:null}}),Cte=mte({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:ite,ariaAutoComplete:null,ariaBusy:ite,ariaChecked:ite,ariaColCount:cte,ariaColIndex:cte,ariaColSpan:cte,ariaControls:lte,ariaCurrent:null,ariaDescribedBy:lte,ariaDetails:null,ariaDisabled:ite,ariaDropEffect:lte,ariaErrorMessage:null,ariaExpanded:ite,ariaFlowTo:lte,ariaGrabbed:ite,ariaHasPopup:null,ariaHidden:ite,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:lte,ariaLevel:cte,ariaLive:null,ariaModal:ite,ariaMultiLine:ite,ariaMultiSelectable:ite,ariaOrientation:null,ariaOwns:lte,ariaPlaceholder:null,ariaPosInSet:cte,ariaPressed:ite,ariaReadOnly:ite,ariaRelevant:null,ariaRequired:ite,ariaRoleDescription:lte,ariaRowCount:cte,ariaRowIndex:cte,ariaRowSpan:cte,ariaSelected:ite,ariaSetSize:cte,ariaSort:null,ariaValueMax:cte,ariaValueMin:cte,ariaValueNow:cte,ariaValueText:null,role:null}}),kte=mte({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:wte,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ute,acceptCharset:lte,accessKey:lte,action:null,allow:null,allowFullScreen:ate,allowPaymentRequest:ate,allowUserMedia:ate,alt:null,as:null,async:ate,autoCapitalize:null,autoComplete:lte,autoFocus:ate,autoPlay:ate,blocking:lte,capture:ate,charSet:null,checked:ate,cite:null,className:lte,cols:cte,colSpan:null,content:null,contentEditable:ite,controls:ate,controlsList:lte,coords:cte|ute,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ate,defer:ate,dir:null,dirName:null,disabled:ate,download:ste,draggable:ite,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ate,formTarget:null,headers:lte,height:cte,hidden:ate,high:cte,href:null,hrefLang:null,htmlFor:lte,httpEquiv:lte,id:null,imageSizes:null,imageSrcSet:null,inert:ate,inputMode:null,integrity:null,is:null,isMap:ate,itemId:null,itemProp:lte,itemRef:lte,itemScope:ate,itemType:lte,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ate,low:cte,manifest:null,max:null,maxLength:cte,media:null,method:null,min:null,minLength:cte,multiple:ate,muted:ate,name:null,nonce:null,noModule:ate,noValidate:ate,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ate,optimum:cte,pattern:null,ping:lte,placeholder:null,playsInline:ate,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ate,referrerPolicy:null,rel:lte,required:ate,reversed:ate,rows:cte,rowSpan:cte,sandbox:lte,scope:null,scoped:ate,seamless:ate,selected:ate,shadowRootDelegatesFocus:ate,shadowRootMode:null,shape:null,size:cte,sizes:null,slot:null,span:cte,spellCheck:ite,src:null,srcDoc:null,srcLang:null,srcSet:null,start:cte,step:null,style:null,tabIndex:cte,target:null,title:null,translate:null,type:null,typeMustMatch:ate,useMap:null,value:ite,width:cte,wrap:null,align:null,aLink:null,archive:lte,axis:null,background:null,bgColor:null,border:cte,borderColor:null,bottomMargin:cte,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ate,declare:ate,event:null,face:null,frame:null,frameBorder:null,hSpace:cte,leftMargin:cte,link:null,longDesc:null,lowSrc:null,marginHeight:cte,marginWidth:cte,noResize:ate,noHref:ate,noShade:ate,noWrap:ate,object:null,profile:null,prompt:null,rev:null,rightMargin:cte,rules:null,scheme:null,scrolling:ite,standby:null,summary:null,text:null,topMargin:cte,valueType:null,version:null,vAlign:null,vLink:null,vSpace:cte,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ate,disableRemotePlayback:ate,prefix:null,property:null,results:cte,security:null,unselectable:null}}),Bte=mte({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:bte,properties:{about:Ate,accentHeight:cte,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:cte,amplitude:cte,arabicForm:null,ascent:cte,attributeName:null,attributeType:null,azimuth:cte,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:cte,by:null,calcMode:null,capHeight:cte,className:lte,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:cte,diffuseConstant:cte,direction:null,display:null,dur:null,divisor:cte,dominantBaseline:null,download:ate,dx:null,dy:null,edgeMode:null,editable:null,elevation:cte,enableBackground:null,end:null,event:null,exponent:cte,externalResourcesRequired:null,fill:null,fillOpacity:cte,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ute,g2:ute,glyphName:ute,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:cte,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:cte,horizOriginX:cte,horizOriginY:cte,id:null,ideographic:cte,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:cte,k:cte,k1:cte,k2:cte,k3:cte,k4:cte,kernelMatrix:Ate,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:cte,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:cte,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:cte,overlineThickness:cte,paintOrder:null,panose1:null,path:null,pathLength:cte,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:lte,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:cte,pointsAtY:cte,pointsAtZ:cte,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ate,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ate,rev:Ate,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ate,requiredFeatures:Ate,requiredFonts:Ate,requiredFormats:Ate,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:cte,specularExponent:cte,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:cte,strikethroughThickness:cte,string:null,stroke:null,strokeDashArray:Ate,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:cte,strokeOpacity:cte,strokeWidth:null,style:null,surfaceScale:cte,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ate,tabIndex:cte,tableValues:null,target:null,targetX:cte,targetY:cte,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ate,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:cte,underlineThickness:cte,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:cte,values:null,vAlphabetic:cte,vMathematical:cte,vectorEffect:null,vHanging:cte,vIdeographic:cte,version:null,vertAdvY:cte,vertOriginX:cte,vertOriginY:cte,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:cte,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Ste=tte([vte,yte,xte,Cte,kte],"html"),Ite=tte([vte,yte,xte,Cte,Bte],"svg"),Ete=/^data[-\w.:]+$/i,Nte=/-[a-z]/g,Fte=/[A-Z]/g;function Tte(e){return"-"+e.toLowerCase()}function _te(e){return e.charAt(1).toUpperCase()}const Lte={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Ote=n(3009);const Rte=Ote.default||Ote,Ute=Pte("end"),Dte=Pte("start");function Pte(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Mte(e){return e&&"object"===typeof e?"position"in e||"type"in e?Hte(e.position):"start"in e||"end"in e?Hte(e):"line"in e||"column"in e?Qte(e):"":""}function Qte(e){return zte(e&&e.line)+":"+zte(e&&e.column)}function Hte(e){return Qte(e&&e.start)+"-"+Qte(e&&e.end)}function zte(e){return e&&"number"===typeof e?e:1}class Vte extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",o={},a=!1;if(t&&(o="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?r=e:!o.cause&&e&&(a=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?o.ruleId=n:(o.source=n.slice(0,e),o.ruleId=n.slice(e+1))}if(!o.place&&o.ancestors&&o.ancestors){const e=o.ancestors[o.ancestors.length-1];e&&(o.place=e.position)}const i=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=Mte(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&"string"===typeof o.cause.stack?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Vte.prototype.file="",Vte.prototype.name="",Vte.prototype.reason="",Vte.prototype.message="",Vte.prototype.stack="",Vte.prototype.column=void 0,Vte.prototype.line=void 0,Vte.prototype.ancestors=void 0,Vte.prototype.cause=void 0,Vte.prototype.fatal=void 0,Vte.prototype.place=void 0,Vte.prototype.ruleId=void 0,Vte.prototype.source=void 0;const jte={}.hasOwnProperty,Wte=new Map,Kte=/[A-Z]/g,Gte=/-([a-z])/g,qte=new Set(["table","tbody","thead","tfoot","tr"]),Xte=new Set(["td","th"]),Yte="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Zte(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,o,a){const i=Array.isArray(o.children),s=Dte(n);return t(r,o,a,i,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,o,a){const i=Array.isArray(o.children)?n:t;return a?i(r,o,a):i(r,o)}}(0,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Ite:Ste,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},a=Jte(o,e,void 0);return a&&"string"!==typeof a?a:o.create(e,o.Fragment,{children:a||void 0},void 0)}function Jte(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(o=Ite,e.schema=o);e.ancestors.push(t);const a=rne(e,t.tagName,!1),i=function(e,t){const n={};let r,o;for(o in t.properties)if("children"!==o&&jte.call(t.properties,o)){const a=nne(e,o,t.properties[o]);if(a){const[o,i]=a;e.tableCellAlignToStyle&&"align"===o&&"string"===typeof i&&Xte.has(t.tagName)?r=i:n[o]=i}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let s=tne(e,t);qte.has(t.tagName)&&(s=s.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&$ee(t.value):$ee(t));var t})));return $te(e,i,a,t),ene(i,s),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}one(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let o=r;"svg"===t.name&&"html"===r.space&&(o=Ite,e.schema=o);e.ancestors.push(t);const a=null===t.name?e.Fragment:rne(e,t.name,!0),i=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const o=t.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else one(e,t.position);else{const o=r.name;let a;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,a=e.evaluater.evaluateExpression(t.expression)}else one(e,t.position);else a=null===r.value||r.value;n[o]=a}return n}(e,t),s=tne(e,t);return $te(e,i,a,t),ene(i,s),e.ancestors.pop(),e.schema=r,e.create(t,a,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);one(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return ene(r,tne(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function $te(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ene(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function tne(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:Wte;for(;++r<t.children.length;){const a=t.children[r];let i;if(e.passKeys){const e="element"===a.type?a.tagName:"mdxJsxFlowElement"===a.type||"mdxJsxTextElement"===a.type?a.name:void 0;if(e){const t=o.get(e)||0;i=e+"-"+t,o.set(e,t+1)}}const s=Jte(e,a,i);void 0!==s&&n.push(s)}return n}function nne(e,t,n){const r=function(e,t){const n=nte(t);let r=t,o=rte;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Ete.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Nte,_te);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Nte.test(e)){let n=e.replace(Fte,Tte);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}o=pte}return new o(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){const n={};try{Rte(t,r)}catch(o){if(!e.ignoreInvalidStyle){const t=o,n=new Vte("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Yte+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(Gte,ine)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)jte.call(e,n)&&(t[ane(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?Lte[r.property]||r.property:r.attribute,n]}}function rne(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,o=-1;for(;++o<e.length;){const t=Zee(e[o])?{type:"Identifier",name:e[o]}:{type:"Literal",value:e[o]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(o&&"Literal"===t.type),optional:!1}:t}r=n}else r=Zee(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return jte.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);one(e)}function one(e,t){const n=new Vte("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Yte+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ane(e){let t=e.replace(Kte,sne);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function ine(e,t){return t.toUpperCase()}function sne(e){return"-"+e.toLowerCase()}const cne={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},lne={};function une(e,t){const n=t||lne;return Ane(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function Ane(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hne(e.children,t,n)}return Array.isArray(e)?hne(e,t,n):""}function hne(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=Ane(e[o],t,n);return r.join("")}function dne(e,t,n,r){const o=e.length;let a,i=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(t,0),e.splice(...a),i+=1e4,t+=1e4}function pne(e,t){return e.length>0?(dne(e,e.length,0,t),e):t}function fne(e){const t={};let n,r,o,a,i,s,c,l=-1;for(;++l<e.length;){for(;l in t;)l=t[l];if(n=e[l],l&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[l-1][1].type&&(s=n[1]._tokenizer.events,o=0,o<s.length&&"lineEndingBlank"===s[o][1].type&&(o+=2),o<s.length&&"content"===s[o][1].type))for(;++o<s.length&&"content"!==s[o][1].type;)"chunkText"===s[o][1].type&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,gne(e,l)),l=t[l],c=!0);else if(n[1]._container){for(o=l,r=void 0;o--&&(a=e[o],"lineEnding"===a[1].type||"lineEndingBlank"===a[1].type);)"enter"===a[0]&&(r&&(e[r][1].type="lineEndingBlank"),a[1].type="lineEnding",r=o);r&&(n[1].end=Object.assign({},e[r][1].start),i=e.slice(r,l),i.unshift(n),dne(e,r,l-r+1,i))}}return!c}function gne(e,t){const n=e[t][1],r=e[t][2];let o=t-1;const a=[],i=n._tokenizer||r.parser[n.contentType](n.start),s=i.events,c=[],l={};let u,A,h=-1,d=n,p=0,f=0;const g=[f];for(;d;){for(;e[++o][1]!==d;);a.push(o),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),A&&i.defineSkip(d.start),d._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(u),d._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),A=d,d=d.next}for(d=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(f=h+1,g.push(f),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(i.events=[],d?(d._tokenizer=void 0,d.previous=void 0):g.pop(),h=g.length;h--;){const t=s.slice(g[h],g[h+1]),n=a.pop();c.unshift([n,n+t.length-1]),dne(e,n,2,t)}for(h=-1;++h<c.length;)l[p+c[h][0]]=p+c[h][1],p+=c[h][1]-c[h][0]-1;return l}const mne={}.hasOwnProperty;function yne(e){const t={};let n=-1;for(;++n<e.length;)vne(t,e[n]);return t}function vne(e,t){let n;for(n in t){const r=(mne.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let a;if(o)for(a in o){mne.call(r,a)||(r[a]=[]);const e=o[a];bne(r[a],Array.isArray(e)?e:e?[e]:[])}}}function bne(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);dne(e,0,0,r)}const wne=One(/\p{P}/u),xne=One(/[A-Za-z]/),Cne=One(/[\dA-Za-z]/),kne=One(/[#-'*+\--9=?A-Z^-~]/);function Bne(e){return null!==e&&(e<32||127===e)}const Sne=One(/\d/),Ine=One(/[\dA-Fa-f]/),Ene=One(/[!-/:-@[-`{-~]/);function Nne(e){return null!==e&&e<-2}function Fne(e){return null!==e&&(e<0||32===e)}function Tne(e){return-2===e||-1===e||32===e}function _ne(e){return Ene(e)||wne(e)}const Lne=One(/\s/);function One(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Rne(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let a=0;return function(r){if(Tne(r))return e.enter(n),i(r);return t(r)};function i(r){return Tne(r)&&a++<o?(e.consume(r),i):(e.exit(n),t(r))}}const Une={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Rne(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,o(t)}function o(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Nne(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),o)}}};const Dne={tokenize:function(e){const t=this,n=[];let r,o,a,i=0;return s;function s(r){if(i<n.length){const o=n[i];return t.containerState=o[1],e.attempt(o[0].continuation,c,l)(r)}return l(r)}function c(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let o,a=n;for(;a--;)if("exit"===t.events[a][0]&&"chunkFlow"===t.events[a][1].type){o=t.events[a][1].end;break}m(i);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},o),s++;return dne(t.events,a+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(o){if(i===n.length){if(!r)return h(o);if(r.currentConstruct&&r.currentConstruct.concrete)return p(o);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Pne,u,A)(o)}function u(e){return r&&y(),m(i),h(e)}function A(e){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(Pne,d,p)(n)}function d(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&y(),m(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:r}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),m(0),void e.consume(n)):Nne(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,s):(e.consume(n),f)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=o,o&&(o.next=e),o=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<a&&(!r.events[e][1].end||r.events[e][1].end.offset>a))return;const n=t.events.length;let o,s,c=n;for(;c--;)if("exit"===t.events[c][0]&&"chunkFlow"===t.events[c][1].type){if(o){s=t.events[c][1].end;break}o=!0}for(m(i),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;dne(t.events,c+1,0,t.events.slice(n)),t.events.length=e}}function m(r){let o=n.length;for(;o-- >r;){const r=n[o];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Pne={tokenize:function(e,t,n){return Rne(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Mne={tokenize:function(e,t,n){return function(t){return Tne(t)?Rne(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Nne(e)?t(e):n(e)}},partial:!0};const Qne={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):Nne(t)?e.check(Hne,a,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function a(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return fne(e),e}},Hne={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Rne(e,o,"linePrefix")};function o(o){if(null===o||Nne(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}},partial:!0};const zne={tokenize:function(e){const t=this,n=e.attempt(Mne,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,Rne(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Qne,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Vne={resolveAll:Gne()},jne=Kne("string"),Wne=Kne("text");function Kne(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,a,i);return a;function a(e){return c(e)?o(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return c(e)?(t.exit("data"),o(e)):(t.consume(e),s)}function c(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)for(;++o<t.length;){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:Gne("text"===e?qne:void 0)}}function Gne(e){return function(t,n){let r,o=-1;for(;++o<=t.length;)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function qne(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let a,i=o.length,s=-1,c=0;for(;i--;){const e=o[i];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)c++,s--;if(s)break;s=-1}else if(-2===e)a=!0,c++;else if(-1!==e){i++;break}}if(c){const o={type:n===e.length||a||c<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-c,offset:r.end.offset-c,_index:r.start._index+i,_bufferIndex:i?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},o.start),r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}function Xne(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const a=e[o].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}function Yne(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},a=[];let i=[],s=[],c=!0;const l={consume:function(e){Nne(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,c=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),u.events.push(["exit",t,u]),t},attempt:y((function(e,t){v(e,t.from)})),check:y(m),interrupt:y(m,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const a=e[n];let i;if("string"===typeof a)i=a;else switch(a){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&o)continue;i=" ";break;default:i=String.fromCharCode(a)}o=-2===a,r.push(i)}return r.join("")}(d(e),t)},now:p,defineSkip:function(e){o[e.line]=e.column,b()},write:function(e){if(i=pne(i,e),f(),null!==i[i.length-1])return[];return v(t,0),u.events=Xne(a,u.events,u),u.events}};let A,h=t.tokenize.call(u,l);return t.resolveAll&&a.push(t),u;function d(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;let i;if(n===o)i=[e[n].slice(r,a)];else{if(i=e.slice(n,o),r>-1){const e=i[0];"string"===typeof e?i[0]=e.slice(r):i.shift()}a>0&&i.push(e[o].slice(0,a))}return i}(i,e)}function p(){const{line:e,column:t,offset:n,_index:o,_bufferIndex:a}=r;return{line:e,column:t,offset:n,_index:o,_bufferIndex:a}}function f(){let e;for(;r._index<i.length;){const t=i[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){c=void 0,A=e,h=h(e)}function m(e,t){t.restore()}function y(e,t){return function(n,o,a){let i,A,h,d;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return i=e,A=0,0===e.length?a:g(e[A])}function g(e){return function(n){d=function(){const e=p(),t=u.previous,n=u.currentConstruct,o=u.events.length,a=Array.from(s);return{restore:i,from:o};function i(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=o,s=a,b()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,m,y)(n)}}function m(t){return c=!0,e(h,d),o}function y(e){return c=!0,d.restore(),++A<i.length?g(i[A]):a}}}function v(e,t){e.resolveAll&&!a.includes(e)&&a.push(e),e.resolve&&dne(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function b(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}const Zne={name:"thematicBreak",tokenize:function(e,t,n){let r,o=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,a(e)}(t)};function a(a){return a===r?(e.enter("thematicBreakSequence"),i(a)):o>=3&&(null===a||Nne(a))?(e.exit("thematicBreak"),t(a)):n(a)}function i(t){return t===r?(e.consume(t),o++,i):(e.exit("thematicBreakSequence"),Tne(t)?Rne(e,a,"whitespace")(t):a(t))}}};const Jne={name:"list",tokenize:function(e,t,n){const r=this,o=r.events[r.events.length-1];let a=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,i=0;return function(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:Sne(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(Zne,n,c)(t):c(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Sne(t)&&++i<10?(e.consume(t),s):(!r.interrupt||i<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),c(t)):n(t)}function c(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Mne,r.interrupt?n:l,e.attempt($ne,A,u))}function l(e){return r.containerState.initialBlankLine=!0,a++,A(e)}function u(t){return Tne(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),A):n(t)}function A(n){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Mne,o,a);function o(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Rne(e,t,"listItemIndent",r.containerState.size+1)(n)}function a(n){return r.containerState.furtherBlankLines||!Tne(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ere,t,i)(n))}function i(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Rne(e,e.attempt(Jne,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}},exit:function(e){e.exit(this.containerState.type)}},$ne={tokenize:function(e,t,n){const r=this;return Rne(e,(function(e){const o=r.events[r.events.length-1];return!Tne(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},ere={tokenize:function(e,t,n){const r=this;return Rne(e,(function(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const tre={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)};function o(n){return Tne(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Tne(t))return Rne(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return o(t)};function o(r){return e.attempt(tre,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function nre(e,t,n,r,o,a,i,s,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(o),e.enter(a),e.consume(t),e.exit(a),A;if(null===t||32===t||41===t||Bne(t))return n(t);return e.enter(r),e.enter(i),e.enter(s),e.enter("chunkString",{contentType:"string"}),p(t)};function A(n){return 62===n?(e.enter(a),e.consume(n),e.exit(a),e.exit(o),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),A(t)):null===t||60===t||Nne(t)?n(t):(e.consume(t),92===t?d:h)}function d(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(o){return u||null!==o&&41!==o&&!Fne(o)?u<l&&40===o?(e.consume(o),u++,p):41===o?(e.consume(o),u--,p):null===o||32===o||40===o||Bne(o)?n(o):(e.consume(o),92===o?f:p):(e.exit("chunkString"),e.exit(s),e.exit(i),e.exit(r),t(o))}function f(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function rre(e,t,n,r,o,a){const i=this;let s,c=0;return function(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(a),l};function l(A){return c>999||null===A||91===A||93===A&&!s||94===A&&!c&&"_hiddenFootnoteSupport"in i.parser.constructs?n(A):93===A?(e.exit(a),e.enter(o),e.consume(A),e.exit(o),e.exit(r),t):Nne(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),u(A))}function u(t){return null===t||91===t||93===t||Nne(t)||c++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!Tne(t)),92===t?A:u)}function A(t){return 91===t||92===t||93===t?(e.consume(t),c++,u):u(t)}}function ore(e,t,n,r,o,a){let i;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(o),e.consume(t),e.exit(o),i=40===t?41:t,s;return n(t)};function s(n){return n===i?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(a),c(n))}function c(t){return t===i?(e.exit(a),s(i)):null===t?n(t):Nne(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Rne(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===i||null===t||Nne(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?u:l)}function u(t){return t===i||92===t?(e.consume(t),l):l(t)}}function are(e,t){let n;return function r(o){if(Nne(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r;if(Tne(o))return Rne(e,r,n?"linePrefix":"lineSuffix")(o);return t(o)}}function ire(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const sre={name:"definition",tokenize:function(e,t,n){const r=this;let o;return function(t){return e.enter("definition"),function(t){return rre.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function a(t){return o=ire(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return Fne(t)?are(e,s)(t):s(t)}function s(t){return nre(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function c(t){return e.attempt(cre,l,l)(t)}function l(t){return Tne(t)?Rne(e,u,"whitespace")(t):u(t)}function u(a){return null===a||Nne(a)?(e.exit("definition"),r.parser.defined.push(o),t(a)):n(a)}}},cre={tokenize:function(e,t,n){return function(t){return Fne(t)?are(e,r)(t):n(t)};function r(t){return ore(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return Tne(t)?Rne(e,a,"whitespace")(t):a(t)}function a(e){return null===e||Nne(e)?t(e):n(e)}},partial:!0};const lre={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Rne(e,o,"linePrefix",5)(t)};function o(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?a(e):n(e)}function a(t){return null===t?s(t):Nne(t)?e.attempt(ure,a,s)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||Nne(t)?(e.exit("codeFlowValue"),a(t)):(e.consume(t),i)}function s(n){return e.exit("codeIndented"),t(n)}}},ure={tokenize:function(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):Nne(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):Rne(e,a,"linePrefix",5)(t)}function a(e){const a=r.events[r.events.length-1];return a&&"linePrefix"===a[1].type&&a[2].sliceSerialize(a[1],!0).length>=4?t(e):Nne(e)?o(e):n(e)}},partial:!0};const Are={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),o(t)}(t)};function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||Fne(t)?(e.exit("atxHeadingSequence"),a(t)):n(t)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||Nne(n)?(e.exit("atxHeading"),t(n)):Tne(n)?Rne(e,a,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),a(t))}function s(t){return null===t||35===t||Fne(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),s)}},resolve:function(e,t){let n,r,o=e.length-2,a=3;"whitespace"===e[a][1].type&&(a+=2);o-2>a&&"whitespace"===e[o][1].type&&(o-=2);"atxHeadingSequence"===e[o][1].type&&(a===o-1||o-4>a&&"whitespace"===e[o-2][1].type)&&(o-=a+1===o?2:4);o>a&&(n={type:"atxHeadingText",start:e[a][1].start,end:e[o][1].end},r={type:"chunkText",start:e[a][1].start,end:e[o][1].end,contentType:"text"},dne(e,a,o-a+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const hre={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let o;return function(t){let i,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){i="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||i))return e.enter("setextHeadingLine"),o=t,function(t){return e.enter("setextHeadingLineSequence"),a(t)}(t);return n(t)};function a(t){return t===o?(e.consume(t),a):(e.exit("setextHeadingLineSequence"),Tne(t)?Rne(e,i,"lineSuffix")(t):i(t))}function i(r){return null===r||Nne(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,o,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),o||"definition"!==e[a][1].type||(o=a);const i={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",i,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=i;return e.push(["exit",i,t]),e}};const dre=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],pre=["pre","script","style","textarea"],fre={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let o,a,i,s,c;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),a=!0,d):63===s?(e.consume(s),o=3,r.interrupt?t:O):xne(s)?(e.consume(s),i=String.fromCharCode(s),p):n(s)}function u(a){return 45===a?(e.consume(a),o=2,A):91===a?(e.consume(a),o=5,s=0,h):xne(a)?(e.consume(a),o=4,r.interrupt?t:O):n(a)}function A(o){return 45===o?(e.consume(o),r.interrupt?t:O):n(o)}function h(o){const a="CDATA[";return o===a.charCodeAt(s++)?(e.consume(o),6===s?r.interrupt?t:S:h):n(o)}function d(t){return xne(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(s){if(null===s||47===s||62===s||Fne(s)){const c=47===s,l=i.toLowerCase();return c||a||!pre.includes(l)?dre.includes(i.toLowerCase())?(o=6,c?(e.consume(s),f):r.interrupt?t(s):S(s)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):a?g(s):m(s)):(o=1,r.interrupt?t(s):S(s))}return 45===s||Cne(s)?(e.consume(s),i+=String.fromCharCode(s),p):n(s)}function f(o){return 62===o?(e.consume(o),r.interrupt?t:S):n(o)}function g(t){return Tne(t)?(e.consume(t),g):k(t)}function m(t){return 47===t?(e.consume(t),k):58===t||95===t||xne(t)?(e.consume(t),y):Tne(t)?(e.consume(t),m):k(t)}function y(t){return 45===t||46===t||58===t||95===t||Cne(t)?(e.consume(t),y):v(t)}function v(t){return 61===t?(e.consume(t),b):Tne(t)?(e.consume(t),v):m(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,w):Tne(t)?(e.consume(t),b):x(t)}function w(t){return t===c?(e.consume(t),c=null,C):null===t||Nne(t)?n(t):(e.consume(t),w)}function x(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Fne(t)?v(t):(e.consume(t),x)}function C(e){return 47===e||62===e||Tne(e)?m(e):n(e)}function k(t){return 62===t?(e.consume(t),B):n(t)}function B(t){return null===t||Nne(t)?S(t):Tne(t)?(e.consume(t),B):n(t)}function S(t){return 45===t&&2===o?(e.consume(t),F):60===t&&1===o?(e.consume(t),T):62===t&&4===o?(e.consume(t),R):63===t&&3===o?(e.consume(t),O):93===t&&5===o?(e.consume(t),L):!Nne(t)||6!==o&&7!==o?null===t||Nne(t)?(e.exit("htmlFlowData"),I(t)):(e.consume(t),S):(e.exit("htmlFlowData"),e.check(gre,U,I)(t))}function I(t){return e.check(mre,E,U)(t)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),N}function N(t){return null===t||Nne(t)?I(t):(e.enter("htmlFlowData"),S(t))}function F(t){return 45===t?(e.consume(t),O):S(t)}function T(t){return 47===t?(e.consume(t),i="",_):S(t)}function _(t){if(62===t){const n=i.toLowerCase();return pre.includes(n)?(e.consume(t),R):S(t)}return xne(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),_):S(t)}function L(t){return 93===t?(e.consume(t),O):S(t)}function O(t){return 62===t?(e.consume(t),R):45===t&&2===o?(e.consume(t),O):S(t)}function R(t){return null===t||Nne(t)?(e.exit("htmlFlowData"),U(t)):(e.consume(t),R)}function U(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},gre={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Mne,t,n)}},partial:!0},mre={tokenize:function(e,t,n){const r=this;return function(t){if(Nne(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o;return n(t)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const yre={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},vre={name:"codeFenced",tokenize:function(e,t,n){const r=this,o={tokenize:function(e,t,n){let o=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c}function c(t){return e.enter("codeFencedFence"),Tne(t)?Rne(e,l,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===a?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===a?(o++,e.consume(t),u):o>=s?(e.exit("codeFencedFenceSequence"),Tne(t)?Rne(e,A,"whitespace")(t):A(t)):n(t)}function A(r){return null===r||Nne(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let a,i=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,a=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(t)}(t)};function c(t){return t===a?(s++,e.consume(t),c):s<3?n(t):(e.exit("codeFencedFenceSequence"),Tne(t)?Rne(e,l,"whitespace")(t):l(t))}function l(n){return null===n||Nne(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(yre,d,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Nne(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):Tne(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Rne(e,A,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),u)}function A(t){return null===t||Nne(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Nne(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===a?n(t):(e.consume(t),h)}function d(t){return e.attempt(o,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return i>0&&Tne(t)?Rne(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||Nne(t)?e.check(yre,d,y)(t):(e.enter("codeFlowValue"),m(t))}function m(t){return null===t||Nne(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),m)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const bre=document.createElement("i");function wre(e){const t="&"+e+";";bre.innerHTML=t;const n=bre.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const xre={name:"characterReference",tokenize:function(e,t,n){const r=this;let o,a,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),o=31,a=Cne,l(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,a=Ine,l):(e.enter("characterReferenceValue"),o=7,a=Sne,l(t))}function l(s){if(59===s&&i){const o=e.exit("characterReferenceValue");return a!==Cne||wre(r.sliceSerialize(o))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return a(s)&&i++<o?(e.consume(s),l):n(s)}}};const Cre={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Ene(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const kre={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Rne(e,t,"linePrefix")}}};const Bre={name:"labelEnd",tokenize:function(e,t,n){const r=this;let o,a,i=r.events.length;for(;i--;)if(("labelImage"===r.events[i][1].type||"labelLink"===r.events[i][1].type)&&!r.events[i][1]._balanced){o=r.events[i][1];break}return function(t){if(!o)return n(t);if(o._inactive)return u(t);return a=r.parser.defined.includes(ire(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(Sre,l,a?l:u)(t):91===t?e.attempt(Ire,l,a?c:u)(t):a?l(t):u(t)}function c(t){return e.attempt(Ere,l,u)(t)}function l(e){return t(e)}function u(e){return o._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,o,a,i=e.length,s=0;for(;i--;)if(n=e[i][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=i,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(o=i);const c={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[o][1].end)},u={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",c,t],["enter",l,t]],a=pne(a,e.slice(r+1,r+s+3)),a=pne(a,[["enter",u,t]]),a=pne(a,Xne(t.parser.constructs.insideSpan.null,e.slice(r+s+4,o-3),t)),a=pne(a,[["exit",u,t],e[o-2],e[o-1],["exit",l,t]]),a=pne(a,e.slice(o+1)),a=pne(a,[["exit",c,t]]),dne(e,r,e.length,a),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},Sre={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Fne(t)?are(e,o)(t):o(t)}function o(t){return 41===t?l(t):nre(e,a,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function a(t){return Fne(t)?are(e,s)(t):l(t)}function i(e){return n(e)}function s(t){return 34===t||39===t||40===t?ore(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function c(t){return Fne(t)?are(e,l)(t):l(t)}function l(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Ire={tokenize:function(e,t,n){const r=this;return function(t){return rre.call(r,e,o,a,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.includes(ire(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function a(e){return n(e)}}},Ere={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Nre={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o};function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Bre.resolveAll};function Fre(e){return null===e||Fne(e)||Lne(e)?1:_ne(e)?2:void 0}const Tre={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=Fre(r);let a;return function(t){return a=t,e.enter("attentionSequence"),i(t)};function i(s){if(s===a)return e.consume(s),i;const c=e.exit("attentionSequence"),l=Fre(s),u=!l||2===l&&o||n.includes(s),A=!o||2===o&&l||n.includes(r);return c._open=Boolean(42===a?u:u&&(o||!A)),c._close=Boolean(42===a?A:A&&(l||!u)),t(s)}},resolveAll:function(e,t){let n,r,o,a,i,s,c,l,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const A=Object.assign({},e[n][1].end),h=Object.assign({},e[u][1].start);_re(A,-s),_re(h,s),a={type:s>1?"strongSequence":"emphasisSequence",start:A,end:Object.assign({},e[n][1].end)},i={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:h},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},i.end)},e[n][1].end=Object.assign({},a.start),e[u][1].start=Object.assign({},i.end),c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=pne(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=pne(c,[["enter",r,t],["enter",a,t],["exit",a,t],["enter",o,t]]),c=pne(c,Xne(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),c=pne(c,[["exit",o,t],["enter",i,t],["exit",i,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(l=2,c=pne(c,[["enter",e[u][1],t],["exit",e[u][1],t]])):l=0,dne(e,n-1,u-n+3,c),u=n+c.length-l-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function _re(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Lre={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o};function o(t){return xne(t)?(e.consume(t),a):c(t)}function a(e){return 43===e||45===e||46===e||Cne(e)?(r=1,i(e)):c(e)}function i(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||Cne(t))&&r++<32?(e.consume(t),i):(r=0,c(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Bne(r)?n(r):(e.consume(r),s)}function c(t){return 64===t?(e.consume(t),l):kne(t)?(e.consume(t),c):n(t)}function l(e){return Cne(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):A(n)}function A(t){if((45===t||Cne(t))&&r++<63){const n=45===t?A:u;return e.consume(t),n}return n(t)}}};const Ore={name:"htmlText",tokenize:function(e,t,n){const r=this;let o,a,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),b):63===t?(e.consume(t),y):xne(t)?(e.consume(t),C):n(t)}function c(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),a=0,d):xne(t)?(e.consume(t),m):n(t)}function l(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),A):Nne(t)?(i=u,_(t)):(e.consume(t),u)}function A(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?T(e):45===e?A(e):u(e)}function d(t){const r="CDATA[";return t===r.charCodeAt(a++)?(e.consume(t),6===a?p:d):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),f):Nne(t)?(i=p,_(t)):(e.consume(t),p)}function f(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?T(t):93===t?(e.consume(t),g):p(t)}function m(t){return null===t||62===t?T(t):Nne(t)?(i=m,_(t)):(e.consume(t),m)}function y(t){return null===t?n(t):63===t?(e.consume(t),v):Nne(t)?(i=y,_(t)):(e.consume(t),y)}function v(e){return 62===e?T(e):y(e)}function b(t){return xne(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||Cne(t)?(e.consume(t),w):x(t)}function x(t){return Nne(t)?(i=x,_(t)):Tne(t)?(e.consume(t),x):T(t)}function C(t){return 45===t||Cne(t)?(e.consume(t),C):47===t||62===t||Fne(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),T):58===t||95===t||xne(t)?(e.consume(t),B):Nne(t)?(i=k,_(t)):Tne(t)?(e.consume(t),k):T(t)}function B(t){return 45===t||46===t||58===t||95===t||Cne(t)?(e.consume(t),B):S(t)}function S(t){return 61===t?(e.consume(t),I):Nne(t)?(i=S,_(t)):Tne(t)?(e.consume(t),S):k(t)}function I(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,E):Nne(t)?(i=I,_(t)):Tne(t)?(e.consume(t),I):(e.consume(t),N)}function E(t){return t===o?(e.consume(t),o=void 0,F):null===t?n(t):Nne(t)?(i=E,_(t)):(e.consume(t),E)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Fne(t)?k(t):(e.consume(t),N)}function F(e){return 47===e||62===e||Fne(e)?k(e):n(e)}function T(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function _(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),L}function L(t){return Tne(t)?Rne(e,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):O(t)}function O(t){return e.enter("htmlTextData"),i(t)}}};const Rre={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o};function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Bre.resolveAll};const Ure={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Nne(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Dre={name:"codeText",tokenize:function(e,t,n){let r,o,a=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),a++,i):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(o=e.enter("codeTextSequence"),r=0,l(t)):Nne(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||Nne(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),c)}function l(n){return 96===n?(e.consume(n),r++,l):r===a?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",c(n))}},resolve:function(e){let t,n,r=e.length-4,o=3;if(("lineEnding"===e[o][1].type||"space"===e[o][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=o;++t<r;)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}t=o-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const Pre={42:Jne,43:Jne,45:Jne,48:Jne,49:Jne,50:Jne,51:Jne,52:Jne,53:Jne,54:Jne,55:Jne,56:Jne,57:Jne,62:tre},Mre={91:sre},Qre={[-2]:lre,[-1]:lre,32:lre},Hre={35:Are,42:Zne,45:[hre,Zne],60:fre,61:hre,95:Zne,96:vre,126:vre},zre={38:xre,92:Cre},Vre={[-5]:kre,[-4]:kre,[-3]:kre,33:Nre,38:xre,42:Tre,60:[Lre,Ore],91:Rre,92:[Ure,Cre],93:Bre,95:Tre,96:Dre},jre={null:[Tre,Vne]},Wre={null:[42,95]},Kre={null:[]};const Gre=/[\0\t\n\r]/g;function qre(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const Xre=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Yre(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return qre(n.slice(t?2:1),t?16:10)}return wre(n)||e}const Zre={}.hasOwnProperty;function Jre(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ee),autolinkProtocol:B,autolinkEmail:B,atxHeading:a(Y),blockQuote:a(W),characterEscape:B,characterReference:B,codeFenced:a(K),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:a(K,i),codeText:a(G,i),codeTextData:B,data:B,codeFlowValue:B,definition:a(q),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:a(X),hardBreakEscape:a(Z),hardBreakTrailing:a(Z),htmlFlow:a(J,i),htmlFlowData:B,htmlText:a(J,i),htmlTextData:B,image:a($),label:i,link:a(ee),listItem:a(ne),listItemValue:h,listOrdered:a(te,A),listUnordered:a(te),paragraph:a(re),reference:M,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:a(Y),strong:a(oe),thematicBreak:a(ie)},exit:{atxHeading:c(),atxHeadingSequence:w,autolink:c(),autolinkEmail:j,autolinkProtocol:V,blockQuote:c(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:H,characterReferenceMarkerNumeric:H,characterReferenceValue:z,codeFenced:c(g),codeFencedFence:f,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:S,codeIndented:c(m),codeText:c(T),codeTextData:S,data:S,definition:c(),definitionDestinationString:b,definitionLabelString:y,definitionTitleString:v,emphasis:c(),hardBreakEscape:c(E),hardBreakTrailing:c(E),htmlFlow:c(N),htmlFlowData:S,htmlText:c(F),htmlTextData:S,image:c(L),label:R,labelText:O,lineEnding:I,link:c(_),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Q,resourceDestinationString:U,resourceTitleString:D,resource:P,setextHeading:c(k),setextHeadingLineSequence:C,setextHeadingText:x,strong:c(),thematicBreak:c()}};eoe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const a={stack:[r],tokenStack:[],config:t,enter:s,exit:l,buffer:i,resume:u,data:n},c=[];let A=-1;for(;++A<e.length;)if("listOrdered"===e[A][1].type||"listUnordered"===e[A][1].type)if("enter"===e[A][0])c.push(A);else{A=o(e,c.pop(),A)}for(A=-1;++A<e.length;){const n=t[e[A][0]];Zre.call(n,e[A][1].type)&&n[e[A][1].type].call(Object.assign({sliceSerialize:e[A][2].sliceSerialize},a),e[A][1])}if(a.tokenStack.length>0){const e=a.tokenStack[a.tokenStack.length-1];(e[1]||noe).call(a,void 0,e[0])}for(r.position={start:$re(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:$re(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},A=-1;++A<t.transforms.length;)r=t.transforms[A](r)||r;return r}function o(e,t,n){let r,o,a,i,s=t-1,c=-1,l=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?c++:c--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||i||c||a||(a=s),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!c&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===c&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let i=s;for(o=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;o&&(e[o][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",o=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}a&&(!o||a<o)&&(r._spread=!0),r.end=Object.assign({},o?e[o][1].start:t[1].end),e.splice(o||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const o={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=o,e.splice(s,0,["enter",o,t[2]]),s++,n++,a=void 0,i=!0}}}return e[t][1]._spread=l,n}function a(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:$re(t.start),end:void 0}}function c(e){return t;function t(t){e&&e.call(this,t),l.call(this,t)}}function l(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Mte({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||noe).call(this,e,r[0])}n.position.end=$re(e.end)}function u(){return une(this.stack.pop())}function A(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function d(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ire(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function C(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function B(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:$re(e.start),end:void 0},t.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=$re(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=$re(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(B.call(this,e),S.call(this,e))}function E(){this.data.atHardBreak=!0}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function F(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function _(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function L(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Xre,Yre)}(t),n.identifier=ire(t).toLowerCase()}function R(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function U(){const e=this.resume();this.stack[this.stack.length-1].url=e}function D(){const e=this.resume();this.stack[this.stack.length-1].title=e}function P(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function Q(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ire(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function H(e){this.data.characterReferenceType=e.type}function z(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=qre(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=wre(t)}const o=this.stack.pop();o.value+=r,o.position.end=$re(e.end)}function V(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function j(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function W(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function Y(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function J(){return{type:"html",value:""}}function $(){return{type:"image",title:null,url:"",alt:null}}function ee(){return{type:"link",title:null,url:"",children:[]}}function te(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ne(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function re(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function ie(){return{type:"thematicBreak"}}}(n)(function(e){for(;!fne(e););return e}(function(e){const t={defined:[],lazy:{},constructs:yne([E,...(e||{}).extensions||[]]),content:n(Une),document:n(Dne),flow:n(zne),string:n(jne),text:n(Wne)};return t;function n(e){return function(n){return Yne(t,e,n)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(o,a,i){const s=[];let c,l,u,A,h;for(o=n+("string"===typeof o?o.toString():new TextDecoder(a||void 0).decode(o)),u=0,n="",r&&(65279===o.charCodeAt(0)&&u++,r=void 0);u<o.length;){if(Gre.lastIndex=u,c=Gre.exec(o),A=c&&void 0!==c.index?c.index:o.length,h=o.charCodeAt(A),!c){n=o.slice(u);break}if(10===h&&u===A&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<A&&(s.push(o.slice(u,A)),t+=A-u),h){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=A+1}return i&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function $re(e){return{line:e.line,column:e.column,offset:e.offset}}function eoe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?eoe(e,r):toe(e,r)}}function toe(e,t){let n;for(n in t)if(Zre.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function noe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Mte({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Mte({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Mte({start:t.start,end:t.end})+") is still open")}function roe(e){const t=this;t.parser=function(n){return Jre(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const ooe="object"===typeof self?self:globalThis,aoe=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=o=>{if(e.has(o))return e.get(o);const[a,i]=t[o];switch(a){case 0:case-1:return n(i,o);case 1:{const e=n([],o);for(const t of i)e.push(r(t));return e}case 2:{const e=n({},o);for(const[t,n]of i)e[r(t)]=r(n);return e}case 3:return n(new Date(i),o);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),o)}case 5:{const e=n(new Map,o);for(const[t,n]of i)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,o);for(const t of i)e.add(r(t));return e}case 7:{const{name:e,message:t}=i;return n(new ooe[e](t),o)}case 8:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new ooe[a](i),o)};return r})(new Map,e)(0),ioe="",{toString:soe}={},{keys:coe}=Object,loe=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=soe.call(e).slice(8,-1);switch(n){case"Array":return[1,ioe];case"Object":return[2,ioe];case"Date":return[3,ioe];case"RegExp":return[4,ioe];case"Map":return[5,ioe];case"Set":return[6,ioe]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},uoe=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},Aoe=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const o=(e,t)=>{const o=r.push(e)-1;return n.set(t,o),o},a=r=>{if(n.has(r))return n.get(r);let[i,s]=loe(r);switch(i){case 0:{let t=r;switch(s){case"bigint":i=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return o([-1],r)}return o([i,t],r)}case 1:{if(s)return o([s,[...r]],r);const e=[],t=o([i,e],r);for(const n of r)e.push(a(n));return t}case 2:{if(s)switch(s){case"BigInt":return o([s,r.toString()],r);case"Boolean":case"Number":case"String":return o([s,r.valueOf()],r)}if(t&&"toJSON"in r)return a(r.toJSON());const n=[],c=o([i,n],r);for(const t of coe(r))!e&&uoe(loe(r[t]))||n.push([a(t),a(r[t])]);return c}case 3:return o([i,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return o([i,{source:e,flags:t}],r)}case 5:{const t=[],n=o([i,t],r);for(const[o,i]of r)(e||!uoe(loe(o))&&!uoe(loe(i)))&&t.push([a(o),a(i)]);return n}case 6:{const t=[],n=o([i,t],r);for(const o of r)!e&&uoe(loe(o))||t.push(a(o));return n}}const{message:c}=r;return o([i,{name:s,message:c}],r)};return a})(!(t||n),!!t,new Map,r)(e),r},hoe="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?aoe(Aoe(e,t)):structuredClone(e):(e,t)=>aoe(Aoe(e,t));function doe(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const a=e.charCodeAt(n);let i="";if(37===a&&Cne(e.charCodeAt(n+1))&&Cne(e.charCodeAt(n+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(i=String.fromCharCode(a));else if(a>55295&&a<57344){const t=e.charCodeAt(n+1);a<56320&&t>56319&&t<57344?(i=String.fromCharCode(a,t),o=1):i="\ufffd"}else i=String.fromCharCode(a);i&&(t.push(e.slice(r,n),encodeURIComponent(i)),r=n+o+1,i=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function poe(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function foe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const goe=function(e){if(null===e||void 0===e)return yoe;if("function"===typeof e)return moe(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=goe(e[n]);return moe(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return moe(n);function n(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}(e);if("string"===typeof e)return function(e){return moe(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function moe(e){return function(t,n,r){return Boolean(voe(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function yoe(){return!0}function voe(e){return null!==e&&"object"===typeof e&&"type"in e}const boe=[],woe=!0,xoe=!1,Coe="skip";function koe(e,t,n,r){let o;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):o=t;const a=goe(o),i=r?-1:1;!function e(o,s,c){const l=o&&"object"===typeof o?o:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(u,"name",{value:"node ("+o.type+(e?"<"+e+">":"")+")"})}return u;function u(){let l,u,A,h=boe;if((!t||a(o,s,c[c.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[woe,e];return null===e||void 0===e?boe:[e]}(n(o,c)),h[0]===xoe))return h;if("children"in o&&o.children){const t=o;if(t.children&&h[0]!==Coe)for(u=(r?t.children.length:-1)+i,A=c.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(l=e(n,u,A)(),l[0]===xoe)return l;u="number"===typeof l[1]?l[1]:u+i}}return h}}(e,void 0,[])()}function Boe(e,t,n,r){let o,a,i;"function"===typeof t&&"function"!==typeof n?(a=void 0,i=t,o=n):(a=t,i=n,o=r),koe(e,a,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return i(e,r,n)}),o)}function Soe(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),a=o[0];a&&"text"===a.type?a.value="["+a.value:o.unshift({type:"text",value:"["});const i=o[o.length-1];return i&&"text"===i.type?i.value+=r:o.push({type:"text",value:r}),o}function Ioe(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}const Eoe=9,Noe=32;function Foe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const a=[];for(;r;)a.push(Toe(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return a.push(Toe(t.slice(o),o>0,!1)),a.join("")}function Toe(e,t,n){let r=0,o=e.length;if(t){let t=e.codePointAt(r);for(;t===Eoe||t===Noe;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(o-1);for(;t===Eoe||t===Noe;)o--,t=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}const _oe={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=doe(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let i,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=a+1,s+=1,e.footnoteCounts.set(r,s);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Soe(e,t);const o={src:doe(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(o.title=r.title);const a={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,a),e.applyData(t,a)},image:function(e,t){const n={src:doe(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Soe(e,t);const o={href:doe(r.url||"")};null!==r.title&&void 0!==r.title&&(o.title=r.title);const a={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)},link:function(e,t){const n={href:doe(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),o=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Ioe(n[r])}return t}(n):Ioe(t),a={},i=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(o||0!==s||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||o?i.push(e):i.push(...e.children)}const c=r[r.length-1];c&&(o||"element"!==c.type||"p"!==c.tagName)&&i.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:a,children:i};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},r=e.all(t);let o=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++o<r.length;){const e=r[o];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),o.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Dte(t.children[1]),i=Ute(t.children[t.children.length-1]);a&&i&&(r.position={start:a,end:i}),o.push(r)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,o=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,i=a?a.length:t.children.length;let s=-1;const c=[];for(;++s<i;){const n=t.children[s],r={},i=a?a[s]:void 0;i&&(r.align=i);let l={type:"element",tagName:o,properties:r,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(n,l)),c.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:Foe(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Loe,yaml:Loe,definition:Loe,footnoteDefinition:Loe};function Loe(){}const Ooe={}.hasOwnProperty,Roe={};function Uoe(e,t){e.position&&(t.position=function(e){const t=Dte(e),n=Ute(e);if(t&&n)return{start:t,end:n}}(e))}function Doe(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&o&&Object.assign(n.properties,hoe(o)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Poe(e,t){const n=t.data||{},r=!("value"in t)||Ooe.call(n,"hProperties")||Ooe.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Moe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Qoe(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Hoe(e,t){const n=function(e,t){const n=t||Roe,r=new Map,o=new Map,a=new Map,i={..._oe,...n.handlers},s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const o=s.one(n[r],e);if(o){if(r&&"break"===n[r-1].type&&(Array.isArray(o)||"text"!==o.type||(o.value=Qoe(o.value)),!Array.isArray(o)&&"element"===o.type)){const e=o.children[0];e&&"text"===e.type&&(e.value=Qoe(e.value))}Array.isArray(o)?t.push(...o):t.push(o)}}}return t},applyData:Doe,definitionById:r,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,r=s.handlers[n];if(Ooe.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=hoe(n);return r.children=s.all(e),r}return hoe(e)}return(s.options.unknownHandler||Poe)(s,e,t)},options:n,patch:Uoe,wrap:Moe};return Boe(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:o,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),s}(e,t),r=n.one(e,void 0),o=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||poe,r=e.options.footnoteBackLabel||foe,o=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let c=-1;for(;++c<e.footnoteOrder.length;){const o=e.footnoteById.get(e.footnoteOrder[c]);if(!o)continue;const a=e.all(o),i=String(o.identifier).toUpperCase(),l=doe(i.toLowerCase());let u=0;const A=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++u<=h;){A.length>0&&A.push({type:"text",value:" "});let e="string"===typeof n?n:n(c,u);"string"===typeof e&&(e={type:"text",value:e}),A.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+l+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(c,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const d=a[a.length-1];if(d&&"element"===d.type&&"p"===d.tagName){const e=d.children[d.children.length-1];e&&"text"===e.type?e.value+=" ":d.children.push({type:"text",value:" "}),d.children.push(...A)}else a.push(...A);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+l},children:e.wrap(a,!0)};e.patch(o,p),s.push(p)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...hoe(i),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&a.children.push({type:"text",value:"\n"},o),a}function zoe(e,t){return e&&"run"in e?async function(n,r){const o=Hoe(n,{file:r,...t});await e.run(o,r)}:function(n,r){return Hoe(n,{file:r,...t||e})}}function Voe(e){if(e)throw e}var joe=n(1132);function Woe(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Koe(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=-1;const a=n.pop();if("function"!==typeof a)throw new TypeError("Expected function as last argument, not "+a);!function t(r){const i=e[++o];let s=-1;if(r)a(r);else{for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];for(;++s<n.length;)null!==l[s]&&void 0!==l[s]||(l[s]=n[s]);n=l,i?function(e,t){let n;return o;function o(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const c=e.length>o.length;let l;c&&o.push(a);try{l=e.apply(this,o)}catch(r){if(c&&n)throw r;return a(r)}c||(l instanceof Promise?l.then(i,a):l instanceof Error?a(l):i(l))}function a(e){if(!n){n=!0;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];t(e,...o)}}function i(e){a(null,e)}}(i,t)(...l):a(null,...l)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Goe={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');qoe(e);let n,r=0,o=-1,a=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else o<0&&(n=!0,o=a+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let i=-1,s=t.length-1;for(;a--;)if(47===e.codePointAt(a)){if(n){r=a+1;break}}else i<0&&(n=!0,i=a+1),s>-1&&(e.codePointAt(a)===t.codePointAt(s--)?s<0&&(o=a):(s=-1,o=i));r===o?o=i:o<0&&(o=e.length);return e.slice(r,o)},dirname:function(e){if(qoe(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){qoe(e);let t,n=e.length,r=-1,o=0,a=-1,i=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?a<0?a=n:1!==i&&(i=1):a>-1&&(i=-1);else if(t){o=n+1;break}}if(a<0||r<0||0===i||1===i&&a===r-1&&a===o+1)return"";return e.slice(a,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++t<r.length;)qoe(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){qoe(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,o="",a=0,i=-1,s=0,c=-1;for(;++c<=e.length;){if(c<e.length)n=e.codePointAt(c);else{if(47===n)break;n=47}if(47===n){if(i===c-1||1===s);else if(i!==c-1&&2===s){if(o.length<2||2!==a||46!==o.codePointAt(o.length-1)||46!==o.codePointAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",a=0):(o=o.slice(0,r),a=o.length-1-o.lastIndexOf("/")),i=c,s=0;continue}}else if(o.length>0){o="",a=0,i=c,s=0;continue}t&&(o=o.length>0?o+"/..":"..",a=2)}else o.length>0?o+="/"+e.slice(i+1,c):o=e.slice(i+1,c),a=c-i-1;i=c,s=0}else 46===n&&s>-1?s++:s=-1}return o}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function qoe(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Xoe={cwd:function(){return"/"}};function Yoe(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function Zoe(e){if("string"===typeof e)e=new URL(e);else if(!Yoe(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Joe=["history","path","basename","stem","extname","dirname"];class $oe{constructor(e){let t;t=e?Yoe(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd=Xoe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<Joe.length;){const e=Joe[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Joe.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?Goe.basename(this.path):void 0}set basename(e){tae(e,"basename"),eae(e,"basename"),this.path=Goe.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?Goe.dirname(this.path):void 0}set dirname(e){nae(this.basename,"dirname"),this.path=Goe.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?Goe.extname(this.path):void 0}set extname(e){if(eae(e,"extname"),nae(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Goe.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Yoe(e)&&(e=Zoe(e)),tae(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?Goe.basename(this.path,this.extname):void 0}set stem(e){tae(e,"stem"),eae(e,"stem"),this.path=Goe.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new Vte(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function eae(e,t){if(e&&e.includes(Goe.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Goe.sep+"`")}function tae(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function nae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const rae=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};Object.setPrototypeOf(r,t);const o=Object.getOwnPropertyNames(n);for(const a of o){const e=Object.getOwnPropertyDescriptor(n,a);e&&Object.defineProperty(r,a,e)}return r},oae={}.hasOwnProperty;class aae extends rae{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Koe()}copy(){const e=new aae;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(joe(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(lae("data",this.frozen),this.namespace[e]=t,this):oae.call(this.namespace,e)&&this.namespace[e]||void 0:e?(lae("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=hae(e),n=this.parser||this.Parser;return sae("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),sae("process",this.parser||this.Parser),cae("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,o){const a=hae(e),i=n.parse(a);function s(e,n){e||!n?o(e):r?r(n):t(void 0,n)}n.run(i,a,(function(e,t,r){if(e||!t||!r)return s(e);const o=t,a=n.stringify(o,r);var i;"string"===typeof(i=a)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?r.value=a:r.result=a,s(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),sae("processSync",this.parser||this.Parser),cae("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,Voe(e),t=r})),Aae("processSync","process",n),t}run(e,t,n){uae(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?o(void 0,n):new Promise(o);function o(o,a){const i=hae(t);r.run(e,i,(function(t,r,i){const s=r||e;t?a(t):o?o(s):n(void 0,s,i)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){Voe(e),n=t,r=!0})),Aae("runSync","run",r),n}stringify(e,t){this.freeze();const n=hae(t),r=this.compiler||this.Compiler;return cae("stringify",r),uae(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(lae("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];l(e,o)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?c(e):s(e)}return this;function i(e){if("function"===typeof e)l(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;l(t,n)}else s(e)}}function s(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(e.plugins),e.settings&&(n.settings=joe(!0,n.settings,e.settings))}function c(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){i(e[t])}}}function l(e,n){let r=-1,o=-1;for(;++r<t.length;)if(t[r][0]===e){o=r;break}if(-1===o)t.push([e,...n]);else if(n.length>0){let[r,...a]=n;const i=t[o][1];Woe(i)&&Woe(r)&&(r=joe(!0,i,r)),t[o]=[e,r,...a]}}}}const iae=(new aae).freeze();function sae(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function cae(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function lae(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function uae(e){if(!Woe(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Aae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function hae(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new $oe(e)}const dae=[],pae={allowDangerousHtml:!0},fae=/^(https?|ircs?|mailto|xmpp)$/i,gae=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function mae(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",o=e.className,a=e.components,i=e.disallowedElements,s=e.rehypePlugins||dae,c=e.remarkPlugins||dae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...pae}:pae,u=e.skipHtml,A=e.unwrapDisallowed,h=e.urlTransform||yae,d=iae().use(roe).use(c).use(zoe,l).use(s),p=new $oe;"string"===typeof r&&(p.value=r);for(const m of gae)Object.hasOwn(e,m.from)&&(m.from,m.to&&m.to,m.id);const f=d.parse(p);let g=d.runSync(f,p);return o&&(g={type:"element",tagName:"div",properties:{className:o},children:"root"===g.type?g.children:[g]}),Boe(g,(function(e,r,o){if("raw"===e.type&&o&&"number"===typeof r)return u?o.children.splice(r,1):o.children[r]={type:"text",value:e.value},r;if("element"===e.type){let t;for(t in cne)if(Object.hasOwn(cne,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=cne[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=h(String(n||""),t,e))}}if("element"===e.type){let a=t?!t.includes(e.tagName):!!i&&i.includes(e.tagName);if(!a&&n&&"number"===typeof r&&(a=!n(e,r,o)),a&&o&&"number"===typeof r)return A&&e.children?o.children.splice(r,1,...e.children):o.children.splice(r,1),r}})),Zte(g,{Fragment:ev.Fragment,components:a,ignoreInvalidStyle:!0,jsx:ev.jsx,jsxs:ev.jsxs,passKeys:!0,passNode:!0})}function yae(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return t<0||o>-1&&t>o||n>-1&&t>n||r>-1&&t>r||fae.test(e.slice(0,t))?e:""}function vae(){vae=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new F(r||[]);return o(i,"_invoke",{value:S(e,n,s)}),i}function A(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",g={};function m(){}function y(){}function v(){}var b={};l(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==n&&r.call(x,i)&&(b=x);var C=v.prototype=m.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(o,a,i,s){var c=A(e[o],e,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==(0,F6.Z)(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=h;return function(a,i){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=I(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=A(t,n,r);if("normal"===l.type){if(o=r.done?f:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=A(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,F6.Z)(t)+" is not iterable")}return y.prototype=v,o(C,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},k(B.prototype),l(B.prototype,s,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new B(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(C),l(C,c,"Generator"),l(C,i,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}var bae,wae=n(5861),xae=e6({},O),Cae=xae.version,kae=xae.render,Bae=xae.unmountComponentAtNode;try{Number((Cae||"").split(".")[0])>=18&&(bae=xae.createRoot)}catch(rbe){}function Sae(e){var t=xae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===(0,F6.Z)(t)&&(t.usingClientEntryPoint=e)}var Iae="__rc_react_root__";function Eae(e,t){bae?function(e,t){Sae(!0);var n=t[Iae]||bae(t);Sae(!1),n.render(e),t[Iae]=n}(e,t):function(e,t){kae(e,t)}(e,t)}function Nae(e){return Fae.apply(this,arguments)}function Fae(){return(Fae=(0,wae.Z)(vae().mark((function e(t){return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[Iae])||void 0===e||e.unmount(),delete t[Iae]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tae(e){Bae(e)}function _ae(e){return Lae.apply(this,arguments)}function Lae(){return(Lae=(0,wae.Z)(vae().mark((function e(t){return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===bae){e.next=2;break}return e.abrupt("return",Nae(t));case 2:Tae(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const Oae=(0,F.createContext)({});function Rae(){}const Uae=F.createContext({}),Dae=()=>{const e=()=>{};return e.deprecated=Rae,e},Pae=(0,F.createContext)(void 0);const Mae={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};const Qae={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},Hae={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},zae={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Qae),timePickerLocale:Object.assign({},Hae)},Vae="${label} is not a valid ${type}",jae={locale:"en",Pagination:Mae,DatePicker:zae,TimePicker:Hae,Calendar:zae,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Vae,method:Vae,array:Vae,object:Vae,number:Vae,date:Vae,boolean:Vae,integer:Vae,float:Vae,regexp:Vae,email:Vae,url:Vae,hex:Vae},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};let Wae=Object.assign({},jae.Modal),Kae=[];const Gae=()=>Kae.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),jae.Modal);function qae(){return Wae}const Xae=(0,F.createContext)(void 0);const Yae=e=>{const{locale:t={},children:n,_ANT_MARK__:r}=e;F.useEffect((()=>{const e=function(e){if(e){const t=Object.assign({},e);return Kae.push(t),Wae=Gae(),()=>{Kae=Kae.filter((e=>e!==t)),Wae=Gae()}}Wae=Object.assign({},jae.Modal)}(t&&t.Modal);return e}),[t]);const o=F.useMemo((()=>Object.assign(Object.assign({},t),{exist:!0})),[t]);return F.createElement(Xae.Provider,{value:o},n)},Zae="-ant-".concat(Date.now(),"-").concat(Math.random());function Jae(e,t){const n=function(e,t){const n={},r=(e,t)=>{let n=e.clone();return n=(null===t||void 0===t?void 0:t(n))||n,n.toRgbString()},o=(e,t)=>{const o=new q9(e),a=Q9(o.toRgbString());n["".concat(t,"-color")]=r(o),n["".concat(t,"-color-disabled")]=a[1],n["".concat(t,"-color-hover")]=a[4],n["".concat(t,"-color-active")]=a[6],n["".concat(t,"-color-outline")]=o.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=a[0],n["".concat(t,"-color-deprecated-border")]=a[2]};if(t.primaryColor){o(t.primaryColor,"primary");const e=new q9(t.primaryColor),a=Q9(e.toRgbString());a.forEach(((e,t)=>{n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(e,(e=>e.lighten(35))),n["primary-color-deprecated-l-20"]=r(e,(e=>e.lighten(20))),n["primary-color-deprecated-t-20"]=r(e,(e=>e.tint(20))),n["primary-color-deprecated-t-50"]=r(e,(e=>e.tint(50))),n["primary-color-deprecated-f-12"]=r(e,(e=>e.setAlpha(.12*e.getAlpha())));const i=new q9(a[0]);n["primary-color-active-deprecated-f-30"]=r(i,(e=>e.setAlpha(.3*e.getAlpha()))),n["primary-color-active-deprecated-d-02"]=r(i,(e=>e.darken(2)))}t.successColor&&o(t.successColor,"success"),t.warningColor&&o(t.warningColor,"warning"),t.errorColor&&o(t.errorColor,"error"),t.infoColor&&o(t.infoColor,"info");const a=Object.keys(n).map((t=>"--".concat(e,"-").concat(t,": ").concat(n[t],";")));return"\n  :root {\n    ".concat(a.join("\n"),"\n  }\n  ").trim()}(e,t);g6()&&E6(n,"".concat(Zae,"-dynamic-theme"))}const $ae=F.createContext(!1),eie=e=>{let{children:t,disabled:n}=e;const r=F.useContext($ae);return F.createElement($ae.Provider,{value:null!==n&&void 0!==n?n:r},t)},tie=$ae,nie=F.createContext(void 0),rie=e=>{let{children:t,size:n}=e;const r=F.useContext(nie);return F.createElement(nie.Provider,{value:n||r},t)},oie=nie;const aie=function(){return{componentDisabled:(0,F.useContext)(tie),componentSize:(0,F.useContext)(oie)}},iie=Object.assign({},T),{useId:sie}=iie,cie="undefined"===typeof sie?()=>"":sie;function lie(e){return function(e){return e instanceof HTMLElement||e instanceof SVGElement}(e)?e:e instanceof F.Component?L.findDOMNode(e):null}function uie(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Aie=["children"],hie=F.createContext({});function die(e){var t=e.children,n=uie(e,Aie);return F.createElement(hie.Provider,{value:n},t)}function pie(e){var t=mee();return function(){var n,r=yee(e);if(t){var o=yee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gee(this,n)}}const fie=function(e){bee(n,e);var t=pie(n);function n(){return M6(this,n),t.apply(this,arguments)}return z6(n,[{key:"render",value:function(){return this.props.children}}]),n}(F.Component);var gie="none",mie="appear",yie="enter",vie="leave",bie="none",wie="prepare",xie="start",Cie="active",kie="end",Bie="prepared";function Sie(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var Iie=function(e,t){var n={animationend:Sie("Animation","AnimationEnd"),transitionend:Sie("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(g6(),"undefined"!==typeof window?window:{}),Eie={};if(g6()){var Nie=document.createElement("div");Eie=Nie.style}var Fie={};function Tie(e){if(Fie[e])return Fie[e];var t=Iie[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var a=n[o];if(Object.prototype.hasOwnProperty.call(t,a)&&a in Eie)return Fie[e]=t[a],Fie[e]}return""}var _ie=Tie("animationend"),Lie=Tie("transitionend"),Oie=!(!_ie||!Lie),Rie=_ie||"animationend",Uie=Lie||"transitionend";function Die(e,t){if(!e)return null;if("object"===(0,F6.Z)(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}const Pie=function(e){var t=(0,F.useRef)(),n=(0,F.useRef)(e);n.current=e;var r=F.useCallback((function(e){n.current(e)}),[]);function o(e){e&&(e.removeEventListener(Uie,r),e.removeEventListener(Rie,r))}return F.useEffect((function(){return function(){o(t.current)}}),[]),[function(e){t.current&&t.current!==e&&o(t.current),e&&e!==t.current&&(e.addEventListener(Uie,r),e.addEventListener(Rie,r),t.current=e)},o]};const Mie=g6()?F.useLayoutEffect:F.useEffect;var Qie=function(e){return+setTimeout(e,16)},Hie=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Qie=function(e){return window.requestAnimationFrame(e)},Hie=function(e){return window.cancelAnimationFrame(e)});var zie=0,Vie=new Map;function jie(e){Vie.delete(e)}var Wie=function(e){var t=zie+=1;return function n(r){if(0===r)jie(t),e();else{var o=Qie((function(){n(r-1)}));Vie.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};Wie.cancel=function(e){var t=Vie.get(e);return jie(e),Hie(t)};const Kie=Wie;var Gie=[wie,xie,Cie,kie],qie=[wie,Bie],Xie=!1,Yie=!0;function Zie(e){return e===Cie||e===kie}const Jie=function(e,t,n){var r=h6(X7(bie),2),o=r[0],a=r[1],i=function(){var e=F.useRef(null);function t(){Kie.cancel(e.current)}return F.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=Kie((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):n(r,o-1)}));e.current=a},t]}(),s=h6(i,2),c=s[0],l=s[1];var u=t?qie:Gie;return Mie((function(){if(o!==bie&&o!==kie){var e=u.indexOf(o),t=u[e+1],r=n(o);r===Xie?a(t,!0):t&&c((function(e){function n(){e.isCanceled()||a(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),F.useEffect((function(){return function(){l()}}),[]),[function(){a(wie,!0)},o]};const $ie=function(e){var t=e;"object"===(0,F6.Z)(e)&&(t=e.transitionSupport);var n=F.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,a=e.removeOnLeave,i=void 0===a||a,s=e.forceRender,c=e.children,l=e.motionName,u=e.leavedClassName,A=e.eventProps,h=function(e,n){return!(!e.motionName||!t||!1===n)}(e,F.useContext(hie).motion),d=(0,F.useRef)(),p=(0,F.useRef)();var f=function(e,t,n,r){var o=r.motionEnter,a=void 0===o||o,i=r.motionAppear,s=void 0===i||i,c=r.motionLeave,l=void 0===c||c,u=r.motionDeadline,A=r.motionLeaveImmediately,h=r.onAppearPrepare,d=r.onEnterPrepare,p=r.onLeavePrepare,f=r.onAppearStart,g=r.onEnterStart,m=r.onLeaveStart,y=r.onAppearActive,v=r.onEnterActive,b=r.onLeaveActive,w=r.onAppearEnd,x=r.onEnterEnd,C=r.onLeaveEnd,k=r.onVisibleChanged,B=h6(X7(),2),S=B[0],I=B[1],E=h6(X7(gie),2),N=E[0],T=E[1],_=h6(X7(null),2),L=_[0],O=_[1],R=(0,F.useRef)(!1),U=(0,F.useRef)(null);function D(){return n()}var P=(0,F.useRef)(!1);function M(){T(gie,!0),O(null,!0)}function Q(e){var t=D();if(!e||e.deadline||e.target===t){var n,r=P.current;N===mie&&r?n=null===w||void 0===w?void 0:w(t,e):N===yie&&r?n=null===x||void 0===x?void 0:x(t,e):N===vie&&r&&(n=null===C||void 0===C?void 0:C(t,e)),N!==gie&&r&&!1!==n&&M()}}var H=h6(Pie(Q),1)[0],z=function(e){var t,n,r;switch(e){case mie:return t={},(0,J3.Z)(t,wie,h),(0,J3.Z)(t,xie,f),(0,J3.Z)(t,Cie,y),t;case yie:return n={},(0,J3.Z)(n,wie,d),(0,J3.Z)(n,xie,g),(0,J3.Z)(n,Cie,v),n;case vie:return r={},(0,J3.Z)(r,wie,p),(0,J3.Z)(r,xie,m),(0,J3.Z)(r,Cie,b),r;default:return{}}},V=F.useMemo((function(){return z(N)}),[N]),j=h6(Jie(N,!e,(function(e){if(e===wie){var t=V[wie];return t?t(D()):Xie}var n;return K in V&&O((null===(n=V[K])||void 0===n?void 0:n.call(V,D(),null))||null),K===Cie&&(H(D()),u>0&&(clearTimeout(U.current),U.current=setTimeout((function(){Q({deadline:!0})}),u))),K===Bie&&M(),Yie})),2),W=j[0],K=j[1],G=Zie(K);P.current=G,Mie((function(){I(t);var n,r=R.current;R.current=!0,!r&&t&&s&&(n=mie),r&&t&&a&&(n=yie),(r&&!t&&l||!r&&A&&!t&&l)&&(n=vie);var o=z(n);n&&(e||o[wie])?(T(n),W()):T(gie)}),[t]),(0,F.useEffect)((function(){(N===mie&&!s||N===yie&&!a||N===vie&&!l)&&T(gie)}),[s,a,l]),(0,F.useEffect)((function(){return function(){R.current=!1,clearTimeout(U.current)}}),[]);var q=F.useRef(!1);(0,F.useEffect)((function(){S&&(q.current=!0),void 0!==S&&N===gie&&((q.current||S)&&(null===k||void 0===k||k(S)),q.current=!0)}),[S,N]);var X=L;return V[wie]&&K===xie&&(X=e6({transition:"none"},X)),[N,K,X,null!==S&&void 0!==S?S:t]}(h,o,(function(){try{return d.current instanceof HTMLElement?d.current:lie(p.current)}catch(rbe){return null}}),e),g=h6(f,4),m=g[0],y=g[1],v=g[2],b=g[3],w=F.useRef(b);b&&(w.current=!0);var x,C=F.useCallback((function(e){d.current=e,Z7(n,e)}),[n]),k=e6(e6({},A),{},{visible:o});if(c)if(m===gie)x=b?c(e6({},k),C):!i&&w.current&&u?c(e6(e6({},k),{},{className:u}),C):s||!i&&!u?c(e6(e6({},k),{},{style:{display:"none"}}),C):null;else{var B,S;y===wie?S="prepare":Zie(y)?S="active":y===xie&&(S="start");var I=Die(l,"".concat(m,"-").concat(S));x=c(e6(e6({},k),{},{className:Z3()(Die(l,m),(B={},(0,J3.Z)(B,I,I&&S),(0,J3.Z)(B,l,"string"===typeof l),B)),style:v}),C)}else x=null;F.isValidElement(x)&&e9(x)&&(x.ref||(x=F.cloneElement(x,{ref:C})));return F.createElement(fie,{ref:p},x)}));return n.displayName="CSSMotion",n}(Oie);var ese="add",tse="keep",nse="remove",rse="removed";function ose(e){var t;return e6(e6({},t=e&&"object"===(0,F6.Z)(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function ase(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(ose)}var ise=["component","children","onVisibleChanged","onAllRemoved"],sse=["status"],cse=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$ie,n=function(e){bee(r,e);var n=pie(r);function r(){var e;M6(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),(0,J3.Z)(fee(e),"state",{keyEntities:[]}),(0,J3.Z)(fee(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:e6(e6({},e),{},{status:rse})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==rse})).length})),e}return z6(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,a=r.children,i=r.onVisibleChanged,s=r.onAllRemoved,c=uie(r,ise),l=o||F.Fragment,u={};return cse.forEach((function(e){u[e]=c[e],delete c[e]})),delete c.keys,F.createElement(l,c,n.map((function(n,r){var o=n.status,c=uie(n,sse),l=o===ese||o===tse;return F.createElement(t,O8({},u,{key:c.key,visible:l,eventProps:c,onVisibleChanged:function(t){(null===i||void 0===i||i(t,{key:c.key}),t)||0===e.removeKey(c.key)&&s&&s()}}),(function(e,t){return a(e6(e6({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=ase(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,a=ase(e),i=ase(t);a.forEach((function(e){for(var t=!1,a=r;a<o;a+=1){var s=i[a];if(s.key===e.key){r<a&&(n=n.concat(i.slice(r,a).map((function(e){return e6(e6({},e),{},{status:ese})}))),r=a),n.push(e6(e6({},s),{},{status:tse})),r+=1,t=!0;break}}t||n.push(e6(e6({},e),{},{status:nse}))})),r<o&&(n=n.concat(i.slice(r).map((function(e){return e6(e6({},e),{},{status:ese})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==nse}))).forEach((function(t){t.key===e&&(t.status=tse)}))})),n}(r,o);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==rse||e.status!==nse}))}}}]),r}(F.Component);(0,J3.Z)(n,"defaultProps",{component:"div"})}(Oie);const lse=$ie;function use(e){const{children:t}=e,[,n]=pee(),{motion:r}=n,o=F.useRef(!1);return o.current=o.current||!1===r,o.current?F.createElement(die,{motion:r},t):t}const Ase=()=>null;var hse=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const dse=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"];let pse,fse,gse,mse;function yse(){return pse||"ant"}function vse(){return fse||a6}const bse=()=>({getIconPrefixCls:vse,getRootPrefixCls:()=>pse||yse(),getTheme:()=>gse,holderRender:mse}),wse=e=>{const{children:t,csp:n,autoInsertSpaceInButton:r,alert:o,anchor:a,form:i,locale:s,componentSize:c,direction:l,space:u,virtual:A,dropdownMatchSelectWidth:h,popupMatchSelectWidth:d,popupOverflow:p,legacyLocale:f,parentContext:g,iconPrefixCls:m,theme:y,componentDisabled:v,segmented:b,statistic:w,spin:x,calendar:C,carousel:k,cascader:B,collapse:S,typography:I,checkbox:E,descriptions:N,divider:T,drawer:_,skeleton:L,steps:O,image:R,layout:U,list:D,mentions:P,modal:M,progress:Q,result:H,slider:z,breadcrumb:V,menu:j,pagination:W,input:K,empty:G,badge:q,radio:X,rate:Y,switch:Z,transfer:J,avatar:$,message:ee,tag:te,table:ne,card:re,tabs:oe,timeline:ae,timePicker:ie,upload:se,notification:ce,tree:le,colorPicker:ue,datePicker:Ae,rangePicker:he,flex:de,wave:pe,dropdown:fe,warning:ge}=e,me=F.useCallback(((t,n)=>{const{prefixCls:r}=e;if(n)return n;const o=r||g.getPrefixCls("");return t?"".concat(o,"-").concat(t):o}),[g.getPrefixCls,e.prefixCls]),ye=m||g.iconPrefixCls||a6,ve=n||g.csp;Lee(ye,ve);const be=function(e,t){Dae("ConfigProvider");const n=e||{},r=!1!==n.inherit&&t?t:ree,o=cie();return N6((()=>{var a,i;if(!e)return t;const s=Object.assign({},r.components);Object.keys(e.components||{}).forEach((t=>{s[t]=Object.assign(Object.assign({},s[t]),e.components[t])}));const c="css-var-".concat(o.replace(/:/g,"")),l=(null!==(a=n.cssVar)&&void 0!==a?a:r.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},"object"===typeof r.cssVar?r.cssVar:{}),"object"===typeof n.cssVar?n.cssVar:{}),{key:"object"===typeof n.cssVar&&(null===(i=n.cssVar)||void 0===i?void 0:i.key)||c});return Object.assign(Object.assign(Object.assign({},r),n),{token:Object.assign(Object.assign({},r.token),n.token),components:s,cssVar:l})}),[n,r],((e,t)=>e.some(((e,n)=>{const r=t[n];return!P6(e,r,!0)}))))}(y,g.theme);const we={csp:ve,autoInsertSpaceInButton:r,alert:o,anchor:a,locale:s||f,direction:l,space:u,virtual:A,popupMatchSelectWidth:null!==d&&void 0!==d?d:h,popupOverflow:p,getPrefixCls:me,iconPrefixCls:ye,theme:be,segmented:b,statistic:w,spin:x,calendar:C,carousel:k,cascader:B,collapse:S,typography:I,checkbox:E,descriptions:N,divider:T,drawer:_,skeleton:L,steps:O,image:R,input:K,layout:U,list:D,mentions:P,modal:M,progress:Q,result:H,slider:z,breadcrumb:V,menu:j,pagination:W,empty:G,badge:q,radio:X,rate:Y,switch:Z,transfer:J,avatar:$,message:ee,tag:te,table:ne,card:re,tabs:oe,timeline:ae,timePicker:ie,upload:se,notification:ce,tree:le,colorPicker:ue,datePicker:Ae,rangePicker:he,flex:de,wave:pe,dropdown:fe,warning:ge},xe=Object.assign({},g);Object.keys(we).forEach((e=>{void 0!==we[e]&&(xe[e]=we[e])})),dse.forEach((t=>{const n=e[t];n&&(xe[t]=n)}));const Ce=N6((()=>xe),xe,((e,t)=>{const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((n=>e[n]!==t[n]))})),ke=F.useMemo((()=>({prefixCls:ye,csp:ve})),[ye,ve]);let Be=F.createElement(F.Fragment,null,F.createElement(Ase,{dropdownMatchSelectWidth:h}),t);const Se=F.useMemo((()=>{var e,t,n,r;return i9((null===(e=jae.Form)||void 0===e?void 0:e.defaultValidateMessages)||{},(null===(n=null===(t=Ce.locale)||void 0===t?void 0:t.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===(r=Ce.form)||void 0===r?void 0:r.validateMessages)||{},(null===i||void 0===i?void 0:i.validateMessages)||{})}),[Ce,null===i||void 0===i?void 0:i.validateMessages]);Object.keys(Se).length>0&&(Be=F.createElement(Pae.Provider,{value:Se},Be)),s&&(Be=F.createElement(Yae,{locale:s,_ANT_MARK__:"internalMark"},Be)),(ye||ve)&&(Be=F.createElement(Oae.Provider,{value:ke},Be)),c&&(Be=F.createElement(rie,{size:c},Be)),Be=F.createElement(use,null,Be);const Ie=F.useMemo((()=>{const e=be||{},{algorithm:t,token:n,components:r,cssVar:o}=e,a=hse(e,["algorithm","token","components","cssVar"]),i=t&&(!Array.isArray(t)||t.length>0)?t8(t):nee,s={};Object.entries(r||{}).forEach((e=>{let[t,n]=e;const r=Object.assign({},n);"algorithm"in r&&(!0===r.algorithm?r.theme=i:(Array.isArray(r.algorithm)||"function"===typeof r.algorithm)&&(r.theme=t8(r.algorithm)),delete r.algorithm),s[t]=r}));const c=Object.assign(Object.assign({},G9),n);return Object.assign(Object.assign({},a),{theme:i,token:c,components:s,override:Object.assign({override:c},s),cssVar:o})}),[be]);return y&&(Be=F.createElement(oee.Provider,{value:Ie},Be)),Ce.warning&&(Be=F.createElement(Uae.Provider,{value:Ce.warning},Be)),void 0!==v&&(Be=F.createElement(eie,{disabled:v},Be)),F.createElement(i6.Provider,{value:Ce},Be)},xse=e=>{const t=F.useContext(i6),n=F.useContext(Xae);return F.createElement(wse,Object.assign({parentContext:t,legacyLocale:n},e))};xse.ConfigContext=i6,xse.SizeContext=oie,xse.config=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:o}=e;void 0!==t&&(pse=t),void 0!==n&&(fse=n),"holderRender"in e&&(mse=o),r&&(!function(e){return Object.keys(e).some((e=>e.endsWith("Color")))}(r)?gse=r:Jae(yse(),r))},xse.useConfig=aie,Object.defineProperty(xse,"SizeContext",{get:()=>oie});const Cse=xse;const kse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function Bse(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function Sse(e){return function(e){return Bse(e)instanceof ShadowRoot}(e)?Bse(e):null}function Ise(e){return"object"===(0,F6.Z)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===(0,F6.Z)(e.icon)||"function"===typeof e.icon)}function Ese(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}(n)]=r;return t}),{})}function Nse(e,t,n){return n?F.createElement(e.tag,e6(e6({key:t},Ese(e.attrs)),n),(e.children||[]).map((function(n,r){return Nse(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):F.createElement(e.tag,e6({key:t},Ese(e.attrs)),(e.children||[]).map((function(n,r){return Nse(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Fse(e){return Q9(e)[0]}function Tse(e){return e?Array.isArray(e)?e:[e]:[]}var _se=["icon","className","onClick","style","primaryColor","secondaryColor"],Lse={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Ose=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,a=e.primaryColor,i=e.secondaryColor,s=uie(e,_se),c=F.useRef(),l=Lse;if(a&&(l={primaryColor:a,secondaryColor:i||Fse(a)}),function(e){var t=(0,F.useContext)(Oae),n=t.csp,r=t.prefixCls,o="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";r&&(o=o.replace(/anticon/g,r)),(0,F.useEffect)((function(){var t=Sse(e.current);E6(o,"@ant-design-icons",{prepend:!0,csp:n,attachTo:t})}),[])}(c),function(e,t){D6(e,"[@ant-design/icons] ".concat(t))}(Ise(t),"icon should be icon definiton, but got ".concat(t)),!Ise(t))return null;var u=t;return u&&"function"===typeof u.icon&&(u=e6(e6({},u),{},{icon:u.icon(l.primaryColor,l.secondaryColor)})),Nse(u.icon,"svg-".concat(u.name),e6(e6({className:n,onClick:r,style:o,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:c}))};Ose.displayName="IconReact",Ose.getTwoToneColors=function(){return e6({},Lse)},Ose.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Lse.primaryColor=t,Lse.secondaryColor=n||Fse(t),Lse.calculated=!!n};const Rse=Ose;function Use(e){var t=h6(Tse(e),2),n=t[0],r=t[1];return Rse.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Dse=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Use(j9.primary);var Pse=F.forwardRef((function(e,t){var n,r=e.className,o=e.icon,a=e.spin,i=e.rotate,s=e.tabIndex,c=e.onClick,l=e.twoToneColor,u=uie(e,Dse),A=F.useContext(Oae),h=A.prefixCls,d=void 0===h?"anticon":h,p=A.rootClassName,f=Z3()(p,d,(n={},(0,J3.Z)(n,"".concat(d,"-").concat(o.name),!!o.name),(0,J3.Z)(n,"".concat(d,"-spin"),!!a||"loading"===o.name),n),r),g=s;void 0===g&&c&&(g=-1);var m=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,y=h6(Tse(l),2),v=y[0],b=y[1];return F.createElement("span",O8({role:"img","aria-label":o.name},u,{ref:t,tabIndex:g,onClick:c,className:f}),F.createElement(Rse,{icon:o,primaryColor:v,secondaryColor:b,style:m}))}));Pse.displayName="AntdIcon",Pse.getTwoToneColor=function(){var e=Rse.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Pse.setTwoToneColor=Use;const Mse=Pse;var Qse=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:kse}))};const Hse=F.forwardRef(Qse);const zse={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};var Vse=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:zse}))};const jse=F.forwardRef(Vse);const Wse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var Kse=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:Wse}))};const Gse=F.forwardRef(Kse);const qse={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};var Xse=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:qse}))};const Yse=F.forwardRef(Xse);const Zse=F.createContext(void 0),Jse=100,$se={Modal:Jse,Drawer:Jse,Popover:Jse,Popconfirm:Jse,Tooltip:Jse,Tour:Jse},ece={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function tce(e,t){const[,n]=pee(),r=F.useContext(Zse),o=function(e){return e in $se}(e);if(void 0!==t)return[t,t];let a=null!==r&&void 0!==r?r:0;return o?(a+=(r?0:n.zIndexPopupBase)+$se[e],a=Math.min(a,n.zIndexPopupBase+1e3)):a+=ece[e],[void 0===r?t:a,a]}const nce=(e,t,n)=>void 0!==n?n:"".concat(e,"-").concat(t),rce=(e,t)=>{const n=F.useContext(Xae),r=F.useMemo((()=>{var r;const o=t||jae[e],a=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:{};return Object.assign(Object.assign({},"function"===typeof o?o():o),a||{})}),[e,t,n]);return[r,F.useMemo((()=>{const e=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!e?jae.locale:e}),[n])]},oce=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(n,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:["box-shadow 0.3s ".concat(e.motionEaseInOut),"opacity 0.35s ".concat(e.motionEaseInOut)].join(",")}}}}},ace=Uee("Wave",(e=>[oce(e)]));function ice(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&function(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}const sce="ant-wave-target";function cce(e){return Number.isNaN(e)?0:e}const lce=e=>{const{className:t,target:n,component:r}=e,o=F.useRef(null),[a,i]=F.useState(null),[s,c]=F.useState([]),[l,u]=F.useState(0),[A,h]=F.useState(0),[d,p]=F.useState(0),[f,g]=F.useState(0),[m,y]=F.useState(!1),v={left:l,top:A,width:d,height:f,borderRadius:s.map((e=>"".concat(e,"px"))).join(" ")};function b(){const e=getComputedStyle(n);i(function(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return ice(t)?t:ice(n)?n:ice(r)?r:null}(n));const t="static"===e.position,{borderLeftWidth:r,borderTopWidth:o}=e;u(t?n.offsetLeft:cce(-parseFloat(r))),h(t?n.offsetTop:cce(-parseFloat(o))),p(n.offsetWidth),g(n.offsetHeight);const{borderTopLeftRadius:a,borderTopRightRadius:s,borderBottomLeftRadius:l,borderBottomRightRadius:A}=e;c([a,s,A,l].map((e=>cce(parseFloat(e)))))}if(a&&(v["--wave-color"]=a),F.useEffect((()=>{if(n){const e=Kie((()=>{b(),y(!0)}));let t;return"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(b),t.observe(n)),()=>{Kie.cancel(e),null===t||void 0===t||t.disconnect()}}}),[]),!m)return null;const w=("Checkbox"===r||"Radio"===r)&&(null===n||void 0===n?void 0:n.classList.contains(sce));return F.createElement(lse,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(e,t)=>{var n;if(t.deadline||"opacity"===t.propertyName){const e=null===(n=o.current)||void 0===n?void 0:n.parentElement;_ae(e).then((()=>{null===e||void 0===e||e.remove()}))}return!1}},(e=>{let{className:n}=e;return F.createElement("div",{ref:o,className:Z3()(t,{"wave-quick":w},n),style:v})}))},uce=(e,t)=>{var n;const{component:r}=t;if("Checkbox"===r&&!(null===(n=e.querySelector("input"))||void 0===n?void 0:n.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",null===e||void 0===e||e.insertBefore(o,null===e||void 0===e?void 0:e.firstChild),Eae(F.createElement(lce,Object.assign({},t,{target:e})),o)};const Ace=e=>{const{children:t,disabled:n,component:r}=e,{getPrefixCls:o}=(0,F.useContext)(i6),a=(0,F.useRef)(null),i=o("wave"),[,s]=ace(i),c=function(e,t,n){const{wave:r}=F.useContext(i6),[,o,a]=pee(),i=q7((i=>{const s=e.current;if((null===r||void 0===r?void 0:r.disabled)||!s)return;const c=s.querySelector(".".concat(sce))||s,{showEffect:l}=r||{};(l||uce)(c,{className:t,token:o,component:n,event:i,hashId:a})})),s=F.useRef();return e=>{Kie.cancel(s.current),s.current=Kie((()=>{i(e)}))}}(a,Z3()(i,s),r);if(F.useEffect((()=>{const e=a.current;if(!e||1!==e.nodeType||n)return;const t=t=>{!function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),a=o.width,i=o.height;if(a||i)return!0}}return!1}(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||c(t)};return e.addEventListener("click",t,!0),()=>{e.removeEventListener("click",t,!0)}}),[n]),!F.isValidElement(t))return null!==t&&void 0!==t?t:null;return o6(t,{ref:e9(t)?J7(t.ref,a):a})},hce=e=>{const t=F.useContext(oie);return F.useMemo((()=>e?"string"===typeof e?null!==e&&void 0!==e?e:t:e instanceof Function?e(t):t:t),[e,t])};function dce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return F.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(dce(e)):(0,Y7.isFragment)(e)&&e.props?n=n.concat(dce(e.props.children,t)):n.push(e))})),n}const pce=F.createContext(null),fce=e=>{let{children:t}=e;return F.createElement(pce.Provider,{value:null},t)};var gce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const mce=F.createContext(void 0),yce=e=>{const{getPrefixCls:t,direction:n}=F.useContext(i6),{prefixCls:r,size:o,className:a}=e,i=gce(e,["prefixCls","size","className"]),s=t("btn-group",r),[,,c]=pee();let l="";switch(o){case"large":l="lg";break;case"small":l="sm"}const u=Z3()(s,{["".concat(s,"-").concat(l)]:l,["".concat(s,"-rtl")]:"rtl"===n},a,c);return F.createElement(mce.Provider,{value:o},F.createElement("div",Object.assign({},i,{className:u})))},vce=/^[\u4e00-\u9fa5]{2}$/,bce=vce.test.bind(vce);function wce(e){return"danger"===e?{danger:!0}:{type:e}}function xce(e){return"string"===typeof e}function Cce(e){return"text"===e||"link"===e}function kce(e,t){if(null===e||void 0===e)return;const n=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&xce(e.type)&&bce(e.props.children)?o6(e,{children:e.props.children.split("").join(n)}):xce(e)?bce(e)?F.createElement("span",null,e.split("").join(n)):F.createElement("span",null,e):function(e){return e&&r6(e)&&e.type===F.Fragment}(e)?F.createElement("span",null,e):e}const Bce=(0,F.forwardRef)(((e,t)=>{const{className:n,style:r,children:o,prefixCls:a}=e,i=Z3()("".concat(a,"-icon"),n);return F.createElement("span",{ref:t,className:i,style:r},o)})),Sce=Bce;const Ice={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var Ece=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:Ice}))};const Nce=F.forwardRef(Ece),Fce=(0,F.forwardRef)(((e,t)=>{let{prefixCls:n,className:r,style:o,iconClassName:a}=e;const i=Z3()("".concat(n,"-loading-icon"),r);return F.createElement(Sce,{prefixCls:n,className:i,style:o,ref:t},F.createElement(Nce,{className:a}))})),Tce=()=>({width:0,opacity:0,transform:"scale(0)"}),_ce=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),Lce=e=>{const{prefixCls:t,loading:n,existIcon:r,className:o,style:a}=e,i=!!n;return r?F.createElement(Fce,{prefixCls:t,className:o,style:a}):F.createElement(lse,{visible:i,motionName:"".concat(t,"-loading-icon-motion"),motionLeave:i,removeOnLeave:!0,onAppearStart:Tce,onAppearActive:_ce,onEnterStart:Tce,onEnterActive:_ce,onLeaveStart:_ce,onLeaveActive:Tce},((e,n)=>{let{className:r,style:i}=e;return F.createElement(Fce,{prefixCls:t,className:o,style:Object.assign(Object.assign({},a),i),ref:n,iconClassName:r})}))},Oce=(e,t)=>({["> span, > ".concat(e)]:{"&:not(:last-child)":{["&, & > ".concat(e)]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{["&, & > ".concat(e)]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),Rce=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:o,colorErrorHover:a}=e;return{["".concat(t,"-group")]:[{position:"relative",display:"inline-flex",["> span, > ".concat(t)]:{"&:not(:last-child)":{["&, & > ".concat(t)]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),["&, & > ".concat(t)]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},["".concat(t,"-icon-only")]:{fontSize:n}},Oce("".concat(t,"-primary"),o),Oce("".concat(t,"-danger"),a)]}},Uce=e=>{const{paddingInline:t,onlyIconSize:n,paddingBlock:r}=e;return Nee(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:r,buttonIconOnlyFontSize:n})},Dce=e=>{var t,n,r,o,a,i;const s=null!==(t=e.contentFontSize)&&void 0!==t?t:e.fontSize,c=null!==(n=e.contentFontSizeSM)&&void 0!==n?n:e.fontSize,l=null!==(r=e.contentFontSizeLG)&&void 0!==r?r:e.fontSizeLG,u=null!==(o=e.contentLineHeight)&&void 0!==o?o:eee(s),A=null!==(a=e.contentLineHeightSM)&&void 0!==a?a:eee(c),h=null!==(i=e.contentLineHeightLG)&&void 0!==i?i:eee(l);return{fontWeight:400,defaultShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlTmpOutline),primaryShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlOutline),dangerShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.colorErrorOutline),primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,contentFontSize:s,contentFontSizeSM:c,contentFontSizeLG:l,contentLineHeight:u,contentLineHeightSM:A,contentLineHeightLG:h,paddingBlock:Math.max((e.controlHeight-s*u)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-c*A)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-l*h)/2-e.lineWidth,0)}},Pce=e=>{const{componentCls:t,iconCls:n,fontWeight:r}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:"".concat(h8(e.lineWidth)," ").concat(e.lineType," transparent"),cursor:"pointer",transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut),userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},["".concat(t,"-icon")]:{lineHeight:0},["> ".concat(n," + span, > span + ").concat(n)]:{marginInlineStart:e.marginXS},["&:not(".concat(t,"-icon-only) > ").concat(t,"-icon")]:{["&".concat(t,"-loading-icon, &:not(:last-child)")]:{marginInlineEnd:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},G7(e)),["&".concat(t,"-two-chinese-chars::first-letter")]:{letterSpacing:"0.34em"},["&".concat(t,"-two-chinese-chars > *:not(").concat(n,")")]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},["&-icon-only".concat(t,"-compact-item")]:{flex:"none"}}}},Mce=(e,t,n)=>({["&:not(:disabled):not(".concat(e,"-disabled)")]:{"&:hover":t,"&:active":n}}),Qce=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),Hce=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),zce=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),Vce=(e,t,n,r,o,a,i,s)=>({["&".concat(e,"-background-ghost")]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},Mce(e,Object.assign({background:t},i),Object.assign({background:t},s))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:a||void 0}})}),jce=e=>({["&:disabled, &".concat(e.componentCls,"-disabled")]:Object.assign({},zce(e))}),Wce=e=>Object.assign({},jce(e)),Kce=e=>({["&:disabled, &".concat(e.componentCls,"-disabled")]:{cursor:"not-allowed",color:e.colorTextDisabled}}),Gce=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wce(e)),{background:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),Mce(e.componentCls,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),Vce(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{["&".concat(e.componentCls,"-dangerous")]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Mce(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Vce(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),jce(e))}),qce=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wce(e)),{color:e.primaryColor,background:e.colorPrimary,boxShadow:e.primaryShadow}),Mce(e.componentCls,{color:e.colorTextLightSolid,background:e.colorPrimaryHover},{color:e.colorTextLightSolid,background:e.colorPrimaryActive})),Vce(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{["&".concat(e.componentCls,"-dangerous")]:Object.assign(Object.assign(Object.assign({background:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},Mce(e.componentCls,{background:e.colorErrorHover},{background:e.colorErrorActive})),Vce(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),jce(e))}),Xce=e=>Object.assign(Object.assign({},Gce(e)),{borderStyle:"dashed"}),Yce=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Mce(e.componentCls,{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),Kce(e)),{["&".concat(e.componentCls,"-dangerous")]:Object.assign(Object.assign({color:e.colorError},Mce(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),Kce(e))}),Zce=e=>Object.assign(Object.assign(Object.assign({},Mce(e.componentCls,{color:e.colorText,background:e.textHoverBg},{color:e.colorText,background:e.colorBgTextActive})),Kce(e)),{["&".concat(e.componentCls,"-dangerous")]:Object.assign(Object.assign({color:e.colorError},Kce(e)),Mce(e.componentCls,{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBg}))}),Jce=e=>{const{componentCls:t}=e;return{["".concat(t,"-default")]:Gce(e),["".concat(t,"-primary")]:qce(e),["".concat(t,"-dashed")]:Xce(e),["".concat(t,"-link")]:Yce(e),["".concat(t,"-text")]:Zce(e),["".concat(t,"-ghost")]:Vce(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},$ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:o,lineHeight:a,borderRadius:i,buttonPaddingHorizontal:s,iconCls:c,buttonPaddingVertical:l}=e,u="".concat(n,"-icon-only");return[{["".concat(n).concat(t)]:{fontSize:o,lineHeight:a,height:r,padding:"".concat(h8(l)," ").concat(h8(s)),borderRadius:i,["&".concat(u)]:{width:r,paddingInlineStart:0,paddingInlineEnd:0,["&".concat(n,"-round")]:{width:"auto"},[c]:{fontSize:e.buttonIconOnlyFontSize}},["&".concat(n,"-loading")]:{opacity:e.opacityLoading,cursor:"default"},["".concat(n,"-loading-icon")]:{transition:"width ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", opacity ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut)}}},{["".concat(n).concat(n,"-circle").concat(t)]:Qce(e)},{["".concat(n).concat(n,"-round").concat(t)]:Hce(e)}]},ele=e=>$ce(Nee(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight})),tle=e=>{const t=Nee(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return $ce(t,"".concat(e.componentCls,"-sm"))},nle=e=>{const t=Nee(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return $ce(t,"".concat(e.componentCls,"-lg"))},rle=e=>{const{componentCls:t}=e;return{[t]:{["&".concat(t,"-block")]:{width:"100%"}}}},ole=Pee("Button",(e=>{const t=Uce(e);return[Pce(t),tle(t),ele(t),nle(t),rle(t),Jce(t),Rce(t)]}),Dce,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function ale(e,t,n){const{focusElCls:r,focus:o,borderElCls:a}=n,i=a?"> *":"",s=["hover",o?"focus":null,"active"].filter(Boolean).map((e=>"&:".concat(e," ").concat(i))).join(",");return{["&-item:not(".concat(t,"-last-item)")]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{["&".concat(r)]:{zIndex:2}}:{}),{["&[disabled] ".concat(i)]:{zIndex:0}})}}function ile(e,t,n){const{borderElCls:r}=n,o=r?"> ".concat(r):"";return{["&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item) ").concat(o)]:{borderRadius:0},["&-item:not(".concat(t,"-last-item)").concat(t,"-first-item")]:{["& ".concat(o,", &").concat(e,"-sm ").concat(o,", &").concat(e,"-lg ").concat(o)]:{borderStartEndRadius:0,borderEndEndRadius:0}},["&-item:not(".concat(t,"-first-item)").concat(t,"-last-item")]:{["& ".concat(o,", &").concat(e,"-sm ").concat(o,", &").concat(e,"-lg ").concat(o)]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function sle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0};const{componentCls:n}=e,r="".concat(n,"-compact");return{[r]:Object.assign(Object.assign({},ale(e,r,t)),ile(n,r,t))}}function cle(e,t){return{["&-item:not(".concat(t,"-last-item)")]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function lle(e){const t="".concat(e.componentCls,"-compact-vertical");return{[t]:Object.assign(Object.assign({},cle(e,t)),(n=e.componentCls,r=t,{["&-item:not(".concat(r,"-first-item):not(").concat(r,"-last-item)")]:{borderRadius:0},["&-item".concat(r,"-first-item:not(").concat(r,"-last-item)")]:{["&, &".concat(n,"-sm, &").concat(n,"-lg")]:{borderEndEndRadius:0,borderEndStartRadius:0}},["&-item".concat(r,"-last-item:not(").concat(r,"-first-item)")]:{["&, &".concat(n,"-sm, &").concat(n,"-lg")]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var n,r}const ule=e=>{const{componentCls:t,calc:n}=e;return{[t]:{["&-compact-item".concat(t,"-primary")]:{["&:not([disabled]) + ".concat(t,"-compact-item").concat(t,"-primary:not([disabled])")]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:"calc(100% + ".concat(h8(e.lineWidth)," * 2)"),backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{["&".concat(t,"-primary")]:{["&:not([disabled]) + ".concat(t,"-compact-vertical-item").concat(t,"-primary:not([disabled])")]:{position:"relative","&:before":{position:"absolute",top:n(e.lineWidth).mul(-1).equal(),insetInlineStart:n(e.lineWidth).mul(-1).equal(),display:"inline-block",width:"calc(100% + ".concat(h8(e.lineWidth)," * 2)"),height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},Ale=Dee(["Button","compact"],(e=>{const t=Uce(e);return[sle(t),lle(t),ule(t)]}),Dce);var hle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const dle=(e,t)=>{var n,r;const{loading:o=!1,prefixCls:a,type:i="default",danger:s,shape:c="default",size:l,styles:u,disabled:A,className:h,rootClassName:d,children:p,icon:f,ghost:g=!1,block:m=!1,htmlType:y="button",classNames:v,style:b={}}=e,w=hle(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:x,autoInsertSpaceInButton:C,direction:k,button:B}=(0,F.useContext)(i6),S=x("btn",a),[I,E,N]=ole(S),T=(0,F.useContext)(tie),_=null!==A&&void 0!==A?A:T,L=(0,F.useContext)(mce),O=(0,F.useMemo)((()=>function(e){if("object"===typeof e&&e){let t=null===e||void 0===e?void 0:e.delay;return t=Number.isNaN(t)||"number"!==typeof t?0:t,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}(o)),[o]),[R,U]=(0,F.useState)(O.loading),[D,P]=(0,F.useState)(!1),M=J7(t,(0,F.createRef)()),Q=1===F.Children.count(p)&&!f&&!Cce(i);(0,F.useEffect)((()=>{let e=null;return O.delay>0?e=setTimeout((()=>{e=null,U(!0)}),O.delay):U(O.loading),function(){e&&(clearTimeout(e),e=null)}}),[O]),(0,F.useEffect)((()=>{if(!M||!M.current||!1===C)return;const e=M.current.textContent;Q&&bce(e)?D||P(!0):D&&P(!1)}),[M]);const H=t=>{const{onClick:n}=e;R||_?t.preventDefault():null===n||void 0===n||n(t)};const z=!1!==C,{compactSize:V,compactItemClassnames:j}=((e,t)=>{const n=F.useContext(pce),r=F.useMemo((()=>{if(!n)return"";const{compactDirection:r,isFirstItem:o,isLastItem:a}=n,i="vertical"===r?"-vertical-":"-";return Z3()("".concat(e,"-compact").concat(i,"item"),{["".concat(e,"-compact").concat(i,"first-item")]:o,["".concat(e,"-compact").concat(i,"last-item")]:a,["".concat(e,"-compact").concat(i,"item-rtl")]:"rtl"===t})}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}})(S,k),W={large:"lg",small:"sm",middle:void 0},K=hce((e=>{var t,n;return null!==(n=null!==(t=null!==l&&void 0!==l?l:V)&&void 0!==t?t:L)&&void 0!==n?n:e})),G=K&&W[K]||"",q=R?"loading":f,X=t6(w,["navigate"]),Y=Z3()(S,E,N,{["".concat(S,"-").concat(c)]:"default"!==c&&c,["".concat(S,"-").concat(i)]:i,["".concat(S,"-").concat(G)]:G,["".concat(S,"-icon-only")]:!p&&0!==p&&!!q,["".concat(S,"-background-ghost")]:g&&!Cce(i),["".concat(S,"-loading")]:R,["".concat(S,"-two-chinese-chars")]:D&&z&&!R,["".concat(S,"-block")]:m,["".concat(S,"-dangerous")]:!!s,["".concat(S,"-rtl")]:"rtl"===k},j,h,d,null===B||void 0===B?void 0:B.className),Z=Object.assign(Object.assign({},null===B||void 0===B?void 0:B.style),b),J=Z3()(null===v||void 0===v?void 0:v.icon,null===(n=null===B||void 0===B?void 0:B.classNames)||void 0===n?void 0:n.icon),$=Object.assign(Object.assign({},(null===u||void 0===u?void 0:u.icon)||{}),(null===(r=null===B||void 0===B?void 0:B.styles)||void 0===r?void 0:r.icon)||{}),ee=f&&!R?F.createElement(Sce,{prefixCls:S,className:J,style:$},f):F.createElement(Lce,{existIcon:!!f,prefixCls:S,loading:!!R}),te=p||0===p?function(e,t){let n=!1;const r=[];return F.Children.forEach(e,(e=>{const t=typeof e,o="string"===t||"number"===t;if(n&&o){const t=r.length-1,n=r[t];r[t]="".concat(n).concat(e)}else r.push(e);n=o})),F.Children.map(r,(e=>kce(e,t)))}(p,Q&&z):null;if(void 0!==X.href)return I(F.createElement("a",Object.assign({},X,{className:Z3()(Y,{["".concat(S,"-disabled")]:_}),href:_?void 0:X.href,style:Z,onClick:H,ref:M,tabIndex:_?-1:0}),ee,te));let ne=F.createElement("button",Object.assign({},w,{type:y,className:Y,style:Z,onClick:H,disabled:_,ref:M}),ee,te,j&&F.createElement(Ale,{key:"compact",prefixCls:S}));return Cce(i)||(ne=F.createElement(Ace,{component:"Button",disabled:!!R},ne)),I(ne)},ple=(0,F.forwardRef)(dle);ple.Group=yce,ple.__ANT_BUTTON=!0;const fle=ple;function gle(e){return!(!e||!e.then)}const mle=e=>{const{type:t,children:n,prefixCls:r,buttonProps:o,close:a,autoFocus:i,emitEvent:s,isSilent:c,quitOnNullishReturnValue:l,actionFn:u}=e,A=F.useRef(!1),h=F.useRef(null),[d,p]=X7(!1),f=function(){null===a||void 0===a||a.apply(void 0,arguments)};F.useEffect((()=>{let e=null;return i&&(e=setTimeout((()=>{var e;null===(e=h.current)||void 0===e||e.focus()}))),()=>{e&&clearTimeout(e)}}),[]);return F.createElement(fle,Object.assign({},wce(t),{onClick:e=>{if(A.current)return;if(A.current=!0,!u)return void f();let t;if(s){if(t=u(e),l&&!gle(t))return A.current=!1,void f(e)}else if(u.length)t=u(a),A.current=!1;else if(t=u(),!t)return void f();(e=>{gle(e)&&(p(!0),e.then((function(){p(!1,!0),f.apply(void 0,arguments),A.current=!1}),(e=>{if(p(!1,!0),A.current=!1,!(null===c||void 0===c?void 0:c()))return Promise.reject(e)})))})(t)},loading:d,prefixCls:r},o,{ref:h}),n)},yle=F.createContext({}),{Provider:vle}=yle,ble=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:r,mergedOkCancel:o,rootPrefixCls:a,close:i,onCancel:s,onConfirm:c}=(0,F.useContext)(yle);return o?F.createElement(mle,{isSilent:r,actionFn:s,close:function(){null===i||void 0===i||i.apply(void 0,arguments),null===c||void 0===c||c(!1)},autoFocus:"cancel"===e,buttonProps:t,prefixCls:"".concat(a,"-btn")},n):null},wle=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:r,rootPrefixCls:o,okTextLocale:a,okType:i,onConfirm:s,onOk:c}=(0,F.useContext)(yle);return F.createElement(mle,{isSilent:n,type:i||"primary",actionFn:c,close:function(){null===t||void 0===t||t.apply(void 0,arguments),null===s||void 0===s||s(!0)},autoFocus:"ok"===e,buttonProps:r,prefixCls:"".concat(o,"-btn")},a)};const xle={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var Cle=function(e,t){return F.createElement(Mse,O8({},e,{ref:t,icon:xle}))};const kle=F.forwardRef(Cle);const Ble=F.createContext(null);var Sle,Ile=[];function Ele(e){var t=e.match(/^(.*)px$/),n=Number(null===t||void 0===t?void 0:t[1]);return Number.isNaN(n)?function(e){if("undefined"===typeof document)return 0;if(e||void 0===Sle){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var a=t.offsetWidth;o===a&&(a=n.clientWidth),document.body.removeChild(n),Sle=o-a}return Sle}():n}var Nle="rc-util-locker-".concat(Date.now()),Fle=0;function Tle(e){var t=!!e,n=h6(F.useState((function(){return Fle+=1,"".concat(Nle,"_").concat(Fle)})),1)[0];v8((function(){if(t){var e=function(e){if("undefined"===typeof document||!e||!(e instanceof Element))return{width:0,height:0};var t=getComputedStyle(e,"::-webkit-scrollbar"),n=t.width,r=t.height;return{width:Ele(n),height:Ele(r)}}(document.body).width,r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;E6("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else I6(n);return function(){I6(n)}}),[t,n])}var _le=!1;var Lle=function(e){return!1!==e&&(g6()&&e?"string"===typeof e?document.querySelector(e):"function"===typeof e?e():e:null)},Ole=F.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer,a=(e.debug,e.autoDestroy),i=void 0===a||a,s=e.children,c=h6(F.useState(n),2),l=c[0],u=c[1],A=l||n;F.useEffect((function(){(i||n)&&u(n)}),[n,i]);var h=h6(F.useState((function(){return Lle(o)})),2),d=h[0],p=h[1];F.useEffect((function(){var e=Lle(o);p(null!==e&&void 0!==e?e:null)}));var f=function(e,t){var n=h6(F.useState((function(){return g6()?document.createElement("div"):null})),1)[0],r=F.useRef(!1),o=F.useContext(Ble),a=h6(F.useState(Ile),2),i=a[0],s=a[1],c=o||(r.current?void 0:function(e){s((function(t){return[e].concat(p6(t))}))});function l(){n.parentElement||document.body.appendChild(n),r.current=!0}function u(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return v8((function(){return e?o?o(l):l():u(),u}),[e]),v8((function(){i.length&&(i.forEach((function(e){return e()})),s(Ile))}),[i]),[n,c]}(A&&!d),g=h6(f,2),m=g[0],y=g[1],v=null!==d&&void 0!==d?d:m;Tle(r&&n&&g6()&&(v===m||v===document.body));var b=null;s&&e9(s)&&t&&(b=s.ref);var w=$7(b,t);if(!A||!g6()||void 0===d)return null;var x,C=!1===v||("boolean"===typeof x&&(_le=x),_le),k=s;return t&&(k=F.cloneElement(s,{ref:w})),F.createElement(Ble.Provider,{value:y},C?k:(0,L.createPortal)(k,v))}));const Rle=Ole;var Ule=F.createContext({});var Dle=0;var Ple=e6({},T).useId;const Mle=Ple?function(e){var t=Ple();return e||t}:function(e){var t=h6(F.useState("ssr-id"),2),n=t[0],r=t[1];return F.useEffect((function(){var e=Dle;Dle+=1,r("rc_unique_".concat(e))}),[]),e||n};var Qle={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Qle.F1&&t<=Qle.F12)return!1;switch(t){case Qle.ALT:case Qle.CAPS_LOCK:case Qle.CONTEXT_MENU:case Qle.CTRL:case Qle.DOWN:case Qle.END:case Qle.ESC:case Qle.HOME:case Qle.INSERT:case Qle.LEFT:case Qle.MAC_FF_META:case Qle.META:case Qle.NUMLOCK:case Qle.NUM_CENTER:case Qle.PAGE_DOWN:case Qle.PAGE_UP:case Qle.PAUSE:case Qle.PRINT_SCREEN:case Qle.RIGHT:case Qle.SHIFT:case Qle.UP:case Qle.WIN_KEY:case Qle.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Qle.ZERO&&e<=Qle.NINE)return!0;if(e>=Qle.NUM_ZERO&&e<=Qle.NUM_MULTIPLY)return!0;if(e>=Qle.A&&e<=Qle.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Qle.SPACE:case Qle.QUESTION_MARK:case Qle.NUM_PLUS:case Qle.NUM_MINUS:case Qle.NUM_PERIOD:case Qle.NUM_DIVISION:case Qle.SEMICOLON:case Qle.DASH:case Qle.EQUALS:case Qle.COMMA:case Qle.PERIOD:case Qle.SLASH:case Qle.APOSTROPHE:case Qle.SINGLE_QUOTE:case Qle.OPEN_SQUARE_BRACKET:case Qle.BACKSLASH:case Qle.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const Hle=Qle;var zle="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Vle="aria-",jle="data-";function Wle(e,t){return 0===e.indexOf(t)}function Kle(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function Gle(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var o=e.document;"number"!==typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}const qle=F.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var Xle={width:0,height:0,overflow:"hidden",outline:"none"},Yle=F.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,o=e.style,a=e.title,i=e.ariaId,s=e.footer,c=e.closable,l=e.closeIcon,u=e.onClose,A=e.children,h=e.bodyStyle,d=e.bodyProps,p=e.modalRender,f=e.onMouseDown,g=e.onMouseUp,m=e.holderRef,y=e.visible,v=e.forceRender,b=e.width,w=e.height,x=e.classNames,C=e.styles,k=$7(m,F.useContext(Ule).panel),B=(0,F.useRef)(),S=(0,F.useRef)();F.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=B.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===S.current?B.current.focus():e||t!==B.current||S.current.focus()}}}));var I,E,N,T={};void 0!==b&&(T.width=b),void 0!==w&&(T.height=w),s&&(I=F.createElement("div",{className:Z3()("".concat(n,"-footer"),null===x||void 0===x?void 0:x.footer),style:e6({},null===C||void 0===C?void 0:C.footer)},s)),a&&(E=F.createElement("div",{className:Z3()("".concat(n,"-header"),null===x||void 0===x?void 0:x.header),style:e6({},null===C||void 0===C?void 0:C.header)},F.createElement("div",{className:"".concat(n,"-title"),id:i},a))),c&&(N=F.createElement("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(n,"-close")},l||F.createElement("span",{className:"".concat(n,"-close-x")})));var _=F.createElement("div",{className:Z3()("".concat(n,"-content"),null===x||void 0===x?void 0:x.content),style:null===C||void 0===C?void 0:C.content},N,E,F.createElement("div",O8({className:Z3()("".concat(n,"-body"),null===x||void 0===x?void 0:x.body),style:e6(e6({},h),null===C||void 0===C?void 0:C.body)},d),A),I);return F.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":a?i:null,"aria-modal":"true",ref:k,style:e6(e6({},o),T),className:Z3()(n,r),onMouseDown:f,onMouseUp:g},F.createElement("div",{tabIndex:0,ref:B,style:Xle,"aria-hidden":"true"}),F.createElement(qle,{shouldUpdate:y||v},p?p(_):_),F.createElement("div",{tabIndex:0,ref:S,style:Xle,"aria-hidden":"true"}))}));const Zle=Yle;var Jle=F.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,o=e.style,a=e.className,i=e.visible,s=e.forceRender,c=e.destroyOnClose,l=e.motionName,u=e.ariaId,A=e.onVisibleChanged,h=e.mousePosition,d=(0,F.useRef)(),p=h6(F.useState(),2),f=p[0],g=p[1],m={};function y(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow;return n.left+=Gle(o),n.top+=Gle(o,!0),n}(d.current);g(h?"".concat(h.x-e.left,"px ").concat(h.y-e.top,"px"):"")}return f&&(m.transformOrigin=f),F.createElement(lse,{visible:i,onVisibleChanged:A,onAppearPrepare:y,onEnterPrepare:y,forceRender:s,motionName:l,removeOnLeave:c,ref:d},(function(i,s){var c=i.className,l=i.style;return F.createElement(Zle,O8({},e,{ref:t,title:r,ariaId:u,prefixCls:n,holderRef:s,style:e6(e6(e6({},l),o),m),className:Z3()(a,c)}))}))}));Jle.displayName="Content";const $le=Jle;function eue(e){var t=e.prefixCls,n=e.style,r=e.visible,o=e.maskProps,a=e.motionName,i=e.className;return F.createElement(lse,{key:"mask",visible:r,motionName:a,leavedClassName:"".concat(t,"-mask-hidden")},(function(e,r){var a=e.className,s=e.style;return F.createElement("div",O8({ref:r,style:e6(e6({},s),n),className:Z3()("".concat(t,"-mask"),a,i)},o))}))}function tue(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,r=e.zIndex,o=e.visible,a=void 0!==o&&o,i=e.keyboard,s=void 0===i||i,c=e.focusTriggerAfterClose,l=void 0===c||c,u=e.wrapStyle,A=e.wrapClassName,h=e.wrapProps,d=e.onClose,p=e.afterOpenChange,f=e.afterClose,g=e.transitionName,m=e.animation,y=e.closable,v=void 0===y||y,b=e.mask,w=void 0===b||b,x=e.maskTransitionName,C=e.maskAnimation,k=e.maskClosable,B=void 0===k||k,S=e.maskStyle,I=e.maskProps,E=e.rootClassName,N=e.classNames,T=e.styles;var _=(0,F.useRef)(),L=(0,F.useRef)(),O=(0,F.useRef)(),R=h6(F.useState(a),2),U=R[0],D=R[1],P=Mle();function M(e){null===d||void 0===d||d(e)}var Q=(0,F.useRef)(!1),H=(0,F.useRef)(),z=null;return B&&(z=function(e){Q.current?Q.current=!1:L.current===e.target&&M(e)}),(0,F.useEffect)((function(){a&&(D(!0),m6(L.current,document.activeElement)||(_.current=document.activeElement))}),[a]),(0,F.useEffect)((function(){return function(){clearTimeout(H.current)}}),[]),F.createElement("div",O8({className:Z3()("".concat(n,"-root"),E)},function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:e6({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Wle(n,Vle))||t.data&&Wle(n,jle)||t.attr&&zle.includes(n))&&(r[n]=e[n])})),r}(e,{data:!0})),F.createElement(eue,{prefixCls:n,visible:w&&a,motionName:Kle(n,x,C),style:e6(e6({zIndex:r},S),null===T||void 0===T?void 0:T.mask),maskProps:I,className:null===N||void 0===N?void 0:N.mask}),F.createElement("div",O8({tabIndex:-1,onKeyDown:function(e){if(s&&e.keyCode===Hle.ESC)return e.stopPropagation(),void M(e);a&&e.keyCode===Hle.TAB&&O.current.changeActive(!e.shiftKey)},className:Z3()("".concat(n,"-wrap"),A,null===N||void 0===N?void 0:N.wrapper),ref:L,onClick:z,style:e6(e6(e6({zIndex:r},u),null===T||void 0===T?void 0:T.wrapper),{},{display:U?null:"none"})},h),F.createElement($le,O8({},e,{onMouseDown:function(){clearTimeout(H.current),Q.current=!0},onMouseUp:function(){H.current=setTimeout((function(){Q.current=!1}))},ref:O,closable:v,ariaId:P,prefixCls:n,visible:a&&U,onClose:M,onVisibleChanged:function(e){if(e)!function(){var e;m6(L.current,document.activeElement)||null===(e=O.current)||void 0===e||e.focus()}();else{if(D(!1),w&&_.current&&l){try{_.current.focus({preventScroll:!0})}catch(rbe){}_.current=null}U&&(null===f||void 0===f||f())}null===p||void 0===p||p(e)},motionName:Kle(n,g,m)}))))}var nue=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,o=e.destroyOnClose,a=void 0!==o&&o,i=e.afterClose,s=e.panelRef,c=h6(F.useState(t),2),l=c[0],u=c[1],A=F.useMemo((function(){return{panel:s}}),[s]);return F.useEffect((function(){t&&u(!0)}),[t]),r||!a||l?F.createElement(Ule.Provider,{value:A},F.createElement(Rle,{open:t||r||l,autoDestroy:!1,getContainer:n,autoLock:t||l},F.createElement(tue,O8({},e,{destroyOnClose:a,afterClose:function(){null===i||void 0===i||i(),u(!1)}})))):null};nue.displayName="Dialog";const rue=nue;const oue=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.createElement(kle,null);if(!function(e,t,n){return"boolean"===typeof e?e:void 0===t?!!n:!1!==t&&null!==t}(e,t,arguments.length>4&&void 0!==arguments[4]&&arguments[4]))return[!1,null];const o="boolean"===typeof t||void 0===t||null===t?r:t;return[!0,n?n(o):o]};var aue="RC_FORM_INTERNAL_HOOKS",iue=function(){D6(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const sue=F.createContext({getFieldValue:iue,getFieldsValue:iue,getFieldError:iue,getFieldWarning:iue,getFieldsError:iue,isFieldsTouched:iue,isFieldTouched:iue,isFieldValidating:iue,isFieldsValidating:iue,resetFields:iue,setFields:iue,setFieldValue:iue,setFieldsValue:iue,validateFields:iue,submit:iue,getInternalHooks:function(){return iue(),{dispatch:iue,initEntityValue:iue,registerField:iue,useSubscribe:iue,setInitialValues:iue,destroyForm:iue,setCallbacks:iue,registerWatch:iue,getFields:iue,setValidateMessages:iue,setPreserve:iue,getInitialValue:iue}}});const cue=F.createContext(null);function lue(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function uue(){return uue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uue.apply(this,arguments)}function Aue(e){return Aue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Aue(e)}function hue(e,t){return hue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hue(e,t)}function due(e,t,n){return due=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(rbe){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&hue(o,n.prototype),o},due.apply(null,arguments)}function pue(e){var t="function"===typeof Map?new Map:void 0;return pue=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return due(e,arguments,Aue(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),hue(n,e)},pue(e)}var fue=/%[sdj%]/g;function gue(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function mue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var i=e.replace(fue,(function(e){if("%%"===e)return"%";if(o>=a)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(Jme){return"[Circular]"}break;default:return e}}));return i}return e}function yue(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function vue(e,t,n){var r=0,o=e.length;!function a(i){if(i&&i.length)n(i);else{var s=r;r+=1,s<o?t(e[s],a):n([])}}([])}var bue=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,hue(t,n),r}(pue(Error));function wue(e,t,n,r,o){if(t.first){var a=new Promise((function(t,a){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);vue(i,n,(function(e){return r(e),e.length?a(new bue(e,gue(e))):t(o)}))}));return a.catch((function(e){return e})),a}var i=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),c=s.length,l=0,u=[],A=new Promise((function(t,a){var A=function(e){if(u.push.apply(u,e),++l===c)return r(u),u.length?a(new bue(u,gue(u))):t(o)};s.length||(r(u),t(o)),s.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?vue(r,n,A):function(e,t,n){var r=[],o=0,a=e.length;function i(e){r.push.apply(r,e||[]),++o===a&&n(r)}e.forEach((function(e){t(e,i)}))}(r,n,A)}))}));return A.catch((function(e){return e})),A}function xue(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function Cue(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=uue({},e[n],r):e[n]=r}return e}var kue,Bue=function(e,t,n,r,o,a){!e.required||n.hasOwnProperty(e.field)&&!yue(t,a||e.type)||r.push(mue(o.messages.required,e.fullField))},Sue=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,Iue=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Eue={integer:function(e){return Eue.number(e)&&parseInt(e,10)===e},float:function(e){return Eue.number(e)&&!Eue.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(rbe){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!Eue.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(Sue)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(function(){if(kue)return kue;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+n+"$)|(?:^"+o+"$)"),i=new RegExp("^"+n+"$"),s=new RegExp("^"+o+"$"),c=function(e){return e&&e.exact?a:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+o+t(e)+")","g")};c.v4=function(e){return e&&e.exact?i:new RegExp(""+t(e)+n+t(e),"g")},c.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+o+t(e),"g")};var l=c.v4().source,u=c.v6().source;return kue=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+l+"|"+u+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"===typeof e&&!!e.match(Iue)}},Nue="enum",Fue={required:Bue,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(mue(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)Bue(e,t,n,r,o);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?Eue[a](t)||r.push(mue(o.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(mue(o.messages.types[a],e.fullField,e.type))}},range:function(e,t,n,r,o){var a="number"===typeof e.len,i="number"===typeof e.min,s="number"===typeof e.max,c=t,l=null,u="number"===typeof t,A="string"===typeof t,h=Array.isArray(t);if(u?l="number":A?l="string":h&&(l="array"),!l)return!1;h&&(c=t.length),A&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?c!==e.len&&r.push(mue(o.messages[l].len,e.fullField,e.len)):i&&!s&&c<e.min?r.push(mue(o.messages[l].min,e.fullField,e.min)):s&&!i&&c>e.max?r.push(mue(o.messages[l].max,e.fullField,e.max)):i&&s&&(c<e.min||c>e.max)&&r.push(mue(o.messages[l].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[Nue]=Array.isArray(e[Nue])?e[Nue]:[],-1===e[Nue].indexOf(t)&&r.push(mue(o.messages[Nue],e.fullField,e[Nue].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(mue(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(mue(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Tue=function(e,t,n,r,o){var a=e.type,i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t,a)&&!e.required)return n();Fue.required(e,t,r,i,o,a),yue(t,a)||Fue.type(e,t,r,i,o)}n(i)},_ue={string:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t,"string")&&!e.required)return n();Fue.required(e,t,r,a,o,"string"),yue(t,"string")||(Fue.type(e,t,r,a,o),Fue.range(e,t,r,a,o),Fue.pattern(e,t,r,a,o),!0===e.whitespace&&Fue.whitespace(e,t,r,a,o))}n(a)},method:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&Fue.type(e,t,r,a,o)}n(a)},number:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&(Fue.type(e,t,r,a,o),Fue.range(e,t,r,a,o))}n(a)},boolean:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&Fue.type(e,t,r,a,o)}n(a)},regexp:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),yue(t)||Fue.type(e,t,r,a,o)}n(a)},integer:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&(Fue.type(e,t,r,a,o),Fue.range(e,t,r,a,o))}n(a)},float:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&(Fue.type(e,t,r,a,o),Fue.range(e,t,r,a,o))}n(a)},array:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();Fue.required(e,t,r,a,o,"array"),void 0!==t&&null!==t&&(Fue.type(e,t,r,a,o),Fue.range(e,t,r,a,o))}n(a)},object:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&Fue.type(e,t,r,a,o)}n(a)},enum:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o),void 0!==t&&Fue.enum(e,t,r,a,o)}n(a)},pattern:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t,"string")&&!e.required)return n();Fue.required(e,t,r,a,o),yue(t,"string")||Fue.pattern(e,t,r,a,o)}n(a)},date:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t,"date")&&!e.required)return n();var i;if(Fue.required(e,t,r,a,o),!yue(t,"date"))i=t instanceof Date?t:new Date(t),Fue.type(e,i,r,a,o),i&&Fue.range(e,i.getTime(),r,a,o)}n(a)},url:Tue,hex:Tue,email:Tue,required:function(e,t,n,r,o){var a=[],i=Array.isArray(t)?"array":typeof t;Fue.required(e,t,r,a,o,i),n(a)},any:function(e,t,n,r,o){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(yue(t)&&!e.required)return n();Fue.required(e,t,r,a,o)}n(a)}};function Lue(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Oue=Lue(),Rue=function(){function e(e){this.rules=null,this._messages=Oue,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=Cue(Lue(),e)),this._messages},t.validate=function(t,n,r){var o=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var a=t,i=n,s=r;if("function"===typeof i&&(s=i,i={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,a),Promise.resolve(a);if(i.messages){var c=this.messages();c===Oue&&(c=Lue()),Cue(c,i.messages),i.messages=c}else i.messages=this.messages();var l={};(i.keys||Object.keys(this.rules)).forEach((function(e){var n=o.rules[e],r=a[e];n.forEach((function(n){var i=n;"function"===typeof i.transform&&(a===t&&(a=uue({},a)),r=a[e]=i.transform(r)),(i="function"===typeof i?{validator:i}:uue({},i)).validator=o.getValidationMethod(i),i.validator&&(i.field=e,i.fullField=i.fullField||e,i.type=o.getType(i),l[e]=l[e]||[],l[e].push({rule:i,value:r,source:a,field:e}))}))}));var u={};return wue(l,i,(function(t,n){var r,o=t.rule,s=("object"===o.type||"array"===o.type)&&("object"===typeof o.fields||"object"===typeof o.defaultField);function c(e,t){return uue({},t,{fullField:o.fullField+"."+e,fullFields:o.fullFields?[].concat(o.fullFields,[e]):[e]})}function l(r){void 0===r&&(r=[]);var l=Array.isArray(r)?r:[r];!i.suppressWarning&&l.length&&e.warning("async-validator:",l),l.length&&void 0!==o.message&&(l=[].concat(o.message));var A=l.map(xue(o,a));if(i.first&&A.length)return u[o.field]=1,n(A);if(s){if(o.required&&!t.value)return void 0!==o.message?A=[].concat(o.message).map(xue(o,a)):i.error&&(A=[i.error(o,mue(i.messages.required,o.field))]),n(A);var h={};o.defaultField&&Object.keys(t.value).map((function(e){h[e]=o.defaultField})),h=uue({},h,t.rule.fields);var d={};Object.keys(h).forEach((function(e){var t=h[e],n=Array.isArray(t)?t:[t];d[e]=n.map(c.bind(null,e))}));var p=new e(d);p.messages(i.messages),t.rule.options&&(t.rule.options.messages=i.messages,t.rule.options.error=i.error),p.validate(t.value,t.rule.options||i,(function(e){var t=[];A&&A.length&&t.push.apply(t,A),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(A)}if(s=s&&(o.required||!o.required&&t.value),o.field=t.field,o.asyncValidator)r=o.asyncValidator(o,t.value,l,t.source,i);else if(o.validator){try{r=o.validator(o,t.value,l,t.source,i)}catch(A){null==console.error||console.error(A),i.suppressValidatorError||setTimeout((function(){throw A}),0),l(A.message)}!0===r?l():!1===r?l("function"===typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):r instanceof Array?l(r):r instanceof Error&&l(r.message)}r&&r.then&&r.then((function(){return l()}),(function(e){return l(e)}))}),(function(e){!function(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var o=0;o<e.length;o++)r(e[o]);t.length?(n=gue(t),s(t,n)):s(null,a)}(e)}),a)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!_ue.hasOwnProperty(e.type))throw new Error(mue("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?_ue.required:_ue[this.getType(e)]||void 0},e}();Rue.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");_ue[e]=t},Rue.warning=function(){},Rue.messages=Oue,Rue.validators=_ue;var Uue="'${name}' is not a valid ${type}",Due={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Uue,method:Uue,array:Uue,object:Uue,number:Uue,date:Uue,boolean:Uue,integer:Uue,float:Uue,regexp:Uue,email:Uue,url:Uue,hex:Uue},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Pue=Rue;function Mue(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var Que="CODE_LOGIC_ERROR";function Hue(e,t,n,r,o){return zue.apply(this,arguments)}function zue(){return zue=(0,wae.Z)(vae().mark((function e(t,n,r,o,a){var i,s,c,l,u,A,h,d,p;return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(i=e6({},r)).ruleIndex,Pue.warning=function(){},i.validator&&(s=i.validator,i.validator=function(){try{return s.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(Que)}}),c=null,i&&"array"===i.type&&i.defaultField&&(c=i.defaultField,delete i.defaultField),l=new Pue((0,J3.Z)({},t,[i])),u=i9(Due,o.validateMessages),l.messages(u),A=[],e.prev=10,e.next=13,Promise.resolve(l.validate((0,J3.Z)({},t,n),e6({},o)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),e.t0.errors&&(A=e.t0.errors.map((function(e,t){var n=e.message,r=n===Que?u.default:n;return F.isValidElement(r)?F.cloneElement(r,{key:"error_".concat(t)}):r})));case 18:if(A.length||!c){e.next=23;break}return e.next=21,Promise.all(n.map((function(e,n){return Hue("".concat(t,".").concat(n),e,c,o,a)})));case 21:return h=e.sent,e.abrupt("return",h.reduce((function(e,t){return[].concat(p6(e),p6(t))}),[]));case 23:return d=e6(e6({},r),{},{name:t,enum:(r.enum||[]).join(", ")},a),p=A.map((function(e){return"string"===typeof e?Mue(e,d):e})),e.abrupt("return",p);case 26:case"end":return e.stop()}}),e,null,[[10,15]])}))),zue.apply(this,arguments)}function Vue(e,t,n,r,o,a){var i,s=e.join("."),c=n.map((function(e,t){var n=e.validator,r=e6(e6({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var o=!1,a=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){D6(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));o=a&&"function"===typeof a.then&&"function"===typeof a.catch,D6(o,"`callback` is deprecated. Please return a promise instead."),o&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,o=t.warningOnly,a=t.ruleIndex;return!!n===!!o?r-a:n?1:-1}));if(!0===o)i=new Promise(function(){var e=(0,wae.Z)(vae().mark((function e(n,o){var i,l,u;return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<c.length)){e.next=12;break}return l=c[i],e.next=5,Hue(s,t,l,r,a);case 5:if(!(u=e.sent).length){e.next=9;break}return o([{errors:u,rule:l}]),e.abrupt("return");case 9:i+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var l=c.map((function(e){return Hue(s,t,e,r,a).then((function(t){return{errors:t,rule:e}}))}));i=(o?function(e){return Wue.apply(this,arguments)}(l):function(e){return jue.apply(this,arguments)}(l)).then((function(e){return Promise.reject(e)}))}return i.catch((function(e){return e})),i}function jue(){return(jue=(0,wae.Z)(vae().mark((function e(t){return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,p6(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wue(){return Wue=(0,wae.Z)(vae().mark((function e(t){var n;return vae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),Wue.apply(this,arguments)}function Kue(e){return lue(e)}function Gue(e,t){var n={};return t.forEach((function(t){var r=t9(e,t);n=r9(n,t,r)})),n}function que(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&e.some((function(e){return Xue(t,e,n)}))}function Xue(e,t){return!(!e||!t)&&(!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&e.length!==t.length)&&t.every((function(t,n){return e[n]===t})))}function Yue(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===(0,F6.Z)(t.target)&&e in t.target?t.target[e]:t}function Zue(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],a=t-n;return a>0?[].concat(p6(e.slice(0,n)),[o],p6(e.slice(n,t)),p6(e.slice(t+1,r))):a<0?[].concat(p6(e.slice(0,t)),p6(e.slice(t+1,n+1)),[o],p6(e.slice(n+1,r))):e}var Jue=["name"],$ue=[];function eAe(e,t,n,r,o,a){return"function"===typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==o}var tAe=function(e){bee(n,e);var t=pie(n);function n(e){var r;(M6(this,n),r=t.call(this,e),(0,J3.Z)(fee(r),"state",{resetCount:0}),(0,J3.Z)(fee(r),"cancelRegisterFunc",null),(0,J3.Z)(fee(r),"mounted",!1),(0,J3.Z)(fee(r),"touched",!1),(0,J3.Z)(fee(r),"dirty",!1),(0,J3.Z)(fee(r),"validatePromise",void 0),(0,J3.Z)(fee(r),"prevValidating",void 0),(0,J3.Z)(fee(r),"errors",$ue),(0,J3.Z)(fee(r),"warnings",$ue),(0,J3.Z)(fee(r),"cancelRegister",(function(){var e=r.props,t=e.preserve,n=e.isListField,o=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,Kue(o)),r.cancelRegisterFunc=null})),(0,J3.Z)(fee(r),"getNamePath",(function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(p6(void 0===n?[]:n),p6(t)):[]})),(0,J3.Z)(fee(r),"getRules",(function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,o=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(o):e}))})),(0,J3.Z)(fee(r),"refresh",(function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))})),(0,J3.Z)(fee(r),"metaCache",null),(0,J3.Z)(fee(r),"triggerMetaEvent",(function(e){var t=r.props.onMetaChange;if(t){var n=e6(e6({},r.getMeta()),{},{destroy:e});P6(r.metaCache,n)||t(n),r.metaCache=n}else r.metaCache=null})),(0,J3.Z)(fee(r),"onStoreChange",(function(e,t,n){var o=r.props,a=o.shouldUpdate,i=o.dependencies,s=void 0===i?[]:i,c=o.onReset,l=n.store,u=r.getNamePath(),A=r.getValue(e),h=r.getValue(l),d=t&&que(t,u);switch("valueUpdate"===n.type&&"external"===n.source&&A!==h&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=$ue,r.warnings=$ue,r.triggerMetaEvent()),n.type){case"reset":if(!t||d)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=$ue,r.warnings=$ue,r.triggerMetaEvent(),null===c||void 0===c||c(),void r.refresh();break;case"remove":if(a)return void r.reRender();break;case"setField":var p=n.data;if(d)return"touched"in p&&(r.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(r.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(r.errors=p.errors||$ue),"warnings"in p&&(r.warnings=p.warnings||$ue),r.dirty=!0,r.triggerMetaEvent(),void r.reRender();if("value"in p&&que(t,u,!0))return void r.reRender();if(a&&!u.length&&eAe(a,e,l,A,h,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Kue).some((function(e){return que(n.relatedFields,e)})))return void r.reRender();break;default:if(d||(!s.length||u.length||a)&&eAe(a,e,l,A,h,n))return void r.reRender()}!0===a&&r.reRender()})),(0,J3.Z)(fee(r),"validateRules",(function(e){var t=r.getNamePath(),n=r.getValue(),o=e||{},a=o.triggerName,i=o.validateOnly,s=void 0!==i&&i,c=Promise.resolve().then((0,wae.Z)(vae().mark((function o(){var i,s,l,u,A,h,d;return vae().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.mounted){o.next=2;break}return o.abrupt("return",[]);case 2:if(i=r.props,s=i.validateFirst,l=void 0!==s&&s,u=i.messageVariables,A=i.validateDebounce,h=r.getRules(),a&&(h=h.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||lue(t).includes(a)}))),!A||!a){o.next=10;break}return o.next=8,new Promise((function(e){setTimeout(e,A)}));case 8:if(r.validatePromise===c){o.next=10;break}return o.abrupt("return",[]);case 10:return(d=Vue(t,n,h,e,l,u)).catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$ue;if(r.validatePromise===c){var t;r.validatePromise=null;var n=[],o=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,a=void 0===r?$ue:r;t?o.push.apply(o,p6(a)):n.push.apply(n,p6(a))})),r.errors=n,r.warnings=o,r.triggerMetaEvent(),r.reRender()}})),o.abrupt("return",d);case 13:case"end":return o.stop()}}),o)}))));return s||(r.validatePromise=c,r.dirty=!0,r.errors=$ue,r.warnings=$ue,r.triggerMetaEvent(),r.reRender()),c})),(0,J3.Z)(fee(r),"isFieldValidating",(function(){return!!r.validatePromise})),(0,J3.Z)(fee(r),"isFieldTouched",(function(){return r.touched})),(0,J3.Z)(fee(r),"isFieldDirty",(function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(aue).getInitialValue)(r.getNamePath())})),(0,J3.Z)(fee(r),"getErrors",(function(){return r.errors})),(0,J3.Z)(fee(r),"getWarnings",(function(){return r.warnings})),(0,J3.Z)(fee(r),"isListField",(function(){return r.props.isListField})),(0,J3.Z)(fee(r),"isList",(function(){return r.props.isList})),(0,J3.Z)(fee(r),"isPreserve",(function(){return r.props.preserve})),(0,J3.Z)(fee(r),"getMeta",(function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}})),(0,J3.Z)(fee(r),"getOnlyChild",(function(e){if("function"===typeof e){var t=r.getMeta();return e6(e6({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=dce(e);return 1===n.length&&F.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}})),(0,J3.Z)(fee(r),"getValue",(function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return t9(e||t(!0),n)})),(0,J3.Z)(fee(r),"getControlled",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,o=t.validateTrigger,a=t.getValueFromEvent,i=t.normalize,s=t.valuePropName,c=t.getValueProps,l=t.fieldContext,u=void 0!==o?o:l.validateTrigger,A=r.getNamePath(),h=l.getInternalHooks,d=l.getFieldsValue,p=h(aue).dispatch,f=r.getValue(),g=c||function(e){return(0,J3.Z)({},s,e)},m=e[n],y=e6(e6({},e),g(f));return y[n]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=a?a.apply(void 0,n):Yue.apply(void 0,[s].concat(n)),i&&(e=i(e,f,d(!0))),p({type:"updateValue",namePath:A,value:e}),m&&m.apply(void 0,n)},lue(u||[]).forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&p({type:"validateField",namePath:A,triggerName:e})}})),y})),e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(aue).initEntityValue)(fee(r));return r}return z6(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(aue).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child;return r.isFunction?e=o:F.isValidElement(o)?e=F.cloneElement(o,this.getControlled(o.props)):(D6(!o,"`children` of Field is not validate ReactElement."),e=o),F.createElement(F.Fragment,{key:t},e)}}]),n}(F.Component);(0,J3.Z)(tAe,"contextType",sue),(0,J3.Z)(tAe,"defaultProps",{trigger:"onChange",valuePropName:"value"});const nAe=function(e){var t=e.name,n=uie(e,Jue),r=F.useContext(sue),o=F.useContext(cue),a=void 0!==t?Kue(t):void 0,i="keep";return n.isListField||(i="_".concat((a||[]).join("_"))),F.createElement(tAe,O8({key:i,name:a,isListField:!!o},n,{fieldContext:r}))};const rAe=function(e){var t=e.name,n=e.initialValue,r=e.children,o=e.rules,a=e.validateTrigger,i=e.isListField,s=F.useContext(sue),c=F.useContext(cue),l=F.useRef({keys:[],id:0}).current,u=F.useMemo((function(){var e=Kue(s.prefixName)||[];return[].concat(p6(e),p6(Kue(t)))}),[s.prefixName,t]),A=F.useMemo((function(){return e6(e6({},s),{},{prefixName:u})}),[s,u]),h=F.useMemo((function(){return{getKey:function(e){var t=u.length,n=e[t];return[l.keys[n],e.slice(t+1)]}}}),[u]);return"function"!==typeof r?(D6(!1,"Form.List only accepts function as children."),null):F.createElement(cue.Provider,{value:h},F.createElement(sue.Provider,{value:A},F.createElement(nAe,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:a,initialValue:n,isList:!0,isListField:null!==i&&void 0!==i?i:!!c},(function(e,t){var n=e.value,o=void 0===n?[]:n,a=e.onChange,i=s.getFieldValue,c=function(){return i(u||[])||[]},A={add:function(e,t){var n=c();t>=0&&t<=n.length?(l.keys=[].concat(p6(l.keys.slice(0,t)),[l.id],p6(l.keys.slice(t))),a([].concat(p6(n.slice(0,t)),[e],p6(n.slice(t))))):(l.keys=[].concat(p6(l.keys),[l.id]),a([].concat(p6(n),[e]))),l.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(l.keys=l.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(l.keys=Zue(l.keys,e,t),a(Zue(n,e,t)))}}},h=o||[];return Array.isArray(h)||(h=[]),r(h.map((function(e,t){var n=l.keys[t];return void 0===n&&(l.keys[t]=l.id,n=l.keys[t],l.id+=1),{name:t,key:n,isListField:!0}})),A,t)}))))};var oAe="__@field_split__";function aAe(e){return e.map((function(e){return"".concat((0,F6.Z)(e),":").concat(e)})).join(oAe)}var iAe=function(){function e(){M6(this,e),(0,J3.Z)(this,"kvs",new Map)}return z6(e,[{key:"set",value:function(e,t){this.kvs.set(aAe(e),t)}},{key:"get",value:function(e){return this.kvs.get(aAe(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(aAe(e))}},{key:"map",value:function(e){return p6(this.kvs.entries()).map((function(t){var n=h6(t,2),r=n[0],o=n[1],a=r.split(oAe);return e({key:a.map((function(e){var t=h6(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}();const sAe=iAe;var cAe=["name"],lAe=z6((function e(t){var n=this;M6(this,e),(0,J3.Z)(this,"formHooked",!1),(0,J3.Z)(this,"forceRootUpdate",void 0),(0,J3.Z)(this,"subscribable",!0),(0,J3.Z)(this,"store",{}),(0,J3.Z)(this,"fieldEntities",[]),(0,J3.Z)(this,"initialValues",{}),(0,J3.Z)(this,"callbacks",{}),(0,J3.Z)(this,"validateMessages",null),(0,J3.Z)(this,"preserve",null),(0,J3.Z)(this,"lastValidatePromise",null),(0,J3.Z)(this,"getForm",(function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}})),(0,J3.Z)(this,"getInternalHooks",(function(e){return e===aue?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(D6(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),(0,J3.Z)(this,"useSubscribe",(function(e){n.subscribable=e})),(0,J3.Z)(this,"prevWithoutPreserves",null),(0,J3.Z)(this,"setInitialValues",(function(e,t){if(n.initialValues=e||{},t){var r,o=i9(e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;o=r9(o,n,t9(e,n))})),n.prevWithoutPreserves=null,n.updateStore(o)}})),(0,J3.Z)(this,"destroyForm",(function(){var e=new sAe;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e})),(0,J3.Z)(this,"getInitialValue",(function(e){var t=t9(n.initialValues,e);return e.length?i9(t):t})),(0,J3.Z)(this,"setCallbacks",(function(e){n.callbacks=e})),(0,J3.Z)(this,"setValidateMessages",(function(e){n.validateMessages=e})),(0,J3.Z)(this,"setPreserve",(function(e){n.preserve=e})),(0,J3.Z)(this,"watchList",[]),(0,J3.Z)(this,"registerWatch",(function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}})),(0,J3.Z)(this,"notifyWatch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(t,r,e)}))}})),(0,J3.Z)(this,"timeoutId",null),(0,J3.Z)(this,"warningUnhooked",(function(){0})),(0,J3.Z)(this,"updateStore",(function(e){n.store=e})),(0,J3.Z)(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities})),(0,J3.Z)(this,"getFieldsMap",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new sAe;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t})),(0,J3.Z)(this,"getFieldEntitiesForNamePathList",(function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Kue(e);return t.get(n)||{INVALIDATE_NAME_PATH:Kue(e)}}))})),(0,J3.Z)(this,"getFieldsValue",(function(e,t){var r,o,a;if(n.warningUnhooked(),!0===e||Array.isArray(e)?(r=e,o=t):e&&"object"===(0,F6.Z)(e)&&(a=e.strict,o=e.filter),!0===r&&!o)return n.store;var i=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),s=[];return i.forEach((function(e){var t,n,i,c,l="INVALIDATE_NAME_PATH"in e?e.INVALIDATE_NAME_PATH:e.getNamePath();if(a){if(null!==(i=(c=e).isList)&&void 0!==i&&i.call(c))return}else if(!r&&null!==(t=(n=e).isListField)&&void 0!==t&&t.call(n))return;if(o){var u="getMeta"in e?e.getMeta():null;o(u)&&s.push(l)}else s.push(l)})),Gue(n.store,s.map(Kue))})),(0,J3.Z)(this,"getFieldValue",(function(e){n.warningUnhooked();var t=Kue(e);return t9(n.store,t)})),(0,J3.Z)(this,"getFieldsError",(function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:Kue(e[n]),errors:[],warnings:[]}}))})),(0,J3.Z)(this,"getFieldError",(function(e){n.warningUnhooked();var t=Kue(e);return n.getFieldsError([t])[0].errors})),(0,J3.Z)(this,"getFieldWarning",(function(e){n.warningUnhooked();var t=Kue(e);return n.getFieldsError([t])[0].warnings})),(0,J3.Z)(this,"isFieldsTouched",(function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,a=t[0],i=t[1],s=!1;0===t.length?o=null:1===t.length?Array.isArray(a)?(o=a.map(Kue),s=!1):(o=null,s=a):(o=a.map(Kue),s=i);var c=n.getFieldEntities(!0),l=function(e){return e.isFieldTouched()};if(!o)return s?c.every(l):c.some(l);var u=new sAe;o.forEach((function(e){u.set(e,[])})),c.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&u.update(n,(function(t){return[].concat(p6(t),[e])}))}))}));var A=function(e){return e.some(l)},h=u.map((function(e){return e.value}));return s?h.every(A):h.some(A)})),(0,J3.Z)(this,"isFieldTouched",(function(e){return n.warningUnhooked(),n.isFieldsTouched([e])})),(0,J3.Z)(this,"isFieldsValidating",(function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Kue);return t.some((function(e){var t=e.getNamePath();return que(r,t)&&e.isFieldValidating()}))})),(0,J3.Z)(this,"isFieldValidating",(function(e){return n.warningUnhooked(),n.isFieldsValidating([e])})),(0,J3.Z)(this,"resetWithFieldInitialValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new sAe,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o;e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,p6(p6(r).map((function(e){return e.entity}))))}))):o=r,o.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))D6(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var a=t.get(o);if(a&&a.size>1)D6(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var i=n.getFieldValue(o);r.isListField()||e.skipExist&&void 0!==i||n.updateStore(r9(n.store,o,p6(a)[0].value))}}}}))})),(0,J3.Z)(this,"resetFields",(function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(i9(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(Kue);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(r9(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)})),(0,J3.Z)(this,"setFields",(function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var o=e.name,a=uie(e,cAe),i=Kue(o);r.push(i),"value"in a&&n.updateStore(r9(n.store,i,a.value)),n.notifyObservers(t,[i],{type:"setField",data:e})})),n.notifyWatch(r)})),(0,J3.Z)(this,"getFields",(function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=e6(e6({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))})),(0,J3.Z)(this,"initEntityValue",(function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===t9(n.store,r)&&n.updateStore(r9(n.store,r,t))}})),(0,J3.Z)(this,"isMergedPreserve",(function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t})),(0,J3.Z)(this,"registerField",(function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(o)&&(!r||a.length>1)){var i=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==i&&n.fieldEntities.every((function(e){return!Xue(e.getNamePath(),t)}))){var s=n.store;n.updateStore(r9(s,t,i,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}})),(0,J3.Z)(this,"dispatch",(function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,a=e.triggerName;n.validateFields([o],{triggerName:a})}})),(0,J3.Z)(this,"notifyObservers",(function(e,t,r){if(n.subscribable){var o=e6(e6({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()})),(0,J3.Z)(this,"triggerDependenciesUpdate",(function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(p6(r))}),r})),(0,J3.Z)(this,"updateValue",(function(e,t){var r=Kue(e),o=n.store;n.updateStore(r9(n.store,r,t)),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var a=n.triggerDependenciesUpdate(o,r),i=n.callbacks.onValuesChange;i&&i(Gue(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(p6(a)))})),(0,J3.Z)(this,"setFieldsValue",(function(e){n.warningUnhooked();var t=n.store;if(e){var r=i9(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()})),(0,J3.Z)(this,"setFieldValue",(function(e,t){n.setFields([{name:e,value:t}])})),(0,J3.Z)(this,"getDependencyChildrenFields",(function(e){var t=new Set,r=[],o=new sAe;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Kue(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r})),(0,J3.Z)(this,"triggerOnFieldsChange",(function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var a=new sAe;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),o.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}var i=o.filter((function(t){var n=t.name;return que(e,n)}));i.length&&r(i,o)}})),(0,J3.Z)(this,"validateFields",(function(e,t){var r,o;n.warningUnhooked(),Array.isArray(e)||"string"===typeof e||"string"===typeof t?(r=e,o=t):o=e;var a=!!r,i=a?r.map(Kue):[],s=[],c=String(Date.now()),l=new Set,u=o||{},A=u.recursive,h=u.dirty;n.getFieldEntities(!0).forEach((function(e){if(a||i.push(e.getNamePath()),e.props.rules&&e.props.rules.length&&(!h||e.isFieldDirty())){var t=e.getNamePath();if(l.add(t.join(c)),!a||que(i,t,A)){var r=e.validateRules(e6({validateMessages:e6(e6({},Due),n.validateMessages)},o));s.push(r.then((function(){return{name:t,errors:[],warnings:[]}})).catch((function(e){var n,r=[],o=[];return null===(n=e.forEach)||void 0===n||n.call(e,(function(e){var t=e.rule.warningOnly,n=e.errors;t?o.push.apply(o,p6(n)):r.push.apply(r,p6(n))})),r.length?Promise.reject({name:t,errors:r,warnings:o}):{name:t,errors:r,warnings:o}})))}}}));var d=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,a){e.forEach((function(e,i){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[i]=e,n>0||(t&&a(r),o(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=d,d.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var p=d.then((function(){return n.lastValidatePromise===d?Promise.resolve(n.getFieldsValue(i)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(i),errorFields:t,outOfDate:n.lastValidatePromise!==d})}));p.catch((function(e){return e}));var f=i.filter((function(e){return l.has(e.join(c))}));return n.triggerOnFieldsChange(f),p})),(0,J3.Z)(this,"submit",(function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(nbe){console.error(nbe)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))})),this.forceRootUpdate=t}));const uAe=function(e){var t=F.useRef(),n=h6(F.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new lAe((function(){n({})}));t.current=r.getForm()}return[t.current]};var AAe=F.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}});const hAe=AAe;var dAe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];const pAe=function(e,t){var n=e.name,r=e.initialValues,o=e.fields,a=e.form,i=e.preserve,s=e.children,c=e.component,l=void 0===c?"form":c,u=e.validateMessages,A=e.validateTrigger,h=void 0===A?"onChange":A,d=e.onValuesChange,p=e.onFieldsChange,f=e.onFinish,g=e.onFinishFailed,m=uie(e,dAe),y=F.useContext(hAe),v=h6(uAe(a),1)[0],b=v.getInternalHooks(aue),w=b.useSubscribe,x=b.setInitialValues,C=b.setCallbacks,k=b.setValidateMessages,B=b.setPreserve,S=b.destroyForm;F.useImperativeHandle(t,(function(){return v})),F.useEffect((function(){return y.registerForm(n,v),function(){y.unregisterForm(n)}}),[y,v,n]),k(e6(e6({},y.validateMessages),u)),C({onValuesChange:d,onFieldsChange:function(e){if(y.triggerFormChange(n,e),p){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];p.apply(void 0,[e].concat(r))}},onFinish:function(e){y.triggerFormFinish(n,e),f&&f(e)},onFinishFailed:g}),B(i);var I,E=F.useRef(null);x(r,!E.current),E.current||(E.current=!0),F.useEffect((function(){return S}),[]);var N="function"===typeof s;N?I=s(v.getFieldsValue(!0),v):I=s;w(!N);var T=F.useRef();F.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==(0,F6.Z)(e)||"object"!==(0,F6.Z)(t))return!1;var n=Object.keys(e),r=Object.keys(t);return p6(new Set([].concat(n,r))).every((function(n){var r=e[n],o=t[n];return"function"===typeof r&&"function"===typeof o||r===o}))})(T.current||[],o||[])||v.setFields(o||[]),T.current=o}),[o,v]);var _=F.useMemo((function(){return e6(e6({},v),{},{validateTrigger:h})}),[v,h]),L=F.createElement(cue.Provider,{value:null},F.createElement(sue.Provider,{value:_},I));return!1===l?L:F.createElement(l,O8({},m,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),v.submit()},onReset:function(e){var t;e.preventDefault(),v.resetFields(),null===(t=m.onReset)||void 0===t||t.call(m,e)}}),L)};function fAe(e){try{return JSON.stringify(e)}catch(nbe){return Math.random()}}var gAe=function(){};const mAe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=void 0===o?{}:o,i=function(e){return e&&!!e._init}(a)?{form:a}:a,s=i.form,c=h6((0,F.useState)(),2),l=c[0],u=c[1],A=(0,F.useMemo)((function(){return fAe(l)}),[l]),h=(0,F.useRef)(A);h.current=A;var d=(0,F.useContext)(sue),p=s||d,f=p&&p._init,g=Kue(r),m=(0,F.useRef)(g);return m.current=g,gAe(g),(0,F.useEffect)((function(){if(f){var e=p.getFieldsValue,t=(0,p.getInternalHooks)(aue).registerWatch,n=function(e,t){var n=i.preserve?t:e;return"function"===typeof r?r(n):t9(n,m.current)},o=t((function(e,t){var r=n(e,t),o=fAe(r);h.current!==o&&(h.current=o,u(r))})),a=n(e(),e(!0));return l!==a&&u(a),o}}),[f]),l};var yAe=F.forwardRef(pAe);yAe.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,o=e.children,a=F.useContext(AAe),i=F.useRef({});return F.createElement(AAe.Provider,{value:e6(e6({},a),{},{validateMessages:e6(e6({},a.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:i.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:i.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(i.current=e6(e6({},i.current),{},(0,J3.Z)({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=e6({},i.current);delete t[e],i.current=t,a.unregisterForm(e)}})},o)},yAe.Field=nAe,yAe.List=rAe,yAe.useForm=uAe,yAe.useWatch=mAe;const vAe=F.createContext({});const bAe=e=>{let{children:t,status:n,override:r}=e;const o=(0,F.useContext)(vAe),a=(0,F.useMemo)((()=>{const e=Object.assign({},o);return r&&delete e.isFormItemInput,n&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[n,r,o]);return F.createElement(vAe.Provider,{value:a},t)};function wAe(){}const xAe=F.createContext({add:wAe,remove:wAe});const CAe=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=(0,F.useContext)(yle);return F.createElement(fle,Object.assign({onClick:n},e),t)},kAe=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:r,onOk:o}=(0,F.useContext)(yle);return F.createElement(fle,Object.assign({},wce(n),{loading:e,onClick:o},t),r)};function BAe(e,t){return F.createElement("span",{className:"".concat(e,"-close-x")},t||F.createElement(kle,{className:"".concat(e,"-close-icon")}))}const SAe=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:o,onOk:a,onCancel:i,okButtonProps:s,cancelButtonProps:c,footer:l}=e,[u]=rce("Modal",qae()),A={confirmLoading:o,okButtonProps:s,cancelButtonProps:c,okTextLocale:t||(null===u||void 0===u?void 0:u.okText),cancelTextLocale:r||(null===u||void 0===u?void 0:u.cancelText),okType:n,onOk:a,onCancel:i},h=F.useMemo((()=>A),p6(Object.values(A)));let d;return"function"===typeof l||"undefined"===typeof l?(d=F.createElement(F.Fragment,null,F.createElement(CAe,null),F.createElement(kAe,null)),"function"===typeof l&&(d=l(d,{OkBtn:kAe,CancelBtn:CAe})),d=F.createElement(vle,{value:h},d)):d=l,F.createElement(eie,{disabled:!1},d)},IAe=e=>({animationDuration:e,animationFillMode:"both"}),EAe=e=>({animationDuration:e,animationFillMode:"both"}),NAe=function(e,t,n,r){const o=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return{["\n      ".concat(o).concat(e,"-enter,\n      ").concat(o).concat(e,"-appear\n    ")]:Object.assign(Object.assign({},IAe(r)),{animationPlayState:"paused"}),["".concat(o).concat(e,"-leave")]:Object.assign(Object.assign({},EAe(r)),{animationPlayState:"paused"}),["\n      ".concat(o).concat(e,"-enter").concat(e,"-enter-active,\n      ").concat(o).concat(e,"-appear").concat(e,"-appear-active\n    ")]:{animationName:t,animationPlayState:"running"},["".concat(o).concat(e,"-leave").concat(e,"-leave-active")]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},FAe=new H7("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),TAe=new H7("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),_Ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{antCls:n}=e,r="".concat(n,"-fade"),o=t?"&":"";return[NAe(r,FAe,TAe,e.motionDurationMid,t),{["\n        ".concat(o).concat(r,"-enter,\n        ").concat(o).concat(r,"-appear\n      ")]:{opacity:0,animationTimingFunction:"linear"},["".concat(o).concat(r,"-leave")]:{animationTimingFunction:"linear"}}]},LAe=new H7("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),OAe=new H7("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),RAe=new H7("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),UAe=new H7("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),DAe=new H7("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),PAe=new H7("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),MAe={zoom:{inKeyframes:LAe,outKeyframes:OAe},"zoom-big":{inKeyframes:RAe,outKeyframes:UAe},"zoom-big-fast":{inKeyframes:RAe,outKeyframes:UAe},"zoom-left":{inKeyframes:new H7("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new H7("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new H7("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new H7("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:DAe,outKeyframes:PAe},"zoom-down":{inKeyframes:new H7("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new H7("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},QAe=(e,t)=>{const{antCls:n}=e,r="".concat(n,"-").concat(t),{inKeyframes:o,outKeyframes:a}=MAe[t];return[NAe(r,o,a,"zoom-big-fast"===t?e.motionDurationFast:e.motionDurationMid),{["\n        ".concat(r,"-enter,\n        ").concat(r,"-appear\n      ")]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},["".concat(r,"-leave")]:{animationTimingFunction:e.motionEaseInOutCirc}}]};function HAe(e){return{position:e,inset:0}}const zAe=e=>{const{componentCls:t,antCls:n}=e;return[{["".concat(t,"-root")]:{["".concat(t).concat(n,"-zoom-enter, ").concat(t).concat(n,"-zoom-appear")]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},["".concat(t).concat(n,"-zoom-leave ").concat(t,"-content")]:{pointerEvents:"none"},["".concat(t,"-mask")]:Object.assign(Object.assign({},HAe("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",["".concat(t,"-hidden")]:{display:"none"}}),["".concat(t,"-wrap")]:Object.assign(Object.assign({},HAe("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch",["&:has(".concat(t).concat(n,"-zoom-enter), &:has(").concat(t).concat(n,"-zoom-appear)")]:{pointerEvents:"none"}})}},{["".concat(t,"-root")]:_Ae(e)}]},VAe=e=>{const{componentCls:t}=e;return[{["".concat(t,"-root")]:{["".concat(t,"-wrap-rtl")]:{direction:"rtl"},["".concat(t,"-centered")]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},["@media (max-width: ".concat(e.screenSMMax,"px)")]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:"".concat(h8(e.marginXS)," auto")},["".concat(t,"-centered")]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},V7(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:"calc(100vw - ".concat(h8(e.calc(e.margin).mul(2).equal()),")"),margin:"0 auto",paddingBottom:e.paddingLG,["".concat(t,"-title")]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},["".concat(t,"-content")]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},["".concat(t,"-close")]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:"color ".concat(e.motionDurationMid,", background-color ").concat(e.motionDurationMid),"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:"".concat(h8(e.modalCloseBtnSize)),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.closeBtnHoverBg,textDecoration:"none"},"&:active":{backgroundColor:e.closeBtnActiveBg}},G7(e)),["".concat(t,"-header")]:{color:e.colorText,background:e.headerBg,borderRadius:"".concat(h8(e.borderRadiusLG)," ").concat(h8(e.borderRadiusLG)," 0 0"),marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},["".concat(t,"-body")]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding},["".concat(t,"-footer")]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,["> ".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn")]:{marginInlineStart:e.marginXS}},["".concat(t,"-open")]:{overflow:"hidden"}})},{["".concat(t,"-pure-panel")]:{top:"auto",padding:0,display:"flex",flexDirection:"column",["".concat(t,"-content,\n          ").concat(t,"-body,\n          ").concat(t,"-confirm-body-wrapper")]:{display:"flex",flexDirection:"column",flex:"auto"},["".concat(t,"-confirm-body")]:{marginBottom:"auto"}}}]},jAe=e=>{const{componentCls:t}=e;return{["".concat(t,"-root")]:{["".concat(t,"-wrap-rtl")]:{direction:"rtl",["".concat(t,"-confirm-body")]:{direction:"rtl"}}}}},WAe=e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5;return Nee(e,{modalHeaderHeight:e.calc(e.calc(r).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalIconHoverColor:e.colorIconHover,modalCloseIconColor:e.colorIcon,modalCloseBtnSize:e.fontHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},KAe=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,closeBtnHoverBg:e.wireframe?"transparent":e.colorFillContent,closeBtnActiveBg:e.wireframe?"transparent":e.colorFillContentHover,contentPadding:e.wireframe?0:"".concat(h8(e.paddingMD)," ").concat(h8(e.paddingContentHorizontalLG)),headerPadding:e.wireframe?"".concat(h8(e.padding)," ").concat(h8(e.paddingLG)):0,headerBorderBottom:e.wireframe?"".concat(h8(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorSplit):"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?"".concat(h8(e.paddingXS)," ").concat(h8(e.padding)):0,footerBorderTop:e.wireframe?"".concat(h8(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorSplit):"none",footerBorderRadius:e.wireframe?"0 0 ".concat(h8(e.borderRadiusLG)," ").concat(h8(e.borderRadiusLG)):0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?"".concat(h8(2*e.padding)," ").concat(h8(2*e.padding)," ").concat(h8(e.paddingLG)):0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),GAe=Pee("Modal",(e=>{const t=WAe(e);return[VAe(t),jAe(t),zAe(t),QAe(t,"zoom")]}),KAe,{unitless:{titleLineHeight:!0}}),qAe=e=>{const[,,,,t]=pee();return t?"".concat(e,"-css-var"):""};var XAe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};let YAe;const ZAe=e=>{YAe={x:e.pageX,y:e.pageY},setTimeout((()=>{YAe=null}),100)};g6()&&window.document.documentElement&&document.documentElement.addEventListener("click",ZAe,!0);const JAe=e=>{var t;const{getPopupContainer:n,getPrefixCls:r,direction:o,modal:a}=F.useContext(i6),i=t=>{const{onCancel:n}=e;null===n||void 0===n||n(t)};const{prefixCls:s,className:c,rootClassName:l,open:u,wrapClassName:A,centered:h,getContainer:d,closeIcon:p,closable:f,focusTriggerAfterClose:g=!0,style:m,visible:y,width:v=520,footer:b,classNames:w,styles:x}=e,C=XAe(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","closable","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),k=r("modal",s),B=r(),S=qAe(k),[I,E,N]=GAe(k,S),T=Z3()(A,{["".concat(k,"-centered")]:!!h,["".concat(k,"-wrap-rtl")]:"rtl"===o}),_=null!==b&&F.createElement(SAe,Object.assign({},e,{onOk:t=>{const{onOk:n}=e;null===n||void 0===n||n(t)},onCancel:i})),[L,O]=oue(f,p,(e=>BAe(k,e)),F.createElement(kle,{className:"".concat(k,"-close-icon")}),!0),R=function(e){const t=F.useContext(xAe),n=F.useRef();return q7((r=>{if(r){const o=e?r.querySelector(e):r;t.add(o),n.current=o}else t.remove(n.current)}))}(".".concat(k,"-content")),[U,D]=tce("Modal",C.zIndex);return I(F.createElement(fce,null,F.createElement(bAe,{status:!0,override:!0},F.createElement(Zse.Provider,{value:D},F.createElement(rue,Object.assign({width:v},C,{zIndex:U,getContainer:void 0===d?n:d,prefixCls:k,rootClassName:Z3()(E,l,N,S),footer:_,visible:null!==u&&void 0!==u?u:y,mousePosition:null!==(t=C.mousePosition)&&void 0!==t?t:YAe,onClose:i,closable:L,closeIcon:O,focusTriggerAfterClose:g,transitionName:nce(B,"zoom",e.transitionName),maskTransitionName:nce(B,"fade",e.maskTransitionName),className:Z3()(E,c,null===a||void 0===a?void 0:a.className),style:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.style),m),classNames:Object.assign(Object.assign({wrapper:T},null===a||void 0===a?void 0:a.classNames),w),styles:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.styles),x),panelRef:R}))))))},$Ae=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:o,fontSize:a,lineHeight:i,modalTitleHeight:s,fontHeight:c,confirmBodyPadding:l}=e,u="".concat(t,"-confirm");return{[u]:{"&-rtl":{direction:"rtl"},["".concat(e.antCls,"-modal-header")]:{display:"none"},["".concat(u,"-body-wrapper")]:Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),["&".concat(t," ").concat(t,"-body")]:{padding:l},["".concat(u,"-body")]:{display:"flex",flexWrap:"nowrap",alignItems:"start",["> ".concat(e.iconCls)]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},["&-has-title > ".concat(e.iconCls)]:{marginTop:e.calc(e.calc(s).sub(o).equal()).div(2).equal()}},["".concat(u,"-paragraph")]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:"calc(100% - ".concat(h8(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal()),")")},["".concat(u,"-title")]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},["".concat(u,"-content")]:{color:e.colorText,fontSize:a,lineHeight:i},["".concat(u,"-btns")]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,["".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn")]:{marginBottom:0,marginInlineStart:e.marginXS}}},["".concat(u,"-error ").concat(u,"-body > ").concat(e.iconCls)]:{color:e.colorError},["".concat(u,"-warning ").concat(u,"-body > ").concat(e.iconCls,",\n        ").concat(u,"-confirm ").concat(u,"-body > ").concat(e.iconCls)]:{color:e.colorWarning},["".concat(u,"-info ").concat(u,"-body > ").concat(e.iconCls)]:{color:e.colorInfo},["".concat(u,"-success ").concat(u,"-body > ").concat(e.iconCls)]:{color:e.colorSuccess}}},ehe=Dee(["Modal","confirm"],(e=>{const t=WAe(e);return[$Ae(t)]}),KAe,{order:-1e3});var the=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function nhe(e){const{prefixCls:t,icon:n,okText:r,cancelText:o,confirmPrefixCls:a,type:i,okCancel:s,footer:c,locale:l}=e,u=the(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let A=n;if(!n&&null!==n)switch(i){case"info":A=F.createElement(Yse,null);break;case"success":A=F.createElement(Hse,null);break;case"error":A=F.createElement(jse,null);break;default:A=F.createElement(Gse,null)}const h=null!==s&&void 0!==s?s:"confirm"===i,d=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),[p]=rce("Modal"),f=l||p,g=r||(h?null===f||void 0===f?void 0:f.okText:null===f||void 0===f?void 0:f.justOkText),m=o||(null===f||void 0===f?void 0:f.cancelText),y=Object.assign({autoFocusButton:d,cancelTextLocale:m,okTextLocale:g,mergedOkCancel:h},u),v=F.useMemo((()=>y),p6(Object.values(y))),b=F.createElement(F.Fragment,null,F.createElement(ble,null),F.createElement(wle,null)),w=void 0!==e.title&&null!==e.title,x="".concat(a,"-body");return F.createElement("div",{className:"".concat(a,"-body-wrapper")},F.createElement("div",{className:Z3()(x,{["".concat(x,"-has-title")]:w})},A,F.createElement("div",{className:"".concat(a,"-paragraph")},w&&F.createElement("span",{className:"".concat(a,"-title")},e.title),F.createElement("div",{className:"".concat(a,"-content")},e.content))),void 0===c||"function"===typeof c?F.createElement(vle,{value:v},F.createElement("div",{className:"".concat(a,"-btns")},"function"===typeof c?c(b,{OkBtn:wle,CancelBtn:ble}):b)):c,F.createElement(ehe,{prefixCls:t}))}const rhe=e=>{const{close:t,zIndex:n,afterClose:r,open:o,keyboard:a,centered:i,getContainer:s,maskStyle:c,direction:l,prefixCls:u,wrapClassName:A,rootPrefixCls:h,bodyStyle:d,closable:p=!1,closeIcon:f,modalRender:g,focusTriggerAfterClose:m,onConfirm:y,styles:v}=e;const b="".concat(u,"-confirm"),w=e.width||416,x=e.style||{},C=void 0===e.mask||e.mask,k=void 0!==e.maskClosable&&e.maskClosable,B=Z3()(b,"".concat(b,"-").concat(e.type),{["".concat(b,"-rtl")]:"rtl"===l},e.className),[,S]=pee(),I=F.useMemo((()=>void 0!==n?n:S.zIndexPopupBase+1e3),[n,S]);return F.createElement(JAe,{prefixCls:u,className:B,wrapClassName:Z3()({["".concat(b,"-centered")]:!!e.centered},A),onCancel:()=>{null===t||void 0===t||t({triggerCancel:!0}),null===y||void 0===y||y(!1)},open:o,title:"",footer:null,transitionName:nce(h||"","zoom",e.transitionName),maskTransitionName:nce(h||"","fade",e.maskTransitionName),mask:C,maskClosable:k,style:x,styles:Object.assign({body:d,mask:c},v),width:w,zIndex:I,afterClose:r,keyboard:a,centered:i,getContainer:s,closable:p,closeIcon:f,modalRender:g,focusTriggerAfterClose:m},F.createElement(nhe,Object.assign({},e,{confirmPrefixCls:b})))};const ohe=e=>{const{rootPrefixCls:t,iconPrefixCls:n,direction:r,theme:o}=e;return F.createElement(Cse,{prefixCls:t,iconPrefixCls:n,direction:r,theme:o},F.createElement(rhe,Object.assign({},e)))},ahe=[];let ihe="";const she=e=>{var t,n;const{prefixCls:r,getContainer:o,direction:a}=e,i=qae(),s=(0,F.useContext)(i6),c=r||ihe||s.getPrefixCls(),l=r||"".concat(c,"-modal");let u=o;return!1===u&&(u=void 0),F.createElement(ohe,Object.assign({},e,{rootPrefixCls:c,prefixCls:l,iconPrefixCls:s.iconPrefixCls,theme:s.theme,direction:null!==a&&void 0!==a?a:s.direction,locale:null!==(n=null===(t=s.locale)||void 0===t?void 0:t.Modal)&&void 0!==n?n:i,getContainer:u}))};function che(e){const t=bse();const n=document.createDocumentFragment();let r,o=Object.assign(Object.assign({},e),{close:s,open:!0});function a(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];const a=r.some((e=>e&&e.triggerCancel));e.onCancel&&a&&e.onCancel.apply(e,[()=>{}].concat(p6(r.slice(1))));for(let e=0;e<ahe.length;e++){if(ahe[e]===s){ahe.splice(e,1);break}}_ae(n)}function i(e){clearTimeout(r),r=setTimeout((()=>{const r=t.getRootPrefixCls(),o=t.getIconPrefixCls(),a=t.getTheme(),i=F.createElement(she,Object.assign({},e));Eae(F.createElement(Cse,{prefixCls:r,iconPrefixCls:o,theme:a},t.holderRender?t.holderRender(i):i),n)}))}function s(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o=Object.assign(Object.assign({},o),{open:!1,afterClose:()=>{"function"===typeof e.afterClose&&e.afterClose(),a.apply(this,n)}}),o.visible&&delete o.visible,i(o)}return i(o),ahe.push(s),{destroy:s,update:function(e){o="function"===typeof e?e(o):Object.assign(Object.assign({},o),e),i(o)}}}function lhe(e){return Object.assign(Object.assign({},e),{type:"warning"})}function uhe(e){return Object.assign(Object.assign({},e),{type:"info"})}function Ahe(e){return Object.assign(Object.assign({},e),{type:"success"})}function hhe(e){return Object.assign(Object.assign({},e),{type:"error"})}function dhe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function phe(e){return t=>F.createElement(Cse,{theme:{token:{motion:!1,zIndexPopupBase:0}}},F.createElement(e,Object.assign({},t)))}var fhe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const ghe=phe((e=>{const{prefixCls:t,className:n,closeIcon:r,closable:o,type:a,title:i,children:s,footer:c}=e,l=fhe(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=F.useContext(i6),A=u(),h=t||u("modal"),d=qAe(A),[p,f,g]=GAe(h,d),m="".concat(h,"-confirm");let y={};return y=a?{closable:null!==o&&void 0!==o&&o,title:"",footer:"",children:F.createElement(nhe,Object.assign({},e,{prefixCls:h,confirmPrefixCls:m,rootPrefixCls:A,content:s}))}:{closable:null===o||void 0===o||o,title:i,footer:null!==c&&F.createElement(SAe,Object.assign({},e)),children:s},p(F.createElement(Zle,Object.assign({prefixCls:h,className:Z3()(f,"".concat(h,"-pure-panel"),a&&m,a&&"".concat(m,"-").concat(a),n,g,d)},l,{closeIcon:BAe(h,r),closable:o},y)))}));var mhe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const yhe=(e,t)=>{var n,{afterClose:r,config:o}=e,a=mhe(e,["afterClose","config"]);const[i,s]=F.useState(!0),[c,l]=F.useState(o),{direction:u,getPrefixCls:A}=F.useContext(i6),h=A("modal"),d=A(),p=function(){s(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.some((e=>e&&e.triggerCancel));c.onCancel&&r&&c.onCancel.apply(c,[()=>{}].concat(p6(t.slice(1))))};F.useImperativeHandle(t,(()=>({destroy:p,update:e=>{l((t=>Object.assign(Object.assign({},t),e)))}})));const f=null!==(n=c.okCancel)&&void 0!==n?n:"confirm"===c.type,[g]=rce("Modal",jae.Modal);return F.createElement(ohe,Object.assign({prefixCls:h,rootPrefixCls:d},c,{close:p,open:i,afterClose:()=>{var e;r(),null===(e=c.afterClose)||void 0===e||e.call(c)},okText:c.okText||(f?null===g||void 0===g?void 0:g.okText:null===g||void 0===g?void 0:g.justOkText),direction:c.direction||u,cancelText:c.cancelText||(null===g||void 0===g?void 0:g.cancelText)},a))},vhe=F.forwardRef(yhe);let bhe=0;const whe=F.memo(F.forwardRef(((e,t)=>{const[n,r]=function(){const[e,t]=F.useState([]);return[e,F.useCallback((e=>(t((t=>[].concat(p6(t),[e]))),()=>{t((t=>t.filter((t=>t!==e))))})),[])]}();return F.useImperativeHandle(t,(()=>({patchElement:r})),[]),F.createElement(F.Fragment,null,n)})));const xhe=function(){const e=F.useRef(null),[t,n]=F.useState([]);F.useEffect((()=>{if(t.length){p6(t).forEach((e=>{e()})),n([])}}),[t]);const r=F.useCallback((t=>function(r){var o;bhe+=1;const a=F.createRef();let i;const s=new Promise((e=>{i=e}));let c,l=!1;const u=F.createElement(vhe,{key:"modal-".concat(bhe),config:t(r),ref:a,afterClose:()=>{null===c||void 0===c||c()},isSilent:()=>l,onConfirm:e=>{i(e)}});c=null===(o=e.current)||void 0===o?void 0:o.patchElement(u),c&&ahe.push(c);const A={destroy:()=>{function e(){var e;null===(e=a.current)||void 0===e||e.destroy()}a.current?e():n((t=>[].concat(p6(t),[e])))},update:e=>{function t(){var t;null===(t=a.current)||void 0===t||t.update(e)}a.current?t():n((e=>[].concat(p6(e),[t])))},then:e=>(l=!0,s.then(e))};return A}),[]);return[F.useMemo((()=>({info:r(uhe),success:r(Ahe),error:r(hhe),warning:r(lhe),confirm:r(dhe)})),[]),F.createElement(whe,{key:"modal-holder",ref:e})]};function Che(e){return che(lhe(e))}const khe=JAe;khe.useModal=xhe,khe.info=function(e){return che(uhe(e))},khe.success=function(e){return che(Ahe(e))},khe.error=function(e){return che(hhe(e))},khe.warning=Che,khe.warn=Che,khe.confirm=function(e){return che(dhe(e))},khe.destroyAll=function(){for(;ahe.length;){const e=ahe.pop();e&&e()}},khe.config=function(e){let{rootPrefixCls:t}=e;ihe=t},khe._InternalPanelDoNotUseOrYouWillBeFired=ghe;const Bhe=khe;function She(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}function Ihe(e,t,n){const r=goe((n||{}).ignore||[]),o=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([Ehe(e[0]),Nhe(e[1])])}return t}(t);let a=-1;for(;++a<o.length;)koe(e,"text",i);function i(e,t){let n,i=-1;for(;++i<t.length;){const e=t[i],o=n?n.children:void 0;if(r(e,o?o.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=o[a][0],i=o[a][1];let s=0;const c=n.children.indexOf(e);let l=!1,u=[];r.lastIndex=0;let A=r.exec(e.value);for(;A;){const n=A.index,o={index:A.index,input:A.input,stack:[...t,e]};let a=i(...A,o);if("string"===typeof a&&(a=a.length>0?{type:"text",value:a}:void 0),!1===a?r.lastIndex=n+1:(s!==n&&u.push({type:"text",value:e.value.slice(s,n)}),Array.isArray(a)?u.push(...a):a&&u.push(a),s=n+A[0].length,l=!0),!r.global)break;A=r.exec(e.value)}l?(s<e.value.length&&u.push({type:"text",value:e.value.slice(s)}),n.children.splice(c,1,...u)):u=[e];return c+u.length}(e,t)}}function Ehe(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Nhe(e){return"function"===typeof e?e:function(){return e}}const Fhe="phrasing",The=["autolink","link","image","label"];function _he(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Lhe(e){this.config.enter.autolinkProtocol.call(this,e)}function Ohe(e){this.config.exit.autolinkProtocol.call(this,e)}function Rhe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Uhe(e){this.config.exit.autolinkEmail.call(this,e)}function Dhe(e){this.exit(e)}function Phe(e){Ihe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Mhe],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,Qhe]],{ignore:["link","linkReference"]})}function Mhe(e,t,n,r,o){let a="";if(!Hhe(o))return!1;if(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const i=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=She(e,"(");let a=She(e,")");for(;-1!==r&&o>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}(n+r);if(!i[0])return!1;const s={type:"link",title:null,url:a+t+i[0],children:[{type:"text",value:t+i[0]}]};return i[1]?[s,{type:"text",value:i[1]}]:s}function Qhe(e,t,n,r){return!(!Hhe(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Hhe(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||Lne(n)||_ne(n))&&(!t||47!==n)}function zhe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Vhe(){this.buffer()}function jhe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=ire(this.sliceSerialize(e)).toLowerCase()}function Whe(e){this.exit(e)}function Khe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Ghe(){this.buffer()}function qhe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=ire(this.sliceSerialize(e)).toLowerCase()}function Xhe(e){this.exit(e)}function Yhe(e,t,n,r){const o=n.createTracker(r);let a=o.move("[^");const i=n.enter("footnoteReference"),s=n.enter("reference");return a+=o.move(n.safe(n.associationId(e),{...o.current(),before:a,after:"]"})),s(),i(),a+=o.move("]"),a}function Zhe(e,t,n,r){const o=n.createTracker(r);let a=o.move("[^");const i=n.enter("footnoteDefinition"),s=n.enter("label");return a+=o.move(n.safe(n.associationId(e),{...o.current(),before:a,after:"]"})),s(),a+=o.move("]:"+(e.children&&e.children.length>0?" ":"")),o.shift(4),a+=o.move(n.indentLines(n.containerFlow(e,o.current()),Jhe)),i(),a}function Jhe(e,t,n){return 0===t?e:(n?"":"    ")+e}Yhe.peek=function(){return"["};const $he=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function ede(e){this.enter({type:"delete",children:[]},e)}function tde(e){this.exit(e)}function nde(e,t,n,r){const o=n.createTracker(r),a=n.enter("strikethrough");let i=o.move("~~");return i+=n.containerPhrasing(e,{...o.current(),before:i,after:"~"}),i+=o.move("~~"),a(),i}function rde(e){return e.length}function ode(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function ade(e,t,n){return">"+(n?"":" ")+e}function ide(e,t){return sde(e,t.inConstruct,!0)&&!sde(e,t.notInConstruct,!1)}function sde(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function cde(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if("\n"===n.unsafe[o].character&&ide(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function lde(e,t,n){return(n?"":"    ")+e}function ude(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Ade(e,t,n,r){const o=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),a=n.enter("emphasis"),i=n.createTracker(r);let s=i.move(o);return s+=i.move(n.containerPhrasing(e,{before:s,after:o,...i.current()})),s+=i.move(o),a(),s}function hde(e){return e.value||""}function dde(e,t,n,r){const o=ude(n),a='"'===o?"Quote":"Apostrophe",i=n.enter("image");let s=n.enter("label");const c=n.createTracker(r);let l=c.move("![");return l+=c.move(n.safe(e.alt,{before:l,after:"]",...c.current()})),l+=c.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(s=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":")",...c.current()}))),s(),e.title&&(s=n.enter("title".concat(a)),l+=c.move(" "+o),l+=c.move(n.safe(e.title,{before:l,after:o,...c.current()})),l+=c.move(o),s()),l+=c.move(")"),i(),l}function pde(e,t,n,r){const o=e.referenceType,a=n.enter("imageReference");let i=n.enter("label");const s=n.createTracker(r);let c=s.move("![");const l=n.safe(e.alt,{before:c,after:"]",...s.current()});c+=s.move(l+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const A=n.safe(n.associationId(e),{before:c,after:"]",...s.current()});return i(),n.stack=u,a(),"full"!==o&&l&&l===A?"shortcut"===o?c=c.slice(0,-1):c+=s.move("]"):c+=s.move(A+"]"),c}function fde(e,t,n){let r=e.value||"",o="`",a=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const e=n.unsafe[a],t=n.compilePattern(e);let o;if(e.atBreak)for(;o=t.exec(r);){let e=o.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(o.index+1)}}return o+r+o}function gde(e,t){const n=une(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function mde(e,t,n,r){const o=ude(n),a='"'===o?"Quote":"Apostrophe",i=n.createTracker(r);let s,c;if(gde(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let r=i.move("<");return r+=i.move(n.containerPhrasing(e,{before:r,after:">",...i.current()})),r+=i.move(">"),s(),n.stack=t,r}s=n.enter("link"),c=n.enter("label");let l=i.move("[");return l+=i.move(n.containerPhrasing(e,{before:l,after:"](",...i.current()})),l+=i.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),l+=i.move("<"),l+=i.move(n.safe(e.url,{before:l,after:">",...i.current()})),l+=i.move(">")):(c=n.enter("destinationRaw"),l+=i.move(n.safe(e.url,{before:l,after:e.title?" ":")",...i.current()}))),c(),e.title&&(c=n.enter("title".concat(a)),l+=i.move(" "+o),l+=i.move(n.safe(e.title,{before:l,after:o,...i.current()})),l+=i.move(o),c()),l+=i.move(")"),s(),l}function yde(e,t,n,r){const o=e.referenceType,a=n.enter("linkReference");let i=n.enter("label");const s=n.createTracker(r);let c=s.move("[");const l=n.containerPhrasing(e,{before:c,after:"]",...s.current()});c+=s.move(l+"]["),i();const u=n.stack;n.stack=[],i=n.enter("reference");const A=n.safe(n.associationId(e),{before:c,after:"]",...s.current()});return i(),n.stack=u,a(),"full"!==o&&l&&l===A?"shortcut"===o?c=c.slice(0,-1):c+=s.move("]"):c+=s.move(A+"]"),c}function vde(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function bde(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}nde.peek=function(){return"~"},Ade.peek=function(e,t,n){return n.options.emphasis||"*"},hde.peek=function(){return"<"},dde.peek=function(){return"!"},pde.peek=function(){return"!"},fde.peek=function(){return"`"},mde.peek=function(e,t,n){return gde(e,n)?"<":"["},yde.peek=function(){return"["};const wde=goe(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","link","linkReference","strong","text"]);function xde(e,t,n,r){const o=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),a=n.enter("strong"),i=n.createTracker(r);let s=i.move(o+o);return s+=i.move(n.containerPhrasing(e,{before:s,after:o,...i.current()})),s+=i.move(o+o),a(),s}xde.peek=function(e,t,n){return n.options.strong||"*"};const Cde={blockquote:function(e,t,n,r){const o=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const i=n.indentLines(n.containerFlow(e,a.current()),ade);return o(),i},break:cde,code:function(e,t,n,r){const o=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),a=e.value||"",i="`"===o?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(a,lde);return e(),t}const s=n.createTracker(r),c=o.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),o=r,a=0,i=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===o?++a>i&&(i=a):a=1,o=r+t.length,r=n.indexOf(t,o);return i}(a,o)+1,3)),l=n.enter("codeFenced");let u=s.move(c);if(e.lang){const t=n.enter("codeFencedLang".concat(i));u+=s.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...s.current()})),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(i));u+=s.move(" "),u+=s.move(n.safe(e.meta,{before:u,after:"\n",encode:["`"],...s.current()})),t()}return u+=s.move("\n"),a&&(u+=s.move(a+"\n")),u+=s.move(c),l(),u},definition:function(e,t,n,r){const o=ude(n),a='"'===o?"Quote":"Apostrophe",i=n.enter("definition");let s=n.enter("label");const c=n.createTracker(r);let l=c.move("[");return l+=c.move(n.safe(n.associationId(e),{before:l,after:"]",...c.current()})),l+=c.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),l+=c.move("<"),l+=c.move(n.safe(e.url,{before:l,after:">",...c.current()})),l+=c.move(">")):(s=n.enter("destinationRaw"),l+=c.move(n.safe(e.url,{before:l,after:e.title?" ":"\n",...c.current()}))),s(),e.title&&(s=n.enter("title".concat(a)),l+=c.move(" "+o),l+=c.move(n.safe(e.title,{before:l,after:o,...c.current()})),l+=c.move(o),s()),i(),l},emphasis:Ade,hardBreak:cde,heading:function(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(function(e,t){let n=!1;return Boe(e,(function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,xoe})),Boolean((!e.depth||e.depth<3)&&une(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),i=n.containerPhrasing(e,{...a.current(),before:"\n",after:"\n"});return r(),t(),i+"\n"+(1===o?"=":"-").repeat(i.length-(Math.max(i.lastIndexOf("\r"),i.lastIndexOf("\n"))+1))}const i="#".repeat(o),s=n.enter("headingAtx"),c=n.enter("phrasing");a.move(i+" ");let l=n.containerPhrasing(e,{before:"# ",after:"\n",...a.current()});return/^[\t ]/.test(l)&&(l="&#x"+l.charCodeAt(0).toString(16).toUpperCase()+";"+l.slice(1)),l=l?i+" "+l:i,n.options.closeAtx&&(l+=" "+i),c(),s(),l},html:hde,image:dde,imageReference:pde,inlineCode:fde,link:mde,linkReference:yde,list:function(e,t,n,r){const o=n.enter("list"),a=n.bulletCurrent;let i=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):vde(n);const s=e.ordered?"."===i?")":".":function(e){const t=vde(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let c=!(!t||!n.bulletLastUsed)&&i===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==i&&"-"!==i||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(c=!0),bde(n)===i&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){c=!0;break}}}}c&&(i=s),n.bulletCurrent=i;const l=n.containerFlow(e,r);return n.bulletLastUsed=i,n.bulletCurrent=a,o(),l},listItem:function(e,t,n,r){const o=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let a=n.bulletCurrent||vde(n);t&&"list"===t.type&&t.ordered&&(a=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+a);let i=a.length+1;("tab"===o||"mixed"===o&&(t&&"list"===t.type&&t.spread||e.spread))&&(i=4*Math.ceil(i/4));const s=n.createTracker(r);s.move(a+" ".repeat(i-a.length)),s.shift(i);const c=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,s.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(i))+e;return(n?a:a+" ".repeat(i-a.length))+e}));return c(),l},paragraph:function(e,t,n,r){const o=n.enter("paragraph"),a=n.enter("phrasing"),i=n.containerPhrasing(e,r);return a(),o(),i},root:function(e,t,n,r){const o=e.children.some((function(e){return wde(e)}));return(o?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:xde,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(bde(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function kde(e){const t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.data.inTable=!0}function Bde(e){this.exit(e),this.data.inTable=void 0}function Sde(e){this.enter({type:"tableRow",children:[]},e)}function Ide(e){this.exit(e)}function Ede(e){this.enter({type:"tableCell",children:[]},e)}function Nde(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Fde));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Fde(e,t){return"|"===t?t:e}function Tde(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Cde.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return s(function(e,t,n){const r=e.children;let o=-1;const a=[],i=t.enter("table");for(;++o<r.length;)a[o]=c(r[o],t,n);return i(),a}(e,n,r),e.align)},tableCell:i,tableRow:function(e,t,n,r){const o=c(e,n,r),a=s([o]);return a.slice(0,a.indexOf("\n"))}}};function i(e,t,n,r){const o=n.enter("tableCell"),i=n.enter("phrasing"),s=n.containerPhrasing(e,{...r,before:a,after:a});return i(),o(),s}function s(e,t){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(t.align||[]).concat(),r=t.stringLength||rde,o=[],a=[],i=[],s=[];let c=0,l=-1;for(;++l<e.length;){const n=[],o=[];let A=-1;for(e[l].length>c&&(c=e[l].length);++A<e[l].length;){const a=null===(u=e[l][A])||void 0===u?"":String(u);if(!1!==t.alignDelimiters){const e=r(a);o[A]=e,(void 0===s[A]||e>s[A])&&(s[A]=e)}n.push(a)}a[l]=n,i[l]=o}var u;let A=-1;if("object"===typeof n&&"length"in n)for(;++A<c;)o[A]=ode(n[A]);else{const e=ode(n);for(;++A<c;)o[A]=e}A=-1;const h=[],d=[];for(;++A<c;){const e=o[A];let n="",r="";99===e?(n=":",r=":"):108===e?n=":":114===e&&(r=":");let a=!1===t.alignDelimiters?1:Math.max(1,s[A]-n.length-r.length);const i=n+"-".repeat(a)+r;!1!==t.alignDelimiters&&(a=n.length+a+r.length,a>s[A]&&(s[A]=a),d[A]=a),h[A]=i}a.splice(1,0,h),i.splice(1,0,d),l=-1;const p=[];for(;++l<a.length;){const e=a[l],n=i[l];A=-1;const r=[];for(;++A<c;){const a=e[A]||"";let i="",l="";if(!1!==t.alignDelimiters){const e=s[A]-(n[A]||0),t=o[A];114===t?i=" ".repeat(e):99===t?e%2?(i=" ".repeat(e/2+.5),l=" ".repeat(e/2-.5)):(i=" ".repeat(e/2),l=i):l=" ".repeat(e)}!1===t.delimiterStart||A||r.push("|"),!1===t.padding||!1===t.alignDelimiters&&""===a||!1===t.delimiterStart&&!A||r.push(" "),!1!==t.alignDelimiters&&r.push(i),r.push(a),!1!==t.alignDelimiters&&r.push(l),!1!==t.padding&&r.push(" "),!1===t.delimiterEnd&&A===c-1||r.push("|")}p.push(!1===t.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return p.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:o})}function c(e,t,n){const r=e.children;let o=-1;const a=[],s=t.enter("tableRow");for(;++o<r.length;)a[o]=i(r[o],0,t,n);return s(),a}}function _de(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function Lde(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let o,a=-1;for(;++a<r.length;){const e=r[a];if("paragraph"===e.type){o=e;break}}o===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function Ode(e,t,n,r){const o=e.children[0],a="boolean"===typeof e.checked&&o&&"paragraph"===o.type,i="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);a&&s.move(i);let c=Cde.listItem(e,t,n,{...r,...s.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+i}))),c}const Rde={tokenize:function(e,t,n){let r=0;return function t(a){if((87===a||119===a)&&r<3)return r++,e.consume(a),t;if(46===a&&3===r)return e.consume(a),o;return n(a)};function o(e){return null===e?n(e):t(e)}},partial:!0},Ude={tokenize:function(e,t,n){let r,o,a;return i;function i(t){return 46===t||95===t?e.check(Pde,c,s)(t):null===t||Fne(t)||Lne(t)||45!==t&&_ne(t)?c(t):(a=!0,e.consume(t),i)}function s(t){return 95===t?r=!0:(o=r,r=void 0),e.consume(t),i}function c(e){return o||r||!a?n(e):t(e)}},partial:!0},Dde={tokenize:function(e,t){let n=0,r=0;return o;function o(i){return 40===i?(n++,e.consume(i),o):41===i&&r<n?a(i):33===i||34===i||38===i||39===i||41===i||42===i||44===i||46===i||58===i||59===i||60===i||63===i||93===i||95===i||126===i?e.check(Pde,t,a)(i):null===i||Fne(i)||Lne(i)?t(i):(e.consume(i),o)}function a(t){return 41===t&&r++,e.consume(t),o}},partial:!0},Pde={tokenize:function(e,t,n){return r;function r(i){return 33===i||34===i||39===i||41===i||42===i||44===i||46===i||58===i||59===i||63===i||95===i||126===i?(e.consume(i),r):38===i?(e.consume(i),a):93===i?(e.consume(i),o):60===i||null===i||Fne(i)||Lne(i)?t(i):n(i)}function o(e){return null===e||40===e||91===e||Fne(e)||Lne(e)?t(e):r(e)}function a(e){return xne(e)?i(e):n(e)}function i(t){return 59===t?(e.consume(t),r):xne(t)?(e.consume(t),i):n(t)}},partial:!0},Mde={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Cne(e)?n(e):t(e)}},partial:!0},Qde={tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!Wde.call(r,r.previous)||Xde(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Rde,e.attempt(Ude,e.attempt(Dde,o),n),n)(t)};function o(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Wde},Hde={tokenize:function(e,t,n){const r=this;let o="",a=!1;return function(t){if((72===t||104===t)&&Kde.call(r,r.previous)&&!Xde(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(t),e.consume(t),i;return n(t)};function i(t){if(xne(t)&&o.length<5)return o+=String.fromCodePoint(t),e.consume(t),i;if(58===t){const n=o.toLowerCase();if("http"===n||"https"===n)return e.consume(t),s}return n(t)}function s(t){return 47===t?(e.consume(t),a?c:(a=!0,s)):n(t)}function c(t){return null===t||Bne(t)||Fne(t)||Lne(t)||_ne(t)?n(t):e.attempt(Ude,e.attempt(Dde,l),n)(t)}function l(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Kde},zde={tokenize:function(e,t,n){const r=this;let o,a;return function(t){if(!qde(t)||!Gde.call(r,r.previous)||Xde(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),i(t)};function i(t){return qde(t)?(e.consume(t),i):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check(Mde,l,c)(t):45===t||95===t||Cne(t)?(a=!0,e.consume(t),s):l(t)}function c(t){return e.consume(t),o=!0,s}function l(i){return a&&o&&xne(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(i)):n(i)}},previous:Gde},Vde={};let jde=48;for(;jde<123;)Vde[jde]=zde,jde++,58===jde?jde=65:91===jde&&(jde=97);function Wde(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Fne(e)}function Kde(e){return!xne(e)}function Gde(e){return!(47===e||qde(e))}function qde(e){return 43===e||45===e||46===e||95===e||Cne(e)}function Xde(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}Vde[43]=zde,Vde[45]=zde,Vde[46]=zde,Vde[95]=zde,Vde[72]=[zde,Hde],Vde[104]=[zde,Hde],Vde[87]=[zde,Qde],Vde[119]=[zde,Qde];const Yde={tokenize:function(e,t,n){const r=this;return Rne(e,(function(e){const o=r.events[r.events.length-1];return o&&"gfmFootnoteDefinitionIndent"===o[1].type&&4===o[2].sliceSerialize(o[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function Zde(e,t,n){const r=this;let o=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i;for(;o--;){const e=r.events[o][1];if("labelImage"===e.type){i=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!i||!i._balanced)return n(o);const s=ire(r.sliceSerialize({start:i.end,end:r.now()}));if(94!==s.codePointAt(0)||!a.includes(s.slice(1)))return n(o);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)}}function Jde(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[e[r+1],e[r+2],["enter",o,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(r,e.length-r+1,...c),e}function $de(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(s){if(i>999||93===s&&!a||null===s||91===s||Fne(s))return n(s);if(93===s){e.exit("chunkString");const a=e.exit("gfmFootnoteCallString");return o.includes(ire(r.sliceSerialize(a)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return Fne(s)||(a=!0),i++,e.consume(s),92===s?l:c}function l(t){return 91===t||92===t||93===t?(e.consume(t),i++,c):c(t)}}function epe(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,i,s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),c};function c(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",l):n(t)}function l(t){if(s>999||93===t&&!i||null===t||91===t||Fne(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return a=ire(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),A}return Fne(t)||(i=!0),s++,e.consume(t),92===t?u:l}function u(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}function A(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o.includes(a)||o.push(a),Rne(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function tpe(e,t,n){return e.check(Mne,t,e.attempt(Yde,t,n))}function npe(e){e.exit("gfmFootnoteDefinition")}function rpe(e){let t=(e||{}).singleTilde;const n={tokenize:function(e,n,r){const o=this.previous,a=this.events;let i=0;return function(t){if(126===o&&"characterEscape"!==a[a.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(a){const c=Fre(o);if(126===a)return i>1?r(a):(e.consume(a),i++,s);if(i<2&&!t)return r(a);const l=e.exit("strikethroughSequenceTemporary"),u=Fre(a);return l._open=!u||2===u&&Boolean(c),l._close=!c||2===c&&Boolean(u),n(a)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const o={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},a={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i=[["enter",o,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",a,t]],s=t.parser.constructs.insideSpan.null;s&&dne(i,i.length,0,Xne(s,e.slice(r+1,n),t)),dne(i,i.length,0,[["exit",a,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",o,t]]),dne(e,r-1,n-r+3,i),n=r+i.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class ope{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let o=0;if(0===n&&0===r.length)return;for(;o<e.map.length;){if(e.map[o][0]===t)return e.map[o][1]+=n,void e.map[o][2].push(...r);o+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort((function(e,t){return e[0]-t[0]})),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let r=n.pop();for(;r;)e.push(...r),r=n.pop();this.map.length=0}}function ape(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if("enter"===o[0])"tableContent"===o[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===o[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===o[1].type)break}else"enter"===o[0]&&"tableDelimiterRow"===o[1].type&&(n=!0);t+=1}return r}function ipe(e,t,n){const r=this;let o,a=0,i=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const o=t>-1?r.events[t][1].type:null,a="tableHead"===o||"tableRow"===o?b:s;if(a===b&&r.parser.lazy[r.now().line])return n(e);return a(e)};function s(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return c(e);return o=!0,i+=1,c(e)}(t)}function c(t){return null===t?n(t):Nne(t)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A):n(t):Tne(t)?Rne(e,c,"whitespace")(t):(i+=1,o&&(o=!1,a+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),o=!0,c):(e.enter("data"),l(t)))}function l(t){return null===t||124===t||Fne(t)?(e.exit("data"),c(t)):(e.consume(t),92===t?u:l)}function u(t){return 92===t||124===t?(e.consume(t),l):l(t)}function A(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),o=!1,Tne(t)?Rne(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?p(t):124===t?(o=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),d):v(t)}function d(t){return Tne(t)?Rne(e,p,"whitespace")(t):p(t)}function p(t){return 58===t?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),f):45===t?(i+=1,f(t)):null===t||Nne(t)?y(t):v(t)}function f(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):v(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):(e.exit("tableDelimiterFiller"),m(t))}function m(t){return Tne(t)?Rne(e,y,"whitespace")(t):y(t)}function y(n){return 124===n?h(n):(null===n||Nne(n))&&o&&a===i?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):v(n)}function v(e){return n(e)}function b(t){return e.enter("tableRow"),w(t)}function w(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),w):null===n||Nne(n)?(e.exit("tableRow"),t(n)):Tne(n)?Rne(e,w,"whitespace")(n):(e.enter("data"),x(n))}function x(t){return null===t||124===t||Fne(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?C:x)}function C(t){return 92===t||124===t?(e.consume(t),x):x(t)}}function spe(e,t){let n,r,o,a=-1,i=!0,s=0,c=[0,0,0,0],l=[0,0,0,0],u=!1,A=0;const h=new ope;for(;++a<e.length;){const d=e[a],p=d[1];"enter"===d[0]?"tableHead"===p.type?(u=!1,0!==A&&(lpe(h,t,A,n,r),r=void 0,A=0),n={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(a,0,[["enter",n,t]])):"tableRow"===p.type||"tableDelimiterRow"===p.type?(i=!0,o=void 0,c=[0,0,0,0],l=[0,a+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(a,0,[["enter",r,t]])),s="tableDelimiterRow"===p.type?2:r?3:1):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type?"tableCellDivider"===p.type&&(i?i=!1:(0!==c[1]&&(l[0]=l[1],o=cpe(h,t,c,s,void 0,o)),c=l,l=[c[1],a,0,0])):(i=!1,0===l[2]&&(0!==c[1]&&(l[0]=l[1],o=cpe(h,t,c,s,void 0,o),c=[0,0,0,0]),l[2]=a)):"tableHead"===p.type?(u=!0,A=a):"tableRow"===p.type||"tableDelimiterRow"===p.type?(A=a,0!==c[1]?(l[0]=l[1],o=cpe(h,t,c,s,a,o)):0!==l[1]&&(o=cpe(h,t,l,s,a,o)),s=0):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type||(l[3]=a)}for(0!==A&&lpe(h,t,A,n,r),h.consume(t.events),a=-1;++a<t.events.length;){const e=t.events[a];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=ape(t.events,a))}return e}function cpe(e,t,n,r,o,a){const i=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(a.end=Object.assign({},upe(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const s=upe(t.events,n[1]);if(a={type:i,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",a,t]]),0!==n[2]){const o=upe(t.events,n[2]),a=upe(t.events,n[3]),i={type:"tableContent",start:Object.assign({},o),end:Object.assign({},a)};if(e.add(n[2],0,[["enter",i,t]]),2!==r){const r=t.events[n[2]],o=t.events[n[3]];if(r[1].end=Object.assign({},o[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",i,t]])}return void 0!==o&&(a.end=Object.assign({},upe(t.events,o)),e.add(o,0,[["exit",a,t]]),a=void 0),a}function lpe(e,t,n,r,o){const a=[],i=upe(t.events,n);o&&(o.end=Object.assign({},i),a.push(["exit",o,t])),r.end=Object.assign({},i),a.push(["exit",r,t]),e.add(n+1,0,a)}function upe(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const Ape={tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),o};function o(t){return Fne(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):n(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),i):n(t)}function i(r){return Nne(r)?t(r):Tne(r)?e.check({tokenize:hpe},t,n)(r):n(r)}}};function hpe(e,t,n){return Rne(e,(function(e){return null===e?n(e):t(e)}),"whitespace")}const dpe={};function ppe(e){const t=e||dpe,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),o=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),a=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return yne([{text:Vde},{document:{91:{tokenize:epe,continuation:{tokenize:tpe},exit:npe}},text:{91:{tokenize:$de},93:{add:"after",tokenize:Zde,resolveTo:Jde}}},rpe(e),{flow:{null:{tokenize:ipe,resolveAll:spe}}},{text:{91:Ape}}])}(t)),o.push([{transforms:[Phe],enter:{literalAutolink:_he,literalAutolinkEmail:Lhe,literalAutolinkHttp:Lhe,literalAutolinkWww:Lhe},exit:{literalAutolink:Dhe,literalAutolinkEmail:Uhe,literalAutolinkHttp:Ohe,literalAutolinkWww:Rhe}},{enter:{gfmFootnoteDefinition:zhe,gfmFootnoteDefinitionLabelString:Vhe,gfmFootnoteCall:Khe,gfmFootnoteCallString:Ghe},exit:{gfmFootnoteDefinition:Whe,gfmFootnoteDefinitionLabelString:jhe,gfmFootnoteCall:Xhe,gfmFootnoteCallString:qhe}},{canContainEols:["delete"],enter:{strikethrough:ede},exit:{strikethrough:tde}},{enter:{table:kde,tableData:Ede,tableHeader:Ede,tableRow:Sde},exit:{codeText:Nde,table:Bde,tableData:Ide,tableHeader:Ide,tableRow:Ide}},{exit:{taskListCheckValueChecked:_de,taskListCheckValueUnchecked:_de,paragraph:Lde}}]),a.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Fhe,notInConstruct:The},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Fhe,notInConstruct:The},{character:":",before:"[ps]",after:"\\/",inConstruct:Fhe,notInConstruct:The}]},{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:Zhe,footnoteReference:Yhe}},{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$he}],handlers:{delete:nde}},Tde(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Ode}}]}}(t))}const fpe=()=>{const[e,t]=(0,F.useState)(!1),[n,r]=(0,F.useState)("");(0,F.useEffect)((()=>{fetch("TakePhotoGuide.md").then((e=>e.text())).then((e=>r(e))).catch((e=>console.error("Error loading the markdown file:",e)))}),[]);return(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("div",{className:"flex justify-center items-center",children:(0,ev.jsx)("button",{onClick:()=>{t(!0)},className:"text-center text-blue-500 underline",children:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng"})}),(0,ev.jsx)(Bhe,{title:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng",open:e,onOk:()=>{t(!1)},onCancel:()=>{t(!1)},width:800,children:(0,ev.jsx)(mae,{remarkPlugins:[ppe],children:n,components:{h1:e=>{let{node:t,...n}=e;return(0,ev.jsx)("h1",{style:{fontSize:"3em",fontWeight:"bold"},...n})},h2:e=>{let{node:t,...n}=e;return(0,ev.jsx)("h2",{style:{fontSize:"2em",fontWeight:"bold"},...n})},ul:e=>{let{node:t,...n}=e;return(0,ev.jsx)("ul",{style:{listStyleType:"circle",paddingLeft:"20px",fontSize:"1.5em"},...n})},p:e=>{let{node:t,...n}=e;return(0,ev.jsx)("p",{style:{fontSize:"1.5em"},...n})}}})})]})},gpe=()=>(0,ev.jsxs)("div",{className:"upload-container",children:[(0,ev.jsx)("h1",{className:"text-2xl font-bold text-center",children:"T\u1ea3i \u1ea3nh l\xean"}),(0,ev.jsx)(fpe,{})," ",(0,ev.jsx)("div",{className:"upload-crop-section",children:(0,ev.jsx)(ov,{})}),(0,ev.jsx)("div",{className:"segment-section",children:(0,ev.jsx)(Gee,{})})]}),mpe=e=>sessionStorage.getItem(e),ype=(e,t)=>{const n=document.createElement("canvas"),r=n.getContext("2d"),o=new Image;o.src=e,o.onload=()=>{n.width=o.width,n.height=o.height,r.drawImage(o,0,0),Caman(n,(function(){this.contrast(25),this.sharpen(25),this.render((()=>{const e=n.toDataURL("image/png");sessionStorage.setItem("contrastShapesImage",e),t&&t(e)}))}))},o.onerror=()=>{console.error("L\u1ed7i khi t\u1ea3i h\xecnh \u1ea3nh.")}},vpe=e=>{let{imageUrl:t,onClose:n}=e;return(0,ev.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,ev.jsxs)("div",{className:"modal-content bg-white rounded-lg p-4 max-w-md mx-4 my-8",children:[(0,ev.jsx)("img",{src:t,alt:"Large Image",className:"max-w-full max-h-96"}),(0,ev.jsx)("div",{className:"text-center mt-4",children:(0,ev.jsx)("button",{onClick:n,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"\u0110\xf3ng"})})]})})},bpe=()=>{const[e,t]=(0,F.useState)(null),[n,r]=(0,F.useState)(null),[o,a]=(0,F.useState)(null),i=mpe("croppedImage"),s=mpe("segmentedImage"),[c,l]=(0,F.useState)(null),u=e=>{l(e)};return(0,F.useEffect)((()=>{window.cv&&window.cv.imread&&s&&((e,t)=>{if(!window.cv)return void console.error("OpenCV kh\xf4ng s\u1eb5n s\xe0ng.");const n=new Image;n.src=e,n.onload=()=>{let e=cv.imread(n),r=e.rows,o=e.cols;console.log("width: ",o," height: ",r);let a=30,i=[],s=[],c=!1,l=!1,u=!1,A=!1,h=0,d=0,p=0;function f(e,t,n){let r=e.ucharPtr(n,t);return[r[0],r[1],r[2]]}for(let t=0;t<r;t++){for(let n=0;n<o;n++){let[r,i,l]=f(e,n,t);if(r+i+l>a&&n<o/2){c=!0,s.push([n,t]);break}}if(c)break}for(let t=0;t<o;t++){for(let n=0;n<r;n++){let[r,o,i]=f(e,t,n);if(r+o+i>a){l=!0,s.push([t,n]);break}}if(l)break}let g=s[1][0],m=s[0][1];for(;;){let[t,n,r]=f(e,g,m);if(t+n+r>a){i.push([g,m]);break}g+=1,m+=1}s=[];for(let t=0;t<r;t++){for(let n=o-1;n>=0;n--){let[r,i,c]=f(e,n,t);if(r+i+c>a&&n>o/2){u=!0,s.push([n,t]);break}}if(u)break}for(let t=o-1;t>=0;t--){for(let n=0;n<r;n++){let[r,o,i]=f(e,t,n);if(r+o+i>a){A=!0,s.push([t,n]);break}}if(A)break}for(g=s[1][0],m=s[0][1];;){let[t,n,r]=f(e,g,m);if(t+n+r>a){i.push([g,m]);break}g-=1,m+=1}h=Math.floor((i[0][0]+i[1][0])/2),c=l=u=A=!1;for(let t=0;t<r;t++){let[n,r,o]=f(e,h,t);if(n+r+o>a){i.push([h,t]);break}}for(let t=r-1;t>=0;t--){let[n,r,o]=f(e,h,t);if(n+r+o>a){i.push([h,t]);break}}d=Math.floor((i[3][1]-i[2][1])/3)+i[2][1],p=Math.floor((i[3][1]-i[2][1])/3*2)+i[2][1];let y=Math.floor((p+d)/2),v=y-d+p,b=Math.floor((y-d)/2)+v;for(let t=0;t<o;t++){let[n,r,o]=f(e,t,d);if(n+r+o>a){i.push([t,d]);break}}for(let t=o-1;t>=0;t--){let[n,r,o]=f(e,t,d);if(n+r+o>a){i.push([t,d]);break}}for(let t=0;t<o;t++){let[n,r,o]=f(e,t,y);if(n+r+o>a){i.push([t,y]);break}}for(let t=o-1;t>=0;t--){let[n,r,o]=f(e,t,y);if(n+r+o>a){i.push([t,y]);break}}for(let t=0;t<o;t++){let[n,r,o]=f(e,t,p);if(n+r+o>a){i.push([t,p]);break}}for(let t=o-1;t>=0;t--){let[n,r,o]=f(e,t,p);if(n+r+o>a){i.push([t,p]);break}}for(let t=0;t<o;t++){let[n,r,o]=f(e,t,v);if(n+r+o>a){i.push([t,v]);break}}for(let t=o-1;t>=0;t--){let[n,r,o]=f(e,t,v);if(n+r+o>a){i.push([t,v]);break}}for(let t=0;t<o;t++){let[n,r,o]=f(e,t,b);if(n+r+o>a){i.push([t,b]);break}}for(let t=o-1;t>=0;t--){let[n,r,o]=f(e,t,b);if(n+r+o>a){i.push([t,b]);break}}i.forEach(((t,n)=>{t[0];let r=new cv.Point(t[0],t[1]);cv.circle(e,r,2,[255,255,255,255],4)})),cv.line(e,new cv.Point(i[4][0],i[4][1]),new cv.Point(i[5][0],i[5][1]),[255,255,255,255],2);let w=new cv.Point(Math.floor((i[0][0]+i[1][0]+i[3][0])/3),Math.floor((i[0][1]+i[1][1]+i[3][1])/3));cv.circle(e,w,2,[255,255,255,255],4);let x=[],C=.15*(i[5][0]-i[4][0]);x.push([Math.floor(i[4][0]+C),i[4][1]]),x.push([Math.floor(i[5][0]-C),i[5][1]]),[6,7,8,9,10,11,12,13,3].forEach((e=>{let t=Math.sqrt(Math.pow(w.x-i[e][0],2)+Math.pow(w.y-i[e][1],2)),n=C/t;x.push([Math.floor((w.x-i[e][0])*n+i[e][0]),Math.floor((w.y-i[e][1])*n+i[e][1])])}));let k=[x[0],x[2],x[4],x[6],x[8],x[x.length-1],x[9],x[7],x[5],x[3],x[1]],B=cv.matFromArray(k.length,1,cv.CV_32SC2,[].concat(...k)),S=new cv.MatVector;S.push_back(B),cv.polylines(e,S,!0,[255,255,255,255],2),B.delete(),S.delete(),cv.line(e,new cv.Point(i[10][0],i[10][1]),new cv.Point(x[6][0],x[6][1]),[255,255,255,255],2),cv.line(e,new cv.Point(i[11][0],i[11][1]),new cv.Point(x[7][0],x[7][1]),[255,255,255,255],2);const I=document.createElement("canvas");cv.imshow(I,e);const E=I.toDataURL("image/png");sessionStorage.setItem("detectAreaImage",E),e.delete(),t&&"function"===typeof t&&t()},n.onerror=()=>{console.error("L\u1ed7i khi t\u1ea3i h\xecnh \u1ea3nh.")}})(s,(()=>{const e=mpe("detectAreaImage");r(e),((e,t)=>{if(!window.cv)return void console.error("OpenCV kh\xf4ng s\u1eb5n s\xe0ng.");const n=new Image;n.src=e,n.onload=()=>{const e=cv.imread(n),r=new cv.Mat;cv.cvtColor(e,r,cv.COLOR_RGB2HSV);let o=new cv.MatVector;cv.split(r,o);let a=o.get(0),i=o.get(1),s=o.get(2),c=new cv.MatVector;c.push_back(a),c.push_back(i),c.push_back(s);let l=new cv.Mat;cv.merge(c,l);const u=document.createElement("canvas");cv.imshow(u,l);const A=u.toDataURL("image/png");sessionStorage.setItem("hsvImage",A),e.delete(),r.delete(),a.delete(),i.delete(),s.delete(),l.delete(),o.delete(),c.delete(),t&&"function"===typeof t&&t()},n.onerror=()=>{console.error("L\u1ed7i khi t\u1ea3i h\xecnh \u1ea3nh.")}})(e,(()=>{const e=mpe("hsvImage");t(e)})),ype(e,(()=>{const e=mpe("contrastShapesImage");a(e)}))}))}),[s]),(0,ev.jsxs)("div",{className:"flex justify-start items-center space-x-4 overflow-x-auto max-w-screen-sm mx-auto pl-4 p-4",children:[(0,ev.jsx)("img",{src:i,alt:"Cropped",className:"w-[150px] h-auto",onClick:()=>u(i)}),(0,ev.jsx)("img",{src:s,alt:"Segmented",className:"w-[150px] h-auto",onClick:()=>u(s)}),n&&(0,ev.jsx)("img",{src:n,alt:"Area Image",className:"w-[150px] h-auto",onClick:()=>u(n)}),o&&(0,ev.jsx)("img",{src:o,alt:"Contrast Image",className:"w-[150px] h-auto",onClick:()=>u(o)}),e&&(0,ev.jsx)("img",{src:e,alt:"HSV Image",className:"w-[150px] h-auto",onClick:()=>u(e)}),c&&(0,ev.jsx)(vpe,{imageUrl:c,onClose:()=>{l(null)}})]})};var wpe=e=>"checkbox"===e.type,xpe=e=>e instanceof Date,Cpe=e=>null==e;const kpe=e=>"object"===typeof e;var Bpe=e=>!Cpe(e)&&!Array.isArray(e)&&kpe(e)&&!xpe(e),Spe=e=>Bpe(e)&&e.target?wpe(e.target)?e.target.checked:e.target.value:e,Ipe=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Epe=e=>{const t=e.constructor&&e.constructor.prototype;return Bpe(t)&&t.hasOwnProperty("isPrototypeOf")},Npe="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Fpe(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Npe&&(e instanceof Blob||e instanceof FileList)||!n&&!Bpe(e))return e;if(t=n?[]:{},n||Epe(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Fpe(e[n]));else t=e}return t}var Tpe=e=>Array.isArray(e)?e.filter(Boolean):[],_pe=e=>void 0===e,Lpe=(e,t,n)=>{if(!t||!Bpe(e))return n;const r=Tpe(t.split(/[,[\].]+?/)).reduce(((e,t)=>Cpe(e)?e:e[t]),e);return _pe(r)||r===e?_pe(e[t])?n:e[t]:r},Ope=e=>"boolean"===typeof e;const Rpe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Upe={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Dpe="max",Ppe="min",Mpe="maxLength",Qpe="minLength",Hpe="pattern",zpe="required",Vpe="validate";F.createContext(null);var jpe=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(o,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Upe.all&&(t._proxyFormState[o]=!r||Upe.all),n&&(n[o]=!0),e[o]}});return o},Wpe=e=>Bpe(e)&&!Object.keys(e).length,Kpe=(e,t,n,r)=>{n(e);const{name:o,...a}=e;return Wpe(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!r||Upe.all)))},Gpe=e=>Array.isArray(e)?e:[e];function qpe(e){const t=F.useRef(e);t.current=e,F.useEffect((()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}}),[e.disabled])}var Xpe=e=>"string"===typeof e,Ype=(e,t,n,r,o)=>Xpe(e)?(r&&t.watch.add(e),Lpe(n,e,o)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),Lpe(n,e)))):(r&&(t.watchAll=!0),n);var Zpe=e=>/^\w*$/.test(e),Jpe=e=>Tpe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),$pe=(e,t,n)=>{let r=-1;const o=Zpe(t)?[t]:Jpe(t),a=o.length,i=a-1;for(;++r<a;){const t=o[r];let a=n;if(r!==i){const n=e[t];a=Bpe(n)||Array.isArray(n)?n:isNaN(+o[r+1])?{}:[]}e[t]=a,e=e[t]}return e};var efe=(e,t,n,r,o)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:o||!0}}:{},tfe=e=>({isOnSubmit:!e||e===Upe.onSubmit,isOnBlur:e===Upe.onBlur,isOnChange:e===Upe.onChange,isOnAll:e===Upe.all,isOnTouch:e===Upe.onTouched}),nfe=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const rfe=(e,t,n,r)=>{for(const o of n||Object.keys(e)){const n=Lpe(e,o);if(n){const{_f:e,...a}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],o)&&!r)break;if(e.ref&&t(e.ref,e.name)&&!r)break;rfe(a,t)}else Bpe(a)&&rfe(a,t)}}};var ofe=(e,t,n)=>{const r=Tpe(Lpe(e,n));return $pe(r,"root",t[n]),$pe(e,n,r),e},afe=e=>"file"===e.type,ife=e=>"function"===typeof e,sfe=e=>{if(!Npe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cfe=e=>Xpe(e),lfe=e=>"radio"===e.type,ufe=e=>e instanceof RegExp;const Afe={value:!1,isValid:!1},hfe={value:!0,isValid:!0};var dfe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!_pe(e[0].attributes.value)?_pe(e[0].value)||""===e[0].value?hfe:{value:e[0].value,isValid:!0}:hfe:Afe}return Afe};const pfe={isValid:!1,value:null};var ffe=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),pfe):pfe;function gfe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(cfe(e)||Array.isArray(e)&&e.every(cfe)||Ope(e)&&!e)return{type:n,message:cfe(e)?e:"",ref:t}}var mfe=e=>Bpe(e)&&!ufe(e)?e:{value:e,message:""},yfe=async(e,t,n,r,o)=>{const{ref:a,refs:i,required:s,maxLength:c,minLength:l,min:u,max:A,pattern:h,validate:d,name:p,valueAsNumber:f,mount:g,disabled:m}=e._f,y=Lpe(t,p);if(!g||m)return{};const v=i?i[0]:a,b=e=>{r&&v.reportValidity&&(v.setCustomValidity(Ope(e)?"":e||""),v.reportValidity())},w={},x=lfe(a),C=wpe(a),k=x||C,B=(f||afe(a))&&_pe(a.value)&&_pe(y)||sfe(a)&&""===a.value||""===y||Array.isArray(y)&&!y.length,S=efe.bind(null,p,n,w),I=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Mpe,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qpe;const i=e?t:n;w[p]={type:e?r:o,message:i,ref:a,...S(e?r:o,i)}};if(o?!Array.isArray(y)||!y.length:s&&(!k&&(B||Cpe(y))||Ope(y)&&!y||C&&!dfe(i).isValid||x&&!ffe(i).isValid)){const{value:e,message:t}=cfe(s)?{value:!!s,message:s}:mfe(s);if(e&&(w[p]={type:zpe,message:t,ref:v,...S(zpe,t)},!n))return b(t),w}if(!B&&(!Cpe(u)||!Cpe(A))){let e,t;const r=mfe(A),o=mfe(u);if(Cpe(y)||isNaN(y)){const n=a.valueAsDate||new Date(y),i=e=>new Date((new Date).toDateString()+" "+e),s="time"==a.type,c="week"==a.type;Xpe(r.value)&&y&&(e=s?i(y)>i(r.value):c?y>r.value:n>new Date(r.value)),Xpe(o.value)&&y&&(t=s?i(y)<i(o.value):c?y<o.value:n<new Date(o.value))}else{const n=a.valueAsNumber||(y?+y:y);Cpe(r.value)||(e=n>r.value),Cpe(o.value)||(t=n<o.value)}if((e||t)&&(I(!!e,r.message,o.message,Dpe,Ppe),!n))return b(w[p].message),w}if((c||l)&&!B&&(Xpe(y)||o&&Array.isArray(y))){const e=mfe(c),t=mfe(l),r=!Cpe(e.value)&&y.length>+e.value,o=!Cpe(t.value)&&y.length<+t.value;if((r||o)&&(I(r,e.message,t.message),!n))return b(w[p].message),w}if(h&&!B&&Xpe(y)){const{value:e,message:t}=mfe(h);if(ufe(e)&&!y.match(e)&&(w[p]={type:Hpe,message:t,ref:a,...S(Hpe,t)},!n))return b(t),w}if(d)if(ife(d)){const e=gfe(await d(y,t),v);if(e&&(w[p]={...e,...S(Vpe,e.message)},!n))return b(e.message),w}else if(Bpe(d)){let e={};for(const r in d){if(!Wpe(e)&&!n)break;const o=gfe(await d[r](y,t),v,r);o&&(e={...o,...S(r,o.message)},b(o.message),n&&(w[p]=e))}if(!Wpe(e)&&(w[p]={ref:v,...e},!n))return w}return b(!0),w};function vfe(e,t){const n=Array.isArray(t)?t:Zpe(t)?[t]:Jpe(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=_pe(e)?r++:e[t[r++]];return e}(e,n),o=n.length-1,a=n[o];return r&&delete r[a],0!==o&&(Bpe(r)&&Wpe(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!_pe(e[t]))return!1;return!0}(r))&&vfe(e,n.slice(0,-1)),e}var bfe=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},wfe=e=>Cpe(e)||!kpe(e);function xfe(e,t){if(wfe(e)||wfe(t))return e===t;if(xpe(e)&&xpe(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){const n=e[o];if(!r.includes(o))return!1;if("ref"!==o){const e=t[o];if(xpe(n)&&xpe(e)||Bpe(n)&&Bpe(e)||Array.isArray(n)&&Array.isArray(e)?!xfe(n,e):n!==e)return!1}}return!0}var Cfe=e=>"select-multiple"===e.type,kfe=e=>lfe(e)||wpe(e),Bfe=e=>sfe(e)&&e.isConnected,Sfe=e=>{for(const t in e)if(ife(e[t]))return!0;return!1};function Ife(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(Bpe(e)||n)for(const r in e)Array.isArray(e[r])||Bpe(e[r])&&!Sfe(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Ife(e[r],t[r])):Cpe(e[r])||(t[r]=!0);return t}function Efe(e,t,n){const r=Array.isArray(e);if(Bpe(e)||r)for(const o in e)Array.isArray(e[o])||Bpe(e[o])&&!Sfe(e[o])?_pe(t)||wfe(n[o])?n[o]=Array.isArray(e[o])?Ife(e[o],[]):{...Ife(e[o])}:Efe(e[o],Cpe(t)?{}:t[o],n[o]):n[o]=!xfe(e[o],t[o]);return n}var Nfe=(e,t)=>Efe(e,t,Ife(t)),Ffe=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:o}=t;return _pe(e)?e:n?""===e?NaN:e?+e:e:r&&Xpe(e)?new Date(e):o?o(e):e};function Tfe(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return afe(t)?t.files:lfe(t)?ffe(e.refs).value:Cfe(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):wpe(t)?dfe(e.refs).value:Ffe(_pe(t.value)?e.ref.value:t.value,e)}var _fe=(e,t,n,r)=>{const o={};for(const a of e){const e=Lpe(t,a);e&&$pe(o,a,e._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:r}},Lfe=e=>_pe(e)?e:ufe(e)?e.source:Bpe(e)?ufe(e.value)?e.value.source:e.value:e,Ofe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Rfe(e,t,n){const r=Lpe(e,n);if(r||Zpe(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const r=o.join("."),a=Lpe(t,r),i=Lpe(e,r);if(a&&!Array.isArray(a)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};o.pop()}return{name:n}}var Ufe=(e,t,n,r,o)=>!o.isOnAll&&(!n&&o.isOnTouch?!(t||e):(n?r.isOnBlur:o.isOnBlur)?!e:!(n?r.isOnChange:o.isOnChange)||e),Dfe=(e,t)=>!Tpe(Lpe(e,t)).length&&vfe(e,t);const Pfe={mode:Upe.onSubmit,reValidateMode:Upe.onChange,shouldFocusError:!0};function Mfe(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r={...Pfe,...t},o={submitCount:0,isDirty:!1,isLoading:ife(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},i=(Bpe(r.defaultValues)||Bpe(r.values))&&Fpe(r.defaultValues||r.values)||{},s=r.shouldUnregister?{}:Fpe(i),c={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const A={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:bfe(),array:bfe(),state:bfe()},d=tfe(r.mode),p=tfe(r.reValidateMode),f=r.criteriaMode===Upe.all,g=async e=>{if(A.isValid||e){const e=r.resolver?Wpe((await w()).errors):await x(a,!0);e!==o.isValid&&h.state.next({isValid:e})}},m=e=>A.isValidating&&h.state.next({isValidating:e}),y=(e,t,n,r)=>{const o=Lpe(a,e);if(o){const a=Lpe(s,e,_pe(n)?Lpe(i,e):n);_pe(a)||r&&r.defaultChecked||t?$pe(s,e,t?a:Tfe(o._f)):B(e,a),c.mount&&g()}},v=(e,t,n,r,s)=>{let c=!1,l=!1;const u={name:e},d=!(!Lpe(a,e)||!Lpe(a,e)._f.disabled);if(!n||r){A.isDirty&&(l=o.isDirty,o.isDirty=u.isDirty=C(),c=l!==u.isDirty);const n=d||xfe(Lpe(i,e),t);l=!(d||!Lpe(o.dirtyFields,e)),n||d?vfe(o.dirtyFields,e):$pe(o.dirtyFields,e,!0),u.dirtyFields=o.dirtyFields,c=c||A.dirtyFields&&l!==!n}if(n){const t=Lpe(o.touchedFields,e);t||($pe(o.touchedFields,e,n),u.touchedFields=o.touchedFields,c=c||A.touchedFields&&t!==n)}return c&&s&&h.state.next(u),c?u:{}},b=(n,r,a,i)=>{const s=Lpe(o.errors,n),c=A.isValid&&Ope(r)&&o.isValid!==r;if(t.delayError&&a?(e=(e=>t=>{clearTimeout(u),u=setTimeout(e,t)})((()=>((e,t)=>{$pe(o.errors,e,t),h.state.next({errors:o.errors})})(n,a))),e(t.delayError)):(clearTimeout(u),e=null,a?$pe(o.errors,n,a):vfe(o.errors,n)),(a?!xfe(s,a):s)||!Wpe(i)||c){const e={...i,...c&&Ope(r)?{isValid:r}:{},errors:o.errors,name:n};o={...o,...e},h.state.next(e)}m(!1)},w=async e=>r.resolver(s,r.context,_fe(e||l.mount,a,r.criteriaMode,r.shouldUseNativeValidation)),x=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const a in e){const i=e[a];if(i){const{_f:e,...a}=i;if(e){const a=l.array.has(e.name),c=await yfe(i,s,f,r.shouldUseNativeValidation&&!t,a);if(c[e.name]&&(n.valid=!1,t))break;!t&&(Lpe(c,e.name)?a?ofe(o.errors,c,e.name):$pe(o.errors,e.name,c[e.name]):vfe(o.errors,e.name))}a&&await x(a,t,n)}}return n.valid},C=(e,t)=>(e&&t&&$pe(s,e,t),!xfe(T(),i)),k=(e,t,n)=>Ype(e,l,{...c.mount?s:_pe(t)?i:Xpe(e)?{[e]:t}:t},n,t),B=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Lpe(a,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&$pe(s,e,Ffe(t,n)),o=sfe(n.ref)&&Cpe(t)?"":t,Cfe(n.ref)?[...n.ref.options].forEach((e=>e.selected=o.includes(e.value))):n.refs?wpe(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value))):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((e=>e.checked=e.value===o)):afe(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||h.values.next({name:e,values:{...s}})))}(n.shouldDirty||n.shouldTouch)&&v(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&F(e)},S=(e,t,n)=>{for(const r in t){const o=t[r],i="".concat(e,".").concat(r),s=Lpe(a,i);!l.array.has(e)&&wfe(o)&&(!s||s._f)||xpe(o)?B(i,o,n):S(i,o,n)}},I=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const u=Lpe(a,e),d=l.array.has(e),p=Fpe(t);$pe(s,e,p),d?(h.array.next({name:e,values:{...s}}),(A.isDirty||A.dirtyFields)&&r.shouldDirty&&h.state.next({name:e,dirtyFields:Nfe(i,s),isDirty:C(e,p)})):!u||u._f||Cpe(p)?B(e,p,r):S(e,p,r),nfe(e,l)&&h.state.next({...o}),h.values.next({name:e,values:{...s}}),!c.mount&&n()},E=async t=>{const n=t.target;let i=n.name,c=!0;const u=Lpe(a,i),y=e=>{c=Number.isNaN(e)||e===Lpe(s,i,e)};if(u){let C,k;const B=n.type?Tfe(u._f):Spe(t),S=t.type===Rpe.BLUR||t.type===Rpe.FOCUS_OUT,I=!Ofe(u._f)&&!r.resolver&&!Lpe(o.errors,i)&&!u._f.deps||Ufe(S,Lpe(o.touchedFields,i),o.isSubmitted,p,d),E=nfe(i,l,S);$pe(s,i,B),S?(u._f.onBlur&&u._f.onBlur(t),e&&e(0)):u._f.onChange&&u._f.onChange(t);const N=v(i,B,S,!1),T=!Wpe(N)||E;if(!S&&h.values.next({name:i,type:t.type,values:{...s}}),I)return A.isValid&&g(),T&&h.state.next({name:i,...E?{}:N});if(!S&&E&&h.state.next({...o}),m(!0),r.resolver){const{errors:e}=await w([i]);if(y(B),c){const t=Rfe(o.errors,a,i),n=Rfe(e,a,t.name||i);C=n.error,i=n.name,k=Wpe(e)}}else C=(await yfe(u,s,f,r.shouldUseNativeValidation))[i],y(B),c&&(C?k=!1:A.isValid&&(k=await x(a,!0)));c&&(u._f.deps&&F(u._f.deps),b(i,k,C,N))}},N=(e,t)=>{if(Lpe(o.errors,t)&&e.focus)return e.focus(),1},F=async function(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Gpe(e);if(m(!0),r.resolver){const r=await(async e=>{const{errors:t}=await w(e);if(e)for(const n of e){const e=Lpe(t,n);e?$pe(o.errors,n,e):vfe(o.errors,n)}else o.errors=t;return t})(_pe(e)?e:s);t=Wpe(r),n=e?!s.some((e=>Lpe(r,e))):t}else e?(n=(await Promise.all(s.map((async e=>{const t=Lpe(a,e);return await x(t&&t._f?{[e]:t}:t)})))).every(Boolean),(n||o.isValid)&&g()):n=t=await x(a);return h.state.next({...!Xpe(e)||A.isValid&&t!==o.isValid?{}:{name:e},...r.resolver||!e?{isValid:t}:{},errors:o.errors,isValidating:!1}),i.shouldFocus&&!n&&rfe(a,N,e?s:l.mount),n},T=e=>{const t={...i,...c.mount?s:{}};return _pe(e)?t:Xpe(e)?Lpe(t,e):e.map((e=>Lpe(t,e)))},_=(e,t)=>({invalid:!!Lpe((t||o).errors,e),isDirty:!!Lpe((t||o).dirtyFields,e),isTouched:!!Lpe((t||o).touchedFields,e),error:Lpe((t||o).errors,e)}),L=(e,t,n)=>{const r=(Lpe(a,e,{_f:{}})._f||{}).ref;$pe(o.errors,e,{...t,ref:r}),h.state.next({name:e,errors:o.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n of e?Gpe(e):l.mount)l.mount.delete(n),l.array.delete(n),t.keepValue||(vfe(a,n),vfe(s,n)),!t.keepError&&vfe(o.errors,n),!t.keepDirty&&vfe(o.dirtyFields,n),!t.keepTouched&&vfe(o.touchedFields,n),!r.shouldUnregister&&!t.keepDefaultValue&&vfe(i,n);h.values.next({values:{...s}}),h.state.next({...o,...t.keepDirty?{isDirty:C()}:{}}),!t.keepIsValid&&g()},R=e=>{let{disabled:t,name:n,field:r,fields:o,value:a}=e;if(Ope(t)){const e=t?void 0:_pe(a)?Tfe(r?r._f:Lpe(o,n)._f):a;$pe(s,n,e),v(n,e,!1,!1,!0)}},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Lpe(a,e);const o=Ope(t.disabled);return $pe(a,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n?R({field:n,disabled:t.disabled,name:e,value:t.value}):y(e,!0,t.value),{...o?{disabled:t.disabled}:{},...r.progressive?{required:!!t.required,min:Lfe(t.min),max:Lfe(t.max),minLength:Lfe(t.minLength),maxLength:Lfe(t.maxLength),pattern:Lfe(t.pattern)}:{},name:e,onChange:E,onBlur:E,ref:o=>{if(o){U(e,t),n=Lpe(a,e);const r=_pe(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,s=kfe(r),c=n._f.refs||[];if(s?c.find((e=>e===r)):r===n._f.ref)return;$pe(a,e,{_f:{...n._f,...s?{refs:[...c.filter(Bfe),r,...Array.isArray(Lpe(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),y(e,!1,void 0,r)}else n=Lpe(a,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!Ipe(l.array,e)||!c.action)&&l.unMount.add(e)}}},D=()=>r.shouldFocusError&&rfe(a,N,l.mount),P=(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let i=Fpe(s);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await w();o.errors=e,i=t}else await x(a);vfe(o.errors,"root"),Wpe(o.errors)?(h.state.next({errors:{}}),await e(i,n)):(t&&await t({...o.errors},n),D(),setTimeout(D)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wpe(o.errors),submitCount:o.submitCount+1,errors:o.errors})},M=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=e?Fpe(e):i,d=Fpe(u),p=e&&!Wpe(e)?d:i;if(r.keepDefaultValues||(i=u),!r.keepValues){if(r.keepDirtyValues)for(const e of l.mount)Lpe(o.dirtyFields,e)?$pe(p,e,Lpe(s,e)):I(e,Lpe(p,e));else{if(Npe&&_pe(e))for(const e of l.mount){const t=Lpe(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(sfe(e)){const t=e.closest("form");if(t){t.reset();break}}}}a={}}s=t.shouldUnregister?r.keepDefaultValues?Fpe(i):{}:Fpe(p),h.array.next({values:{...p}}),h.values.next({values:{...p}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!c.mount&&n(),c.mount=!A.isValid||!!r.keepIsValid,c.watch=!!t.shouldUnregister,h.state.next({submitCount:r.keepSubmitCount?o.submitCount:0,isDirty:r.keepDirty?o.isDirty:!(!r.keepDefaultValues||xfe(e,i)),isSubmitted:!!r.keepIsSubmitted&&o.isSubmitted,dirtyFields:r.keepDirtyValues?o.dirtyFields:r.keepDefaultValues&&e?Nfe(i,e):{},touchedFields:r.keepTouched?o.touchedFields:{},errors:r.keepErrors?o.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&o.isSubmitSuccessful,isSubmitting:!1})},Q=(e,t)=>M(ife(e)?e(s):e,t);return{control:{register:U,unregister:O,getFieldState:_,handleSubmit:P,setError:L,_executeSchema:w,_getWatch:k,_getDirty:C,_updateValid:g,_removeUnmounted:()=>{for(const e of l.unMount){const t=Lpe(a,e);t&&(t._f.refs?t._f.refs.every((e=>!Bfe(e))):!Bfe(t._f.ref))&&O(e)}l.unMount=new Set},_updateFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r&&n){if(c.action=!0,u&&Array.isArray(Lpe(a,e))){const t=n(Lpe(a,e),r.argA,r.argB);l&&$pe(a,e,t)}if(u&&Array.isArray(Lpe(o.errors,e))){const t=n(Lpe(o.errors,e),r.argA,r.argB);l&&$pe(o.errors,e,t),Dfe(o.errors,e)}if(A.touchedFields&&u&&Array.isArray(Lpe(o.touchedFields,e))){const t=n(Lpe(o.touchedFields,e),r.argA,r.argB);l&&$pe(o.touchedFields,e,t)}A.dirtyFields&&(o.dirtyFields=Nfe(i,s)),h.state.next({name:e,isDirty:C(e,t),dirtyFields:o.dirtyFields,errors:o.errors,isValid:o.isValid})}else $pe(s,e,t)},_updateDisabledField:R,_getFieldArray:e=>Tpe(Lpe(c.mount?s:i,e,t.shouldUnregister?Lpe(i,e,[]):[])),_reset:M,_resetDefaultValues:()=>ife(r.defaultValues)&&r.defaultValues().then((e=>{Q(e,r.resetOptions),h.state.next({isLoading:!1})})),_updateFormState:e=>{o={...o,...e}},_disableForm:e=>{Ope(e)&&(h.state.next({disabled:e}),rfe(a,((t,n)=>{let r=e;const o=Lpe(a,n);o&&Ope(o._f.disabled)&&(r||(r=o._f.disabled)),t.disabled=r}),0,!1))},_subjects:h,_proxyFormState:A,_setErrors:e=>{o.errors=e,h.state.next({errors:o.errors,isValid:!1})},get _fields(){return a},get _formValues(){return s},get _state(){return c},set _state(e){c=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return o},set _formState(e){o=e},get _options(){return r},set _options(e){r={...r,...e}}},trigger:F,register:U,handleSubmit:P,watch:(e,t)=>ife(e)?h.values.subscribe({next:n=>e(k(void 0,t),n)}):k(e,t,!0),setValue:I,getValues:T,reset:Q,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lpe(a,e)&&(_pe(t.defaultValue)?I(e,Fpe(Lpe(i,e))):(I(e,t.defaultValue),$pe(i,e,Fpe(t.defaultValue))),t.keepTouched||vfe(o.touchedFields,e),t.keepDirty||(vfe(o.dirtyFields,e),o.isDirty=t.defaultValue?C(e,Fpe(Lpe(i,e))):C()),t.keepError||(vfe(o.errors,e),A.isValid&&g()),h.state.next({...o}))},clearErrors:e=>{e&&Gpe(e).forEach((e=>vfe(o.errors,e))),h.state.next({errors:e?o.errors:{}})},unregister:O,setError:L,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Lpe(a,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:_}}function Qfe(e){return t=>!!t.type&&t.type.tabsRole===e}const Hfe=Qfe("Tab"),zfe=Qfe("TabList"),Vfe=Qfe("TabPanel");function jfe(e,t){return F.Children.map(e,(e=>null===e?null:function(e){return Hfe(e)||zfe(e)||Vfe(e)}(e)?t(e):e.props&&e.props.children&&"object"===typeof e.props.children?(0,F.cloneElement)(e,{...e.props,children:jfe(e.props.children,t)}):e))}function Wfe(e,t){return F.Children.forEach(e,(e=>{null!==e&&(Hfe(e)||Vfe(e)?t(e):e.props&&e.props.children&&"object"===typeof e.props.children&&(zfe(e)&&t(e),Wfe(e.props.children,t)))}))}function Kfe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Kfe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Gfe=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Kfe(e))&&(r&&(r+=" "),r+=t);return r};function qfe(e){let t=0;return Wfe(e,(e=>{Hfe(e)&&t++})),t}function Xfe(e){return e&&"getAttribute"in e}function Yfe(e){return Xfe(e)&&e.getAttribute("data-rttab")}function Zfe(e){return Xfe(e)&&"true"===e.getAttribute("aria-disabled")}let Jfe;const $fe={className:"react-tabs",focus:!1},ege=e=>{let t=(0,F.useRef)([]),n=(0,F.useRef)([]);const r=(0,F.useRef)();function o(t,n){if(t<0||t>=s())return;const{onSelect:r,selectedIndex:o}=e;r(t,o,n)}function a(e){const t=s();for(let n=e+1;n<t;n++)if(!Zfe(c(n)))return n;for(let n=0;n<e;n++)if(!Zfe(c(n)))return n;return e}function i(e){let t=e;for(;t--;)if(!Zfe(c(t)))return t;for(t=s();t-- >e;)if(!Zfe(c(t)))return t;return e}function s(){const{children:t}=e;return qfe(t)}function c(e){return t.current["tabs-".concat(e)]}function l(e){let t=e.target;do{if(u(t)){if(Zfe(t))return;return void o([].slice.call(t.parentNode.children).filter(Yfe).indexOf(t),e)}}while(null!=(t=t.parentNode))}function u(e){if(!Yfe(e))return!1;let t=e.parentElement;do{if(t===r.current)return!0;if(t.getAttribute("data-rttabs"))break;t=t.parentElement}while(t);return!1}const{children:A,className:h,disabledTabClassName:d,domRef:p,focus:f,forceRenderTabPanel:g,onSelect:m,selectedIndex:y,selectedTabClassName:v,selectedTabPanelClassName:b,environment:w,disableUpDownKeys:x,disableLeftRightKeys:C,...k}={...$fe,...e};return F.createElement("div",Object.assign({},k,{className:Gfe(h),onClick:l,onKeyDown:function(t){const{direction:n,disableUpDownKeys:r,disableLeftRightKeys:A}=e;if(u(t.target)){let{selectedIndex:u}=e,h=!1,d=!1;"Space"!==t.code&&32!==t.keyCode&&"Enter"!==t.code&&13!==t.keyCode||(h=!0,d=!1,l(t)),(A||37!==t.keyCode&&"ArrowLeft"!==t.code)&&(r||38!==t.keyCode&&"ArrowUp"!==t.code)?(A||39!==t.keyCode&&"ArrowRight"!==t.code)&&(r||40!==t.keyCode&&"ArrowDown"!==t.code)?35===t.keyCode||"End"===t.code?(u=function(){let e=s();for(;e--;)if(!Zfe(c(e)))return e;return null}(),h=!0,d=!0):36!==t.keyCode&&"Home"!==t.code||(u=function(){const e=s();for(let t=0;t<e;t++)if(!Zfe(c(t)))return t;return null}(),h=!0,d=!0):(u="rtl"===n?i(u):a(u),h=!0,d=!0):(u="rtl"===n?a(u):i(u),h=!0,d=!0),h&&t.preventDefault(),d&&o(u,t)}},ref:e=>{r.current=e,p&&p(e)},"data-rttabs":!0}),function(){let r=0;const{children:o,disabledTabClassName:a,focus:i,forceRenderTabPanel:l,selectedIndex:u,selectedTabClassName:A,selectedTabPanelClassName:h,environment:d}=e;n.current=n.current||[];let p=n.current.length-s();const f=(0,F.useId)();for(;p++<0;)n.current.push("".concat(f).concat(n.current.length));return jfe(o,(e=>{let o=e;if(zfe(e)){let r=0,s=!1;null==Jfe&&function(e){const t=e||("undefined"!==typeof window?window:void 0);try{Jfe=!("undefined"===typeof t||!t.document||!t.document.activeElement)}catch(rbe){Jfe=!1}}(d);const l=d||("undefined"!==typeof window?window:void 0);Jfe&&l&&(s=F.Children.toArray(e.props.children).filter(Hfe).some(((e,t)=>l.document.activeElement===c(t)))),o=(0,F.cloneElement)(e,{children:jfe(e.props.children,(e=>{const o="tabs-".concat(r),c=u===r,l={tabRef:e=>{t.current[o]=e},id:n.current[r],selected:c,focus:c&&(i||s)};return A&&(l.selectedClassName=A),a&&(l.disabledClassName=a),r++,(0,F.cloneElement)(e,l)}))})}else if(Vfe(e)){const t={id:n.current[r],selected:u===r};l&&(t.forceRender=l),h&&(t.selectedClassName=h),r++,o=(0,F.cloneElement)(e,t)}return o}))}())};ege.propTypes={};const tge=ege,nge={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},rge=e=>{const{children:t,defaultFocus:n,defaultIndex:r,focusTabOnClick:o,onSelect:a,...i}={...nge,...e},[s,c]=(0,F.useState)(n),[l]=(0,F.useState)((e=>null===e.selectedIndex?1:0)(i)),[u,A]=(0,F.useState)(1===l?r||0:null);if((0,F.useEffect)((()=>{c(!1)}),[]),1===l){const e=qfe(t);(0,F.useEffect)((()=>{if(null!=u){const t=Math.max(0,e-1);A(Math.min(u,t))}}),[e])}let h={...e,...i};return h.focus=s,h.onSelect=(e,t,n)=>{"function"===typeof a&&!1===a(e,t,n)||(o&&c(!0),1===l&&A(e))},null!=u&&(h.selectedIndex=u),delete h.defaultFocus,delete h.defaultIndex,delete h.focusTabOnClick,F.createElement(tge,h,t)};rge.propTypes={},rge.tabsRole="Tabs";const oge=rge,age={className:"react-tabs__tab-list"},ige=e=>{const{children:t,className:n,...r}={...age,...e};return F.createElement("ul",Object.assign({},r,{className:Gfe(n),role:"tablist"}),t)};ige.tabsRole="TabList",ige.propTypes={};const sge=ige,cge="react-tabs__tab",lge={className:cge,disabledClassName:"".concat(cge,"--disabled"),focus:!1,id:null,selected:!1,selectedClassName:"".concat(cge,"--selected")},uge=e=>{let t=(0,F.useRef)();const{children:n,className:r,disabled:o,disabledClassName:a,focus:i,id:s,selected:c,selectedClassName:l,tabIndex:u,tabRef:A,...h}={...lge,...e};return(0,F.useEffect)((()=>{c&&i&&t.current.focus()}),[c,i]),F.createElement("li",Object.assign({},h,{className:Gfe(r,{[l]:c,[a]:o}),ref:e=>{t.current=e,A&&A(e)},role:"tab",id:"tab".concat(s),"aria-selected":c?"true":"false","aria-disabled":o?"true":"false","aria-controls":"panel".concat(s),tabIndex:u||(c?"0":null),"data-rttab":!0}),n)};uge.propTypes={},uge.tabsRole="Tab";const Age=uge,hge="react-tabs__tab-panel",dge={className:hge,forceRender:!1,selectedClassName:"".concat(hge,"--selected")},pge=e=>{const{children:t,className:n,forceRender:r,id:o,selected:a,selectedClassName:i,...s}={...dge,...e};return F.createElement("div",Object.assign({},s,{className:Gfe(n,{[i]:a}),role:"tabpanel",id:"panel".concat(o),"aria-labelledby":"tab".concat(o)}),r||a?t:null)};pge.tabsRole="TabPanel",pge.propTypes={};const fge=pge;var gge=n(7948),mge=n.n(gge);const yge=e=>{const t={};for(const n in e)if("object"===typeof e[n]&&null!==e[n]){const r=yge(e[n]);0!==Object.keys(r).length&&(t[n]=r)}else e[n]&&(t[n]=e[n]);return t},vge=async(e,t)=>{try{if(console.log("Type of userEmail:",typeof e,"Value of userEmail:",e),"string"!==typeof e||!e)throw new Error("User email must be a valid string.");const n=e.split("@")[0].replace(/[^\w\s]/gi,"_"),r=yge(t);console.log("Cleaned data:",r);const o=await function(e,t){const n=Gg(e.firestore,tm),r=$g(e),o=Nm(e.converter,t);return Om(n,[fm(pm(e.firestore),"addDoc",r._key,o,null!==e.converter,{}).toMutation(r._key,$h.exists(!1))]).then((()=>r))}(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=vt(e),Vg("collection","path",t),e instanceof Xg){const n=Nu.fromString(t,...r);return Wg(n),new Jg(e,null,n)}{if(!(e instanceof Zg||e instanceof Jg))throw new hu(Au.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Nu.fromString(t,...r));return Wg(n),new Jg(e.firestore,null,n)}}(Zy,n),r);return console.log("Document written with ID: ",o.id),sessionStorage.setItem("docId",o.id),!0}catch(n){return console.error("Error saving data to Firestore:",n),!1}},bge={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let wge;const xge=new Uint8Array(16);function Cge(){if(!wge&&(wge="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wge))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wge(xge)}const kge=[];for(let n=0;n<256;++n)kge.push((n+256).toString(16).slice(1));function Bge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return kge[e[t+0]]+kge[e[t+1]]+kge[e[t+2]]+kge[e[t+3]]+"-"+kge[e[t+4]]+kge[e[t+5]]+"-"+kge[e[t+6]]+kge[e[t+7]]+"-"+kge[e[t+8]]+kge[e[t+9]]+"-"+kge[e[t+10]]+kge[e[t+11]]+kge[e[t+12]]+kge[e[t+13]]+kge[e[t+14]]+kge[e[t+15]]}const Sge=function(e,t,n){if(bge.randomUUID&&!t&&!e)return bge.randomUUID();const r=(e=e||{}).random||(e.rng||Cge)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return Bge(r)},Ige=async e=>{try{const r=sessionStorage.getItem(e);if(!r)throw new Error("Kh\xf4ng c\xf3 d\u1eef li\u1ec7u \u1ea3nh.");const o=await fetch(r),a=await o.blob(),i=Sge()+"-"+e,s=(t=$y,n="images/".concat(i),Vy(t=vt(t),n));await function(e,t,n){return My(e=vt(e),t,n)}(s,a);const c=await function(e){return Qy(e=vt(e))}(s);return console.log("File available at",c),c}catch(r){throw console.error("L\u1ed7i khi upload \u1ea3nh t\u1eeb sessionStorage:",r),r}var t,n};mge().setAppElement("#root");const Ege=e=>{let{jsonData:t}=e;const[n,r]=(0,F.useState)(0),[o,a]=(0,F.useState)(0),[i,s]=(0,F.useState)(!1),[c,l]=(0,F.useState)({}),{register:u,handleSubmit:A,formState:{errors:h}}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=F.useRef(),n=F.useRef(),[r,o]=F.useState({isDirty:!1,isValidating:!1,isLoading:ife(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ife(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Mfe(e,(()=>o((e=>({...e}))))),formState:r});const a=t.current.control;return a._options=e,qpe({subject:a._subjects.state,next:e=>{Kpe(e,a._proxyFormState,a._updateFormState,!0)&&o({...a._formState})}}),F.useEffect((()=>a._disableForm(e.disabled)),[a,e.disabled]),F.useEffect((()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}}),[a,r.isDirty]),F.useEffect((()=>{e.values&&!xfe(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,o((e=>({...e})))):a._resetDefaultValues()}),[e.values,a]),F.useEffect((()=>{e.errors&&a._setErrors(e.errors)}),[e.errors,a]),F.useEffect((()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()})),t.current.formState=jpe(r,a),t.current}(),[d,p]=(0,F.useState)(""),[f,g]=(0,F.useState)({}),m=Ie(),[y,v]=(0,F.useState)(!1);(0,F.useEffect)((()=>{Jy.currentUser&&p(Jy.currentUser.email);const e=JSON.parse(sessionStorage.getItem("patientInfo")||"{}");f.patientInfor=e}),[]);const b=()=>{s(!1)},w=(e,t)=>{const n=e.type,r=Object.entries(e["\u0111\u1eb7c t\xednh"]).filter((e=>{let[t,n]=e;return null!==n["ch\u1ea9n \u0111o\xe1n"]}));return(0,ev.jsx)("div",{children:r.map((e=>{let[r,o]=e;return(0,ev.jsxs)("label",{className:"block mt-4 text-xl cursor-pointer",onClick:e=>{"radio"!==e.target.type&&"checkbox"!==e.target.type&&(e=>{l(e),s(!0)})(o)},children:[(0,ev.jsx)("input",{type:n,name:t,value:r,className:"form-checkbox form-radio text-blue-500 h-8 w-8 mr-2",...u(t)}),(0,ev.jsx)("span",{className:"align-middle",children:r})," "]},r)}))})};return(0,ev.jsxs)("div",{children:[(0,ev.jsx)("div",{children:y&&(0,ev.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex justify-center items-center",children:(0,ev.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center",children:[(0,ev.jsx)("p",{className:"text-xl md:text-2xl font-semibold text-gray-800 mb-4",children:"H\u1ec7 th\u1ed1ng \u0111ang t\xednh to\xe1n v\xe0 ch\u1ea9n \u0111o\xe1n b\u1ec7nh. Vui l\xf2ng \u0111\u1ee3i!!"}),(0,ev.jsx)(Kee,{size:"large"})]})})}),(0,ev.jsxs)("form",{onSubmit:A((async e=>{v(!0),console.log("Form data:",e);for(const n in e)if(n.includes("_")){const[t,r]=n.split("_");f[t]||(f[t]={}),f[t][r]=e[n]}if(console.log("Structured Data:",f),d)try{const e=await Ige("croppedImage");console.log("Image URL:",e),f.imgUrl=e,console.log("Structured data:",f);const t=await vge(d,f);console.log("Result:",t),t?(v(!1),m("/result")):(v(!1),alert("L\u1ed7i khi l\u01b0u d\u1eef li\u1ec7u."))}catch(t){v(!1),console.error("Error uploading image and saving data to Firestore:",t),alert("L\u1ed7i khi t\u1ea3i \u1ea3nh l\xean v\xe0 l\u01b0u d\u1eef li\u1ec7u.")}else alert("Kh\xf4ng x\xe1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c ng\u01b0\u1eddi d\xf9ng.")})),className:"p-4",children:[(0,ev.jsxs)(oge,{selectedIndex:n,onSelect:e=>r(e),className:"mb-4",children:[(0,ev.jsx)(sge,{className:"mb-2 flex flex-wrap gap-2 p-1 bg-blue-900/20 rounded-xl",children:Object.keys(t).map((e=>(0,ev.jsx)(Age,{className:"px-4 py-4 text-xl font-medium rounded-lg cursor-pointer focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60 hover:bg-blue-100 ".concat(n===e?"bg-blue-700 text-white shadow-3xl":"bg-white text-blue-700"),children:e},e)))}),Object.keys(t).map((e=>(0,ev.jsx)(fge,{className:"bg-white rounded-lg shadow mb-4",children:(0,ev.jsxs)(oge,{selectedIndex:o,onSelect:e=>a(e),children:[(0,ev.jsx)(sge,{className:"flex space-x-1 p-1 bg-blue-700/20 rounded-xl",children:Object.keys(t[e]).filter((n=>"No"!==t[e][n].type)).map((e=>(0,ev.jsx)(Age,{className:"px-4 py-3 text-xl font-medium rounded-lg cursor-pointer focus:outline-none focus:ring-2 ring-offset-2 ring-white ring-opacity-50 hover:bg-green-200 ".concat(o===e?"bg-green-600 text-white shadow-xl":"bg-blue-200 text-green-900"),children:e},e)))}),Object.keys(t[e]).filter((n=>"No"!==t[e][n].type)).map((n=>(0,ev.jsx)(fge,{className:"border border-gray-200 rounded-lg mb-2",children:w(t[e][n],"".concat(e,"_").concat(n))},n)))]})},e)))]}),(0,ev.jsx)("button",{type:"submit",className:"absolute bottom-4 right-4 px-6 py-2 mt-4 mr-4 my-4 bg-blue-600 text-white font-bold rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"    G\u1eedi"})]}),(0,ev.jsx)(mge(),{isOpen:i,onRequestClose:b,contentLabel:"Chi Ti\u1ebft L\u1ef1a Ch\u1ecdn",className:"outline-none",children:(0,ev.jsxs)("div",{className:"bg-white rounded-lg p-6",children:[(0,ev.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:c["m\xf4 t\u1ea3"]}),(0,ev.jsx)("img",{src:c["h\xecnh \u1ea3nh"],alt:"M\xf4 t\u1ea3",className:"max-h-[66vh] mb-4"}),(0,ev.jsx)("button",{onClick:b,className:"px-4 py-2 bg-blue-500 text-white font-bold rounded hover:bg-blue-700 focus:outline-none",children:"\u0110\xf3ng"})]})})]})},Nge=JSON.parse('{"To\xe0n b\u1ed9":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i b\xecnh th\u01b0\u1eddng m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_binhthuong.png","ch\u1ea9n \u0111o\xe1n":" "},"Nh\u1ee3t":{"m\xf4 t\u1ea3":"Ch\u1ea5t l\u01b0\u1ee1i nh\u1ee3t","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_nhot_kho.png","ch\u1ea9n \u0111o\xe1n":"D\u01b0\u01a1ng h\u01b0/kh\xed h\u01b0( nh\u1ee3t \u01b0\u1edbt) ho\u1eb7c Huy\u1ebft h\u01b0( nh\u1ee3t kh\xf4)"},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"Ch\u1ea5t l\u01b0\u1ee1i \u0111\u1ecf","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_do.png","ch\u1ea9n \u0111o\xe1n":"Nhi\u1ec7t( Th\u1ef1c nhi\u1ec7t ho\u1eb7c H\u01b0 nhi\u1ec7t). N\u1ebfu c\xf3 r\xeau l\xe0 th\u1ef1c nhi\u1ec7t, kh\xf4ng r\xeau ho\u1eb7c r\xeau kh\xf4ng g\u1ed1c l\xe0 H\u01b0 nhi\u1ec7t"},"T\xedm":{"m\xf4 t\u1ea3":"Ch\u1ea5t l\u01b0\u1ee1i t\xedm","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_tim.jpg","ch\u1ea9n \u0111o\xe1n":"Huy\u1ebft \u1ee9"}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"L\u01b0\u1ee1i m\u1ecfng":{"m\xf4 t\u1ea3":"Chi\u1ec1u d\xe0y c\u1ee7a l\u01b0\u1ee1i m\u1ecfng,\u0111\xe2y l\xe0 lo\u1ea1i l\u01b0\u1ee1i \xedt ph\u1ed5 bi\u1ebfn","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_luoimong.png","ch\u1ea9n \u0111o\xe1n":"Huy\u1ebft h\u01b0, \xc2m h\u01b0"},"L\u01b0\u1ee1i s\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"C\xf2n g\u1ecdi l\xe0 l\u01b0\u1ee1i b\u1ec7u, chi\u1ec1u d\xe0y l\u1edbn, n\xean xem t\u1eeb ph\xeda b\xean","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_luoisungne.png","ch\u1ea9n \u0111o\xe1n":"\u0110\u1eddm th\u1ea5p t\xedch t\u1ee5"},"L\u01b0\u1ee1i m\u1ec1m nh\xe0u n\xe1t":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i m\u1ec1m nh\xe3o, d\u01b0\u1eddng nh\u01b0 nh\xe0u n\xe1t","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_nhaunat.png","ch\u1ea9n \u0111o\xe1n":"\xc2m h\u01b0, thi\u1ebfu T\xe2n D\u1ecbch tr\u1ea7m tr\u1ecdng"},"L\u01b0\u1ee1i run":{"m\xf4 t\u1ea3":"Khi \u0111\u1ea9y l\u01b0\u1ee1i ra kh\u1ecfi mi\u1ec7ng, l\u01b0\u1ee1i run v\u1edbi bi\xean \u0111\u1ed9 nh\u1ecf, d\u01b0\u1eddng nh\u01b0 r\u1ea5t y\u1ebfu","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"T\u1ef3 kh\xed/ T\u1ef3 d\u01b0\u01a1ng h\u01b0"},"L\u01b0\u1ee1i v\u1ebft h\u1eb1n r\u0103ng":{"m\xf4 t\u1ea3":"C\xf2n g\u1ecdi l\xe0 l\u01b0\u1ee1i v\u1ecf s\xf2, \u1edf r\xeca l\u01b0\u1ee1i c\xf3 v\u1ebft r\u0103ng h\u1eb1n l\xean","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_hanrang.png","ch\u1ea9n \u0111o\xe1n":"T\u1ef3 kh\xed/ T\u1ef3 d\u01b0\u01a1ng h\u01b0 m\u1ea1n t\xednh"},"L\u01b0\u1ee1i \u0111\u1ed9ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i rung v\u1edbi bi\xean \u0111\u1ed9 l\u1edbn m\xe0 b\u1ec7nh nh\xe2n kh\xf4ng ki\u1ec3m so\xe1t \u0111\u01b0\u1ee3c","h\xecnh \u1ea3nh":null,"ch\u1ea9n \u0111o\xe1n":"N\u1ed9i phong"},"L\u01b0\u1ee1i c\u1ee9ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\u1ee9ng, kh\xf4ng m\u1ec1m m\u1ea1i, linh ho\u1ea1t","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_luoicung.png","ch\u1ea9n \u0111o\xe1n":"N\u1ed9i phong"},"L\u01b0\u1ee1i d\xe0i":{"m\xf4 t\u1ea3":"Hi\u1ebfm g\u1eb7p","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_luoidai.jpg","ch\u1ea9n \u0111o\xe1n":"Nhi\u1ec7t ch\u1ee9ng"},"L\u01b0\u1ee1i ng\u1eafn":{"m\xf4 t\u1ea3":"B\u1ec7nh nh\xe2n kh\xf3 kh\u0103n khi \u0111\u1ea9y l\u01b0\u1ee1i ra kh\u1ecfi mi\u1ec7ng","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_toanbo_luoingan.png","ch\u1ea9n \u0111o\xe1n":"D\u01b0ng h\u01b0 n\u1ed9i h\xe0n(n\u1ebfu ch\u1ea5t l\u01b0\u1ee1i nh\u1ee3t \u01b0\u1edbt) ho\u1eb7c \xc2m h\u01b0 n\u1ed9i nhi\u1ec7t(n\u1ebfu ch\u1ea5t l\u01b0\u1ee1i \u0111\u1ecf kh\xf4ng r\xeau ho\u1eb7c r\xeau kh\xf4ng g\u1ed1c)"}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"R\xeau b\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"R\xeau l\u01b0\u1ee1i b\xecnh th\u01b0\u1eddng m\xe0u tr\u1eafng, m\u1ecfng \u0111\u1ec3 nh\xecn th\u1ea5y ch\u1ea5t l\u01b0\u1ee1i ph\xeda sau n\xf3.N\xf3 d\xe0y \u1edf  g\u1ed1c l\u01b0\u1ee1i, m\u1ecfng \u1edf \u0111\u1ea7u l\u01b0\u1ee1i v\xe0 kh\xf4ng k\xe9o d\xe0i \u0111\u1ebfn c\xe1c vi\u1ec1n v\xe0 c\u1ea1nh c\u1ee7a l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_binhthuong.png","ch\u1ea9n \u0111o\xe1n":null},"R\xeau d\xe0y":{"m\xf4 t\u1ea3":"L\u1edbp ph\u1ee7 d\xe0y che m\u1ea5t ch\u1ea5t l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_day.png","ch\u1ea9n \u0111o\xe1n":"Th\u1ef1c ch\u1ee9ng"},"R\xeau m\u1ecfng":{"m\xf4 t\u1ea3":"L\u1edbp ph\u1ee7 m\u1ecfng d\u1ec5 d\xe0ng nh\xecn th\u1ea5y ch\u1ea5t l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_mong.png","ch\u1ea9n \u0111o\xe1n":"H\u01b0 ch\u1ee9ng"},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i kh\xf4ng c\xf3 r\xeau","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_khongreu.png","ch\u1ea9n \u0111o\xe1n":"V\u1ecb Kh\xed suy ki\u1ec7t"},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u1edbp ph\u1ee7 d\u01b0\u1eddng nh\u01b0 c\xf3 ch\xe2n, c\xf3 g\u1ed1c m\u1ecdc t\u1eeb l\u01b0\u1ee1i l\xean","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"V\u1ecb Kh\xed v\u1eabn c\xf2n"},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":"L\u1edbp ph\u1ee7 d\u01b0\u1eddng nh\u01b0 \u0111\u01b0\u1ee3c r\u1ea3i l\xean","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_khonggoc.png","ch\u1ea9n \u0111o\xe1n":"V\u1ecb kh\xed suy ki\u1ec7t"},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i r\xeau v\xe0ng","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_reuvang.png","ch\u1ea9n \u0111o\xe1n":"Nhi\u1ec7t ch\u1ee9ng"},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i r\xeau tr\u1eafng","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_trang.jpg","ch\u1ea9n \u0111o\xe1n":"H\xe0n ch\u1ee9ng"},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"/tongueImg/reuluoi-xam.png","ch\u1ea9n \u0111o\xe1n":" Nhi\u1ec5m \u0111\u1ed9c"},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"R\xeau d\xednh nh\u1eddn, nh\u01b0ng th\xf4 c\xe1c nh\u1ee7 ri\xeang l\u1ebb v\u1eabn c\xf3 th\u1ec3 nh\xecn th\u1ea5y nh\u1ec9","h\xecnh \u1ea3nh":"/tongueImg/reuluoidinh.png","ch\u1ea9n \u0111o\xe1n":"\u0110\u1eddm th\u1ea5p"},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"R\xeau l\u01b0\u1ee1i tr\u01a1n nh\u1eddn kh\xf4ng th\u1ec3 ph\xe2n bi\u1ec7t c\xe1c nh\xfa","h\xecnh \u1ea3nh":"/tongueImg/reuluoitron.png","ch\u1ea9n \u0111o\xe1n":"\u0110\u1eddm th\u1ea5p nh\u01b0ng th\u1ea5p chi\u1ebfm \u01b0u th\u1ebf"},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u1edbp ph\u1ee7 m\u1ed1c tr\xf4ng d\xe0y, loang l\u1ed5 v\xe0 v\u1ee5n; N\xf3 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c m\xf4 t\u1ea3 nh\u01b0 ph\xf4 mai.","h\xecnh \u1ea3nh":"/tongueImg/reuluoimoc.png","ch\u1ea9n \u0111o\xe1n":"\u0110\u1eddm th\u1ea5p tr\xean n\u1ec1n V\u1ecb \xe2m h\u01b0 h\u1ecfa v\u01b0\u1ee3ng"}},"type":"checkbox"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i b\xecnh th\u01b0\u1eddng s\u1ebd h\u01a1i \u1ea9m","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"/tongueImg/chatluoi_nhot_kho.png","ch\u1ea9n \u0111o\xe1n":"Ch\u1ee9ng t\u1ecf D\u01b0\u01a1ng kh\xed kh\xf4ng v\u1eadn h\xf3a \u0111\u01b0\u1ee3c D\u1ecbch sinh ra t\xedch t\u1ee5 d\u1ecbch v\xe0 \u0111\u1eddm th\u1ea5p"},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_nhot_uot.png","ch\u1ea9n \u0111o\xe1n":"Ch\u1ee9ng t\u1ecf D\u01b0\u01a1ng kh\xed kh\xf4ng v\u1eadn h\xf3a \u0111\u01b0\u1ee3c D\u1ecbch sinh ra t\xedch t\u1ee5 d\u1ecbch v\xe0 \u0111\u1eddm th\u1ea5p"}},"type":"radio"}},"T\xe2m ":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Nh\u1ee3t":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":null,"ch\u1ea9n \u0111o\xe1n":"T\xe2m kh\xed h\u01b0/ T\xe2m huy\u1ebft h\u01b0"},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"\u0110\u1ea7u l\u01b0\u1ee1i \u0111\u1ecf","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_do_dauluoi.png","ch\u1ea9n \u0111o\xe1n":"T\xe2m h\u1ecfa v\u01b0\u1ee3ng"},"T\xedm":{"m\xf4 t\u1ea3":"\u0110\u1ea7u l\u01b0\u1ee1i t\xedm","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_tim_dauluoi.png","ch\u1ea9n \u0111o\xe1n":"T\xe2m huy\u1ebft \u1ee9 tr\u1ec7"}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"S\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"S\u01b0ng n\u1ec1 \u0111\u1ea7u l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_dauluoi_sungne.png","ch\u1ea9n \u0111o\xe1n":"T\xe2m h\u1ecfa v\u01b0\u1ee3ng"},"V\u1ebft n\u1ee9t":{"m\xf4 t\u1ea3":"V\u1ebft n\u1ee9t \u0111\u01b0\u1eddng gi\u1eefa l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_tam_vetnut.png","ch\u1ea9n \u0111o\xe1n":"B\u1ec7nh \u1edf T\xe2m "}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"C\xf3 r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"Kh\xf4":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"}},"Ph\u1ebf ":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Nh\u1ee3t":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"V\xf9ng Ph\u1ebf \u0111\u1ecf, ho\u1eb7c n\u1ed1t \u0111\u1ecf, ch\u1ea5m \u0111\u1ecf","h\xecnh \u1ea3nh":"./tongueImg/chatluoi_do_phe.png","ch\u1ea9n \u0111o\xe1n":"Ph\u1ebf nhi\u1ec7t, th\u1ef1c nhi\u1ec7t n\u1ebfu c\xf3 r\xeau, h\u01b0 nhi\u1ec7t n\u1ebfu kh\xf4ng r\xeau ho\u1eb7c r\xeau kh\xf4ng g\u1ed1c"},"T\xedm":{"m\xf4 t\u1ea3":"T\xedm \u1edf v\xf9ng Ph\u1ebf","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":null}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"S\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"S\u01b0ng n\u1ec1 v\xf9ng ng\u1ef1c- Ph\u1ebf","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_phe_sungne.png","ch\u1ea9n \u0111o\xe1n":"C\xf3 u c\u1ee5c \u1edf v\xf9ng ng\u1ef1c ho\u1eb7c Ph\u1ed5i"},"V\u1ebft n\u1ee9t":{"m\xf4 t\u1ea3":"V\u1ebft n\u1ee9t \u0111\u1eb7c tr\u01b0ng","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_phe_vetnut.png","ch\u1ea9n \u0111o\xe1n":"\u0110\xe3 t\u1eebng m\u1eafc b\u1ec7nh h\xf4 h\u1eadp n\u1eb7ng ho\u1eb7c m\u1ea1n t\xednh"}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"C\xf3 r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"V\xf9ng Ph\u1ebf kh\xf4ng c\xf3 r\xeau","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Ph\u1ebf \xc2m h\u01b0"},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Ph\u1ebf \xc2m h\u01b0"},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Ph\u1ebf th\u1ef1c nhi\u1ec7t"},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Ph\u1ebf h\xe0n"},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"checkbox"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"Kh\xf4":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"}},"Can \u0110\u1edfm":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Nh\u1ee3t":{"m\xf4 t\u1ea3":"R\xeca l\u01b0\u1ee1i nh\u1ee3t h\u01a1n so v\u1edbi c\xe1c ph\u1ea7n kh\xe1c","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_nhot_rialuoi.png","ch\u1ea9n \u0111o\xe1n":"Can huy\u1ebft h\u01b0"},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"R\xeca l\u01b0\u1ee1i \u0111\u1ecf","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_do_ria.png","ch\u1ea9n \u0111o\xe1n":"Can nhi\u1ec7t, n\u1ebfu kh\xf4ng r\xeau l\xe0 H\u01b0 nhi\u1ec7t, n\u1ebfu c\xf3 r\xeau l\xe0 Th\u1ef1c nhi\u1ec7t"},"T\xedm":{"m\xf4 t\u1ea3":"R\xeca l\u01b0\u1ee1i c\xf3 m\xe0u t\xedm","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_tim_ria.png","ch\u1ea9n \u0111o\xe1n":"Can huy\u1ebft \u1ee9 tr\u1ec7"}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"s\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"S\u01b0ng n\u1ec1 ph\u1ea7n r\xeca l\u01b0\u1ee1i","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_rialuoi_sungne.png","ch\u1ea9n \u0111o\xe1n":"N\u1ebfu k\xe8m theo \u0111\u1ecf l\xe0 Can h\u1ecfa v\u01b0\u1ee3ng, n\u1ebfu nh\u1ee3t l\xe0 \u0110\u1eddm th\u1ea5p t\xedch t\u1ee5 \u1edf Can"},"V\u1ebft n\u1ee9t":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\u1ee9ng to\xe0n b\u1ed9","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"C\xf3 r\xeau":{"m\xf4 t\u1ea3":"R\xeau ph\xe2n b\u1ed1 nh\u01b0 h\xecnh","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_candom.png","ch\u1ea9n \u0111o\xe1n":"B\u1ec7nh l\xfd \u0110\u1edfm"},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":null},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"radio"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"Kh\xf4":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"}},"T\u1ef3 V\u1ecb ":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Nh\u1ee3t":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"Trung t\xe2m l\u01b0\u1ee1i \u0111\u1ecf","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_do_trungtam.png","ch\u1ea9n \u0111o\xe1n":"N\u1ebfu c\xf3 r\xeau l\xe0 V\u1ecb th\u1ef1c nhi\u1ec7t, n\u1ebfu kh\xf4ng r\xeau l\xe0 V\u1ecb h\u01b0 nhi\u1ec7t"},"T\xedm":{"m\xf4 t\u1ea3":"Trung t\xe2m l\u01b0\u1ee1i t\xedm","h\xecnh \u1ea3nh":"/tongueImg/chatluoi_tim_trungtam.png","ch\u1ea9n \u0111o\xe1n":"Vi huy\u1ebft \u1ee9"}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"S\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i s\u01b0ng n\u1ec1 c\u1ee5c b\u1ed9","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"V\u1ebft n\u1ee9t":{"m\xf4 t\u1ea3":"V\u1ebft n\u1ee9t kh\xf4ng \u0111\u1ec1u, v\u1ebft n\u1ee9t ngang, v\u1ebft n\u1ee9t trung t\xe2m ho\u1eb7c v\u1ebft n\u1ee9t ngang \u1edf r\xeca","h\xecnh \u1ea3nh":"/tongueImg/hinhdang_trungtam_vetnut.png","ch\u1ea9n \u0111o\xe1n":"V\u1ecb kh\xed h\u01b0, v\u1ebft n\u1ee9t ngang \u1edf r\xeca l\xe0 T\u1ef3 kh\xed h\u01b0"}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"C\xf3 r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i kh\xf4ng r\xeau","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_khongreu.png","ch\u1ea9n \u0111o\xe1n":"V\u1ecb Kh\xed suy ki\u1ec7t"},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_khonggoc.png","ch\u1ea9n \u0111o\xe1n":"V\u1ecb Kh\xed suy ki\u1ec7t"},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":"R\xeau l\u01b0\u1ee1i v\xe0ng \u1edf trung t\xe2m","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"V\u1ecb nhi\u1ec7t"},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":"R\xeau l\u01b0\u1ee1i tr\u1eafng \u1edf trung t\xe2m","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"V\u1ecb h\u01b0 h\xe0n"},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":"R\xeau l\u01b0\u1ee1i x\xe1m \u1edf trung t\xe2m","h\xecnh \u1ea3nh":"/tongueImg/reuluoi-xam.png","ch\u1ea9n \u0111o\xe1n":"Nhi\u1ec5m \u0111\u1ed9c d\u1ea1 d\xe0y"},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"checkbox"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"Kh\xf4":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"}},"Th\u1eadn B\xe0ng Quang Ru\u1ed9t":{"Ch\u1ea5t l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"B\xecnh th\u01b0\u1eddng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Nh\u1ee3t":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":null},"\u0110\u1ecf":{"m\xf4 t\u1ea3":"\u0110\u1ecf ph\u1ea7n g\u1ed1c l\u01b0\u1ee1i gi\u1eefa ho\u1eb7c hai b\xean","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Vi\xeam ru\u1ed9t ho\u1eb7c b\xe0ng quang"},"T\xedm":{"m\xf4 t\u1ea3":"T\xedm ph\u1ea7n g\u1ed1c l\u01b0\u1ee1i ho\u1eb7c 2 b\xean g\u1ed1c","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Huy\u1ebft \u1ee9 \u1edf ru\u1ed9t ho\u1eb7c B\xe0ng Quang"}},"type":"radio"},"H\xecnh d\xe1ng":{"\u0111\u1eb7c t\xednh":{"S\u01b0ng n\u1ec1":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i s\u01b0ng n\u1ec1 c\u1ee5c b\u1ed9","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"V\u1ebft n\u1ee9t":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\u1ee9ng to\xe0n b\u1ed9","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"checkbox"},"R\xeau l\u01b0\u1ee1i":{"\u0111\u1eb7c t\xednh":{"C\xf3 r\xeau":{"m\xf4 t\u1ea3":"G\u1ed1c l\u01b0\u1ee1i c\xf3 r\xeau ho\u1eb7c r\xeau d\xe0y h\u01a1n c\xe1c v\xf9ng kh\xe1c","h\xecnh \u1ea3nh":"/tongueImg/reuluoi_gocluoi.png","ch\u1ea9n \u0111o\xe1n":"Th\u1ea5p nhi\u1ec7t h\u1ea1 ti\xeau"},"Kh\xf4ng r\xeau":{"m\xf4 t\u1ea3":"G\u1ed1c l\u01b0\u1ee1i kh\xf4ng r\xeau","h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Th\u1eadn \xe2m h\u01b0"},"C\xf3 g\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"Kh\xf4ng g\u1ed1c":{"m\xf4 t\u1ea3":null,"h\xecnh \u1ea3nh":"","ch\u1ea9n \u0111o\xe1n":"Th\u1eadn \xe2m h\u01b0"},"R\xeau v\xe0ng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u1eafng":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau x\xe1m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau d\xednh":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau tr\u01a1n":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"R\xeau m\u1ed1c":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"checkbox"},"\u0110\u1ed9 \u1ea9m":{"\u0111\u1eb7c t\xednh":{"Kh\xf4":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null},"\u1ea8m":{"m\xf4 t\u1ea3":"L\u01b0\u1ee1i c\xf3 m\xe0u \u0111\u1ecf nh\u1ea1t","h\xecnh \u1ea3nh":"https://i.imgur.com/1Z9z9QV.jpg","ch\u1ea9n \u0111o\xe1n":null}},"type":"No"}}}'),Fge=()=>(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Ch\u1ea9n \u0111o\xe1n"}),(0,ev.jsx)(Ege,{jsonData:Nge}),(0,ev.jsx)(bpe,{})]}),Tge=()=>{const[e,t]=(0,F.useState)({name:"",age:"",gender:"",symptoms:""}),n=Ie(),r=n=>{t({...e,[n.target.name]:n.target.value})};return(0,ev.jsxs)("form",{onSubmit:t=>{t.preventDefault(),sessionStorage.setItem("patientInfo",JSON.stringify(e)),n("/question")},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsx)("label",{className:"block text-gray-900 text-lg font-bold mb-2",htmlFor:"name",children:"H\u1ecd v\xe0 t\xean b\u1ec7nh nh\xe2n:"}),(0,ev.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-900 leading-tight focus:outline-none focus:shadow-outline",type:"text",name:"name",value:e.name,onChange:r})]}),(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsx)("label",{className:"block text-gray-900 text-lg font-bold mb-2",htmlFor:"age",children:"Tu\u1ed5i:"}),(0,ev.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-900 leading-tight focus:outline-none focus:shadow-outline",type:"number",name:"age",value:e.age,onChange:r})]}),(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsx)("label",{className:"block text-gray-900 text-lg font-bold mb-2",children:"Gi\u1edbi t\xednh:"}),(0,ev.jsxs)("div",{className:"mt-2",children:[(0,ev.jsx)("input",{type:"radio",name:"gender",value:"Nam",checked:"Nam"===e.gender,onChange:r,className:"mr-2"})," Nam",(0,ev.jsx)("input",{type:"radio",name:"gender",value:"N\u1eef",checked:"N\u1eef"===e.gender,onChange:r,className:"ml-4"})," N\u1eef"]})]}),(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsx)("label",{className:"block text-gray-900 text-lg font-bold mb-2",htmlFor:"symptoms",children:"Tri\u1ec7u ch\u1ee9ng:"}),(0,ev.jsx)("textarea",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-900 leading-tight focus:outline-none focus:shadow-outline",name:"symptoms",value:e.symptoms,onChange:r})]}),(0,ev.jsx)("div",{className:"mb-4 text-center",children:(0,ev.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md hover:bg-blue-600",children:"G\u1eedi th\xf4ng tin"})})]})};const _ge=function(){return(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Th\xf4ng tin b\u1ec7nh nh\xe2n"}),(0,ev.jsx)(Tge,{})]})},Lge=(e,t,n,r)=>{try{var o,a;const s=null===(o=e[t])||void 0===o||null===(a=o[n])||void 0===a?void 0:a["\u0111\u1eb7c t\xednh"];if("object"===typeof r){const e=Object.entries(r).reduce(((e,t)=>{var n;let[r,o]=t;const a=null===s||void 0===s||null===(n=s[o])||void 0===n?void 0:n["ch\u1ea9n \u0111o\xe1n"];return a&&e.push("".concat(a)),e}),[]);return e.length>0?e:null}var i;return null===s||void 0===s||null===(i=s[r])||void 0===i?void 0:i["ch\u1ea9n \u0111o\xe1n"]}catch(s){return console.error("Error finding diagnosis:",s),null}},Oge=(e,t)=>{const n={};for(const r in e){const o=e[r];n[r]||(n[r]={});for(const e in o){const a=o[e];if("object"===typeof a&&null!==a){n[r][e]||(n[r][e]={});const o=Lge(t,r,e,a);Object.entries(o).forEach((t=>{let[o,i]=t;const s=a[o];n[r][e][s]=i}))}else{const o=Lge(t,r,e,a);n[r][e]={[a]:o}}}}return console.log("Final Results:",n),n},Rge=()=>{const[e,t]=(0,F.useState)([]),[n,r]=(0,F.useState)({}),[o,a]=(0,F.useState)(null),[i,s]=(0,F.useState)("");(0,F.useEffect)((()=>mo(Jy,(e=>{s(e?e.email:"")}))),[]),(0,F.useEffect)((()=>{if(!i)return;(async()=>{try{const e=i.split("@")[0],t=sessionStorage.getItem("docId");if(t){const n=$g(nm(),e,t),o=await function(e){e=Gg(e,Zg);const t=Gg(e.firestore,tm);return Qg(rm(t),e._key).then((n=>Rm(t,e,n)))}(n);if(o.exists()){const{imgUrl:e,patientInfor:t,...n}=o.data();a(t);const i=Oge(n,Nge);r(i)}else console.log("No such document!")}else console.log("No document ID found in sessionStorage")}catch(e){console.error("Error fetching data:",e)}})()}),[i]);const c=e=>Object.entries(e).map((e=>{let[t,n]=e;return(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold",children:t}),"object"===typeof n?l(n):(0,ev.jsx)("p",{className:"text-sm",children:n})]},t)})),l=e=>Object.entries(e).map((e=>{let[t,n]=e;return(0,ev.jsxs)("div",{className:"mb-2",children:[(0,ev.jsx)("strong",{className:"text-lg font-semibold block",children:t}),(0,ev.jsxs)("span",{className:"text-lg block",children:["Ch\u1ea9n \u0111o\xe1n: ",n]})]},t)}));return(0,ev.jsx)("div",{className:"p-4",children:(e=>{sessionStorage.getItem("contrastShapesImage"),sessionStorage.getItem("hsvImage"),sessionStorage.getItem("detectAreaImage"),sessionStorage.getItem("segmentedImage");const t=sessionStorage.getItem("croppedImage"),{age:n,gender:r,name:a,symptoms:i}=o||{};return(0,ev.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[o&&(0,ev.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg",children:[t&&(0,ev.jsx)("img",{src:t,alt:"Cropped",className:"w-screen h-auto object-contain rounded-lg"}),(0,ev.jsx)("h2",{className:"text-3xl font-semibold",children:"Th\xf4ng tin b\u1ec7nh nh\xe2n"}),(0,ev.jsxs)("div",{className:"flex flex-col space-y-2 mt-2",children:[(0,ev.jsxs)("p",{className:"font-semibold text-xl",children:["T\xean: ",a]}),(0,ev.jsxs)("p",{className:"font-semibold text-xl",children:["Tu\u1ed5i: ",n]}),(0,ev.jsxs)("p",{className:"font-semibold text-xl",children:["Gi\u1edbi t\xednh: ",r]}),(0,ev.jsxs)("p",{className:"font-semibold text-xl",children:["Tri\u1ec7u ch\u1ee9ng: ",i]})]})]}),Object.entries(e).map((e=>{let[t,n]=e;return(0,ev.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg",children:[(0,ev.jsx)("h2",{className:"text-3xl font-semibold",children:t}),c(n)]},t)}))]})})(n)})};var Uge=Uint8Array,Dge=Uint16Array,Pge=Uint32Array,Mge=new Uge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qge=new Uge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hge=new Uge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zge=function(e,t){for(var n=new Dge(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new Pge(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return[n,o]},Vge=zge(Mge,2),jge=Vge[0],Wge=Vge[1];jge[28]=258,Wge[258]=28;for(var Kge=zge(Qge,0),Gge=Kge[0],qge=Kge[1],Xge=new Dge(32768),Yge=0;Yge<32768;++Yge){var Zge=(43690&Yge)>>>1|(21845&Yge)<<1;Zge=(61680&(Zge=(52428&Zge)>>>2|(13107&Zge)<<2))>>>4|(3855&Zge)<<4,Xge[Yge]=((65280&Zge)>>>8|(255&Zge)<<8)>>>1}var Jge=function(e,t,n){for(var r=e.length,o=0,a=new Dge(t);o<r;++o)++a[e[o]-1];var i,s=new Dge(t);for(o=0;o<t;++o)s[o]=s[o-1]+a[o-1]<<1;if(n){i=new Dge(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],u=t-e[o],A=s[e[o]-1]++<<u,h=A|(1<<u)-1;A<=h;++A)i[Xge[A]>>>c]=l}else for(i=new Dge(r),o=0;o<r;++o)i[o]=Xge[s[e[o]-1]++]>>>15-e[o];return i},$ge=new Uge(288);for(Yge=0;Yge<144;++Yge)$ge[Yge]=8;for(Yge=144;Yge<256;++Yge)$ge[Yge]=9;for(Yge=256;Yge<280;++Yge)$ge[Yge]=7;for(Yge=280;Yge<288;++Yge)$ge[Yge]=8;var eme=new Uge(32);for(Yge=0;Yge<32;++Yge)eme[Yge]=5;var tme=Jge($ge,9,0),nme=Jge($ge,9,1),rme=Jge(eme,5,0),ome=Jge(eme,5,1),ame=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ime=function(e,t,n){var r=t/8>>0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},sme=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},cme=function(e){return(e/8>>0)+(7&e&&1)},lme=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Dge?Dge:e instanceof Pge?Pge:Uge)(n-t);return r.set(e.subarray(t,n)),r},ume=function(e,t,n){var r=e.length,o=!t||n,a=!n||n.i;n||(n={}),t||(t=new Uge(3*r));var i=function(e){var n=t.length;if(e>n){var r=new Uge(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,l=n.b||0,u=n.l,A=n.d,h=n.m,d=n.n,p=8*r;do{if(!u){n.f=s=ime(e,c,1);var f=ime(e,c+1,3);if(c+=3,!f){var g=e[(I=cme(c)+4)-4]|e[I-3]<<8,m=I+g;if(m>r){if(a)throw"unexpected EOF";break}o&&i(l+g),t.set(e.subarray(I,m),l),n.b=l+=g,n.p=c=8*m;continue}if(1==f)u=nme,A=ome,h=9,d=5;else{if(2!=f)throw"invalid block type";var y=ime(e,c,31)+257,v=ime(e,c+10,15)+4,b=y+ime(e,c+5,31)+1;c+=14;for(var w=new Uge(b),x=new Uge(19),C=0;C<v;++C)x[Hge[C]]=ime(e,c+3*C,7);c+=3*v;var k=ame(x),B=(1<<k)-1;if(!a&&c+b*(k+7)>p)break;var S=Jge(x,k,1);for(C=0;C<b;){var I,E=S[ime(e,c,B)];if(c+=15&E,(I=E>>>4)<16)w[C++]=I;else{var N=0,F=0;for(16==I?(F=3+ime(e,c,3),c+=2,N=w[C-1]):17==I?(F=3+ime(e,c,7),c+=3):18==I&&(F=11+ime(e,c,127),c+=7);F--;)w[C++]=N}}var T=w.subarray(0,y),_=w.subarray(y);h=ame(T),d=ame(_),u=Jge(T,h,1),A=Jge(_,d,1)}if(c>p)throw"unexpected EOF"}o&&i(l+131072);for(var L=(1<<h)-1,O=(1<<d)-1,R=h+d+18;a||c+R<p;){var U=(N=u[sme(e,c)&L])>>>4;if((c+=15&N)>p)throw"unexpected EOF";if(!N)throw"invalid length/literal";if(U<256)t[l++]=U;else{if(256==U){u=null;break}var D=U-254;if(U>264){var P=Mge[C=U-257];D=ime(e,c,(1<<P)-1)+jge[C],c+=P}var M=A[sme(e,c)&O],Q=M>>>4;if(!M)throw"invalid distance";c+=15&M;_=Gge[Q];if(Q>3){P=Qge[Q];_+=sme(e,c)&(1<<P)-1,c+=P}if(c>p)throw"unexpected EOF";o&&i(l+131072);for(var H=l+D;l<H;l+=4)t[l]=t[l-_],t[l+1]=t[l+1-_],t[l+2]=t[l+2-_],t[l+3]=t[l+3-_];l=H}}n.l=u,n.p=c,n.b=l,u&&(s=1,n.m=h,n.d=A,n.n=d)}while(!s);return l==t.length?t:lme(t,0,l)},Ame=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},hme=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},dme=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return[new Uge(0),0];if(1==o){var i=new Uge(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],l=0,u=1,A=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};u!=o-1;)s=n[n[l].f<n[A].f?l++:A++],c=n[l!=u&&n[l].f<n[A].f?l++:A++],n[u++]={s:-1,f:s.f+c.f,l:s,r:c};var h=a[0].s;for(r=1;r<o;++r)a[r].s>h&&(h=a[r].s);var d=new Dge(h+1),p=pme(n[u-1],d,0);if(p>t){r=0;var f=0,g=p-t,m=1<<g;for(a.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));r<o;++r){var y=a[r].s;if(!(d[y]>t))break;f+=m-(1<<p-d[y]),d[y]=t}for(f>>>=g;f>0;){var v=a[r].s;d[v]<t?f-=1<<t-d[v]++-1:++r}for(;r>=0&&f;--r){var b=a[r].s;d[b]==t&&(--d[b],++f)}p=t}return[new Uge(d),p]},pme=function(e,t,n){return-1==e.s?Math.max(pme(e.l,t,n+1),pme(e.r,t,n+1)):t[e.s]=n},fme=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Dge(++t),r=0,o=e[0],a=1,i=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(o),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(o);a=1,o=e[s]}return[n.subarray(0,r),t]},gme=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},mme=function(e,t,n){var r=n.length,o=cme(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<r;++a)e[o+a+4]=n[a];return 8*(o+4+r)},yme=function(e,t,n,r,o,a,i,s,c,l,u){Ame(t,u++,n),++o[256];for(var A=dme(o,15),h=A[0],d=A[1],p=dme(a,15),f=p[0],g=p[1],m=fme(h),y=m[0],v=m[1],b=fme(f),w=b[0],x=b[1],C=new Dge(19),k=0;k<y.length;++k)C[31&y[k]]++;for(k=0;k<w.length;++k)C[31&w[k]]++;for(var B=dme(C,7),S=B[0],I=B[1],E=19;E>4&&!S[Hge[E-1]];--E);var N,F,T,_,L=l+5<<3,O=gme(o,$ge)+gme(a,eme)+i,R=gme(o,h)+gme(a,f)+i+14+3*E+gme(C,S)+(2*C[16]+3*C[17]+7*C[18]);if(L<=O&&L<=R)return mme(t,u,e.subarray(c,c+l));if(Ame(t,u,1+(R<O)),u+=2,R<O){N=Jge(h,d,0),F=h,T=Jge(f,g,0),_=f;var U=Jge(S,I,0);Ame(t,u,v-257),Ame(t,u+5,x-1),Ame(t,u+10,E-4),u+=14;for(k=0;k<E;++k)Ame(t,u+3*k,S[Hge[k]]);u+=3*E;for(var D=[y,w],P=0;P<2;++P){var M=D[P];for(k=0;k<M.length;++k){var Q=31&M[k];Ame(t,u,U[Q]),u+=S[Q],Q>15&&(Ame(t,u,M[k]>>>5&127),u+=M[k]>>>12)}}}else N=tme,F=$ge,T=rme,_=eme;for(k=0;k<s;++k)if(r[k]>255){Q=r[k]>>>18&31;hme(t,u,N[Q+257]),u+=F[Q+257],Q>7&&(Ame(t,u,r[k]>>>23&31),u+=Mge[Q]);var H=31&r[k];hme(t,u,T[H]),u+=_[H],H>3&&(hme(t,u,r[k]>>>5&8191),u+=Qge[H])}else hme(t,u,N[r[k]]),u+=F[r[k]];return hme(t,u,N[256]),u+F[256]},vme=new Pge([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bme=new Uge(0),wme=function(e,t,n,r,o,a){var i=e.length,s=new Uge(r+i+5*(1+Math.floor(i/7e3))+o),c=s.subarray(r,s.length-o),l=0;if(!t||i<8)for(var u=0;u<=i;u+=65535){var A=u+65535;A<i?l=mme(c,l,e.subarray(u,A)):(c[u]=a,l=mme(c,l,e.subarray(u,i)))}else{for(var h=vme[t-1],d=h>>>13,p=8191&h,f=(1<<n)-1,g=new Dge(32768),m=new Dge(f+1),y=Math.ceil(n/3),v=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<v)&f},w=new Pge(25e3),x=new Dge(288),C=new Dge(32),k=0,B=0,S=(u=0,0),I=0,E=0;u<i;++u){var N=b(u),F=32767&u,T=m[N];if(g[F]=T,m[N]=F,I<=u){var _=i-u;if((k>7e3||S>24576)&&_>423){l=yme(e,c,0,w,x,C,B,S,E,u-E,l),S=k=B=0,E=u;for(var L=0;L<286;++L)x[L]=0;for(L=0;L<30;++L)C[L]=0}var O=2,R=0,U=p,D=F-T&32767;if(_>2&&N==b(u-D))for(var P=Math.min(d,_)-1,M=Math.min(32767,u),Q=Math.min(258,_);D<=M&&--U&&F!=T;){if(e[u+O]==e[u+O-D]){for(var H=0;H<Q&&e[u+H]==e[u+H-D];++H);if(H>O){if(O=H,R=D,H>P)break;var z=Math.min(D,H-2),V=0;for(L=0;L<z;++L){var j=u-D+L+32768&32767,W=j-g[j]+32768&32767;W>V&&(V=W,T=j)}}}D+=(F=T)-(T=g[F])+32768&32767}if(R){w[S++]=268435456|Wge[O]<<18|qge[R];var K=31&Wge[O],G=31&qge[R];B+=Mge[K]+Qge[G],++x[257+K],++C[G],I=u+O,++k}else w[S++]=e[u],++x[e[u]]}}l=yme(e,c,a,w,x,C,B,S,E,u-E,l),a||(l=mme(c,l,bme))}return lme(s,0,r+cme(l)+o)},xme=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var s=Math.min(i+5552,a);i<s;++i)o+=r+=n[i];r%=65521,o%=65521}e=r,t=o},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}},Cme=function(e,t,n,r,o){return wme(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)},kme=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Bme=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},Sme=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Ime(e,t){void 0===t&&(t={});var n=xme();n.p(e);var r=Cme(e,t,2,4);return Bme(r,t),kme(r,r.length-4,n.d()),r}function Eme(e,t){return ume((Sme(e),e.subarray(2,-4)),t)}var Nme=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function Fme(){Nme.console&&"function"==typeof Nme.console.log&&Nme.console.log.apply(Nme.console,arguments)}var Tme={log:Fme,warn:function(e){Nme.console&&("function"==typeof Nme.console.warn?Nme.console.warn.apply(Nme.console,arguments):Fme.call(null,arguments))},error:function(e){Nme.console&&("function"==typeof Nme.console.error?Nme.console.error.apply(Nme.console,arguments):Fme(e))}};function _me(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Dme(r.response,t,n)},r.onerror=function(){Tme.error("could not download file")},r.send()}function Lme(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function Ome(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(qa){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Rme,Ume,Dme=Nme.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,F6.Z)(window))||window!==Nme?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Nme.URL||Nme.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener","string"==typeof e?(o.href=e,o.origin!==location.origin?Lme(o.href)?_me(e,t,n):Ome(o,o.target="_blank"):Ome(o)):(o.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(o.href)}),4e4),setTimeout((function(){Ome(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(Lme(e))_me(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){Ome(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,F6.Z)(t)&&(Tme.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return _me(e,t,n);var o="application/octet-stream"===e.type,a=/constructor/i.test(Nme.HTMLElement)||Nme.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,F6.Z)(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},s.readAsDataURL(e)}else{var c=Nme.URL||Nme.webkitURL,l=c.createObjectURL(e);r?r.location=l:location.href=l,r=null,setTimeout((function(){c.revokeObjectURL(l)}),4e4)}});function Pme(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,a=n[r].process,i=o.exec(e);i&&(t=a(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function Mme(e,t){var n=e[0],r=e[1],o=e[2],a=e[3];n=Hme(n,r,o,a,t[0],7,-680876936),a=Hme(a,n,r,o,t[1],12,-389564586),o=Hme(o,a,n,r,t[2],17,606105819),r=Hme(r,o,a,n,t[3],22,-1044525330),n=Hme(n,r,o,a,t[4],7,-176418897),a=Hme(a,n,r,o,t[5],12,1200080426),o=Hme(o,a,n,r,t[6],17,-1473231341),r=Hme(r,o,a,n,t[7],22,-45705983),n=Hme(n,r,o,a,t[8],7,1770035416),a=Hme(a,n,r,o,t[9],12,-1958414417),o=Hme(o,a,n,r,t[10],17,-42063),r=Hme(r,o,a,n,t[11],22,-1990404162),n=Hme(n,r,o,a,t[12],7,1804603682),a=Hme(a,n,r,o,t[13],12,-40341101),o=Hme(o,a,n,r,t[14],17,-1502002290),n=zme(n,r=Hme(r,o,a,n,t[15],22,1236535329),o,a,t[1],5,-165796510),a=zme(a,n,r,o,t[6],9,-1069501632),o=zme(o,a,n,r,t[11],14,643717713),r=zme(r,o,a,n,t[0],20,-373897302),n=zme(n,r,o,a,t[5],5,-701558691),a=zme(a,n,r,o,t[10],9,38016083),o=zme(o,a,n,r,t[15],14,-660478335),r=zme(r,o,a,n,t[4],20,-405537848),n=zme(n,r,o,a,t[9],5,568446438),a=zme(a,n,r,o,t[14],9,-1019803690),o=zme(o,a,n,r,t[3],14,-187363961),r=zme(r,o,a,n,t[8],20,1163531501),n=zme(n,r,o,a,t[13],5,-1444681467),a=zme(a,n,r,o,t[2],9,-51403784),o=zme(o,a,n,r,t[7],14,1735328473),n=Vme(n,r=zme(r,o,a,n,t[12],20,-1926607734),o,a,t[5],4,-378558),a=Vme(a,n,r,o,t[8],11,-2022574463),o=Vme(o,a,n,r,t[11],16,1839030562),r=Vme(r,o,a,n,t[14],23,-35309556),n=Vme(n,r,o,a,t[1],4,-1530992060),a=Vme(a,n,r,o,t[4],11,1272893353),o=Vme(o,a,n,r,t[7],16,-155497632),r=Vme(r,o,a,n,t[10],23,-1094730640),n=Vme(n,r,o,a,t[13],4,681279174),a=Vme(a,n,r,o,t[0],11,-358537222),o=Vme(o,a,n,r,t[3],16,-722521979),r=Vme(r,o,a,n,t[6],23,76029189),n=Vme(n,r,o,a,t[9],4,-640364487),a=Vme(a,n,r,o,t[12],11,-421815835),o=Vme(o,a,n,r,t[15],16,530742520),n=jme(n,r=Vme(r,o,a,n,t[2],23,-995338651),o,a,t[0],6,-198630844),a=jme(a,n,r,o,t[7],10,1126891415),o=jme(o,a,n,r,t[14],15,-1416354905),r=jme(r,o,a,n,t[5],21,-57434055),n=jme(n,r,o,a,t[12],6,1700485571),a=jme(a,n,r,o,t[3],10,-1894986606),o=jme(o,a,n,r,t[10],15,-1051523),r=jme(r,o,a,n,t[1],21,-2054922799),n=jme(n,r,o,a,t[8],6,1873313359),a=jme(a,n,r,o,t[15],10,-30611744),o=jme(o,a,n,r,t[6],15,-1560198380),r=jme(r,o,a,n,t[13],21,1309151649),n=jme(n,r,o,a,t[4],6,-145523070),a=jme(a,n,r,o,t[11],10,-1120210379),o=jme(o,a,n,r,t[2],15,718787259),r=jme(r,o,a,n,t[9],21,-343485551),e[0]=Jme(n,e[0]),e[1]=Jme(r,e[1]),e[2]=Jme(o,e[2]),e[3]=Jme(a,e[3])}function Qme(e,t,n,r,o,a){return t=Jme(Jme(t,e),Jme(r,a)),Jme(t<<o|t>>>32-o,n)}function Hme(e,t,n,r,o,a,i){return Qme(t&n|~t&r,e,t,o,a,i)}function zme(e,t,n,r,o,a,i){return Qme(t&r|n&~r,e,t,o,a,i)}function Vme(e,t,n,r,o,a,i){return Qme(t^n^r,e,t,o,a,i)}function jme(e,t,n,r,o,a,i){return Qme(n^(t|~r),e,t,o,a,i)}function Wme(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Mme(r,Kme(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(Mme(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,Mme(r,o),r}function Kme(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Rme=Nme.atob.bind(Nme),Ume=Nme.btoa.bind(Nme);var Gme="0123456789abcdef".split("");function qme(e){for(var t="",n=0;n<4;n++)t+=Gme[e>>8*n+4&15]+Gme[e>>8*n&15];return t}function Xme(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Yme(e){return Wme(e).map(Xme).join("")}var Zme="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=qme(e[t]);return e.join("")}(Wme("hello"));function Jme(e,t){if(Zme){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function $me(e,t){var n,r,o,a;if(e!==n){for(var i=(o=e,a=1+(256/e.length>>0),new Array(a+1).join(o)),s=[],c=0;c<256;c++)s[c]=c;var l=0;for(c=0;c<256;c++){var u=s[c];l=(l+u+i.charCodeAt(c))%256,s[c]=s[l],s[l]=u}n=e,r=s}else s=r;var A=t.length,h=0,d=0,p="";for(c=0;c<A;c++)d=(d+(u=s[h=(h+1)%256]))%256,s[h]=s[d],s[d]=u,i=s[(s[h]+s[d])%256],p+=String.fromCharCode(t.charCodeAt(c)^i);return p}var eye={print:4,modify:8,copy:16,"annot-forms":32};function tye(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach((function(e){if(void 0!==eye.perm)throw new Error("Invalid permission: "+e);o+=eye[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var a=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^o)),this.encryptionKey=Yme(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$me(this.encryptionKey,this.padding)}function nye(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);t+=o<33||35===o||37===o||40===o||41===o||47===o||60===o||62===o||91===o||93===o||123===o||125===o||o>126?"#"+("0"+o.toString(16)).slice(-2):e[r]}return t}function rye(e){if("object"!==(0,F6.Z)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var o=Math.random().toString(35);return t[e][o]=[n,!!r],o},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var a in t[n]){var i=t[n][a];try{i[0].apply(e,r)}catch(n){Nme.console&&Tme.error("jsPDF PubSub Error",n.message,n)}i[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function oye(e){if(!(this instanceof oye))return new oye(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function aye(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function iye(e,t,n,r,o){if(!(this instanceof iye))return new iye(e,t,n,r,o);this.type="axial"===e?2:3,this.coords=t,this.colors=n,aye.call(this,r,o)}function sye(e,t,n,r,o){if(!(this instanceof sye))return new sye(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,aye.call(this,r,o)}function cye(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],o=arguments[2],a=arguments[3],i=[],s=1,c=16,l="S",u=null;"object"===(0,F6.Z)(e=e||{})&&(n=e.orientation,r=e.unit||r,o=e.format||o,a=e.compress||e.compressPdf||a,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),l=e.defaultPathOperation||"S"),i=e.filters||(!0===a?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=rye;var p="1.3",f=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return g};var m=d.__private__.getPageFormat=function(e){return g[e]};o=o||"a4";var y="compat",v="advanced",b=y;function w(){this.saveGraphicsState(),Z(new Te(he,0,0,-he,0,un()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),l="n",b=v}function x(){this.restoreGraphicsState(),l="S",b=y}var C=d.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};d.advancedAPI=function(e){var t=b===y;return t&&w.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},d.compatAPI=function(e){var t=b===v;return t&&x.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},d.isAdvancedAPI=function(){return b===v};var k,B=function(e){if(b!==v)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=d.roundToPrecision=d.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};k=d.hpf=d.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var I=d.f2=d.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return S(e,2)},E=d.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return S(e,3)},N=d.scale=d.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===y?e*he:b===v?e:void 0},F=function(e){return N(function(e){return b===y?un()-e:b===v?e:void 0}(e))};d.__private__.setPrecision=d.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var T,_="00000000000000000000000000000000",L=d.__private__.getFileId=function(){return _},O=d.__private__.setFileId=function(e){return _=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():_.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(vt=new tye(u.userPermissions,u.userPassword,u.ownerPassword,_)),_};d.setFileId=function(e){return O(e),this},d.getFileId=function(){return L()};var R=d.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),o=Math.abs(t%60),a=[n,Q(r),"'",Q(o),"'"].join("");return["D:",e.getFullYear(),Q(e.getMonth()+1),Q(e.getDate()),Q(e.getHours()),Q(e.getMinutes()),Q(e.getSeconds()),a].join("")},U=d.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,r,o,a,i,0)},D=d.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return T=t},P=d.__private__.getCreationDate=function(e){var t=T;return"jsDate"===e&&(t=U(T)),t};d.setCreationDate=function(e){return D(e),this},d.getCreationDate=function(e){return P(e)};var M,Q=d.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},H=d.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,V=[],j=[],W=0,K=[],G=[],q=!1,X=j;d.__private__.setCustomOutputDestination=function(e){q=!0,X=e};var Y=function(e){q||(X=e)};d.__private__.resetCustomOutputDestination=function(){q=!1,X=j};var Z=d.__private__.out=function(e){return e=e.toString(),W+=e.length+1,X.push(e),X},J=d.__private__.write=function(e){return Z(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=d.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(e){return te=b===v?e/he:e,this};var ne,re=d.__private__.getFontSize=d.getFontSize=function(){return b===y?te:te*he},oe=e.R2L||!1;d.__private__.setR2L=d.setR2L=function(e){return oe=e,this},d.__private__.getR2L=d.getR2L=function(){return oe};var ae,ie=d.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};d.__private__.getZoomMode=function(){return ne};var se,ce=d.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ae=e};d.__private__.getPageMode=function(){return ae};var le=d.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');se=e};d.__private__.getLayoutMode=function(){return se},d.__private__.setDisplayMode=d.setDisplayMode=function(e,t,n){return ie(e),le(t),ce(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},d.__private__.getDocumentProperties=function(){return ue},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},d.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var Ae,he,de,pe,fe,ge={},me={},ye=[],ve={},be={},we={},xe={},Ce=null,ke=0,Be=[],Se=new rye(d),Ie=e.hotfixes||[],Ee={},Ne={},Fe=[],Te=function e(t,n,r,o,a,i){if(!(this instanceof e))return new e(t,n,r,o,a,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(o)&&(o=1),isNaN(a)&&(a=0),isNaN(i)&&(i=0),this._matrix=[t,n,r,o,a,i]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Te.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},Te.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,o=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Te(t,n,r,o,a,i)},Te.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,o=this.tx,a=this.ty,i=Math.sqrt(e*e+t*t),s=(e/=i)*n+(t/=i)*r;n-=e*s,r-=t*s;var c=Math.sqrt(n*n+r*r);return s/=c,e*(r/=c)<t*(n/=c)&&(e=-e,t=-t,s=-s,i=-i),{scale:new Te(i,0,0,c,0,0),translate:new Te(1,0,0,1,o,a),rotate:new Te(e,t,-t,e,0,0),skew:new Te(1,0,s,1,0,0)}},Te.prototype.toString=function(e){return this.join(" ")},Te.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,o=this.tx,a=this.ty,i=1/(e*r-t*n),s=r*i,c=-t*i,l=-n*i,u=e*i;return new Te(s,c,l,u,-s*o-l*a,-c*o-u*a)},Te.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new nn(t,n)},Te.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new nn(e.x+e.w,e.y+e.h));return new rn(t.x,t.y,n.x-t.x,n.y-t.y)},Te.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,o=this.tx,a=this.ty;return new Te(e,t,n,r,o,a)},d.Matrix=Te;var _e=d.matrixMult=function(e,t){return t.multiply(e)},Le=new Te(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Le;var Oe=function(e,t){if(!be[e]){var n=(t instanceof iye?"Sh":"P")+(Object.keys(ve).length+1).toString(10);t.id=n,be[e]=n,ve[n]=t,Se.publish("addPattern",t)}};d.ShadingPattern=iye,d.TilingPattern=sye,d.addShadingPattern=function(e,t){return B("addShadingPattern()"),Oe(e,t),this},d.beginTilingPattern=function(e){B("beginTilingPattern()"),an(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},d.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=G[M].join("\n"),Oe(e,t),Se.publish("endTilingPattern",t),Fe.pop().restore()};var Re,Ue=d.__private__.newObject=function(){var e=De();return Pe(e,!0),e},De=d.__private__.newObjectDeferred=function(){return z++,V[z]=function(){return W},z},Pe=function(e,t){return t="boolean"==typeof t&&t,V[e]=W,t&&Z(e+" 0 obj"),e},Me=d.__private__.newAdditionalObject=function(){var e={objId:De(),content:""};return K.push(e),e},Qe=De(),He=De(),ze=d.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",o=0;o<3;o++)r+=("0"+Math.floor(255*parseFloat(t[o])).toString(16)).slice(-2);return r},Ve=d.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,o=e.ch3,a=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var s=new Pme(n);if(s.ok)n=s.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,r=c>>8&255,o=255&c}if(void 0===r||void 0===a&&n===r&&r===o)if("string"==typeof n)t=n+" "+i[0];else if(2===e.precision)t=I(n/255)+" "+i[0];else t=E(n/255)+" "+i[0];else if(void 0===a||"object"===(0,F6.Z)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",i[1]].join(" ");if("string"==typeof n)t=[n,r,o,i[1]].join(" ");else if(2===e.precision)t=[I(n/255),I(r/255),I(o/255),i[1]].join(" ");else t=[E(n/255),E(r/255),E(o/255),i[1]].join(" ")}else if("string"==typeof n)t=[n,r,o,a,i[2]].join(" ");else if(2===e.precision)t=[I(n),I(r),I(o),I(a),i[2]].join(" ");else t=[E(n),E(r),E(o),E(a),i[2]].join(" ");return t},je=d.__private__.getFilters=function(){return i},We=d.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||je(),r=e.alreadyAppliedFilters||[],o=e.addLength1||!1,a=t.length,i=e.objectId,s=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(s=vt.encryptor(i,0));var c={};!0===n&&(n=["FlateEncode"]);var l=e.additionalKeyValues||[],A=(c=void 0!==cye.API.processDataByFilters?cye.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==c.data.length&&(l.push({key:"Length",value:c.data.length}),!0===o&&l.push({key:"Length1",value:a})),0!=A.length)if(A.split("/").length-1==1)l.push({key:"Filter",value:A});else{l.push({key:"Filter",value:"["+A+"]"});for(var h=0;h<l.length;h+=1)if("DecodeParms"===l[h].key){for(var d=[],p=0;p<c.reverseChain.split("/").length-1;p+=1)d.push("null");d.push(l[h].value),l[h].value="["+d.join(" ")+"]"}}Z("<<");for(var f=0;f<l.length;f++)Z("/"+l[f].key+" "+l[f].value);Z(">>"),0!==c.data.length&&(Z("stream"),Z(s(c.data)),Z("endstream"))},Ke=d.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,o=e.contentsObjId;Pe(r,!0),Z("<</Type /Page"),Z("/Parent "+e.rootDictionaryObjId+" 0 R"),Z("/Resources "+e.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Z("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Z("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Z("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&Z("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Z("/UserUnit "+e.userUnit),Se.publish("putPage",{objId:r,pageContext:Be[t],pageNumber:t,page:n}),Z("/Contents "+o+" 0 R"),Z(">>"),Z("endobj");var a=n.join("\n");return b===v&&(a+="\nQ"),Pe(o,!0),We({data:a,filters:je(),objectId:o}),Z("endobj"),r},Ge=d.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=ke;e++)Be[e].objId=De(),Be[e].contentsObjId=De();for(e=1;e<=ke;e++)n.push(Ke({number:e,data:G[e],objId:Be[e].objId,contentsObjId:Be[e].contentsObjId,mediaBox:Be[e].mediaBox,cropBox:Be[e].cropBox,bleedBox:Be[e].bleedBox,trimBox:Be[e].trimBox,artBox:Be[e].artBox,userUnit:Be[e].userUnit,rootDictionaryObjId:Qe,resourceDictionaryObjId:He}));Pe(Qe,!0),Z("<</Type /Pages");var r="/Kids [";for(t=0;t<ke;t++)r+=n[t]+" 0 R ";Z(r+"]"),Z("/Count "+ke),Z(">>"),Z("endobj"),Se.publish("postPutPages")},qe=function(e){Se.publish("putFont",{font:e,out:Z,newObject:Ue,putStream:We}),!0!==e.isAlreadyPutted&&(e.objectNumber=Ue(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+nye(e.postScriptName)),Z("/Subtype /Type1"),"string"==typeof e.encoding&&Z("/Encoding /"+e.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Xe=function(e){e.objectNumber=Ue();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");We({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Z("endobj")},Ye=function(e,t){t||(t=21);var n=Ue(),r=function(e,t){var n,r=[],o=1/(t-1);for(n=0;n<1;n+=o)r.push(n);if(r.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var s="",c=0,l=0;l<r.length;l++){for(n=r[l];n>e[c+1].offset;)c++;var u=e[c].offset,A=(n-u)/(e[c+1].offset-u),h=e[c].color,d=e[c+1].color;s+=H(Math.round((1-A)*h[0]+A*d[0]).toString(16))+H(Math.round((1-A)*h[1]+A*d[1]).toString(16))+H(Math.round((1-A)*h[2]+A*d[2]).toString(16))}return s.trim()}(e.colors,t),o=[];o.push({key:"FunctionType",value:"0"}),o.push({key:"Domain",value:"[0.0 1.0]"}),o.push({key:"Size",value:"["+t+"]"}),o.push({key:"BitsPerSample",value:"8"}),o.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),o.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We({data:r,additionalKeyValues:o,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),e.objectNumber=Ue(),Z("<< /ShadingType "+e.type),Z("/ColorSpace /DeviceRGB");var a="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?a+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):a+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),Z(a+="]"),e.matrix&&Z("/Matrix ["+e.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Ze=function(e,t){var n=De(),r=Ue();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var o=[];o.push({key:"Type",value:"/Pattern"}),o.push({key:"PatternType",value:"1"}),o.push({key:"PaintType",value:"1"}),o.push({key:"TilingType",value:"1"}),o.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),o.push({key:"XStep",value:k(e.xStep)}),o.push({key:"YStep",value:k(e.yStep)}),o.push({key:"Resources",value:n+" 0 R"}),e.matrix&&o.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),We({data:e.stream,additionalKeyValues:o,objectId:e.objectNumber}),Z("endobj")},Je=function(e){for(var t in e.objectNumber=Ue(),Z("<<"),e)switch(t){case"opacity":Z("/ca "+I(e[t]));break;case"stroke-opacity":Z("/CA "+I(e[t]))}Z(">>"),Z("endobj")},$e=function(e){Pe(e.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Z("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===A||!0===A&&h.hasOwnProperty(e))&&Z("/"+e+" "+ge[e].objectNumber+" 0 R");Z(">>")}(),function(){if(Object.keys(ve).length>0){for(var e in Z("/Shading <<"),ve)ve.hasOwnProperty(e)&&ve[e]instanceof iye&&ve[e].objectNumber>=0&&Z("/"+e+" "+ve[e].objectNumber+" 0 R");Se.publish("putShadingPatternDict"),Z(">>")}}(),function(e){if(Object.keys(ve).length>0){for(var t in Z("/Pattern <<"),ve)ve.hasOwnProperty(t)&&ve[t]instanceof d.TilingPattern&&ve[t].objectNumber>=0&&ve[t].objectNumber<e&&Z("/"+t+" "+ve[t].objectNumber+" 0 R");Se.publish("putTilingPatternDict"),Z(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in Z("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&Z("/"+e+" "+we[e].objectNumber+" 0 R");Se.publish("putGStateDict"),Z(">>")}}(),function(){for(var e in Z("/XObject <<"),Ee)Ee.hasOwnProperty(e)&&Ee[e].objectNumber>=0&&Z("/"+e+" "+Ee[e].objectNumber+" 0 R");Se.publish("putXobjectDict"),Z(">>")}(),Z(">>"),Z("endobj")},et=function(){var e=[];(function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===A||!0===A&&h.hasOwnProperty(e))&&qe(ge[e])})(),function(){var e;for(e in we)we.hasOwnProperty(e)&&Je(we[e])}(),function(){for(var e in Ee)Ee.hasOwnProperty(e)&&Xe(Ee[e])}(),function(e){var t;for(t in ve)ve.hasOwnProperty(t)&&(ve[t]instanceof iye?Ye(ve[t]):ve[t]instanceof sye&&Ze(ve[t],e))}(e),Se.publish("putResources"),e.forEach($e),$e({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),Se.publish("postPutResources")},tt=function(e){me[e.fontName]=me[e.fontName]||{},me[e.fontName][e.fontStyle]=e.id},nt=function(e,t,n,r,o){var a={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:o||!1,metadata:{}};return Se.publish("addFont",{font:a,instance:this}),ge[a.id]=a,tt(a),a.id},rt=d.__private__.pdfEscape=d.pdfEscape=function(e,t){return function(e,t){var n,r,o,a,i,s,c,l,u;if(o=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&ge[Ae].metadata&&ge[Ae].metadata[o]&&ge[Ae].metadata[o].encoding&&(a=ge[Ae].metadata[o].encoding,!i&&ge[Ae].encoding&&(i=ge[Ae].encoding),!i&&a.codePages&&(i=a.codePages[0]),"string"==typeof i&&(i=a[i]),i)){for(c=!1,s=[],n=0,r=e.length;n<r;n++)(l=i[e.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(e[n]),s[n].charCodeAt(0)>>8&&(c=!0);e=s.join("")}for(n=e.length;void 0===c&&0!==n;)e.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return e;for(s=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(l=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(l-(u<<8))}return String.fromCharCode.apply(void 0,s)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ot=d.__private__.beginPage=function(e){G[++ke]=[],Be[ke]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},st(ke),Y(G[M])},at=function(e,t){var r,a,i;switch(n=t||n,"string"==typeof e&&(r=m(e.toLowerCase()),Array.isArray(r)&&(a=r[0],i=r[1])),Array.isArray(e)&&(a=e[0]*he,i=e[1]*he),isNaN(a)&&(a=o[0],i=o[1]),(a>14400||i>14400)&&(Tme.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),a=Math.min(14400,a),i=Math.min(14400,i)),o=[a,i],n.substr(0,1)){case"l":i>a&&(o=[i,a]);break;case"p":a>i&&(o=[i,a])}ot(o),Mt(Dt),Z(Gt),0!==$t&&Z($t+" J"),0!==en&&Z(en+" j"),Se.publish("addPage",{pageNumber:ke})},it=function(e){e>0&&e<=ke&&(G.splice(e,1),Be.splice(e,1),ke--,M>ke&&(M=ke),this.setPage(M))},st=function(e){e>0&&e<=ke&&(M=e)},ct=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return G.length-1},lt=function(e,t,n){var r,o=void 0;return n=n||{},e=void 0!==e?e:ge[Ae].fontName,t=void 0!==t?t:ge[Ae].fontStyle,r=e.toLowerCase(),void 0!==me[r]&&void 0!==me[r][t]?o=me[r][t]:void 0!==me[e]&&void 0!==me[e][t]?o=me[e][t]:!1===n.disableWarning&&Tme.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),o||n.noFallback||null==(o=me.times[t])&&(o=me.times.normal),o},ut=d.__private__.putInfo=function(){var e=Ue(),t=function(e){return e};for(var n in null!==u&&(t=vt.encryptor(e,0)),Z("<<"),Z("/Producer ("+rt(t("jsPDF "+cye.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+rt(t(ue[n]))+")");Z("/CreationDate ("+rt(t(T))+")"),Z(">>"),Z("endobj")},At=d.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Qe;switch(Ue(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&Z("/OpenAction [3 0 R /XYZ null null "+I(ne)+"]")}switch(se||(se="continuous"),se){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ae&&Z("/PageMode /"+ae),Se.publish("putCatalog"),Z(">>"),Z("endobj")},ht=d.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(z+1)),Z("/Root "+z+" 0 R"),Z("/Info "+(z-1)+" 0 R"),null!==u&&Z("/Encrypt "+vt.oid+" 0 R"),Z("/ID [ <"+_+"> <"+_+"> ]"),Z(">>")},dt=d.__private__.putHeader=function(){Z("%PDF-"+p),Z("%\xba\xdf\xac\xe0")},pt=d.__private__.putXRef=function(){var e="0000000000";Z("xref"),Z("0 "+(z+1)),Z("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof V[t]?Z((e+V[t]()).slice(-10)+" 00000 n "):void 0!==V[t]?Z((e+V[t]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},ft=d.__private__.buildDocument=function(){z=0,W=0,j=[],V=[],K=[],Qe=De(),He=De(),Y(j),Se.publish("buildDocument"),dt(),Ge(),function(){Se.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];Pe(t.objId,!0),Z(t.content),Z("endobj")}Se.publish("postPutAdditionalObjects")}(),et(),null!==u&&(vt.oid=Ue(),Z("<<"),Z("/Filter /Standard"),Z("/V "+vt.v),Z("/R "+vt.r),Z("/U <"+vt.toHexString(vt.U)+">"),Z("/O <"+vt.toHexString(vt.O)+">"),Z("/P "+vt.P),Z(">>"),Z("endobj")),ut(),At();var e=W;return pt(),ht(),Z("startxref"),Z(""+e),Z("%%EOF"),Y(G[M]),j.join("\n")},gt=d.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},mt=d.output=d.__private__.output=(Re=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return ft();case"save":d.save(t.filename);break;case"arraybuffer":return $(ft());case"blob":return gt(ft());case"bloburi":case"bloburl":if(void 0!==Nme.URL&&"function"==typeof Nme.URL.createObjectURL)return Nme.URL&&Nme.URL.createObjectURL(gt(ft()))||void 0;Tme.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=ft();try{n=Ume(r)}catch(e){n=Ume(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Nme)){var o="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",a=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(o=t.pdfObjectUrl,a="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+o+'"'+a+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",s=Nme.open();return null!==s&&s.document.write(i),s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Nme)){var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',l=Nme.open();if(null!==l){l.document.write(c);var u=this;l.document.documentElement.querySelector("#pdfViewer").onload=function(){l.document.title=t.filename,l.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return l}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Nme))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=Nme.open();if(null!==h&&(h.document.write(A),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return Nme.document.location.href=this.output("datauristring",t);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(Re){var e=Re.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Re.message;if(!Nme.console)throw new Error(t);Nme.console.error(t,Re),Nme.alert&&alert(t)}},Re.foo.bar=Re,Re.foo),yt=function(e){return!0===Array.isArray(Ie)&&Ie.indexOf(e)>-1};switch(r){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==yt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);he=r}var vt=null;D(),O();var bt=d.__private__.getPageInfo=d.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Be[e].objId,pageNumber:e,pageContext:Be[e]}},wt=d.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Be)if(Be[t].objId===e)break;return bt(t)},xt=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Be[M].objId,pageNumber:M,pageContext:Be[M]}};d.addPage=function(){return at.apply(this,arguments),this},d.setPage=function(){return st.apply(this,arguments),Y.call(this,G[M]),this},d.insertPage=function(e){return this.addPage(),this.movePage(M,e),this},d.movePage=function(e,t){var n,r;if(e>t){n=G[e],r=Be[e];for(var o=e;o>t;o--)G[o]=G[o-1],Be[o]=Be[o-1];G[t]=n,Be[t]=r,this.setPage(t)}else if(e<t){n=G[e],r=Be[e];for(var a=e;a<t;a++)G[a]=G[a+1],Be[a]=Be[a+1];G[t]=n,Be[t]=r,this.setPage(t)}return this},d.deletePage=function(){return it.apply(this,arguments),this},d.__private__.text=d.text=function(e,t,n,r,o){var a,i,s,c,l,u,A,d,p,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Te==0?(s=arguments[4],c=arguments[5],"object"===(0,F6.Z)(A=arguments[3])&&null!==A||("string"==typeof s&&(c=s,s=null),"string"==typeof A&&(c=A,A=null),"number"==typeof A&&(s=A,A=null),r={flags:A,angle:s,align:c})):(B("The transform parameter of text() with a Matrix value"),p=o),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var m,y="",w="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Ut,x=f.internal.scaleFactor;function C(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),rt(e,A)}function S(e){for(var t,n=e.concat(),r=[],o=n.length;o--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function I(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,o,a=e.concat(),i=[],s=a.length;s--;)"string"==typeof(r=a.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(o=t(r[0],r[1],r[2]),i.push([o[0],o[1],o[2]]));n=i}return n}var E=!1,F=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var T=e.concat();i=[];for(var _,L=T.length;L--;)("string"!=typeof(_=T.shift())||Array.isArray(_)&&"string"!=typeof _[0])&&(F=!1);E=F}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var O=te/f.internal.scaleFactor,R=O*(w-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=O-R;break;case"hanging":n+=O-2*R;break;case"middle":n+=O/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(f.splitTextToSize(t,u))}),[]))),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:ge,activeFontSize:te}},Se.publish("preProcessText",a),e=a.text,s=(r=a.options).angle,p instanceof Te==0&&s&&"number"==typeof s){s*=Math.PI/180,0===r.rotationDirection&&(s=-s),b===v&&(s=-s);var U=Math.cos(s),D=Math.sin(s);p=new Te(U,D,-D,U,0,0)}else s&&s instanceof Te&&(p=s);b!==v||p||(p=Le),void 0!==(l=r.charSpace||Zt)&&(y+=k(N(l))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(d=r.horizontalScale)&&(y+=k(100*d)+" Tz\n"),r.lang;var P=-1,M=void 0!==r.renderingMode?r.renderingMode:r.stroke,Q=f.internal.getCurrentPageInfo().pageContext;switch(M){case 0:case!1:case"fill":P=0;break;case 1:case!0:case"stroke":P=1;break;case 2:case"fillThenStroke":P=2;break;case 3:case"invisible":P=3;break;case 4:case"fillAndAddForClipping":P=4;break;case 5:case"strokeAndAddPathForClipping":P=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":P=6;break;case 7:case"addToPathForClipping":P=7}var H=void 0!==Q.usedRenderingMode?Q.usedRenderingMode:-1;-1!==P?y+=P+" Tr\n":-1!==H&&(y+="0 Tr\n"),-1!==P&&(Q.usedRenderingMode=P),c=r.align||"left";var z,V=te*w,j=f.internal.pageSize.getWidth(),W=ge[Ae];l=r.charSpace||Zt,u=r.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},r.flags);var K=[];if("[object Array]"===Object.prototype.toString.call(e)){var G;i=S(e),"left"!==c&&(z=i.map((function(e){return f.getStringUnitWidth(e,{font:W,charSpace:l,fontSize:te,doKerning:!1})*te/x})));var q,X=0;if("right"===c){t-=z[0],e=[],L=i.length;for(var Y=0;Y<L;Y++)0===Y?(q=Vt(t),G=jt(n)):(q=N(X-z[Y]),G=-V),e.push([i[Y],q,G]),X=z[Y]}else if("center"===c){t-=z[0]/2,e=[],L=i.length;for(var J=0;J<L;J++)0===J?(q=Vt(t),G=jt(n)):(q=N((X-z[J])/2),G=-V),e.push([i[J],q,G]),X=z[J]}else if("left"===c){e=[],L=i.length;for(var $=0;$<L;$++)e.push(i[$])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');e=[],L=i.length,u=0!==u?u:j;for(var ee=0;ee<L;ee++)G=0===ee?jt(n):-V,q=0===ee?Vt(t):0,ee<L-1?K.push(k(N((u-z[ee])/(i[ee].split(" ").length-1)))):K.push(0),e.push([i[ee],q,G])}}!0===("boolean"==typeof r.R2L?r.R2L:oe)&&(e=I(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:ge,activeFontSize:te}},Se.publish("postProcessText",a),e=a.text,m=a.mutex.isHex||!1;var ne=ge[Ae].encoding;"WinAnsiEncoding"!==ne&&"StandardEncoding"!==ne||(e=I(e,(function(e,t,n){return[C(e),t,n]}))),i=S(e),e=[];for(var re,ae,ie,se=Array.isArray(i[0])?1:0,ce="",le=function(e,t,n){var o="";return n instanceof Te?(n="number"==typeof r.angle?_e(n,new Te(1,0,0,1,e,t)):_e(new Te(1,0,0,1,e,t),n),b===v&&(n=_e(new Te(1,0,0,-1,0,0),n)),o=n.join(" ")+" Tm\n"):o=k(e)+" "+k(t)+" Td\n",o},ue=0;ue<i.length;ue++){switch(ce="",se){case 1:ie=(m?"<":"(")+i[ue][0]+(m?">":")"),re=parseFloat(i[ue][1]),ae=parseFloat(i[ue][2]);break;case 0:ie=(m?"<":"(")+i[ue]+(m?">":")"),re=Vt(t),ae=jt(n)}void 0!==K&&void 0!==K[ue]&&(ce=K[ue]+" Tw\n"),0===ue?e.push(ce+le(re,ae,p)+ie):0===se?e.push(ce+ie):1===se&&e.push(ce+le(re,ae,p)+ie)}e=0===se?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var he="BT\n/";return he+=Ae+" "+te+" Tf\n",he+=k(te*w)+" TL\n",he+=Xt+"\n",he+=y,he+=e,Z(he+="ET"),h[Ae]=!0,f};var Ct=d.__private__.clip=d.clip=function(e){return Z("evenodd"===e?"W*":"W"),this};d.clipEvenOdd=function(){return Ct("evenodd")},d.__private__.discardPath=d.discardPath=function(){return Z("n"),this};var kt=d.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(e){return kt(e)&&(l=e),this};var Bt=d.__private__.getStyle=d.getStyle=function(e){var t=l;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},St=d.close=function(){return Z("h"),this};d.stroke=function(){return Z("S"),this},d.fill=function(e){return It("f",e),this},d.fillEvenOdd=function(e){return It("f*",e),this},d.fillStroke=function(e){return It("B",e),this},d.fillStrokeEvenOdd=function(e){return It("B*",e),this};var It=function(e,t){"object"===(0,F6.Z)(t)?Ft(t,e):Z(e)},Et=function(e){null===e||b===v&&void 0===e||(e=Bt(e),Z(e))};function Nt(e,t,n,r,o){var a=new sye(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,o||this.matrix);a.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Oe(i,a),a}var Ft=function(e,t){var n=be[e.key],r=ve[n];if(r instanceof iye)Z("q"),Z(Tt(t)),r.gState&&d.setGState(r.gState),Z(e.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(r instanceof sye){var o=new Te(1,0,0,-1,0,un());e.matrix&&(o=o.multiply(e.matrix||Le),n=Nt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,o).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),r.gState&&d.setGState(r.gState),Z(t),Z("Q")}},Tt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_t=d.moveTo=function(e,t){return Z(k(N(e))+" "+k(F(t))+" m"),this},Lt=d.lineTo=function(e,t){return Z(k(N(e))+" "+k(F(t))+" l"),this},Ot=d.curveTo=function(e,t,n,r,o,a){return Z([k(N(e)),k(F(t)),k(N(n)),k(F(r)),k(N(o)),k(F(a)),"c"].join(" ")),this};d.__private__.line=d.line=function(e,t,n,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!kt(o))throw new Error("Invalid arguments passed to jsPDF.line");return b===y?this.lines([[n-e,r-t]],e,t,[1,1],o||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},d.__private__.lines=d.lines=function(e,t,n,r,o,a){var i,s,c,l,u,A,h,d,p,f,g,m;if("number"==typeof e&&(m=n,n=t,t=e,e=m),r=r||[1,1],a=a||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!kt(o)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for(_t(t,n),i=r[0],s=r[1],l=e.length,f=t,g=n,c=0;c<l;c++)2===(u=e[c]).length?(f=u[0]*i+f,g=u[1]*s+g,Lt(f,g)):(A=u[0]*i+f,h=u[1]*s+g,d=u[2]*i+f,p=u[3]*s+g,f=u[4]*i+f,g=u[5]*s+g,Ot(A,h,d,p,f,g));return a&&St(),Et(o),this},d.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":_t(r[0],r[1]);break;case"l":Lt(r[0],r[1]);break;case"c":Ot.apply(this,r);break;case"h":St()}}return this},d.__private__.rect=d.rect=function(e,t,n,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!kt(o))throw new Error("Invalid arguments passed to jsPDF.rect");return b===y&&(r=-r),Z([k(N(e)),k(F(t)),k(N(n)),k(N(r)),"re"].join(" ")),Et(o),this},d.__private__.triangle=d.triangle=function(e,t,n,r,o,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(o)||isNaN(a)||!kt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[o-n,a-r],[e-o,t-a]],e,t,[1,1],i,!0),this},d.__private__.roundedRect=d.roundedRect=function(e,t,n,r,o,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(o)||isNaN(a)||!kt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return o=Math.min(o,.5*n),a=Math.min(a,.5*r),this.lines([[n-2*o,0],[o*s,0,o,a-a*s,o,a],[0,r-2*a],[0,a*s,-o*s,a,-o,a],[2*o-n,0],[-o*s,0,-o,-a*s,-o,-a],[0,2*a-r],[0,-a*s,o*s,-a,o,-a]],e+o,t,[1,1],i,!0),this},d.__private__.ellipse=d.ellipse=function(e,t,n,r,o){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!kt(o))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*r;return _t(e+n,t),Ot(e+n,t-i,e+a,t-r,e,t-r),Ot(e-a,t-r,e-n,t-i,e-n,t),Ot(e-n,t+i,e-a,t+r,e,t+r),Ot(e+a,t+r,e+n,t+i,e+n,t),Et(o),this},d.__private__.circle=d.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!kt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},d.setFont=function(e,t,n){return n&&(t=C(t,n)),Ae=lt(e,t,{disableWarning:!1}),this};var Rt=d.__private__.getFont=d.getFont=function(){return ge[lt.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var e,t,n={};for(e in me)if(me.hasOwnProperty(e))for(t in n[e]=[],me[e])me[e].hasOwnProperty(t)&&n[e].push(t);return n},d.addFont=function(e,t,n,r,o){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?o=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(n=C(n,r)),nt.call(this,e,t,n,o=o||"Identity-H")};var Ut,Dt=e.lineWidth||.200025,Pt=d.__private__.getLineWidth=d.getLineWidth=function(){return Dt},Mt=d.__private__.setLineWidth=d.setLineWidth=function(e){return Dt=e,Z(k(N(e))+" w"),this};d.__private__.setLineDash=cye.API.setLineDash=cye.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return k(N(e))})).join(" "),t=k(N(t)),Z("["+e+"] "+t+" d"),this};var Qt=d.__private__.getLineHeight=d.getLineHeight=function(){return te*Ut};d.__private__.getLineHeight=d.getLineHeight=function(){return te*Ut};var Ht=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Ut=e),this},zt=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Ut};Ht(e.lineHeight);var Vt=d.__private__.getHorizontalCoordinate=function(e){return N(e)},jt=d.__private__.getVerticalCoordinate=function(e){return b===v?e:Be[M].mediaBox.topRightY-Be[M].mediaBox.bottomLeftY-N(e)},Wt=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(e){return k(Vt(e))},Kt=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(e){return k(jt(e))},Gt=e.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return ze(Gt)},d.__private__.setStrokeColor=d.setDrawColor=function(e,t,n,r){return Gt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Z(Gt),this};var qt=e.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return ze(qt)},d.__private__.setFillColor=d.setFillColor=function(e,t,n,r){return qt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Z(qt),this};var Xt=e.textColor||"0 g",Yt=d.__private__.getTextColor=d.getTextColor=function(){return ze(Xt)};d.__private__.setTextColor=d.setTextColor=function(e,t,n,r){return Xt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Zt=e.charSpace,Jt=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Zt||0)};d.__private__.setCharSpace=d.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zt=e,this};var $t=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,Z(t+" J"),this};var en=0;d.__private__.setLineJoin=d.setLineJoin=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return en=t,Z(t+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(k(N(e))+" M"),this},d.GState=oye,d.setGState=function(e){(e="string"==typeof e?we[xe[e]]:tn(null,e)).equals(Ce)||(Z("/"+e.id+" gs"),Ce=e)};var tn=function(e,t){if(!e||!xe[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var o="GS"+(Object.keys(we).length+1).toString(10);we[o]=t,t.id=o}return e&&(xe[e]=t.id),Se.publish("addGState",t),t}};d.addGState=function(e,t){return tn(e,t),this},d.saveGraphicsState=function(){return Z("q"),ye.push({key:Ae,size:te,color:Xt}),this},d.restoreGraphicsState=function(){Z("Q");var e=ye.pop();return Ae=e.key,te=e.size,Xt=e.color,Ce=null,this},d.setCurrentTransformationMatrix=function(e){return Z(e.toString()+" cm"),this},d.comment=function(e){return Z("#"+e),this};var nn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var o="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return o},set:function(e){o=e.toString()}}),this},rn=function(e,t,n,r){nn.call(this,e,t),this.type="rect";var o=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}});var a=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},on=function(){this.page=ke,this.currentPage=M,this.pages=G.slice(0),this.pagesContext=Be.slice(0),this.x=de,this.y=pe,this.matrix=fe,this.width=cn(M),this.height=un(M),this.outputDestination=X,this.id="",this.objectNumber=-1};on.prototype.restore=function(){ke=this.page,M=this.currentPage,Be=this.pagesContext,G=this.pages,de=this.x,pe=this.y,fe=this.matrix,ln(M,this.width),An(M,this.height),X=this.outputDestination};var an=function(e,t,n,r,o){Fe.push(new on),ke=M=0,G=[],de=e,pe=t,fe=o,ot([n,r])};for(var sn in d.beginFormObject=function(e,t,n,r,o){return an(e,t,n,r,o),this},d.endFormObject=function(e){return function(e){if(Ne[e])Fe.pop().restore();else{var t=new on,n="Xo"+(Object.keys(Ee).length+1).toString(10);t.id=n,Ne[e]=n,Ee[n]=t,Se.publish("addFormObject",t),Fe.pop().restore()}}(e),this},d.doFormObject=function(e,t){var n=Ee[Ne[e]];return Z("q"),Z(t.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},d.getFormObject=function(e){var t=Ee[Ne[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},d.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(Dme(gt(ft()),e),"function"==typeof Dme.unload&&Nme.setTimeout&&setTimeout(Dme.unload,911),this):new Promise((function(t,n){try{var r=Dme(gt(ft()),e);"function"==typeof Dme.unload&&Nme.setTimeout&&setTimeout(Dme.unload,911),t(r)}catch(e){n(e.message)}}))},cye.API)cye.API.hasOwnProperty(sn)&&("events"===sn&&cye.API.events.length?function(e,t){var n,r,o;for(o=t.length-1;-1!==o;o--)n=t[o][0],r=t[o][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Se,cye.API.events):d[sn]=cye.API[sn]);var cn=d.getPageWidth=function(e){return(Be[e=e||M].mediaBox.topRightX-Be[e].mediaBox.bottomLeftX)/he},ln=d.setPageWidth=function(e,t){Be[e].mediaBox.topRightX=t*he+Be[e].mediaBox.bottomLeftX},un=d.getPageHeight=function(e){return(Be[e=e||M].mediaBox.topRightY-Be[e].mediaBox.bottomLeftY)/he},An=d.setPageHeight=function(e,t){Be[e].mediaBox.topRightY=t*he+Be[e].mediaBox.bottomLeftY};return d.internal={pdfEscape:rt,getStyle:Bt,getFont:Rt,getFontSize:re,getCharSpace:Jt,getTextColor:Yt,getLineHeight:Qt,getLineHeightFactor:zt,getLineWidth:Pt,write:J,getHorizontalCoordinate:Vt,getVerticalCoordinate:jt,getCoordinateString:Wt,getVerticalCoordinateString:Kt,collections:{},newObject:Ue,newAdditionalObject:Me,newObjectDeferred:De,newObjectDeferredBegin:Pe,getFilters:je,putStream:We,events:Se,scaleFactor:he,pageSize:{getWidth:function(){return cn(M)},setWidth:function(e){ln(M,e)},getHeight:function(){return un(M)},setHeight:function(e){An(M,e)}},encryptionOptions:u,encryption:vt,getEncryptor:function(e){return null!==u?vt.encryptor(e,0):function(e){return e}},output:mt,getNumberOfPages:ct,pages:G,out:Z,f2:I,f3:E,getPageInfo:bt,getPageInfoByObjId:wt,getCurrentPageInfo:xt,getPDFVersion:f,Point:nn,Rectangle:rn,Matrix:Te,hasHotfix:yt},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return cn(M)},set:function(e){ln(M,e)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return un(M)},set:function(e){An(M,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=nt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===A&&(h[r]=!0);var o=e[t][0].split("-");tt({id:r,fontName:o[0],fontStyle:o[1]||""})}Se.publish("addFonts",{fonts:ge,dictionary:me})}.call(d,ee),Ae="F1",at(o,n),Se.publish("initialized"),d}tye.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},tye.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},tye.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},tye.prototype.processOwnerPassword=function(e,t){return $me(Yme(t).substr(0,5),e)},tye.prototype.encryptor=function(e,t){var n=Yme(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return $me(n,e)}},oye.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,F6.Z)(e)!==(0,F6.Z)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},cye.API={events:[]},cye.version="2.5.1";var lye=cye.API,uye=1,Aye=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hye=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dye=function(e){return e.toFixed(2)},pye=function(e){return e.toFixed(5)};lye.__acroform__={};var fye=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},gye=function(e){return e*uye},mye=function(e){var t=new Oye,n=qye.internal.getHeight(e)||0,r=qye.internal.getWidth(e)||0;return t.BBox=[0,0,Number(dye(r)),Number(dye(n))],t},yye=lye.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},vye=lye.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},bye=lye.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},wye=lye.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bye(e,t-1)},xye=lye.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yye(e,t-1)},Cye=lye.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return vye(e,t-1)},kye=lye.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],a=e[1],i=e[2],s=e[3],c={};return c.lowerLeft_X=n(o)||0,c.lowerLeft_Y=r(a+s)||0,c.upperRight_X=n(o+i)||0,c.upperRight_Y=r(a)||0,[Number(dye(c.lowerLeft_X)),Number(dye(c.lowerLeft_Y)),Number(dye(c.upperRight_X)),Number(dye(c.upperRight_Y))]},Bye=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Sye(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+dye(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=mye(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},Sye=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map((function(e){return e.split("\n")})):o.map((function(e){return[e]}));var a=n,i=qye.internal.getHeight(e)||0;i=i<0?-i:i;var s=qye.internal.getWidth(e)||0;s=s<0?-s:s;var c=function(t,n,r){if(t+1<o.length){var a=n+" "+o[t+1][0];return Iye(a,e,r).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var l,u,A=Iye("3",e,a).height,h=e.multiline?i-a:(i-A)/2,d=h+=2,p=0,f=0,g=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+Iye(t,e,a=12).width+", FieldWidth:"+s+"\n";break}for(var m="",y=0,v=0;v<o.length;v++)if(o.hasOwnProperty(v)){var b=!1;if(1!==o[v].length&&g!==o[v].length-1){if((A+2)*(y+2)+2>i)continue e;m+=o[v][g],b=!0,f=v,v--}else{m=" "==(m+=o[v][g]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var w=parseInt(v),x=c(w,m,a),C=v>=o.length-1;if(x&&!C){m+=" ",g=0;continue}if(x||C){if(C)f=w;else if(e.multiline&&(A+2)*(y+2)+2>i)continue e}else{if(!e.multiline)continue e;if((A+2)*(y+2)+2>i)continue e;f=w}}for(var k="",B=p;B<=f;B++){var S=o[B];if(e.multiline){if(B===f){k+=S[g]+" ",g=(g+1)%S.length;continue}if(B===p){k+=S[S.length-1]+" ";continue}}k+=S[0]+" "}switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,u=Iye(k,e,a).width,e.textAlign){case"right":l=s-u-2;break;case"center":l=(s-u)/2;break;default:l=2}t+=dye(l)+" "+dye(d)+" Td\n",t+="("+Aye(k)+") Tj\n",t+=-dye(l)+" 0 Td\n",d=-(a+2),u=0,p=b?f:f+1,y++,m=""}break}return r.text=t,r.fontSize=a,r},Iye=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},Eye={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Nye=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Fye=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(Uye.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Eye)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");uye=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Rye,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&Nye(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var o=e[r],a=[],i=o.Rect;if(o.Rect&&(o.Rect=kye(o.Rect,t)),t.internal.newObjectDeferredBegin(o.objId,!0),o.DA=qye.createDefaultAppearanceStream(o),"object"===(0,F6.Z)(o)&&"function"==typeof o.getKeyValueListForStream&&(a=o.getKeyValueListForStream()),o.Rect=i,o.hasAppearanceStream&&!o.appearanceStreamContent){var s=Bye(o);a.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(o.appearanceStreamContent){var c="";for(var l in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(l)){var u=o.appearanceStreamContent[l];if(c+="/"+l+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var A=u[r];"function"==typeof A&&(A=A.call(t,o)),c+="/"+r+" "+A+" ",t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A)}}else"function"==typeof(A=u)&&(A=A.call(t,o)),c+="/"+r+" "+A,t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A);c+=">>"}a.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:o.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),"object"===(0,F6.Z)(o)&&"function"==typeof o.putStream&&o.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},Tye=lye.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var o="[",a=0;a<e.length;a++)switch(0!==a&&(o+=" "),(0,F6.Z)(e[a])){case"boolean":case"number":case"object":o+=e[a].toString();break;case"string":"/"!==e[a].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),o+="("+Aye(r(e[a].toString()))+")"):o+=e[a].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_ye=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Aye(r(e))+")"},Lye=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lye.prototype.toString=function(){return this.objId+" 0 R"},Lye.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Lye.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:Tye(o,this.objId,this.scope)}):o instanceof Lye?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):"function"!=typeof o&&e.push({key:r,value:o}))}return e};var Oye=function(){Lye.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};fye(Oye,Lye);var Rye=function(){Lye.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Aye(t(e))+")"}},set:function(t){e=t}})};fye(Rye,Lye);var Uye=function e(){Lye.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(t,3))},set:function(e){!0===Boolean(e)?this.F=xye(t,3):this.F=Cye(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof jye)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Aye(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/uye:l},set:function(e){l=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof jye||this instanceof Kye))return _ye(A,this.objId,this.scope)},set:function(e){e=e.toString(),A=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Hye==0?_ye(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof Hye==0?"("===e.substr(0,1)?hye(e.substr(1,e.length-2)):hye(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hye==1?hye(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof Hye==1?"/"+e:e}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Hye==0?_ye(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof Hye==0?"("===e.substr(0,1)?hye(e.substr(1,e.length-2)):hye(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hye==1?hye(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof Hye==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,1):this.Ff=Cye(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,2):this.Ff=Cye(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,3):this.Ff=Cye(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};fye(Uye,Lye);var Dye=function(){Uye.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Tye(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,o=[];r=t.exec(e);)o.push(r[n]);return o}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,18):this.Ff=Cye(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=xye(this.Ff,19):this.Ff=Cye(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=xye(this.Ff,20),t.sort()):this.Ff=Cye(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,22):this.Ff=Cye(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,23):this.Ff=Cye(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,27):this.Ff=Cye(this.Ff,27)}}),this.hasAppearanceStream=!1};fye(Dye,Uye);var Pye=function(){Dye.call(this),this.fontName="helvetica",this.combo=!1};fye(Pye,Dye);var Mye=function(){Pye.call(this),this.combo=!0};fye(Mye,Pye);var Qye=function(){Mye.call(this),this.edit=!0};fye(Qye,Mye);var Hye=function(){Uye.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,15):this.Ff=Cye(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,16):this.Ff=Cye(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,17):this.Ff=Cye(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,26):this.Ff=Cye(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Aye(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,F6.Z)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};fye(Hye,Uye);var zye=function(){Hye.call(this),this.pushButton=!0};fye(zye,Hye);var Vye=function(){Hye.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};fye(Vye,Hye);var jye=function(){var e,t;Uye.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+Aye(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,F6.Z)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qye.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fye(jye,Uye),Vye.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Vye.prototype.createOption=function(e){var t=new jye;return t.Parent=this,t.optionName=e,this.Kids.push(t),Xye.call(this.scope,t),t};var Wye=function(){Hye.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qye.CheckBox.createAppearanceStream()};fye(Wye,Hye);var Kye=function(){Uye.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,13):this.Ff=Cye(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,21):this.Ff=Cye(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,23):this.Ff=Cye(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,24):this.Ff=Cye(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,25):this.Ff=Cye(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,26):this.Ff=Cye(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fye(Kye,Uye);var Gye=function(){Kye.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(wye(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=xye(this.Ff,14):this.Ff=Cye(this.Ff,14)}}),this.password=!0};fye(Gye,Kye);var qye={CheckBox:{createAppearanceStream:function(){return{N:{On:qye.CheckBox.YesNormal},D:{On:qye.CheckBox.YesPushDown,Off:qye.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),a=Sye(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+dye(qye.internal.getWidth(e))+" "+dye(qye.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+dye(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=mye(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],a=qye.internal.getHeight(e),i=qye.internal.getWidth(e),s=Sye(e,e.caption);return o.push("1 g"),o.push("0 0 "+dye(i)+" "+dye(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+dye(i-1)+" "+dye(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+dye(s.fontSize)+" Tf "+r),o.push(s.text),o.push("ET"),o.push("Q"),t.stream=o.join("\n"),t},OffPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dye(qye.internal.getWidth(e))+" "+dye(qye.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:qye.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=qye.RadioButton.Circle.YesNormal,t.D[e]=qye.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=mye(e);t.scope=e.scope;var n=[],r=qye.internal.getWidth(e)<=qye.internal.getHeight(e)?qye.internal.getWidth(e)/4:qye.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=qye.internal.Bezier_C,a=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pye(qye.internal.getWidth(e)/2)+" "+pye(qye.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=[],r=qye.internal.getWidth(e)<=qye.internal.getHeight(e)?qye.internal.getWidth(e)/4:qye.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*qye.internal.Bezier_C).toFixed(5)),i=Number((r*qye.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pye(qye.internal.getWidth(e)/2)+" "+pye(qye.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pye(qye.internal.getWidth(e)/2)+" "+pye(qye.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=[],r=qye.internal.getWidth(e)<=qye.internal.getHeight(e)?qye.internal.getWidth(e)/4:qye.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*qye.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pye(qye.internal.getWidth(e)/2)+" "+pye(qye.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:qye.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=qye.RadioButton.Cross.YesNormal,t.D[e]=qye.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=mye(e);t.scope=e.scope;var n=[],r=qye.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+dye(qye.internal.getWidth(e)-2)+" "+dye(qye.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(dye(r.x1.x)+" "+dye(r.x1.y)+" m"),n.push(dye(r.x2.x)+" "+dye(r.x2.y)+" l"),n.push(dye(r.x4.x)+" "+dye(r.x4.y)+" m"),n.push(dye(r.x3.x)+" "+dye(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=qye.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+dye(qye.internal.getWidth(e))+" "+dye(qye.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+dye(qye.internal.getWidth(e)-2)+" "+dye(qye.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(dye(n.x1.x)+" "+dye(n.x1.y)+" m"),r.push(dye(n.x2.x)+" "+dye(n.x2.y)+" l"),r.push(dye(n.x4.x)+" "+dye(n.x4.y)+" m"),r.push(dye(n.x3.x)+" "+dye(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=mye(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dye(qye.internal.getWidth(e))+" "+dye(qye.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};qye.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=qye.internal.getWidth(e),n=qye.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},qye.internal.getWidth=function(e){var t=0;return"object"===(0,F6.Z)(e)&&(t=gye(e.Rect[2])),t},qye.internal.getHeight=function(e){var t=0;return"object"===(0,F6.Z)(e)&&(t=gye(e.Rect[3])),t};var Xye=lye.addField=function(e){if(Fye(this,e),!(e instanceof Uye))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};lye.AcroFormChoiceField=Dye,lye.AcroFormListBox=Pye,lye.AcroFormComboBox=Mye,lye.AcroFormEditBox=Qye,lye.AcroFormButton=Hye,lye.AcroFormPushButton=zye,lye.AcroFormRadioButton=Vye,lye.AcroFormCheckBox=Wye,lye.AcroFormTextField=Kye,lye.AcroFormPasswordField=Gye,lye.AcroFormAppearance=qye,lye.AcroForm={ChoiceField:Dye,ListBox:Pye,ComboBox:Mye,EditBox:Qye,Button:Hye,PushButton:zye,RadioButton:Vye,CheckBox:Wye,TextField:Kye,PasswordField:Gye,Appearance:qye},cye.AcroForm={ChoiceField:Dye,ListBox:Pye,ComboBox:Mye,EditBox:Qye,Button:Hye,PushButton:zye,RadioButton:Vye,CheckBox:Wye,TextField:Kye,PasswordField:Gye,Appearance:qye};cye.AcroForm;function Yye(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var o,a,i,s,c,l=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(c in n)for(i=n[c],o=0;o<i.length;o+=1){for(s=!0,a=0;a<i[o].length;a+=1)if(void 0!==i[o][a]&&i[o][a]!==e[a]){s=!1;break}if(!0===s){l=c;break}}else for(c in n)for(i=n[c],o=0;o<i.length;o+=1){for(s=!0,a=0;a<i[o].length;a+=1)if(void 0!==i[o][a]&&i[o][a]!==e.charCodeAt(a)){s=!1;break}if(!0===s){l=c;break}}return l===t&&r!==t&&(l=r),l},o=function e(t){for(var n=this.internal.write,r=this.internal.putStream,o=(0,this.internal.getFilters)();-1!==o.indexOf("FlateEncode");)o.splice(o.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",s=0,c=t.transparency.length;s<c;s++)i+=t.transparency[s]+" "+t.transparency[s]+" ";a.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var l=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:l,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,A={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(A.filter=t.filter),e.call(this,A)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();r({data:k(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},a=function(){var e=this.internal.collections.addImage_images;for(var t in e)o.call(this,e[t])},i=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},l=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},A=function(e){return"object"===(0,F6.Z)(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return Rme(unescape(r).split("base64,").pop());var o=e.loadFile(r,!0);if(void 0!==o)return o}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(n){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return Rme(t.toDataURL(a,1).split("base64,").pop())}},d=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,o,a){var i=p.call(this,n,r,o),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=i[0],r=i[1],u[o.index]=o,a){a*=Math.PI/180;var A=Math.cos(a),h=Math.sin(a),d=function(e){return e.toFixed(4)},f=[d(A),d(h),d(-1*h),d(A),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,s(e),l(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([s(n),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(n),"0","0",s(r),s(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+o.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(x(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},v=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:t[1]})}return n},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},k=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=x(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,o,a,i,c,l,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],o=arguments[2],a=arguments[3],i=arguments[4],c=arguments[5],l=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],o=arguments[3],a=arguments[4],i=arguments[5],c=arguments[6],l=arguments[7],u=arguments[8]),"object"===(0,F6.Z)(e=arguments[0])&&!A(e)&&"imageData"in e){var h=e;e=h.imageData,n=h.format||n||t,r=h.x||r||0,o=h.y||o||0,a=h.w||h.width||a,i=h.h||h.height||i,c=h.alias||c,l=h.compression||l,u=h.rotation||h.angle||u}var d=this.internal.getFilters();if(void 0===l&&-1!==d.indexOf("FlateEncode")&&(l="SLOW"),isNaN(r)||isNaN(o))throw new Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var p=B.call(this,e,n,c,l);return f.call(this,r,o,a,i,p,u),this};var B=function(n,o,a,i){var s,c,p;if("string"==typeof n&&r(n)===t){n=unescape(n);var f=S(n,!1);(""!==f||void 0!==(f=e.loadFile(n,!0)))&&(n=f)}if(A(n)&&(n=h(n,o)),o=r(n,o),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if((null==(p=a)||0===p.length)&&(a=function(e){return"string"==typeof e||x(e)?y(e):x(e.data)?y(e.data):null}(n)),(s=d.call(this,a))||(w()&&(n instanceof Uint8Array||"RGBA"===o||(c=n,n=C(n))),s=this["process"+o.toUpperCase()](n,l.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:m.NONE}(i),c)),!s)throw new Error("An unknown error occurred whilst processing the image.");return s},S=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var r,o="";if("string"==typeof e){r=null!==(n=b(e))?n.data:e;try{o=Rme(r)}catch(e){if(t)throw v(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return o};e.getImageProperties=function(n){var o,a,i="";if(A(n)&&(n=h(n)),"string"==typeof n&&r(n)===t&&(""===(i=S(n,!1))&&(i=e.loadFile(n)||""),n=i),a=r(n),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(!w()||n instanceof Uint8Array||(n=C(n)),!(o=this["process"+a.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return o.fileType=a,o}}(cye.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};cye.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,o,a=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,l=!1,u=0;u<c.length&&!l;u++)switch((n=c[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var A=0;A<c.length;A++){n=c[A];var h=this.internal.pdfEscape,d=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),m=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",o+=" /Popup "+f.objId+" 0 R",o+=" /P "+s.objId+" 0 R",o+=" /T ("+h(g(m))+") >>",p.content=o;var y=p.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+i(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(o+=" /Open true"),o+=" >>",f.content=o,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(d(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(d(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var w=i(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}""!=o&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,o){var a=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:i(e),y:s(t),w:i(e+n),h:s(t+r)},options:o,type:"link"})},e.textWithLink=function(e,t,n,r){var o,a,i=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){a=r.maxWidth;var c=this.splitTextToSize(e,a).length;o=Math.ceil(s*c)}else a=i,o=s;return this.text(e,t,n,r),n+=.2*s,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,n-s,a,o,r),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(cye.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&o.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var l=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&a(e)&&4==t[e.charCodeAt(0)].length},A=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,o="",a=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(a++,"number"==typeof(r=r[e.charCodeAt(t)])&&(o+=String.fromCharCode(r),r=n,a=0),t===e.length-1&&(r=n,o+=e.charAt(t-(a-1)),t-=a-1,a=0)):(r=n,o+=e.charAt(t-a),t-=a,a=0);return o};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===a(e)?-1:!l(e)||!i(t)&&!i(n)||!i(n)&&s(t)||s(e)&&!i(t)||s(e)&&c(t)||s(e)&&s(t)?0:u(e)&&i(t)&&!s(t)&&i(n)&&l(n)?3:s(e)||!i(n)?1:2:-1},d=function(e){var n=0,r=0,o=0,a="",s="",c="",l=(e=e||"").split("\\s+"),u=[];for(n=0;n<l.length;n+=1){for(u.push(""),r=0;r<l[n].length;r+=1)a=l[n][r],s=l[n][r-1],c=l[n][r+1],i(a)?(o=h(a,s,c),u[n]+=-1!==o?String.fromCharCode(t[a.charCodeAt(0)][o]):a):u[n]+=a;u[n]=A(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([d(t[r][0]),t[r][1],t[r][2]]):n.push([d(t[r])]);e=n}else e=d(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(cye.API),cye.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(cye.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var o=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),o=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,i=0,s=0,c=0,l=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(l.splitTextToSize(t,u))}),[])):e=Array.isArray(e)?e:[e];for(var A=0;A<e.length;A++)i<(c=this.getStringUnitWidth(e[A],{font:o})*n)&&(i=c);return 0!==i&&(s=e.length),{w:i/=a,h:Math.max((s*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var o=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,c=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==o.lineNumber&&(o.lineNumber===e.lineNumber?(e.x=(o.x||0)+(o.width||0),e.y=o.y||0):o.y+o.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,l&&c&&(this.printHeaderRow(e.lineNumber,!0),e.y+=c[0].height)):e.y=o.y+o.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,l,u){if(r.call(this),!c)throw new Error("No data for PDF table.");var A,h,d,p,f=[],g=[],m=[],y={},v={},b=[],w=[],x=(u=u||{}).autoSize||!1,C=!1!==u.printHeaders,k=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,B=u.margins||Object.assign({width:this.getPageWidth()},t),S="number"==typeof u.padding?u.padding:3,I=u.headerBackgroundColor||"#c8c8c8",E=u.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=E,this.setFontSize(k),null==l)g=f=Object.keys(c[0]),m=f.map((function(){return"left"}));else if(Array.isArray(l)&&"object"===(0,F6.Z)(l[0]))for(f=l.map((function(e){return e.name})),g=l.map((function(e){return e.prompt||e.name||""})),m=l.map((function(e){return e.align||"left"})),A=0;A<l.length;A+=1)v[l[A].name]=l[A].width*(19.049976/25.4);else Array.isArray(l)&&"string"==typeof l[0]&&(g=f=l,m=f.map((function(){return"left"})));if(x||Array.isArray(l)&&"string"==typeof l[0])for(A=0;A<f.length;A+=1){for(y[p=f[A]]=c.map((function(e){return e[p]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(g[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=y[p],this.setFont(void 0,"normal"),d=0;d<h.length;d+=1)b.push(this.getTextDimensions(h[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[p]=Math.max.apply(null,b)+S+S,b=[]}if(C){var N={};for(A=0;A<f.length;A+=1)N[f[A]]={},N[f[A]].text=g[A],N[f[A]].align=m[A];var F=s.call(this,N,v);w=f.map((function(t){return new a(e,n,v[t],F,N[t].text,void 0,N[t].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var T=l.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(A=0;A<c.length;A+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:A,data:c[A]},this);var _=s.call(this,c[A],v);for(d=0;d<f.length;d+=1){var L=c[A][f[d]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:A,col:d,data:L},this),i.call(this,new a(e,n,v[f[d]],_,L,A+2,T[f[d]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var s=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,o=this.internal.scaleFactor;return Object.keys(e).map((function(r){var o=e[r];return this.splitTextToSize(o.hasOwnProperty("text")?o.text:o,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/o+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var o;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var c=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1){o=this.internal.__cell__.tableHeaderRow[l].clone(),t&&(o.y=this.internal.__cell__.margins.top||0,c.push(o)),o.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,o),this.setTextColor(u)}c.length>0&&this.setTableHeaderRow(c),this.setFont(void 0,"normal"),n=!1}}(cye.API);var Zye={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jye=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$ye=Yye(Jye),eve=[100,200,300,400,500,600,700,800,900],tve=Yye(eve);function nve(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Zye[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),o=function(e){return"number"==typeof $ye[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function rve(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var ove={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ave={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ive(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function sve(e){return e.trimLeft()}function cve(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function lve(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var uve,Ave,hve,dve,pve=["times"];!function(e){var t,n,r,o,a,i,s,c,l,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,s=this.internal.Rectangle,c=this.internal.Matrix,l=new u}]);var A=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var o=0;Object.defineProperty(this,"posX",{get:function(){return o},set:function(e){isNaN(e)||(o=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return l.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),l.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var s=0;Object.defineProperty(this,"lastBreak",{get:function(){return s},set:function(e){s=e}});var c=[];Object.defineProperty(this,"pageBreaks",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"ctx",{get:function(){return l},set:function(e){e instanceof u&&(l=e)}}),Object.defineProperty(this,"path",{get:function(){return l.path},set:function(e){l.path=e}});var A=[];Object.defineProperty(this,"ctxStack",{get:function(){return A},set:function(e){A=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var d=null;function p(e,t){if(null===d){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))}))})),t}(e.getFontList());d=function(e){for(var t={},n=0;n<e.length;++n){var r=nve(e[n]),o=r.family,a=r.stretch,i=r.style,s=r.weight;t[o]=t[o]||{},t[o][a]=t[o][a]||{},t[o][a][i]=t[o][a][i]||{},t[o][a][i][s]=r}return t}(n.concat(t))}return d}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){d=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],r=(t[2],t[3]),o=t[4],a=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(o)[2];o="px"===i?Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(o)*this.pdf.getFontSize()):Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(o);var s=function(e){var t,n,r=[],o=e.trim();if(""===o)return pve;if(o in ave)return[ave[o]];for(;""!==o;){switch(n=null,t=(o=sve(o)).charAt(0)){case'"':case"'":n=cve(o.substring(1),t);break;default:n=lve(o)}if(null===n)return pve;if(r.push(n[0]),""!==(o=sve(n[1]))&&","!==o.charAt(0))return pve;o=o.replace(/^,/,"")}return r}(a);if(this.fontFaces){var c=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},ove,n.genericFontFamilies||{}),a=null,i=null,s=0;s<t.length;++s)if(o[(a=nve(t[s])).family]&&(a.family=o[a.family]),e.hasOwnProperty(a.family)){i=e[a.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+ive(a)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var n=$ye[e],r=n<=$ye.normal?-1:1,o=rve(t,Jye,n,r);if(!o)throw new Error("Could not find a matching font-stretch value for "+e);return o}(a.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=Zye[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(a.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=tve[e],r=rve(t,eve,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+ive(a)+"'.");return i}(p(this.pdf,this.fontFaces),s.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(c.ref.name,c.ref.style)}else{var l="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(l="bold"),"italic"===n&&(l+="italic"),0===l.length&&(l="normal");for(var u="",A={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<s.length;h++){if(void 0!==this.pdf.internal.getFont(s[h],l,{noFallback:!0,disableWarning:!0})){u=s[h];break}if("bolditalic"===l&&void 0!==this.pdf.internal.getFont(s[h],"bold",{noFallback:!0,disableWarning:!0}))u=s[h],l="bold";else if(void 0!==this.pdf.internal.getFont(s[h],"normal",{noFallback:!0,disableWarning:!0})){u=s[h],l="normal";break}}if(""===u)for(var d=0;d<s.length;d++)if(A[s[d]]){u=A[s[d]];break}u=""===u?"Times":u,this.pdf.setFont(u,l)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,D.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,D.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};A.prototype.setLineDash=function(e){this.lineDash=e},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){b.call(this,"fill",!1)},A.prototype.stroke=function(){b.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw Tme.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(e,t)},A.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,F6.Z)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},A.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw Tme.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(n.x,n.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},A.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw Tme.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var o=this.ctx.transform.applyToPoint(new i(n,r)),a=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:o.x,y:o.y}),this.ctx.lastPoint=new i(o.x,o.y)},A.prototype.bezierCurveTo=function(e,t,n,r,o,a){if(isNaN(o)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw Tme.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new i(o,a)),c=this.ctx.transform.applyToPoint(new i(e,t)),l=this.ctx.transform.applyToPoint(new i(n,r));this.path.push({type:"bct",x1:c.x,y1:c.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new i(s.x,s.y)},A.prototype.arc=function(e,t,n,r,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(o))throw Tme.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new i(e,t));e=s.x,t=s.y;var c=this.ctx.transform.applyToPoint(new i(0,n)),l=this.ctx.transform.applyToPoint(new i(0,0));n=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2))}Math.abs(o-r)>=2*Math.PI&&(r=0,o=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:o,counterclockwise:a})},A.prototype.arcTo=function(e,t,n,r,o){throw new Error("arcTo not implemented.")},A.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw Tme.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},A.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw Tme.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var o={};"butt"!==this.lineCap&&(o.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(o.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),o.hasOwnProperty("lineCap")&&(this.lineCap=o.lineCap),o.hasOwnProperty("lineJoin")&&(this.lineJoin=o.lineJoin)}},A.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw Tme.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},A.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw Tme.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},A.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},A.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,r,o;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,o=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=parseFloat(a[4]);else{if(o=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new Pme(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:o,style:e}},d=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};A.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw Tme.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!d.call(this)){var o=O(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:a,angle:o,align:this.textAlign,maxWidth:r})}},A.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw Tme.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var o=O(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:a,renderingMode:"stroke",angle:o,align:this.textAlign,maxWidth:r})}},A.prototype.measureText=function(e){if("string"!=typeof e)throw Tme.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),o=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:o*=Math.round(96*n/72*1e4)/1e4})},A.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw Tme.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.rotate=function(e){if(isNaN(e))throw Tme.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},A.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw Tme.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.transform=function(e,t,n,r,o,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(o)||isNaN(a))throw Tme.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,n,r,o,a);this.ctx.transform=this.ctx.transform.multiply(i)},A.prototype.setTransform=function(e,t,n,r,o,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,o=isNaN(o)?0:o,a=isNaN(a)?0:a,this.ctx.transform=new c(e,t,n,r,o,a)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(e,t,n,r,o,a,i,l,u){var A=this.pdf.getImageProperties(e),h=1,d=1,p=1,m=1;void 0!==r&&void 0!==l&&(p=l/r,m=u/o,h=A.width/r*l/r,d=A.height/o*u/o),void 0===a&&(a=t,i=n,t=0,n=0),void 0!==r&&void 0===l&&(l=r,u=o),void 0===r&&void 0===l&&(l=A.width,u=A.height);for(var b,x=this.ctx.transform.decompose(),C=O(x.rotate.shx),k=new c,B=(k=(k=(k=k.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new s(a-t*p,i-n*m,r*h,o*d)),S=g.call(this,B),I=[],E=0;E<S.length;E+=1)-1===I.indexOf(S[E])&&I.push(S[E]);if(v(I),this.autoPaging)for(var N=I[0],F=I[I.length-1],T=N;T<F+1;T++){this.pdf.setPage(T);var _=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===T?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],U=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],D=1===T?0:R+(T-2)*U;if(0!==this.ctx.clip_path.length){var P=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(b,this.posX+this.margin[3],-D+L+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=P}var M=JSON.parse(JSON.stringify(B));M=y([M],this.posX+this.margin[3],-D+L+this.ctx.prevPageLastElemOffset)[0];var Q=(T>N||T<F)&&f.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_,U,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",M.x,M.y,M.w,M.h,null,null,C),Q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,C)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var o=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+o)/n)+1);break;case"arc":r.push(Math.floor((e.y+o-e.radius)/n)+1),r.push(Math.floor((e.y+o+e.radius)/n)+1);break;case"qct":var a=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((a.y+o)/n)+1),r.push(Math.floor((a.y+a.h+o)/n)+1);break;case"bct":var i=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+o)/n)+1),r.push(Math.floor((i.y+i.h+o)/n)+1);break;case"rect":r.push(Math.floor((e.y+o)/n)+1),r.push(Math.floor((e.y+e.h+o)/n)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)m.call(this);return r},m=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,o=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=o,this.lineJoin=a},y=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},v=function(e){return e.sort((function(e,t){return e-t}))},b=function(e,t){for(var n,r,o=this.fillStyle,a=this.strokeStyle,i=this.lineCap,s=this.lineWidth,c=Math.abs(s*this.ctx.transform.scaleX),l=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),A=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<A.length;d++)if(void 0!==A[d].x)for(var p=g.call(this,A[d]),b=0;b<p.length;b+=1)-1===h.indexOf(p[b])&&h.push(p[b]);for(var x=0;x<h.length;x++)for(;this.pdf.internal.getNumberOfPages()<h[x];)m.call(this);if(v(h),this.autoPaging)for(var C=h[0],k=h[h.length-1],B=C;B<k+1;B++){this.pdf.setPage(B),this.fillStyle=o,this.strokeStyle=a,this.lineCap=i,this.lineWidth=c,this.lineJoin=l;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===B?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],N=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===B?0:E+(B-2)*N;if(0!==this.ctx.clip_path.length){var T=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-F+I+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=T}if(r=JSON.parse(JSON.stringify(u)),this.path=y(r,this.posX+this.margin[3],-F+I+this.ctx.prevPageLastElemOffset),!1===t||0===B){var _=(B>C||B<k)&&f.call(this);_&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,N,null).clip().discardPath()),w.call(this,e,t),_&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=c,w.call(this,e,t),this.lineWidth=s;this.path=u},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!d.call(this))){for(var n,r,o=[],a=this.path,i=0;i<a.length;i++){var s=a[i];switch(s.type){case"begin":o.push({begin:!0});break;case"close":o.push({close:!0});break;case"mt":o.push({start:s,deltas:[],abs:[]});break;case"lt":var c=o.length;if(a[i-1]&&!isNaN(a[i-1].x)&&(n=[s.x-a[i-1].x,s.y-a[i-1].y],c>0))for(;c>=0;c--)if(!0!==o[c-1].close&&!0!==o[c-1].begin){o[c-1].deltas.push(n),o[c-1].abs.push(s);break}break;case"bct":n=[s.x1-a[i-1].x,s.y1-a[i-1].y,s.x2-a[i-1].x,s.y2-a[i-1].y,s.x-a[i-1].x,s.y-a[i-1].y],o[o.length-1].deltas.push(n);break;case"qct":var l=a[i-1].x+2/3*(s.x1-a[i-1].x),u=a[i-1].y+2/3*(s.y1-a[i-1].y),A=s.x+2/3*(s.x1-s.x),h=s.y+2/3*(s.y1-s.y),f=s.x,g=s.y;n=[l-a[i-1].x,u-a[i-1].y,A-a[i-1].x,h-a[i-1].y,f-a[i-1].x,g-a[i-1].y],o[o.length-1].deltas.push(n);break;case"arc":o.push({deltas:[],abs:[],arc:!0}),Array.isArray(o[o.length-1].abs)&&o[o.length-1].abs.push(s)}}r=t?null:"stroke"===e?"stroke":"fill";for(var m=!1,y=0;y<o.length;y++)if(o[y].arc)for(var v=o[y].abs,b=0;b<v.length;b++){var w=v[b];"arc"===w.type?k.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!m):N.call(this,w.x,w.y),m=!0}else if(!0===o[y].close)this.pdf.internal.out("h"),m=!1;else if(!0!==o[y].begin){var x=o[y].start.x,C=o[y].start.y;F.call(this,o[y].deltas,x,C),m=!0}r&&B.call(this,r),t&&S.call(this)}},x=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},C=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(e,t,n,r,o,a,i,s,c){for(var l=_.call(this,n,r,o,a),u=0;u<l.length;u++){var A=l[u];0===u&&(c?I.call(this,A.x1+e,A.y1+t):N.call(this,A.x1+e,A.y1+t)),T.call(this,e,t,A.x2,A.y2,A.x3,A.y3,A.x4,A.y4)}s?S.call(this):B.call(this,i)},B=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=x.call(this,e.y),o=C.call(this,r)-n.h,a=this.ctx.transform.applyToPoint(new i(e.x,r)),l=this.ctx.transform.decompose(),u=new c;u=(u=(u=u.multiply(l.translate)).multiply(l.skew)).multiply(l.scale);for(var A,h,d,p=this.ctx.transform.applyToRectangle(new s(e.x,r,n.w,n.h)),m=u.applyToRectangle(new s(e.x,o,n.w,n.h)),b=g.call(this,m),k=[],B=0;B<b.length;B+=1)-1===k.indexOf(b[B])&&k.push(b[B]);if(v(k),this.autoPaging)for(var S=k[0],I=k[k.length-1],E=S;E<I+1;E++){this.pdf.setPage(E);var N=1===E?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[2],_=T-this.margin[0],L=this.pdf.internal.pageSize.width-this.margin[1],O=L-this.margin[3],R=1===E?0:F+(E-2)*_;if(0!==this.ctx.clip_path.length){var U=this.path;A=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(A,this.posX+this.margin[3],-1*R+N),w.call(this,"fill",!0),this.path=U}var D=y([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-R+N+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale);var P="text"!==this.autoPaging;if(P||D.y+D.h<=T){if(P||D.y>=N&&D.x<=L){var M=P?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||L-D.x)[0],Q=y([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-R+N+this.ctx.prevPageLastElemOffset)[0],H=P&&(E>S||E<I)&&f.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,_,null).clip().discardPath()),this.pdf.text(M,Q.x,Q.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),H&&this.pdf.restoreGraphicsState()}}else D.y<T&&(this.ctx.prevPageLastElemOffset+=T-D.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)},N=function(e,t,o,a){o=o||0,a=a||0,this.pdf.internal.out(n(e+o)+" "+r(t+a)+" l")},F=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},T=function(e,n,r,i,s,c,l,u){this.pdf.internal.out([t(o(r+e)),t(a(i+n)),t(o(s+e)),t(a(c+n)),t(o(l+e)),t(a(u+n)),"c"].join(" "))},_=function(e,t,n,r){for(var o=2*Math.PI,a=Math.PI/2;t>n;)t-=o;var i=Math.abs(n-t);i<o&&r&&(i=o-i);for(var s=[],c=r?-1:1,l=t;i>1e-5;){var u=l+c*Math.min(i,a);s.push(L.call(this,e,l,u)),i-=Math.abs(u-l),l=u}return s},L=function(e,t,n){var r=(n-t)/2,o=e*Math.cos(r),a=e*Math.sin(r),i=o,s=-a,c=i*i+s*s,l=c+i*o+s*a,u=4/3*(Math.sqrt(2*c*l)-l)/(i*a-s*o),A=i-u*s,h=s+u*i,d=A,p=-h,f=r+t,g=Math.cos(f),m=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:A*g-h*m,y2:A*m+h*g,x3:d*g-p*m,y3:d*m+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},O=function(e){return 180*e/Math.PI},R=function(e,t,n,r,o,a){var i=e+.5*(n-e),c=t+.5*(r-t),l=o+.5*(n-o),u=a+.5*(r-a),A=Math.min(e,o,i,l),h=Math.max(e,o,i,l),d=Math.min(t,a,c,u),p=Math.max(t,a,c,u);return new s(A,d,h-A,p-d)},U=function(e,t,n,r,o,a,i,c){var l,u,A,h,d,p,f,g,m,y,v,b,w,x,C=n-e,k=r-t,B=o-n,S=a-r,I=i-o,E=c-a;for(u=0;u<41;u++)m=(f=(A=e+(l=u/40)*C)+l*((d=n+l*B)-A))+l*(d+l*(o+l*I-d)-f),y=(g=(h=t+l*k)+l*((p=r+l*S)-h))+l*(p+l*(a+l*E-p)-g),0==u?(v=m,b=y,w=m,x=y):(v=Math.min(v,m),b=Math.min(b,y),w=Math.max(w,m),x=Math.max(x,y));return new s(Math.round(v),Math.round(b),Math.round(w-v),Math.round(x-b))},D=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(cye.API),function(e){var t=function(e){var t,n,r,o,a,i,s,c,l,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,o=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;o>r;r+=4)0!==(a=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(a=((a=((a=((a=(a-(u=a%85))/85)-(l=a%85))/85)-(c=a%85))/85)-(s=a%85))/85)%85,n.push(i+33,s+33,c+33,l+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,o,a,i=String,s="length",c=255,l="charCodeAt",u="slice",A="replace";for(e[u](-2),e=e[u](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),r=[],o=0,a=(e+=t="uuuuu"[u](e[s]%5||5))[s];a>o;o+=5)n=52200625*(e[l](o)-33)+614125*(e[l](o+1)-33)+7225*(e[l](o+2)-33)+85*(e[l](o+3)-33)+(e[l](o+4)-33),r.push(c&n>>24,c&n>>16,c&n>>8,c&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[s]),i.fromCharCode.apply(i,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},o=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=Ime(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,a){var i=0,s=e||"",c=[];for("string"==typeof(a=a||[])&&(a=[a]),i=0;i<a.length;i+=1)switch(a[i]){case"ASCII85Decode":case"/ASCII85Decode":s=n(s),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=r(s),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=o(s),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[i]+'" is not implemented')}return{data:s,reverseChain:c.reverse().join(" ")}}}(cye.API),(dve=cye.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,o=0,a=function(e){var t=e.length,n=[],r=String.fromCharCode;for(o=0;o<t;o+=1)n.push(r(255&e.charCodeAt(o)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(a(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return a(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},dve.loadImageFile=dve.loadFile,function(e){function t(){return(Nme.html2canvas?Promise.resolve(Nme.html2canvas):Promise.resolve().then(n.t.bind(n,5498,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function r(){return(Nme.DOMPurify?Promise.resolve(Nme.DOMPurify):n.e(703).then(n.t.bind(n,8703,23))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var o=function(e){var t=(0,F6.Z)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},i=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(e,t){return e.__proto__=t||i.prototype,e},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(o(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then((function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),o=t.firstChild;o;o=o.nextSibling)!0!==n&&1===o.nodeType&&"SCRIPT"===o.nodeName||r.appendChild(e(o,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,o=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete o.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var a=0;a<n.length;++a){var i=n[a],s=i.src.find((function(e){return"truetype"===e.format}));s&&t.addFont(s.url,i.ref.name,i.ref.style)}return o.windowHeight=o.windowHeight||0,o.windowHeight=0==o.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):o.windowHeight,t.context2d.save(!0),e(this.prop.container,o)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},i.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},i.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},i.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(e){if("object"!==o(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in i.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},i.prototype.get=function(e,t){return this.then((function(){var n=e in i.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},i.prototype.setMargin=function(e){return this.then((function(){switch(o(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},i.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||cye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},i.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},i.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},i.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:i.convert(Object.assign({},this),Promise.prototype),o=n.call(r,e,t);return i.convert(o,this.__proto__)},i.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},i.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},i.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return i.convert(t,this)},i.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},i.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,cye.getPageSize=function(e,t,n){if("object"===(0,F6.Z)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var o,a=(""+n).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+t}var s,c=0,l=0;if(i.hasOwnProperty(a))c=i[a][1]/o,l=i[a][0]/o;else try{c=n[1],l=n[0]}catch(dve){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",l>c&&(s=l,l=c,c=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>l&&(s=l,l=c,c=s)}return{width:l,height:c,unit:t,k:o,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(nve):null;var n=new i(t);return t.worker?n:n.from(e).doCallback()}}(cye.API),cye.API.addJS=function(e){return hve=e,this.internal.events.subscribe("postPutResources",(function(){uve=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(uve+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ave=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hve+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==uve&&void 0!==Ave&&this.internal.out("/Names <</JavaScript "+uve+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),o=0;o<r.length;o++){var a=r[o],i=n.exec(a);if(null!=i){var s=i[1];e.internal.newObjectDeferredBegin(s,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,l=[];for(o=0;o<c;o++){var u=e.internal.newObject();l.push(u);var A=e.internal.getPageInfo(o+1);e.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),o=0;o<l.length;o++)e.internal.write("(page_"+(o+1)+")"+l[o]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var o=t.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var i=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(cye.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,o,a,i){var s,c=this.decode.DCT_DECODE,l=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),o=e.length,a={width:0,height:0,numcomponents:1},i=4;i<o;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),a={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}l={data:e,width:s.width,height:s.height,colorSpace:i,bitsPerComponent:8,filter:c,index:n,alias:r}}return l}}(cye.API);var fve,gve,mve,yve,vve,bve=function(){var e,t,n;function r(e){var t,n,r,o,a,i,s,c,l,u,A,h,d,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},a=this.readUInt16(),o=this.readUInt16()||100,i.delay=1e3*a/o,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(A=this.read(t)).indexOf(0),c=String.fromCharCode.apply(String,A.slice(0,s)),this.text[c]=String.fromCharCode.apply(String,A.slice(s+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,o=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function a(a,i,s,c){var l,u,A,h,d,p,f,g,m,y,v,b,w,x,C,k,B,S,I,E,N,F=Math.ceil((o.width-a)/s),T=Math.ceil((o.height-i)/c),_=o.width==F&&o.height==T;for(x=t*F,b=_?n:new Uint8Array(x*T),p=e.length,w=0,u=0;w<T&&r<p;){switch(e[r++]){case 0:for(h=B=0;B<x;h=B+=1)b[u++]=e[r++];break;case 1:for(h=S=0;S<x;h=S+=1)l=e[r++],d=h<t?0:b[u-t],b[u++]=(l+d)%256;break;case 2:for(h=I=0;I<x;h=I+=1)l=e[r++],A=(h-h%t)/t,C=w&&b[(w-1)*x+A*t+h%t],b[u++]=(C+l)%256;break;case 3:for(h=E=0;E<x;h=E+=1)l=e[r++],A=(h-h%t)/t,d=h<t?0:b[u-t],C=w&&b[(w-1)*x+A*t+h%t],b[u++]=(l+Math.floor((d+C)/2))%256;break;case 4:for(h=N=0;N<x;h=N+=1)l=e[r++],A=(h-h%t)/t,d=h<t?0:b[u-t],0===w?C=k=0:(C=b[(w-1)*x+A*t+h%t],k=A&&b[(w-1)*x+(A-1)*t+h%t]),f=d+C-k,g=Math.abs(f-d),y=Math.abs(f-C),v=Math.abs(f-k),m=g<=y&&g<=v?d:y<=v?C:k,b[u++]=(l+m)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!_){var L=((i+w*c)*o.width+a)*t,O=w*x;for(h=0;h<F;h+=1){for(var R=0;R<t;R+=1)n[L++]=b[O++];L+=(s-1)*t}}w++}}return e=Eme(e),1==o.interlaceMethod?(a(0,0,8,8),a(4,0,8,8),a(0,4,4,8),a(2,0,4,4),a(0,2,2,4),a(1,0,2,2),a(0,1,1,2)):a(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,o,a,i,s,c;for(n=this.palette,a=this.transparency.indexed||[],o=new Uint8Array((a.length||0)+n.length),r=0,e=0,t=i=0,s=n.length;i<s;t=i+=3)o[r++]=n[t],o[r++]=n[t+1],o[r++]=n[t+2],o[r++]=null!=(c=a[e++])?c:255;return o},r.prototype.copyToImageData=function(e,t){var n,r,o,a,i,s,c,l,u,A,h;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),r=4,n=!0),l=(o=e.data||e).length,i=u||t,a=s=0,1===r)for(;a<l;)c=u?4*t[a/4]:s,A=i[c++],o[a++]=A,o[a++]=A,o[a++]=A,o[a++]=n?i[c++]:255,s=c;else for(;a<l;)c=u?4*t[a/4]:s,o[a++]=i[c++],o[a++]=i[c++],o[a++]=i[c++],o[a++]=n?i[c++]:255,s=c},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var o=function(){if("[object Window]"===Object.prototype.toString.call(Nme)){try{t=Nme.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return o(),e=function(e){var r;if(!0===o())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,o,a,i,s,c,l;if(this.animation){for(l=[],r=i=0,s=(c=this.animation.frames).length;i<s;r=++i)n=c[r],o=t.createImageData(n.width,n.height),a=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(o,a),n.imageData=o,l.push(n.image=e(o));return l}},r.prototype.renderFrame=function(e,t){var n,r,o;return n=(r=this.animation.frames)[t],o=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=o?o.disposeOp:void 0)?e.clearRect(o.xOffset,o.yOffset,o.width,o.height):2===(null!=o?o.disposeOp:void 0)&&e.putImageData(o.imageData,o.xOffset,o.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,o,a,i,s=this;return n=0,i=this.animation,o=i.numFrames,r=i.frames,a=i.numPlays,(t=function(){var i,c;if(i=n++%o,c=r[i],s.renderFrame(e,i),o>1&&n/o<a)return s.animation._timeout=setTimeout(t,c.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function wve(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],a=o>>7,i=1<<1+(7&o);e[t++],e[t++];var s=null,c=null;a&&(s=t,c=i,t+=3*i);var l=!0,u=[],A=0,h=null,d=0,p=null;for(this.width=n,this.height=r;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];A=e[t++]|e[t++]<<8,h=e[t++],0==(1&f)&&(h=null),d=f>>2&7,t++;break;case 254:for(;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++],w=b>>6&1,x=1<<1+(7&b),C=s,k=c,B=!1;b>>7&&(B=!0,C=t,k=x,t+=3*x);var S=t;for(t++;;){var I;if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}u.push({x:g,y:m,width:y,height:v,has_local_palette:B,palette_offset:C,palette_size:k,data_offset:S,data_length:t-S,transparent_index:h,interlaced:!!w,delay:A,disposal:d});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var o=this.frameInfo(t),a=o.width*o.height,i=new Uint8Array(a);xve(e,o.data_offset,i,a);var s=o.palette_offset,c=o.transparent_index;null===c&&(c=256);var l=o.width,u=n-l,A=l,h=4*(o.y*n+o.x),d=4*((o.y+o.height)*n+o.x),p=h,f=4*u;!0===o.interlaced&&(f+=4*n*7);for(var g=8,m=0,y=i.length;m<y;++m){var v=i[m];if(0===A&&(A=l,(p+=f)>=d&&(f=4*u+4*n*(g-1),p=h+(l+u)*(g<<1),g>>=1)),v===c)p+=4;else{var b=e[s+3*v],w=e[s+3*v+1],x=e[s+3*v+2];r[p++]=x,r[p++]=w,r[p++]=b,r[p++]=255}--A}},this.decodeAndBlitFrameRGBA=function(t,r){var o=this.frameInfo(t),a=o.width*o.height,i=new Uint8Array(a);xve(e,o.data_offset,i,a);var s=o.palette_offset,c=o.transparent_index;null===c&&(c=256);var l=o.width,u=n-l,A=l,h=4*(o.y*n+o.x),d=4*((o.y+o.height)*n+o.x),p=h,f=4*u;!0===o.interlaced&&(f+=4*n*7);for(var g=8,m=0,y=i.length;m<y;++m){var v=i[m];if(0===A&&(A=l,(p+=f)>=d&&(f=4*u+4*n*(g-1),p=h+(l+u)*(g<<1),g>>=1)),v===c)p+=4;else{var b=e[s+3*v],w=e[s+3*v+1],x=e[s+3*v+2];r[p++]=b,r[p++]=w,r[p++]=x,r[p++]=255}--A}}}function xve(e,t,n,r){for(var o=e[t++],a=1<<o,i=a+1,s=i+1,c=o+1,l=(1<<c)-1,u=0,A=0,h=0,d=e[t++],p=new Int32Array(4096),f=null;;){for(;u<16&&0!==d;)A|=e[t++]<<u,u+=8,1===d?d=e[t++]:--d;if(u<c)break;var g=A&l;if(A>>=c,u-=c,g!==a){if(g===i)break;for(var m=g<s?g:f,y=0,v=m;v>a;)v=p[v]>>8,++y;var b=v;if(h+y+(m!==g?1:0)>r)return void Tme.log("Warning, gif stream longer than expected.");n[h++]=b;var w=h+=y;for(m!==g&&(n[h++]=b),v=m;y--;)v=p[v],n[--w]=255&v,v>>=8;null!==f&&s<4096&&(p[s++]=f<<8|b,s>=l+1&&c<12&&(++c,l=l<<1|1)),f=g}else s=i+1,l=(1<<(c=o+1))-1,f=null}return h!==r&&Tme.log("Warning, gif stream shorter than expected."),n}function Cve(e){var t,n,r,o,a,i=Math.floor,s=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),A=new Array(65535),h=new Array(65535),d=new Array(64),p=new Array(64),f=[],g=0,m=7,y=new Array(64),v=new Array(64),b=new Array(64),w=new Array(256),x=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],T=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _(e,t){for(var n=0,r=0,o=new Array,a=1;a<=16;a++){for(var i=1;i<=e[a];i++)o[t[r]]=[],o[t[r]][0]=n,o[t[r]][1]=a,r++,n++;n*=2}return o}function L(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<m),n--,--m<0&&(255==g?(O(255),O(0)):O(g),m=7,g=0)}function O(e){f.push(e)}function R(e){O(e>>8&255),O(255&e)}function U(e,t,n,r,o){for(var a,i=o[0],s=o[240],c=function(e,t){var n,r,o,a,i,s,c,l,u,A,h=0;for(u=0;u<8;++u){n=e[h],r=e[h+1],o=e[h+2],a=e[h+3],i=e[h+4],s=e[h+5],c=e[h+6];var p=n+(l=e[h+7]),f=n-l,g=r+c,m=r-c,y=o+s,v=o-s,b=a+i,w=a-i,x=p+b,C=p-b,k=g+y,B=g-y;e[h]=x+k,e[h+4]=x-k;var S=.707106781*(B+C);e[h+2]=C+S,e[h+6]=C-S;var I=.382683433*((x=w+v)-(B=m+f)),E=.5411961*x+I,N=1.306562965*B+I,F=.707106781*(k=v+m),T=f+F,_=f-F;e[h+5]=_+E,e[h+3]=_-E,e[h+1]=T+N,e[h+7]=T-N,h+=8}for(h=0,u=0;u<8;++u){n=e[h],r=e[h+8],o=e[h+16],a=e[h+24],i=e[h+32],s=e[h+40],c=e[h+48];var L=n+(l=e[h+56]),O=n-l,R=r+c,U=r-c,D=o+s,P=o-s,M=a+i,Q=a-i,H=L+M,z=L-M,V=R+D,j=R-D;e[h]=H+V,e[h+32]=H-V;var W=.707106781*(j+z);e[h+16]=z+W,e[h+48]=z-W;var K=.382683433*((H=Q+P)-(j=U+O)),G=.5411961*H+K,q=1.306562965*j+K,X=.707106781*(V=P+U),Y=O+X,Z=O-X;e[h+40]=Z+G,e[h+24]=Z-G,e[h+8]=Y+q,e[h+56]=Y-q,h++}for(u=0;u<64;++u)A=e[u]*t[u],d[u]=A>0?A+.5|0:A-.5|0;return d}(e,t),l=0;l<64;++l)p[C[l]]=c[l];var u=p[0]-n;n=p[0],0==u?L(r[0]):(L(r[h[a=32767+u]]),L(A[a]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return L(i),n;for(var g,m=1;m<=f;){for(var y=m;0==p[m]&&m<=f;)++m;var v=m-y;if(v>=16){g=v>>4;for(var b=1;b<=g;++b)L(s);v&=15}a=32767+p[m],L(o[(v<<4)+h[a]]),L(A[a]),m++}return 63!=f&&L(i),n}function D(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=i((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),s[C[n]]=r}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var A=i((o[a]*e+50)/100);A=Math.min(Math.max(A,1),255),c[C[a]]=A}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var f=0;f<8;f++)l[d]=1/(s[C[d]]*h[p]*h[f]*8),u[d]=1/(c[C[d]]*h[p]*h[f]*8),d++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){a&&D(a),f=new Array,g=0,m=7,R(65496),R(65504),R(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),R(1),R(1),O(0),O(0),function(){R(65499),R(132),O(0);for(var e=0;e<64;e++)O(s[e]);O(1);for(var t=0;t<64;t++)O(c[t])}(),function(e,t){R(65472),R(17),O(8),R(t),R(e),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(e.width,e.height),function(){R(65476),R(418),O(0);for(var e=0;e<16;e++)O(k[e+1]);for(var t=0;t<=11;t++)O(B[t]);O(16);for(var n=0;n<16;n++)O(S[n+1]);for(var r=0;r<=161;r++)O(I[r]);O(1);for(var o=0;o<16;o++)O(E[o+1]);for(var a=0;a<=11;a++)O(N[a]);O(17);for(var i=0;i<16;i++)O(F[i+1]);for(var s=0;s<=161;s++)O(T[s])}(),R(65498),R(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var i=0,A=0,h=0;g=0,m=7,this.encode.displayName="_encode_";for(var d,p,w,C,_,P,M,Q,H,z=e.data,V=e.width,j=e.height,W=4*V,K=0;K<j;){for(d=0;d<W;){for(_=W*K+d,M=-1,Q=0,H=0;H<64;H++)P=_+(Q=H>>3)*W+(M=4*(7&H)),K+Q>=j&&(P-=W*(K+1+Q-j)),d+M>=W&&(P-=d+M-W+4),p=z[P++],w=z[P++],C=z[P++],y[H]=(x[p]+x[w+256>>0]+x[C+512>>0]>>16)-128,v[H]=(x[p+768>>0]+x[w+1024>>0]+x[C+1280>>0]>>16)-128,b[H]=(x[p+1280>>0]+x[w+1536>>0]+x[C+1792>>0]>>16)-128;i=U(y,l,i,t,r),A=U(v,u,A,n,o),h=U(b,u,h,n,o),d+=32}K+=8}if(m>=0){var G=[];G[1]=m+1,G[0]=(1<<m+1)-1,L(G)}return R(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=_(k,B),n=_(E,N),r=_(S,I),o=_(F,T),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,A[32767+r]=[],A[32767+r][1]=n,A[32767+r][0]=r;for(var o=-(t-1);o<=-e;o++)h[32767+o]=n,A[32767+o]=[],A[32767+o][1]=n,A[32767+o][0]=t-1+o;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}(),D(e)}function kve(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Bve(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,o){for(var a=0;a<o;a++)e[t+a]=n[r+a]}function o(e,t,n,r){for(var o=0;o<r;o++)e[t+o]=n}function a(e){return new Int32Array(e)}function i(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function s(e,t){var n=[];return function e(n,r,o){for(var a=o[r],i=0;i<a&&(n.push(o.length>r+1?[]:new t),!(o.length<r+1));i++)e(n[i],r+1,o)}(n,0,e),n}var c=function(){var e=this;function c(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function l(e,n,r,o,a){t(!(o%r));do{e[n+(o-=r)]=a}while(0<o)}function u(e,n,r,o,i){if(t(2328>=i),512>=i)var s=a(512);else if(null==(s=a(i)))return 0;return function(e,n,r,o,i,s){var u,h,d=n,p=1<<r,f=a(16),g=a(16);for(t(0!=i),t(null!=o),t(null!=e),t(0<r),h=0;h<i;++h){if(15<o[h])return 0;++f[o[h]]}if(f[0]==i)return 0;for(g[1]=0,u=1;15>u;++u){if(f[u]>1<<u)return 0;g[u+1]=g[u]+f[u]}for(h=0;h<i;++h)u=o[h],0<o[h]&&(s[g[u]++]=h);if(1==g[15])return(o=new A).g=0,o.value=s[0],l(e,d,1,p,o),p;var m,y=-1,v=p-1,b=0,w=1,x=1,C=1<<r;for(h=0,u=1,i=2;u<=r;++u,i<<=1){if(w+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u])(o=new A).g=u,o.value=s[h++],l(e,d+b,i,C,o),b=c(b,u)}for(u=r+1,i=2;15>=u;++u,i<<=1){if(w+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u]){if(o=new A,(b&v)!=y){for(d+=C,m=1<<(y=u)-r;15>y&&!(0>=(m-=f[y]));)++y,m<<=1;p+=C=1<<(m=y-r),e[n+(y=b&v)].g=m+r,e[n+y].value=d-n-y}o.g=u-r,o.value=s[h++],l(e,d+(b>>r),i,C,o),b=c(b,u)}}return w!=2*g[15]-1?0:p}(e,n,r,o,i,s)}function A(){this.value=this.g=0}function h(){this.value=this.g=0}function d(){this.G=i(5,A),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Mn,h)}function p(e,n,r,o){t(null!=e),t(null!=n),t(2147483648>o),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+o,e.Zc=4<=o?r+o-4+1:r,S(e)}function f(e,t){for(var n=0;0<t--;)n|=E(e,128)<<t;return n}function g(e,t){var n=f(e,t);return I(e)?-n:n}function m(e,n,r,o){var a,i=0;for(t(null!=e),t(null!=n),t(4294967288>o),e.Sb=o,e.Ra=0,e.u=0,e.h=0,4<o&&(o=4),a=0;a<o;++a)i+=n[r+a]<<8*a;e.Ra=i,e.bb=o,e.oa=n,e.pa=r}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<zn-8>>>0,++e.bb,e.u-=8;C(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=Hn){var r=x(e)&Qn[n];return e.u+=n,y(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(e){return e.Ra>>>(e.u&zn-1)>>>0}function C(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>zn}function k(e,t){e.u=t,e.h=C(e)}function B(e){e.u>=Vn&&(t(e.u>=Vn),y(e))}function S(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function I(e){return f(e,1)}function E(e,t){var n=e.Ca;0>e.b&&S(e);var r=e.b,o=n*t>>>8,a=(e.I>>>r>o)+0;for(a?(n-=o,e.I-=o+1<<r>>>0):n=o+1,r=n,o=0;256<=r;)o+=8,r>>=8;return r=7^o+jn[r],e.b-=r,e.Ca=(n<<r)-1,a}function N(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n>>0&255}function F(e,t){return e[t+0]<<0|e[t+1]<<8}function T(e,t){return F(e,t)|e[t+2]<<16}function _(e,t){return F(e,t)|F(e,t+2)<<16}function L(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=a(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function O(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function U(e,n,r,o){t(null!=r),t(null!=o);var a=r[0],i=o[0];return 0==a&&(a=(e*i+n/2)/n),0==i&&(i=(n*a+e/2)/e),0>=a||0>=i?0:(r[0]=a,o[0]=i,1)}function D(e,t){return e+(1<<t)-1>>>t}function P(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function M(t,n){e[n]=function(n,r,o,a,i,s,c){var l;for(l=0;l<i;++l){var u=e[t](s[c+l-1],o,a+l);s[c+l]=P(n[r+l],u)}}}function Q(){this.ud=this.hd=this.jd=0}function H(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function z(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function V(e,t){return z(e+(e-t+.5>>1))}function j(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function W(e,t,n,r,o,a,i){for(r=a[i-1],n=0;n<o;++n)a[i+n]=r=P(e[t+n],r)}function K(e,t,n,r,o){var a;for(a=0;a<n;++a){var i=e[t+a],s=i>>8&255,c=16711935&(c=(c=16711935&i)+((s<<16)+s));r[o+a]=(4278255360&i)+c>>>0}}function G(e,t){t.jd=e>>0&255,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,r,o,a){var i;for(i=0;i<r;++i){var s=t[n+i],c=s>>>8,l=s,u=255&(u=(u=s>>>16)+((e.jd<<24>>24)*(c<<24>>24)>>>5));l=255&(l=(l+=(e.hd<<24>>24)*(c<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),o[a+i]=(4278255360&s)+(u<<16)+l}}function X(t,n,r,o,a){e[n]=function(e,t,n,r,i,s,c,l,u){for(r=c;r<l;++r)for(c=0;c<u;++c)i[s++]=a(n[o(e[t++])])},e[t]=function(t,n,i,s,c,l,u){var A=8>>t.b,h=t.Ea,d=t.K[0],p=t.w;if(8>A)for(t=(1<<t.b)-1,p=(1<<A)-1;n<i;++n){var f,g=0;for(f=0;f<h;++f)f&t||(g=o(s[c++])),l[u++]=a(d[g&p]),g>>=A}else e["VP8LMapColor"+r](s,c,d,p,l,u,n,i,h)}}function Y(e,t,n,r,o){for(n=t+n;t<n;){var a=e[t++];r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=a>>0&255}}function Z(e,t,n,r,o){for(n=t+n;t<n;){var a=e[t++];r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=a>>0&255,r[o++]=a>>24&255}}function J(e,t,n,r,o){for(n=t+n;t<n;){var a=(i=e[t++])>>16&240|i>>12&15,i=i>>0&240|i>>28&15;r[o++]=a,r[o++]=i}}function $(e,t,n,r,o){for(n=t+n;t<n;){var a=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[o++]=a,r[o++]=i}}function ee(e,t,n,r,o){for(n=t+n;t<n;){var a=e[t++];r[o++]=a>>0&255,r[o++]=a>>8&255,r[o++]=a>>16&255}}function te(e,t,n,o,a,i){if(0==i)for(n=t+n;t<n;)N(o,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),a+=32;else r(o,a,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Vr||e==jr||e==Wr||e==Kr}function oe(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new oe,this.f.kb=new ae,this.sd=null}function se(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ce(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function le(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,o=t.ba.f.RGBA,a=o.eb,i=o.fb+e.ka*o.A,s=yo[t.ba.S],c=e.y,l=e.O,u=e.f,A=e.N,h=e.ea,d=e.W,p=t.cc,f=t.dc,g=t.Mc,m=t.Nc,y=e.ka,v=e.ka+e.T,b=e.U,w=b+1>>1;for(0==y?s(c,l,null,null,u,A,h,d,u,A,h,d,a,i,null,null,b):(s(t.ec,t.fc,c,l,p,f,g,m,u,A,h,d,a,i-o.A,a,i,b),++n);y+2<v;y+=2)p=u,f=A,g=h,m=d,A+=e.Rc,d+=e.Rc,i+=2*o.A,s(c,(l+=2*e.fa)-e.fa,c,l,p,f,g,m,u,A,h,d,a,i-o.A,a,i,b);return l+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,c,l,b),r(t.cc,t.dc,u,A,w),r(t.Mc,t.Nc,h,d,w),n--):1&v||s(c,l,null,null,u,A,h,d,u,A,h,d,a,i+o.A,null,null,b),n}function Ae(e,n,r){var o=e.F,a=[e.J];if(null!=o){var i=e.U,s=n.ba.S,c=s==Qr||s==Wr;n=n.ba.f.RGBA;var l=[0],u=e.ka;l[0]=e.T,e.Kb&&(0==u?--l[0]:(--u,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(l[0]=e.o-e.j-u));var A=n.eb;u=n.fb+u*n.A,e=Br(o,a[0],e.width,i,l,A,u+(c?0:3),n.A),t(r==l),e&&re(s)&&Cr(A,u,c,i,l,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,o=n==Dr||n==Mr||n==Qr||n==Hr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Un(t.Oa,e,o?11:12))return 0;if(o&&re(n)&&vn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=le,e.Kb){if(n=e.U+1>>1,t.memory=a(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,vn()}}else alert("todo:EmitYUV");o&&(t.Jb=Ae,r&&mn())}if(r&&!_o){for(e=0;256>e;++e)Lo[e]=89858*(e-128)+Io>>So,Uo[e]=-22014*(e-128)+Io,Ro[e]=-45773*(e-128),Oo[e]=113618*(e-128)+Io>>So;for(e=Eo;e<No;++e)t=76283*(e-16)+Io>>So,Do[e-Eo]=We(t,255),Po[e-Eo]=We(t+8>>4,15);_o=1}return 1}function de(e){var n=e.ma,r=e.U,o=e.T;return t(!(1&e.ka)),0>=r||0>=o?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function fe(e,t,n,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function me(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var r=x(n),o=e[t+=255&r].g-8;return 0<o&&(k(n,n.u+8),r=x(n),t+=e[t].value,t+=r&(1<<o)-1),k(n,n.u+e[t].g),e[t].value}function ve(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function be(e,n,r){var o=e.xc;return t((n=0==o?0:e.vc[e.md*(r>>o)+(n>>o)])<e.Wb),e.Ya[n]}function we(e,n,o,a){var i=e.ab,s=e.c*n,c=e.C;n=c+n;var l=o,u=a;for(a=e.Ta,o=e.Ua;0<i--;){var A=e.gc[i],h=c,d=n,p=l,f=u,g=(u=a,l=o,A.Ea);switch(t(h<d),t(d<=A.nc),A.hc){case 2:Gn(p,f,(d-h)*g,u,l);break;case 0:var m=h,y=d,v=u,b=l,w=(S=A).Ea;0==m&&(Wn(p,f,null,null,1,v,b),W(p,f+1,0,0,w-1,v,b+1),f+=w,b+=w,++m);for(var x=1<<S.b,C=x-1,k=D(w,S.b),B=S.K,S=S.w+(m>>S.b)*k;m<y;){var I=B,E=S,N=1;for(Kn(p,f,v,b-w,1,v,b);N<w;){var F=(N&~C)+x;F>w&&(F=w),(0,Jn[I[E++]>>8&15])(p,f+ +N,v,b+N-w,F-N,v,b+N),N=F}f+=w,b+=w,++m&C||(S+=k)}d!=A.nc&&r(u,l-g,u,l+(d-h-1)*g,g);break;case 1:for(g=p,y=f,w=(p=A.Ea)-(b=p&~(v=(f=1<<A.b)-1)),m=D(p,A.b),x=A.K,A=A.w+(h>>A.b)*m;h<d;){for(C=x,k=A,B=new Q,S=y+b,I=y+p;y<S;)G(C[k++],B),$n(B,g,y,f,u,l),y+=f,l+=f;y<I&&(G(C[k++],B),$n(B,g,y,w,u,l),y+=w,l+=w),++h&v||(A+=m)}break;case 3:if(p==u&&f==l&&0<A.b){for(y=u,p=g=l+(d-h)*g-(b=(d-h)*D(A.Ea,A.b)),f=u,v=l,m=[],b=(w=b)-1;0<=b;--b)m[b]=f[v+b];for(b=w-1;0<=b;--b)y[p+b]=m[b];qn(A,h,d,u,g,u,l)}else qn(A,h,d,p,f,u,l)}l=a,u=o}u!=o&&r(a,o,l,u,s)}function xe(e,n){var r=e.V,o=e.Ba+e.c*e.C,a=n-e.C;if(t(n<=e.l.o),t(16>=a),0<a){var i=e.l,s=e.Ta,c=e.Ua,l=i.width;if(we(e,a,r,o),a=c=[c],t((r=e.C)<(o=n)),t(i.v<i.va),o>i.o&&(o=i.o),r<i.j){var u=i.j-r;r=i.j,a[0]+=u*l}if(r>=o?r=0:(a[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=o-r,r=1),r){if(c=c[0],11>(r=e.ca).S){var A=r.f.RGBA,h=(o=r.S,a=i.U,i=i.T,u=A.eb,A.A),d=i;for(A=A.fb+e.Ma*A.A;0<d--;){var p=s,f=c,g=a,m=u,y=A;switch(o){case Ur:er(p,f,g,m,y);break;case Dr:tr(p,f,g,m,y);break;case Vr:tr(p,f,g,m,y),Cr(m,y,0,g,1,0);break;case Pr:or(p,f,g,m,y);break;case Mr:te(p,f,g,m,y,1);break;case jr:te(p,f,g,m,y,1),Cr(m,y,0,g,1,0);break;case Qr:te(p,f,g,m,y,0);break;case Wr:te(p,f,g,m,y,0),Cr(m,y,1,g,1,0);break;case Hr:nr(p,f,g,m,y);break;case Kr:nr(p,f,g,m,y),kr(m,y,g,1,0);break;case zr:rr(p,f,g,m,y);break;default:t(0)}c+=l,A+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ce(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function ke(e,n,r,o,a,i){if(0!=e.Z){var s=e.qd,c=e.rd;for(t(null!=mo[e.Z]);n<r;++n)mo[e.Z](s,c,o,a,o,a,i),s=o,c=a,a+=i;e.qd=s,e.rd=c}}function Be(e,n){var r=e.l.ma,o=0==r.Z||1==r.Z?e.l.j:e.C;if(o=e.C<o?o:e.C,t(n<=e.l.o),n>o){var a=e.l.width,i=r.ca,s=r.tb+a*o,c=e.V,l=e.Ba+e.c*o,u=e.gc;t(1==e.ab),t(3==u[0].hc),Yn(u[0],o,n,c,l,i,s),ke(r,o,n,i,s,a)}e.C=e.Ma=n}function Se(e,n,r,o,a,i,s){var c=e.$/o,l=e.$%o,u=e.m,A=e.s,h=r+e.$,d=h;a=r+o*a;var p=r+o*i,f=280+A.ua,g=e.Pb?c:16777216,m=0<A.ua?A.Wa:null,y=A.wc,v=h<p?be(A,l,c):null;t(e.C<i),t(p<=a);var b=!1;e:for(;;){for(;b||h<p;){var w=0;if(c>=g){var S=h-r;t((g=e).Pb),g.wd=g.m,g.xd=S,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=c+eo}if(l&y||(v=be(A,l,c)),t(null!=v),v.Qb&&(n[h]=v.qb,b=!0),!b)if(B(u),v.jc){w=u,S=n;var I=h,E=v.pd[x(w)&Mn-1];t(v.jc),256>E.g?(k(w,w.u+E.g),S[I]=E.value,w=0):(k(w,w.u+E.g-256),t(256<=E.value),w=E.value),0==w&&(b=!0)}else w=ye(v.G[0],v.H[0],u);if(u.h)break;if(b||256>w){if(!b)if(v.nd)n[h]=(v.qb|w<<8)>>>0;else{if(B(u),b=ye(v.G[1],v.H[1],u),B(u),S=ye(v.G[2],v.H[2],u),I=ye(v.G[3],v.H[3],u),u.h)break;n[h]=(I<<24|b<<16|w<<8|S)>>>0}if(b=!1,++h,++l>=o&&(l=0,++c,null!=s&&c<=i&&!(c%16)&&s(e,c),null!=m))for(;d<h;)w=n[d++],m.X[(506832829*w&4294967295)>>>m.Mb]=w}else if(280>w){if(w=ge(w-256,u),S=ye(v.G[4],v.H[4],u),B(u),S=me(o,S=ge(S,u)),u.h)break;if(h-r<S||a-h<w)break e;for(I=0;I<w;++I)n[h+I]=n[h+I-S];for(h+=w,l+=w;l>=o;)l-=o,++c,null!=s&&c<=i&&!(c%16)&&s(e,c);if(t(h<=a),l&y&&(v=be(A,l,c)),null!=m)for(;d<h;)w=n[d++],m.X[(506832829*w&4294967295)>>>m.Mb]=w}else{if(!(w<f))break e;for(b=w-280,t(null!=m);d<h;)w=n[d++],m.X[(506832829*w&4294967295)>>>m.Mb]=w;w=h,t(!(b>>>(S=m).Xa)),n[w]=S.X[b],b=!0}b||t(u.h==C(u))}if(e.Pb&&u.h&&h<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&O(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=s&&s(e,c>i?i:c),e.a=0,e.$=h-r}return 1}return e.a=3,0}function Ie(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ee(){var t=new sn;return null==t?null:(t.a=0,t.xb=go,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=K,$n=q,er=Y,tr=Z,nr=J,rr=$,or=ee,e.VP8LMapColor32b=Xn,e.VP8LMapColor8b=Zn,t)}function Ne(e,n,r,s,c){var l=1,h=[e],p=[n],f=s.m,g=s.s,m=null,y=0;e:for(;;){if(r)for(;l&&v(f,1);){var b=h,w=p,C=s,S=1,I=C.m,E=C.gc[C.ab],N=v(I,2);if(C.Oc&1<<N)l=0;else{switch(C.Oc|=1<<N,E.hc=N,E.Ea=b[0],E.nc=w[0],E.K=[null],++C.ab,t(4>=C.ab),N){case 0:case 1:E.b=v(I,3)+2,S=Ne(D(E.Ea,E.b),D(E.nc,E.b),0,C,E.K),E.K=E.K[0];break;case 3:var F,T=v(I,8)+1,_=16<T?0:4<T?1:2<T?2:3;if(b[0]=D(E.Ea,_),E.b=_,F=S=Ne(T,1,0,C,E.K)){var O,R=T,U=E,M=1<<(8>>U.b),Q=a(M);if(null==Q)F=0;else{var H=U.K[0],z=U.w;for(Q[0]=U.K[0][0],O=1;O<1*R;++O)Q[O]=P(H[z+O],Q[O-1]);for(;O<4*M;++O)Q[O]=0;U.K[0]=null,U.K[0]=Q,F=1}}S=F;break;case 2:break;default:t(0)}l=S}}if(h=h[0],p=p[0],l&&v(f,1)&&!(l=1<=(y=v(f,4))&&11>=y)){s.a=3;break e}var V;if(V=l)t:{var j,W,K,G=s,q=h,X=p,Y=y,Z=r,J=G.m,$=G.s,ee=[null],te=1,ne=0,re=$r[Y];n:for(;;){if(Z&&v(J,1)){var oe=v(J,3)+2,ae=D(q,oe),ie=D(X,oe),se=ae*ie;if(!Ne(ae,ie,0,G,ee))break n;for(ee=ee[0],$.xc=oe,j=0;j<se;++j){var ce=ee[j]>>8&65535;ee[j]=ce,ce>=te&&(te=ce+1)}}if(J.h)break n;for(W=0;5>W;++W){var le=Xr[W];!W&&0<Y&&(le+=1<<Y),ne<le&&(ne=le)}var ue=i(te*re,A),Ae=te,he=i(Ae,d);if(null==he)var de=null;else t(65536>=Ae),de=he;var pe=a(ne);if(null==de||null==pe||null==ue){G.a=1;break n}var fe=ue;for(j=K=0;j<te;++j){var ge=de[j],me=ge.G,ye=ge.H,be=0,we=1,xe=0;for(W=0;5>W;++W){le=Xr[W],me[W]=fe,ye[W]=K,!W&&0<Y&&(le+=1<<Y);r:{var Ce,ke=le,Be=G,Ee=pe,Fe=fe,Te=K,_e=0,Le=Be.m,Oe=v(Le,1);if(o(Ee,0,0,ke),Oe){var Re=v(Le,1)+1,Ue=v(Le,1),De=v(Le,0==Ue?1:8);Ee[De]=1,2==Re&&(Ee[De=v(Le,8)]=1);var Pe=1}else{var Me=a(19),Qe=v(Le,4)+4;if(19<Qe){Be.a=3;var He=0;break r}for(Ce=0;Ce<Qe;++Ce)Me[Zr[Ce]]=v(Le,3);var ze=void 0,Ve=void 0,je=Be,We=Me,Ke=ke,Ge=Ee,qe=0,Xe=je.m,Ye=8,Ze=i(128,A);o:for(;u(Ze,0,7,We,19);){if(v(Xe,1)){var Je=2+2*v(Xe,3);if((ze=2+v(Xe,Je))>Ke)break o}else ze=Ke;for(Ve=0;Ve<Ke&&ze--;){B(Xe);var $e=Ze[0+(127&x(Xe))];k(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ge[Ve++]=et,0!=et&&(Ye=et);else{var tt=16==et,nt=et-16,rt=qr[nt],ot=v(Xe,Gr[nt])+rt;if(Ve+ot>Ke)break o;for(var at=tt?Ye:0;0<ot--;)Ge[Ve++]=at}}qe=1;break o}qe||(je.a=3),Pe=qe}(Pe=Pe&&!Le.h)&&(_e=u(Fe,Te,8,Ee,ke)),Pe&&0!=_e?He=_e:(Be.a=3,He=0)}if(0==He)break n;if(we&&1==Yr[W]&&(we=0==fe[K].g),be+=fe[K].g,K+=He,3>=W){var it,st=pe[0];for(it=1;it<le;++it)pe[it]>st&&(st=pe[it]);xe+=st}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(me[3][ye[3]+0].value<<24|me[1][ye[1]+0].value<<16|me[2][ye[2]+0].value)>>>0,0==be&&256>me[0][ye[0]+0].value&&(ge.Qb=1,ge.qb+=me[0][ye[0]+0].value<<8)),ge.jc=!ge.Qb&&6>xe,ge.jc){var ct,lt=ge;for(ct=0;ct<Mn;++ct){var ut=ct,At=lt.pd[ut],ht=lt.G[0][lt.H[0]+ut];256<=ht.value?(At.g=ht.g+256,At.value=ht.value):(At.g=0,At.value=0,ut>>=ve(ht,8,At),ut>>=ve(lt.G[1][lt.H[1]+ut],16,At),ut>>=ve(lt.G[2][lt.H[2]+ut],0,At),ve(lt.G[3][lt.H[3]+ut],24,At))}}}$.vc=ee,$.Wb=te,$.Ya=de,$.yc=ue,V=1;break t}V=0}if(!(l=V)){s.a=3;break e}if(0<y){if(g.ua=1<<y,!L(g.Wa,y)){s.a=1,l=0;break e}}else g.ua=0;var dt=s,pt=h,ft=p,gt=dt.s,mt=gt.xc;if(dt.c=pt,dt.i=ft,gt.md=D(pt,mt),gt.wc=0==mt?-1:(1<<mt)-1,r){s.xb=fo;break e}if(null==(m=a(h*p))){s.a=1,l=0;break e}l=(l=Se(s,m,0,h,p,p,null))&&!f.h;break e}return l?(null!=c?c[0]=m:(t(null==m),t(r)),s.$=0,r||Ie(g)):Ie(g),l}function Fe(e,n){var r=e.c*e.i,o=r+n+16*n;return t(e.c<=n),e.V=a(o),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Te(e,n){var r=e.C,o=n-r,a=e.V,i=e.Ba+e.c*r;for(t(n<=e.l.o);0<o;){var s=16<o?16:o,c=e.l.ma,l=e.l.width,u=l*s,A=c.ca,h=c.tb+l*r,d=e.Ta,p=e.Ua;we(e,s,a,i),Sr(d,p,A,h,u),ke(c,r,r+s,A,h,l),o-=s,a+=s*e.c,r+=s}t(r==n),e.C=e.Ma=n}function _e(){this.ub=this.yd=this.td=this.Rb=0}function Le(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oe(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Re(){this.Yb=function(){var e=[];return function e(t,n,r){for(var o=r[n],a=0;a<o&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));a++)e(t[a],n+1,r)}(e,0,[3,11]),e}()}function Ue(){this.jb=a(3),this.Wc=s([4,8],Re),this.Xc=s([4,17],Re)}function De(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Pe(){this.ld=this.La=this.dd=this.tc=0}function Me(){this.Na=this.la=0}function Qe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function He(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ze(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pe),this.Y=0,this.ya=Array(new He),this.aa=0,this.l=new Ke}function Ve(){this.y=a(16),this.f=a(8),this.ea=a(8)}function je(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new _e,this.Kc=new Le,this.ed=new De,this.Qa=new Oe,this.Ic=this.$c=this.Aa=0,this.D=new ze,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,b),this.ia=0,this.pb=i(4,Qe),this.Pa=new Ue,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ve),this.Hd=0,this.rb=Array(new Me),this.sb=0,this.wa=Array(new Pe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new He),this.L=this.aa=0,this.gd=s([4,2],Pe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ke(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new je;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ro||(ro=Ze)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ye(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,a=n.w,i=n.ha;if(4>i)return qe(e,7,"Truncated header.");var s=r[a+0]|r[a+1]<<8|r[a+2]<<16,c=e.Od;if(c.Rb=!(1&s),c.td=s>>1&7,c.yd=s>>4&1,c.ub=s>>5,3<c.td)return qe(e,3,"Incorrect keyframe parameters.");if(!c.yd)return qe(e,4,"Frame not displayable.");a+=3,i-=3;var l=e.Kc;if(c.Rb){if(7>i)return qe(e,7,"cannot parse picture header");if(!Xe(r,a,i))return qe(e,3,"Bad code word");l.c=16383&(r[a+4]<<8|r[a+3]),l.Td=r[a+4]>>6,l.i=16383&(r[a+6]<<8|r[a+5]),l.Ud=r[a+6]>>6,a+=7,i-=7,e.za=l.c+15>>4,e.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,o((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,o(s.Zb,0,0,s.Zb.length),o(s.Lb,0,0,s.Lb)}if(c.ub>i)return qe(e,7,"bad partition length");p(s=e.m,r,a,c.ub),a+=c.ub,i-=c.ub,c.Rb&&(l.Ld=I(s),l.Kd=I(s)),l=e.Qa;var u,A=e.Pa;if(t(null!=s),t(null!=l),l.Cb=I(s),l.Cb){if(l.Bb=I(s),I(s)){for(l.Fb=I(s),u=0;4>u;++u)l.Zb[u]=I(s)?g(s,7):0;for(u=0;4>u;++u)l.Lb[u]=I(s)?g(s,6):0}if(l.Bb)for(u=0;3>u;++u)A.jb[u]=I(s)?f(s,8):255}else l.Bb=0;if(s.Ka)return qe(e,3,"cannot parse segment header");if((l=e.ed).zd=I(s),l.Tb=f(s,6),l.wb=f(s,3),l.Pc=I(s),l.Pc&&I(s)){for(A=0;4>A;++A)I(s)&&(l.vd[A]=g(s,6));for(A=0;4>A;++A)I(s)&&(l.od[A]=g(s,6))}if(e.L=0==l.Tb?0:l.zd?1:2,s.Ka)return qe(e,3,"cannot parse filter header");var h=i;if(i=u=a,a=u+h,l=h,e.Xb=(1<<f(e.m,2))-1,h<3*(A=e.Xb))r=7;else{for(u+=3*A,l-=3*A,h=0;h<A;++h){var d=r[i+0]|r[i+1]<<8|r[i+2]<<16;d>l&&(d=l),p(e.Jc[+h],r,u,d),u+=d,l-=d,i+=3}p(e.Jc[+A],r,u,l),r=u<a?0:5}if(0!=r)return qe(e,r,"cannot parse partitions");for(r=f(u=e.m,7),i=I(u)?g(u,4):0,a=I(u)?g(u,4):0,l=I(u)?g(u,4):0,A=I(u)?g(u,4):0,u=I(u)?g(u,4):0,h=e.Qa,d=0;4>d;++d){if(h.Cb){var m=h.Zb[d];h.Fb||(m+=r)}else{if(0<d){e.pb[d]=e.pb[0];continue}m=r}var y=e.pb[d];y.Sc[0]=to[We(m+i,127)],y.Sc[1]=no[We(m+0,127)],y.Eb[0]=2*to[We(m+a,127)],y.Eb[1]=101581*no[We(m+l,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=to[We(m+A,117)],y.Qc[1]=no[We(m+u,127)],y.lc=m+u}if(!c.Rb)return qe(e,4,"Not a key frame.");for(I(s),c=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(a=0;3>a;++a)for(l=0;11>l;++l)A=E(s,lo[r][i][a][l])?f(s,8):so[r][i][a][l],c.Wc[r][i].Yb[a][l]=A;for(i=0;17>i;++i)c.Xc[r][i]=c.Wc[r][uo[i]]}return e.kc=I(s),e.kc&&(e.Bd=f(s,8)),e.cb=1}function Ze(e,t,n,r,o,a,i){var s=t[o].Yb[n];for(n=0;16>o;++o){if(!E(e,s[n+0]))return o;for(;!E(e,s[n+1]);)if(s=t[++o].Yb[0],n=0,16==o)return 16;var c=t[o+1].Yb;if(E(e,s[n+2])){var l=e,u=0;if(E(l,(h=s)[(A=n)+3]))if(E(l,h[A+6])){for(s=0,A=2*(u=E(l,h[A+8]))+(h=E(l,h[A+9+u])),u=0,h=oo[A];h[s];++s)u+=u+E(l,h[s]);u+=3+(8<<A)}else E(l,h[A+7])?(u=7+2*E(l,165),u+=E(l,145)):u=5+E(l,159);else u=E(l,h[A+4])?3+E(l,h[A+5]):2;s=c[2]}else u=1,s=c[1];c=i+ao[o],0>(l=e).b&&S(l);var A,h=l.b,d=(A=l.Ca>>1)-(l.I>>h)>>31;--l.b,l.Ca+=d,l.Ca|=1,l.I-=(A+1&d)<<h,a[c]=((u^d)-d)*r[(0<o)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,o(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ye(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var s=Qo[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-s>>4,e.zb=n.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+s>>4,e.Hb=n.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var c=e.ed;for(s=0;4>s;++s){var l;if(e.Qa.Cb){var u=e.Qa.Lb[s];e.Qa.Fb||(u+=c.Tb)}else u=c.Tb;for(l=0;1>=l;++l){var A=e.gd[s][l],h=u;if(c.Pc&&(h+=c.vd[0],l&&(h+=c.od[0])),0<(h=0>h?0:63<h?63:h)){var d=h;0<c.wb&&(d=4<c.wb?d>>2:d>>1)>9-c.wb&&(d=9-c.wb),1>d&&(d=1),A.dd=d,A.tc=2*h+d,A.ld=40<=h?2:15<=h?1:0}else A.tc=0;A.La=l}}}s=0}else qe(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=zo);e:{s=e.Ic,c=4*(d=e.za);var p=32*d,f=d+1,g=0<e.L?d*(0<e.Aa?2:1):0,m=(2==e.Aa?2:1)*d;if((A=c+832+(l=3*(16*s+Qo[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=A)s=0;else{if(A>e.Vb){if(e.Vb=0,e.Ec=a(A),e.Fc=0,null==e.Ec){s=qe(e,1,"no memory during frame initialization.");break e}e.Vb=A}A=e.Ec,h=e.Fc,e.Ac=A,e.Bc=h,h+=c,e.Gd=i(p,Ve),e.Hd=0,e.rb=i(f+1,Me),e.sb=1,e.wa=g?i(g,Pe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=d),t(!0),e.oc=A,e.pc=h,h+=832,e.ya=i(m,He),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=d),e.R=16*d,e.B=8*d,d=(p=Qo[e.L])*e.R,p=p/2*e.B,e.sa=A,e.ta=h+d,e.qa=e.sa,e.ra=e.ta+16*s*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+p,e.$c=0,h+=l,e.mb=u?A:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Je(e),o(e.Ac,e.Bc,0,c),s=1}}if(s){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Tr){for(s=-255;255>=s;++s)Ir[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)Er[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)Nr[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)Fr[255+s]=0>s?0:255<s?255:s;Tr=1}ar=lt,ir=at,cr=it,lr=st,ur=ct,sr=ot,Ar=qt,hr=Xt,dr=Jt,pr=$t,fr=Yt,gr=Zt,mr=en,yr=tn,vr=zt,br=Vt,wr=jt,xr=Wt,ho[0]=kt,ho[1]=At,ho[2]=xt,ho[3]=Ct,ho[4]=Bt,ho[5]=It,ho[6]=St,ho[7]=Et,ho[8]=Ft,ho[9]=Nt,Ao[0]=mt,Ao[1]=dt,Ao[2]=pt,Ao[3]=ft,Ao[4]=yt,Ao[5]=vt,Ao[6]=bt,po[0]=Ot,po[1]=ht,po[2]=Tt,po[3]=_t,po[4]=Ut,po[5]=Rt,po[6]=Dt,s=1}else s=0}s&&(s=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,s=e.Jc[e.M&e.Xb],c=e.m,l=e;for(i=0;i<l.za;++i){var u=c,A=l,h=A.Ac,d=A.Bc+4*i,p=A.zc,f=A.ya[A.aa+i];if(A.Qa.Bb?f.$b=E(u,A.Pa.jb[0])?2+E(u,A.Pa.jb[2]):E(u,A.Pa.jb[1]):f.$b=0,A.kc&&(f.Ad=E(u,A.Bd)),f.Za=!E(u,145)+0,f.Za){var g=f.Ob,m=0;for(A=0;4>A;++A){var y,v=p[0+A];for(y=0;4>y;++y){v=co[h[d+y]][v];for(var b=io[E(u,v[0])];0<b;)b=io[2*b+E(u,v[b])];v=-b,h[d+y]=v}r(g,m,h,d,4),m+=4,p[0+A]=v}}else v=E(u,156)?E(u,128)?1:3:E(u,163)?2:0,f.Ob[0]=v,o(h,d,v,4),o(p,0,v,4);f.Dd=E(u,142)?E(u,114)?E(u,183)?1:3:2:0}if(l.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(l=s,u=(c=e).rb[c.sb-1],h=c.rb[c.sb+c.ja],i=c.ya[c.aa+c.ja],d=c.kc?i.Ad:0)u.la=h.la=0,i.Za||(u.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var w,x;if(u=h,h=l,d=c.Pa.Xc,p=c.ya[c.aa+c.ja],f=c.pb[p.$b],A=p.ad,g=0,m=c.rb[c.sb-1],v=y=0,o(A,g,0,384),p.Za)var C=0,k=d[3];else{b=a(16);var B=u.Na+m.Na;if(B=ro(h,d[1],B,f.Eb,0,b,0),u.Na=m.Na=(0<B)+0,1<B)ar(b,0,A,g);else{var S=b[0]+3>>3;for(b=0;256>b;b+=16)A[g+b]=S}C=1,k=d[0]}var I=15&u.la,N=15&m.la;for(b=0;4>b;++b){var F=1&N;for(S=x=0;4>S;++S)I=I>>1|(F=(B=ro(h,k,B=F+(1&I),f.Sc,C,A,g))>C)<<7,x=x<<2|(3<B?3:1<B?2:0!=A[g+0]),g+=16;I>>=4,N=N>>1|F<<7,y=(y<<8|x)>>>0}for(k=I,C=N>>4,w=0;4>w;w+=2){for(x=0,I=u.la>>4+w,N=m.la>>4+w,b=0;2>b;++b){for(F=1&N,S=0;2>S;++S)B=F+(1&I),I=I>>1|(F=0<(B=ro(h,d[2],B,f.Qc,0,A,g)))<<3,x=x<<2|(3<B?3:1<B?2:0!=A[g+0]),g+=16;I>>=2,N=N>>1|F<<5}v|=x<<4*w,k|=I<<4<<w,C|=(240&N)<<w}u.la=k,m.la=C,p.Hc=y,p.Gc=v,p.ia=43690&v?0:f.ia,d=!(y|v)}if(0<c.L&&(c.wa[c.Y+c.ja]=c.gd[i.$b][i.Za],c.wa[c.Y+c.ja].La|=!d),l.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Je(e),c=n,l=1,i=(s=e).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(i.M=s.M,i.uc=u,On(s,i),l=1,i=(x=s.D).Nb,u=(v=Qo[s.L])*s.R,h=v/2*s.B,b=16*i*s.R,S=8*i*s.B,d=s.sa,p=s.ta-u+b,f=s.qa,A=s.ra-h+S,g=s.Ha,m=s.Ia-h+S,N=0==(I=x.M),y=I>=s.Va-1,2==s.Aa&&On(s,x),x.uc)for(F=(B=s).D.M,t(B.D.uc),x=B.yb;x<B.Hb;++x){C=x,k=F;var T=(_=(H=B).D).Nb;w=H.R;var _=_.wa[_.Y+C],L=H.sa,O=H.ta+16*T*w+16*C,R=_.dd,U=_.tc;if(0!=U)if(t(3<=U),1==H.L)0<C&&br(L,O,w,U+4),_.La&&xr(L,O,w,U),0<k&&vr(L,O,w,U+4),_.La&&wr(L,O,w,U);else{var D=H.B,P=H.qa,M=H.ra+8*T*D+8*C,Q=H.Ha,H=H.Ia+8*T*D+8*C;T=_.ld,0<C&&(hr(L,O,w,U+4,R,T),pr(P,M,Q,H,D,U+4,R,T)),_.La&&(gr(L,O,w,U,R,T),yr(P,M,Q,H,D,U,R,T)),0<k&&(Ar(L,O,w,U+4,R,T),dr(P,M,Q,H,D,U+4,R,T)),_.La&&(fr(L,O,w,U,R,T),mr(P,M,Q,H,D,U,R,T))}}if(s.ia&&alert("todo:DitherRow"),null!=c.put){if(x=16*I,I=16*(I+1),N?(c.y=s.sa,c.O=s.ta+b,c.f=s.qa,c.N=s.ra+S,c.ea=s.Ha,c.W=s.Ia+S):(x-=v,c.y=d,c.O=p,c.f=f,c.N=A,c.ea=g,c.W=m),y||(I-=v),I>c.o&&(I=c.o),c.F=null,c.J=null,null!=s.Fa&&0<s.Fa.length&&x<I&&(c.J=hn(s,c,x,I-x),c.F=s.mb,null==c.F&&0==c.F.length)){l=qe(s,3,"Could not decode alpha data.");break e}x<c.j&&(v=c.j-x,x=c.j,t(!(1&v)),c.O+=s.R*v,c.N+=s.B*(v>>1),c.W+=s.B*(v>>1),null!=c.F&&(c.J+=c.width*v)),x<I&&(c.O+=c.v,c.N+=c.v>>1,c.W+=c.v>>1,null!=c.F&&(c.J+=c.v),c.ka=x-c.j,c.U=c.va-c.v,c.T=I-x,l=c.put(c))}i+1!=s.Ic||y||(r(s.sa,s.ta-u,d,p+16*s.R,u),r(s.qa,s.ra-h,f,A+8*s.B,h),r(s.Ha,s.Ia-h,g,m+8*s.B,h))}if(!l)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),s&=1}return s?(e.cb=0,s):0}function et(e,t,n,r,o){o=e[t+n+32*r]+(o>>3),e[t+n+32*r]=-256&o?0>o?0:255:o}function tt(e,t,n,r,o,a){et(e,t,0,n,r+o),et(e,t,1,n,r+a),et(e,t,2,n,r-a),et(e,t,3,n,r-o)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var o,i=0,s=a(16);for(o=0;4>o;++o){var c=e[t+0]+e[t+8],l=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),A=nt(e[t+4])+(35468*e[t+12]>>16);s[i+0]=c+A,s[i+1]=l+u,s[i+2]=l-u,s[i+3]=c-A,i+=4,t++}for(o=i=0;4>o;++o)c=(e=s[i+0]+4)+s[i+8],l=e-s[i+8],u=(35468*s[i+4]>>16)-nt(s[i+12]),et(n,r,0,0,c+(A=nt(s[i+4])+(35468*s[i+12]>>16))),et(n,r,1,0,l+u),et(n,r,2,0,l-u),et(n,r,3,0,c-A),i++,r+=32}function ot(e,t,n,r){var o=e[t+0]+4,a=35468*e[t+4]>>16,i=nt(e[t+4]),s=35468*e[t+1]>>16;tt(n,r,0,o+i,e=nt(e[t+1]),s),tt(n,r,1,o+a,e,s),tt(n,r,2,o-a,e,s),tt(n,r,3,o-i,e,s)}function at(e,t,n,r,o){rt(e,t,n,r),o&&rt(e,t+16,n,r+4)}function it(e,t,n,r){ir(e,t+0,n,r,1),ir(e,t+32,n,r+128,1)}function st(e,t,n,r){var o;for(e=e[t+0]+4,o=0;4>o;++o)for(t=0;4>t;++t)et(n,r,t,o,e)}function ct(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var o,i=a(16);for(o=0;4>o;++o){var s=e[t+0+o]+e[t+12+o],c=e[t+4+o]+e[t+8+o],l=e[t+4+o]-e[t+8+o],u=e[t+0+o]-e[t+12+o];i[0+o]=s+c,i[8+o]=s-c,i[4+o]=u+l,i[12+o]=u-l}for(o=0;4>o;++o)s=(e=i[0+4*o]+3)+i[3+4*o],c=i[1+4*o]+i[2+4*o],l=i[1+4*o]-i[2+4*o],u=e-i[3+4*o],n[r+0]=s+c>>3,n[r+16]=u+l>>3,n[r+32]=s-c>>3,n[r+48]=u-l>>3,r+=64}function ut(e,t,n){var r,o=t-32,a=Or,i=255-e[o-1];for(r=0;r<n;++r){var s,c=a,l=i+e[t-1];for(s=0;s<n;++s)e[t+s]=c[l+e[o+s]];t+=32}}function At(e,t){ut(e,t,4)}function ht(e,t){ut(e,t,8)}function dt(e,t){ut(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)o(e,t,e[t-1],16),t+=32}function gt(e,t,n){var r;for(r=0;16>r;++r)o(t,n+32*r,e,16)}function mt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];gt(r>>5,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];gt(r>>4,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];gt(r>>4,e,t)}function bt(e,t){gt(128,e,t)}function wt(e,t,n){return e+2*t+n+2>>2}function xt(e,t){var n,o=t-32;for(o=new Uint8Array([wt(e[o-1],e[o+0],e[o+1]),wt(e[o+0],e[o+1],e[o+2]),wt(e[o+1],e[o+2],e[o+3]),wt(e[o+2],e[o+3],e[o+4])]),n=0;4>n;++n)r(e,t+32*n,o,0,o.length)}function Ct(e,t){var n=e[t-1],r=e[t-1+32],o=e[t-1+64],a=e[t-1+96];N(e,t+0,16843009*wt(e[t-1-32],n,r)),N(e,t+32,16843009*wt(n,r,o)),N(e,t+64,16843009*wt(r,o,a)),N(e,t+96,16843009*wt(o,a,a))}function kt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)o(e,t+32*n,r,4)}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],o=e[t-1+64],a=e[t-1-32],i=e[t+0-32],s=e[t+1-32],c=e[t+2-32],l=e[t+3-32];e[t+0+96]=wt(r,o,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(n,r,o),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(a,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(i,a,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(s,i,a),e[t+3+32]=e[t+2+0]=wt(c,s,i),e[t+3+0]=wt(l,c,s)}function St(e,t){var n=e[t+1-32],r=e[t+2-32],o=e[t+3-32],a=e[t+4-32],i=e[t+5-32],s=e[t+6-32],c=e[t+7-32];e[t+0+0]=wt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=wt(n,r,o),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(r,o,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(o,a,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(a,i,s),e[t+3+64]=e[t+2+96]=wt(i,s,c),e[t+3+96]=wt(s,c,c)}function It(e,t){var n=e[t-1+0],r=e[t-1+32],o=e[t-1+64],a=e[t-1-32],i=e[t+0-32],s=e[t+1-32],c=e[t+2-32],l=e[t+3-32];e[t+0+0]=e[t+1+64]=a+i+1>>1,e[t+1+0]=e[t+2+64]=i+s+1>>1,e[t+2+0]=e[t+3+64]=s+c+1>>1,e[t+3+0]=c+l+1>>1,e[t+0+96]=wt(o,r,n),e[t+0+64]=wt(r,n,a),e[t+0+32]=e[t+1+96]=wt(n,a,i),e[t+1+32]=e[t+2+96]=wt(a,i,s),e[t+2+32]=e[t+3+96]=wt(i,s,c),e[t+3+32]=wt(s,c,l)}function Et(e,t){var n=e[t+0-32],r=e[t+1-32],o=e[t+2-32],a=e[t+3-32],i=e[t+4-32],s=e[t+5-32],c=e[t+6-32],l=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+o+1>>1,e[t+2+0]=e[t+1+64]=o+a+1>>1,e[t+3+0]=e[t+2+64]=a+i+1>>1,e[t+0+32]=wt(n,r,o),e[t+1+32]=e[t+0+96]=wt(r,o,a),e[t+2+32]=e[t+1+96]=wt(o,a,i),e[t+3+32]=e[t+2+96]=wt(a,i,s),e[t+3+64]=wt(i,s,c),e[t+3+96]=wt(s,c,l)}function Nt(e,t){var n=e[t-1+0],r=e[t-1+32],o=e[t-1+64],a=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+o+1>>1,e[t+2+32]=e[t+0+64]=o+a+1>>1,e[t+1+0]=wt(n,r,o),e[t+3+0]=e[t+1+32]=wt(r,o,a),e[t+3+32]=e[t+1+64]=wt(o,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function Ft(e,t){var n=e[t-1+0],r=e[t-1+32],o=e[t-1+64],a=e[t-1+96],i=e[t-1-32],s=e[t+0-32],c=e[t+1-32],l=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=o+r+1>>1,e[t+0+96]=a+o+1>>1,e[t+3+0]=wt(s,c,l),e[t+2+0]=wt(i,s,c),e[t+1+0]=e[t+3+32]=wt(n,i,s),e[t+1+32]=e[t+3+64]=wt(r,n,i),e[t+1+64]=e[t+3+96]=wt(o,r,n),e[t+1+96]=wt(a,o,r)}function Tt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function _t(e,t){var n;for(n=0;8>n;++n)o(e,t,e[t-1],8),t+=32}function Lt(e,t,n){var r;for(r=0;8>r;++r)o(t,n+32*r,e,8)}function Ot(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Lt(r>>4,e,t)}function Rt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Lt(r>>3,e,t)}function Ut(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Lt(r>>3,e,t)}function Dt(e,t){Lt(128,e,t)}function Pt(e,t,n){var r=e[t-n],o=e[t+0],a=3*(o-r)+_r[1020+e[t-2*n]-e[t+n]],i=Lr[112+(a+4>>3)];e[t-n]=Or[255+r+Lr[112+(a+3>>3)]],e[t+0]=Or[255+o-i]}function Mt(e,t,n,r){var o=e[t+0],a=e[t+n];return Rr[255+e[t-2*n]-e[t-n]]>r||Rr[255+a-o]>r}function Qt(e,t,n,r){return 4*Rr[255+e[t-n]-e[t+0]]+Rr[255+e[t-2*n]-e[t+n]]<=r}function Ht(e,t,n,r,o){var a=e[t-3*n],i=e[t-2*n],s=e[t-n],c=e[t+0],l=e[t+n],u=e[t+2*n],A=e[t+3*n];return 4*Rr[255+s-c]+Rr[255+i-l]>r?0:Rr[255+e[t-4*n]-a]<=o&&Rr[255+a-i]<=o&&Rr[255+i-s]<=o&&Rr[255+A-u]<=o&&Rr[255+u-l]<=o&&Rr[255+l-c]<=o}function zt(e,t,n,r){var o=2*r+1;for(r=0;16>r;++r)Qt(e,t+r,n,o)&&Pt(e,t+r,n)}function Vt(e,t,n,r){var o=2*r+1;for(r=0;16>r;++r)Qt(e,t+r*n,1,o)&&Pt(e,t+r*n,1)}function jt(e,t,n,r){var o;for(o=3;0<o;--o)zt(e,t+=4*n,n,r)}function Wt(e,t,n,r){var o;for(o=3;0<o;--o)Vt(e,t+=4,n,r)}function Kt(e,t,n,r,o,a,i,s){for(a=2*a+1;0<o--;){if(Ht(e,t,n,a,i))if(Mt(e,t,n,s))Pt(e,t,n);else{var c=e,l=t,u=n,A=c[l-2*u],h=c[l-u],d=c[l+0],p=c[l+u],f=c[l+2*u],g=27*(y=_r[1020+3*(d-h)+_r[1020+A-p]])+63>>7,m=18*y+63>>7,y=9*y+63>>7;c[l-3*u]=Or[255+c[l-3*u]+y],c[l-2*u]=Or[255+A+m],c[l-u]=Or[255+h+g],c[l+0]=Or[255+d-g],c[l+u]=Or[255+p-m],c[l+2*u]=Or[255+f-y]}t+=r}}function Gt(e,t,n,r,o,a,i,s){for(a=2*a+1;0<o--;){if(Ht(e,t,n,a,i))if(Mt(e,t,n,s))Pt(e,t,n);else{var c=e,l=t,u=n,A=c[l-u],h=c[l+0],d=c[l+u],p=Lr[112+(4+(f=3*(h-A))>>3)],f=Lr[112+(f+3>>3)],g=p+1>>1;c[l-2*u]=Or[255+c[l-2*u]+g],c[l-u]=Or[255+A+f],c[l+0]=Or[255+h-p],c[l+u]=Or[255+d-g]}t+=r}}function qt(e,t,n,r,o,a){Kt(e,t,n,1,16,r,o,a)}function Xt(e,t,n,r,o,a){Kt(e,t,1,n,16,r,o,a)}function Yt(e,t,n,r,o,a){var i;for(i=3;0<i;--i)Gt(e,t+=4*n,n,1,16,r,o,a)}function Zt(e,t,n,r,o,a){var i;for(i=3;0<i;--i)Gt(e,t+=4,1,n,16,r,o,a)}function Jt(e,t,n,r,o,a,i,s){Kt(e,t,o,1,8,a,i,s),Kt(n,r,o,1,8,a,i,s)}function $t(e,t,n,r,o,a,i,s){Kt(e,t,1,o,8,a,i,s),Kt(n,r,1,o,8,a,i,s)}function en(e,t,n,r,o,a,i,s){Gt(e,t+4*o,o,1,8,a,i,s),Gt(n,r+4*o,o,1,8,a,i,s)}function tn(e,t,n,r,o,a,i,s){Gt(e,t+4,1,o,8,a,i,s),Gt(n,r+4,1,o,8,a,i,s)}function nn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ce,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new A}function sn(){this.xb=this.a=0,this.l=new Ke,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=i(4,on),this.Oc=0}function cn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ke,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,o,a,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)o[a+t]=e+n[r+t]&255,e=o[a+t]}function un(e,t,n,r,o,a,i){var s;if(null==e)ln(null,null,n,r,o,a,i);else for(s=0;s<i;++s)o[a+s]=e[t+s]+n[r+s]&255}function An(e,t,n,r,o,a,i){if(null==e)ln(null,null,n,r,o,a,i);else{var s,c=e[t+0],l=c,u=c;for(s=0;s<i;++s)l=u+(c=e[t+s])-l,u=n[r+s]+(-256&l?0>l?0:255:l)&255,l=c,o[a+s]=u}}function hn(e,n,o,i){var s=n.width,c=n.o;if(t(null!=e&&null!=n),0>o||0>=i||o+i>c)return null;if(!e.Cc){if(null==e.ga){var l;if(e.ga=new cn,(l=null==e.ga)||(l=n.width*n.o,t(0==e.Gb.length),e.Gb=a(l),e.Uc=0,null==e.Gb?l=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,l=1),l=!l),!l){l=e.ga;var u=e.Fa,A=e.P,h=e.qc,d=e.mb,p=e.nb,f=A+1,g=h-1,y=l.l;if(t(null!=u&&null!=d&&null!=n),mo[0]=null,mo[1]=ln,mo[2]=un,mo[3]=An,l.ca=d,l.tb=p,l.c=n.width,l.i=n.height,t(0<l.c&&0<l.i),1>=h)n=0;else if(l.$a=u[A+0]>>0&3,l.Z=u[A+0]>>2&3,l.Lc=u[A+0]>>4&3,A=u[A+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||A)n=0;else if(y.put=de,y.ac=he,y.bc=pe,y.ma=l,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,l.$a)e:{t(1==l.$a),n=Ee();t:for(;;){if(null==n){n=0;break e}if(t(null!=l),l.mc=n,n.c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,m(n.m,u,f,g),!Ne(l.c,l.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ce(n.s)?(l.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=a(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(l.ic=0,n=Fe(n,l.c)),!n)break t;n=1;break e}l.mc=null,n=0}else n=g>=l.c*l.i;l=!n}if(l)return null;1!=e.ga.Lc?e.Ga=0:i=c-o}t(null!=e.ga),t(o+i<=c);e:{if(n=(u=e.ga).c,c=u.l.o,0==u.$a){if(f=e.rc,g=e.Vc,y=e.Fa,A=e.P+1+o*n,h=e.mb,d=e.nb+o*n,t(A<=e.P+e.qc),0!=u.Z)for(t(null!=mo[u.Z]),l=0;l<i;++l)mo[u.Z](f,g,y,A,h,d,n),f=h,g=d,d+=n,A+=n;else for(l=0;l<i;++l)r(h,d,y,A,n),f=h,g=d,d+=n,A+=n;e.rc=f,e.Vc=g}else{if(t(null!=u.mc),n=o+i,t(null!=(l=u.mc)),t(n<=l.i),l.C>=n)n=1;else if(u.ic||mn(),u.ic){u=l.V,f=l.Ba,g=l.c;var v=l.i,b=(y=1,A=l.$/g,h=l.$%g,d=l.m,p=l.s,l.$),w=g*v,x=g*n,k=p.wc,S=b<x?be(p,h,A):null;t(b<=w),t(n<=v),t(Ce(p));t:for(;;){for(;!d.h&&b<x;){if(h&k||(S=be(p,h,A)),t(null!=S),B(d),256>(v=ye(S.G[0],S.H[0],d)))u[f+b]=v,++b,++h>=g&&(h=0,++A<=n&&!(A%16)&&Be(l,A));else{if(!(280>v)){y=0;break t}v=ge(v-256,d);var I,E=ye(S.G[4],S.H[4],d);if(B(d),!(b>=(E=me(g,E=ge(E,d)))&&w-b>=v)){y=0;break t}for(I=0;I<v;++I)u[f+b+I]=u[f+b+I-E];for(b+=v,h+=v;h>=g;)h-=g,++A<=n&&!(A%16)&&Be(l,A);b<x&&h&k&&(S=be(p,h,A))}t(d.h==C(d))}Be(l,A>n?n:A);break t}!y||d.h&&b<w?(y=0,l.a=d.h?5:3):l.$=b,n=y}else n=Se(l,l.V,l.Ba,l.c,l.i,n,Te);if(!n){i=0;break e}}o+i>=c&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+o*s}function dn(e,t,n,r,o,a){for(;0<o--;){var i,s=e,c=t+(n?1:0),l=e,u=t+(n?0:3);for(i=0;i<r;++i){var A=l[u+4*i];255!=A&&(A*=32897,s[c+4*i+0]=s[c+4*i+0]*A>>23,s[c+4*i+1]=s[c+4*i+1]*A>>23,s[c+4*i+2]=s[c+4*i+2]*A>>23)}t+=a}}function pn(e,t,n,r,o){for(;0<r--;){var a;for(a=0;a<n;++a){var i=e[t+2*a+0],s=15&(l=e[t+2*a+1]),c=4369*s,l=(240&l|l>>4)*c>>16;e[t+2*a+0]=(240&i|i>>4)*c>>16&240|(15&i|i<<4)*c>>16>>4&15,e[t+2*a+1]=240&l|s}t+=o}}function fn(e,t,n,r,o,a,i,s){var c,l,u=255;for(l=0;l<o;++l){for(c=0;c<r;++c){var A=e[t+c];a[i+4*c]=A,u&=A}t+=n,i+=s}return 255!=u}function gn(e,t,n,r,o){var a;for(a=0;a<o;++a)n[r+a]=e[t+a]>>8}function mn(){Cr=dn,kr=pn,Br=fn,Sr=gn}function yn(n,r,o){e[n]=function(e,n,a,i,s,c,l,u,A,h,d,p,f,g,m,y,v){var b,w=v-1>>1,x=s[c+0]|l[u+0]<<16,C=A[h+0]|d[p+0]<<16;t(null!=e);var k=3*x+C+131074>>2;for(r(e[n+0],255&k,k>>16,f,g),null!=a&&(k=3*C+x+131074>>2,r(a[i+0],255&k,k>>16,m,y)),b=1;b<=w;++b){var B=s[c+b]|l[u+b]<<16,S=A[h+b]|d[p+b]<<16,I=x+B+C+S+524296,E=I+2*(B+C)>>3;k=E+x>>1,x=(I=I+2*(x+S)>>3)+B>>1,r(e[n+2*b-1],255&k,k>>16,f,g+(2*b-1)*o),r(e[n+2*b-0],255&x,x>>16,f,g+(2*b-0)*o),null!=a&&(k=I+C>>1,x=E+S>>1,r(a[i+2*b-1],255&k,k>>16,m,y+(2*b-1)*o),r(a[i+2*b+0],255&x,x>>16,m,y+(2*b+0)*o)),x=B,C=S}1&v||(k=3*x+C+131074>>2,r(e[n+v-1],255&k,k>>16,f,g+(v-1)*o),null!=a&&(k=3*C+x+131074>>2,r(a[i+v-1],255&k,k>>16,m,y+(v-1)*o)))}}function vn(){yo[Ur]=vo,yo[Dr]=wo,yo[Pr]=bo,yo[Mr]=xo,yo[Qr]=Co,yo[Hr]=ko,yo[zr]=Bo,yo[Vr]=wo,yo[jr]=xo,yo[Wr]=Co,yo[Kr]=ko}function bn(e){return e&~To?0>e?0:255:e>>Fo}function wn(e,t){return bn((19077*e>>8)+(26149*t>>8)-14234)}function xn(e,t,n){return bn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Cn(e,t){return bn((19077*e>>8)+(33050*t>>8)-17685)}function kn(e,t,n,r,o){r[o+0]=wn(e,n),r[o+1]=xn(e,t,n),r[o+2]=Cn(e,t)}function Bn(e,t,n,r,o){r[o+0]=Cn(e,t),r[o+1]=xn(e,t,n),r[o+2]=wn(e,n)}function Sn(e,t,n,r,o){var a=xn(e,t,n);t=a<<3&224|Cn(e,t)>>3,r[o+0]=248&wn(e,n)|a>>5,r[o+1]=t}function In(e,t,n,r,o){var a=240&Cn(e,t)|15;r[o+0]=240&wn(e,n)|xn(e,t,n)>>4,r[o+1]=a}function En(e,t,n,r,o){r[o+0]=255,kn(e,t,n,r,o+1)}function Nn(e,t,n,r,o){Bn(e,t,n,r,o),r[o+3]=255}function Fn(e,t,n,r,o){kn(e,t,n,r,o),r[o+3]=255}function We(e,t){return 0>e?0:e>t?t:e}function Tn(t,n,r){e[t]=function(e,t,o,a,i,s,c,l,u){for(var A=l+(-2&u)*r;l!=A;)n(e[t+0],o[a+0],i[s+0],c,l),n(e[t+1],o[a+0],i[s+0],c,l+r),t+=2,++a,++s,l+=2*r;1&u&&n(e[t+0],o[a+0],i[s+0],c,l)}}function _n(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Ln(e,t,n,r,o){switch(e>>>30){case 3:ir(t,n,r,o,0);break;case 2:sr(t,n,r,o);break;case 1:lr(t,n,r,o)}}function On(e,t){var n,a,i=t.M,s=t.Nb,c=e.oc,l=e.pc+40,u=e.oc,A=e.pc+584,h=e.oc,d=e.pc+600;for(n=0;16>n;++n)c[l+32*n-1]=129;for(n=0;8>n;++n)u[A+32*n-1]=129,h[d+32*n-1]=129;for(0<i?c[l-1-32]=u[A-1-32]=h[d-1-32]=129:(o(c,l-32-1,127,21),o(u,A-32-1,127,9),o(h,d-32-1,127,9)),a=0;a<e.za;++a){var p=t.ya[t.aa+a];if(0<a){for(n=-1;16>n;++n)r(c,l+32*n-4,c,l+32*n+12,4);for(n=-1;8>n;++n)r(u,A+32*n-4,u,A+32*n+4,4),r(h,d+32*n-4,h,d+32*n+4,4)}var f=e.Gd,g=e.Hd+a,m=p.ad,y=p.Hc;if(0<i&&(r(c,l-32,f[g].y,0,16),r(u,A-32,f[g].f,0,8),r(h,d-32,f[g].ea,0,8)),p.Za){var v=c,b=l-32+16;for(0<i&&(a>=e.za-1?o(v,b,f[g].y[15],4):r(v,b,f[g+1].y,0,4)),n=0;4>n;n++)v[b+128+n]=v[b+256+n]=v[b+384+n]=v[b+0+n];for(n=0;16>n;++n,y<<=2)v=c,b=l+Mo[n],ho[p.Ob[n]](v,b),Ln(y,m,16*+n,v,b)}else if(v=_n(a,i,p.Ob[0]),Ao[v](c,l),0!=y)for(n=0;16>n;++n,y<<=2)Ln(y,m,16*+n,c,l+Mo[n]);for(n=p.Gc,v=_n(a,i,p.Dd),po[v](u,A),po[v](h,d),y=m,v=u,b=A,255&(p=n>>0)&&(170&p?cr(y,256,v,b):ur(y,256,v,b)),p=h,y=d,255&(n>>=8)&&(170&n?cr(m,320,p,y):ur(m,320,p,y)),i<e.Ub-1&&(r(f[g].y,0,c,l+480,16),r(f[g].f,0,u,A+224,8),r(f[g].ea,0,h,d+224,8)),n=8*s*e.B,f=e.sa,g=e.ta+16*a+16*s*e.R,m=e.qa,p=e.ra+8*a+n,y=e.Ha,v=e.Ia+8*a+n,n=0;16>n;++n)r(f,g+n*e.R,c,l+32*n,16);for(n=0;8>n;++n)r(m,p+n*e.B,u,A+32*n,8),r(y,v+n*e.B,h,d+32*n,8)}}function Rn(e,r,o,a,i,s,c,l,u){var A=[0],h=[0],d=0,p=null!=u?u.kd:0,f=null!=u?u:new rn;if(null==e||12>o)return 7;f.data=e,f.w=r,f.ha=o,r=[r],o=[o],f.gb=[f.gb];e:{var g=r,y=o,v=f.gb;if(t(null!=e),t(null!=y),t(null!=v),v[0]=0,12<=y[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){v=3;break e}var b=_(e,g[0]+4);if(12>b||4294967286<b){v=3;break e}if(p&&b>y[0]-8){v=7;break e}v[0]=b,g[0]+=12,y[0]-=12}v=0}if(0!=v)return v;for(b=0<f.gb[0],o=o[0];;){e:{var x=e;y=r,v=o;var C=A,k=h,B=g=[0];if((E=d=[d])[0]=0,8>v[0])v=7;else{if(!n(x,y[0],"VP8X")){if(10!=_(x,y[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var S=_(x,y[0]+8),I=1+T(x,y[0]+12);if(2147483648<=I*(x=1+T(x,y[0]+15))){v=3;break e}null!=B&&(B[0]=S),null!=C&&(C[0]=I),null!=k&&(k[0]=x),y[0]+=18,v[0]-=18,E[0]=1}v=0}}if(d=d[0],g=g[0],0!=v)return v;if(y=!!(2&g),!b&&d)return 3;if(null!=s&&(s[0]=!!(16&g)),null!=c&&(c[0]=y),null!=l&&(l[0]=0),c=A[0],g=h[0],d&&y&&null==u){v=0;break}if(4>o){v=7;break}if(b&&d||!b&&!d&&!n(e,r[0],"ALPH")){o=[o],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{S=e,v=r,b=o;var E=f.gb;C=f.na,k=f.P,B=f.Sa,I=22,t(null!=S),t(null!=b),x=v[0];var N=b[0];for(t(null!=C),t(null!=B),C[0]=null,k[0]=null,B[0]=0;;){if(v[0]=x,b[0]=N,8>N){v=7;break e}var F=_(S,x+4);if(4294967286<F){v=3;break e}var L=8+F+1&-2;if(I+=L,0<E&&I>E){v=3;break e}if(!n(S,x,"VP8 ")||!n(S,x,"VP8L")){v=0;break e}if(N[0]<L){v=7;break e}n(S,x,"ALPH")||(C[0]=S,k[0]=x+8,B[0]=F),x+=L,N-=L}}if(o=o[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=v)break}o=[o],f.Ja=[f.Ja],f.xa=[f.xa];e:if(E=e,v=r,b=o,C=f.gb[0],k=f.Ja,B=f.xa,S=v[0],x=!n(E,S,"VP8 "),I=!n(E,S,"VP8L"),t(null!=E),t(null!=b),t(null!=k),t(null!=B),8>b[0])v=7;else{if(x||I){if(E=_(E,S+4),12<=C&&E>C-12){v=3;break e}if(p&&E>b[0]-8){v=7;break e}k[0]=E,v[0]+=8,b[0]-=8,B[0]=I}else B[0]=5<=b[0]&&47==E[S+0]&&!(E[S+4]>>5),k[0]=b[0];v=0}if(o=o[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=v)break;if(4294967286<f.Ja)return 3;if(null==l||y||(l[0]=f.xa?2:1),c=[c],g=[g],f.xa){if(5>o){v=7;break}l=c,p=g,y=s,null==e||5>o?e=0:5<=o&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],E=[0],C=[0],m(k=new w,e,r,o),fe(k,b,E,C)?(null!=l&&(l[0]=b[0]),null!=p&&(p[0]=E[0]),null!=y&&(y[0]=C[0]),e=1):e=0):e=0}else{if(10>o){v=7;break}l=g,null==e||10>o||!Xe(e,r+3,o-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,y=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(c&&(c[0]=y),l&&(l[0]=e),e=1))}if(!e)return 3;if(c=c[0],g=g[0],d&&(A[0]!=c||h[0]!=g))return 3;null!=u&&(u[0]=f,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-o));break}return 0==v||7==v&&d&&null==u?(null!=s&&(s[0]|=null!=f.na&&0<f.na.length),null!=a&&(a[0]=c),null!=i&&(i[0]=g),0):v}function Un(e,t,n){var r=t.width,o=t.height,a=0,i=0,s=r,c=o;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,c=e.bd,a=e.v,i=e.j,11>n||(a&=-2,i&=-2),0>a||0>i||0>=s||0>=c||a+s>r||i+c>o))return 0;if(t.v=a,t.j=i,t.va=a+s,t.o=i+c,t.U=s,t.T=c,t.da=null!=e&&0<e.da,t.da){if(!U(s,c,n=[e.ib],a=[e.hb]))return 0;t.ib=n[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*o/4,t.Kb=0),1}function Dn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Pn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var o=n.cd,i=n.bd,s=-2&n.v,c=-2&n.j;if(0>s||0>c||0>=o||0>=i||s+o>e||c+i>t)return 2;e=o,t=i}if(n.da){if(!U(e,t,o=[n.ib],i=[n.hb]))return 2;e=o[0],t=i[0]}}r.width=e,r.height=t;e:{var l=r.width,u=r.height;if(e=r.S,0>=l||0>=u||!(e>=Ur&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){s=i=o=t=0;var A=(c=l*Vo[e])*u;if(11>e||(i=(u+1)/2*(t=(l+1)/2),12==e&&(s=(o=l)*u)),null==(u=a(A+2*i+s))){e=1;break e}r.sd=u,11>e?((l=r.f.RGBA).eb=u,l.fb=0,l.A=c,l.size=A):((l=r.f.kb).y=u,l.O=0,l.fa=c,l.Fd=A,l.f=u,l.N=0+A,l.Ab=t,l.Cd=i,l.ea=u,l.W=0+A+i,l.Db=t,l.Ed=i,12==e&&(l.F=u,l.J=0+A+2*i),l.Tc=s,l.lb=o)}if(t=1,o=r.S,i=r.width,s=r.height,o>=Ur&&13>o)if(11>o)e=r.f.RGBA,t&=(c=Math.abs(e.A))*(s-1)+i<=e.size,t&=c>=i*Vo[o],t&=null!=e.eb;else{e=r.f.kb,c=(i+1)/2,A=(s+1)/2,l=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),d=Math.abs(e.lb),p=d*(s-1)+i;t&=l*(s-1)+i<=e.Fd,t&=u*(A-1)+c<=e.Cd,t=(t&=h*(A-1)+c<=e.Ed)&l>=i&u>=c&h>=c,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==o&&(t&=d>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Dn(r)),e}var Mn=64,Qn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hn=24,zn=32,Vn=8,jn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];M("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return H(H(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return H(e,t[n-1])},e.Predictor7=function(e,t,n){return H(e,t[n+0])},e.Predictor8=function(e,t,n){return H(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return H(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return H(H(e,t[n-1]),H(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=j(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+j(r>>16&255,e>>16&255,t>>16&255)+j(r>>8&255,e>>8&255,t>>8&255)+j(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(z((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|z((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|z((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|z((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(V((e=H(e,t[n+0]))>>24&255,r>>24&255)<<24|V(e>>16&255,r>>16&255)<<16|V(e>>8&255,r>>8&255)<<8|V(e>>0&255,r>>0&255))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=W,M("Predictor2","PredictorAdd2"),M("Predictor3","PredictorAdd3"),M("Predictor4","PredictorAdd4"),M("Predictor5","PredictorAdd5"),M("Predictor6","PredictorAdd6"),M("Predictor7","PredictorAdd7"),M("Predictor8","PredictorAdd8"),M("Predictor9","PredictorAdd9"),M("Predictor10","PredictorAdd10"),M("Predictor11","PredictorAdd11"),M("Predictor12","PredictorAdd12"),M("Predictor13","PredictorAdd13");var Kn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Gn,qn=e.ColorIndexInverseTransform,Xn=e.MapARGB,Yn=e.VP8LColorIndexInverseTransformAlpha,Zn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,er,tr,nr,rr,or,ar,ir,sr,cr,lr,ur,Ar,hr,dr,pr,fr,gr,mr,yr,vr,br,wr,xr,Cr,kr,Br,Sr,Ir=a(511),Er=a(2041),Nr=a(225),Fr=a(767),Tr=0,_r=Er,Lr=Nr,Or=Fr,Rr=Ir,Ur=0,Dr=1,Pr=2,Mr=3,Qr=4,Hr=5,zr=6,Vr=7,jr=8,Wr=9,Kr=10,Gr=[2,3,7],qr=[3,3,11],Xr=[280,256,256,256,40],Yr=[0,1,1,1,0],Zr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$r=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eo=8,to=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],no=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ro=null,oo=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ao=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],io=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],so=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],co=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],uo=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ao=[],ho=[],po=[],fo=1,go=2,mo=[],yo=[];yn("UpsampleRgbLinePair",kn,3),yn("UpsampleBgrLinePair",Bn,3),yn("UpsampleRgbaLinePair",Fn,4),yn("UpsampleBgraLinePair",Nn,4),yn("UpsampleArgbLinePair",En,4),yn("UpsampleRgba4444LinePair",In,2),yn("UpsampleRgb565LinePair",Sn,2);var vo=e.UpsampleRgbLinePair,bo=e.UpsampleBgrLinePair,wo=e.UpsampleRgbaLinePair,xo=e.UpsampleBgraLinePair,Co=e.UpsampleArgbLinePair,ko=e.UpsampleRgba4444LinePair,Bo=e.UpsampleRgb565LinePair,So=16,Io=1<<So-1,Eo=-227,No=482,Fo=6,To=(256<<Fo)-1,_o=0,Lo=a(256),Oo=a(256),Ro=a(256),Uo=a(256),Do=a(No-Eo),Po=a(No-Eo);Tn("YuvToRgbRow",kn,3),Tn("YuvToBgrRow",Bn,3),Tn("YuvToRgbaRow",Fn,4),Tn("YuvToBgraRow",Nn,4),Tn("YuvToArgbRow",En,4),Tn("YuvToRgba4444Row",In,2),Tn("YuvToRgb565Row",Sn,2);var Mo=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Qo=[0,2,8],Ho=[8,7,6,4,4,2,2,2,1,1,1,1],zo=1;this.WebPDecodeRGBA=function(e,n,r,o,a){var i=Dr,s=new nn,c=new ie;s.ba=c,c.S=i,c.width=[c.width],c.height=[c.height];var l=c.width,u=c.height,A=new se;if(null==A||null==e)var h=2;else t(null!=A),h=Rn(e,n,r,A.width,A.height,A.Pd,A.Qd,A.format,null);if(0!=h?l=0:(null!=l&&(l[0]=A.width[0]),null!=u&&(u[0]=A.height[0]),l=1),l){c.width=c.width[0],c.height=c.height[0],null!=o&&(o[0]=c.width),null!=a&&(a[0]=c.height);e:{if(o=new Ke,(a=new rn).data=e,a.w=n,a.ha=r,a.kd=1,n=[0],t(null!=a),(0==(e=Rn(a.data,a.w,a.ha,null,null,null,n,null,a))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=s),o.data=a.data,o.w=a.w+a.offset,o.ha=a.ha-a.offset,o.put=de,o.ac=he,o.bc=pe,o.ma=s,a.xa){if(null==(e=Ee())){s=1;break e}if(function(e,n){var r=[0],o=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,m(e.m,n.data,n.w,n.ha),!fe(e.m,r,o,a)){e.a=3;break t}if(e.xb=go,n.width=r[0],n.height=o[0],!Ne(r[0],o[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,o)){if(o=0==(n=Pn(o.width,o.height,s.Oa,s.ba))){t:{o=e;n:for(;;){if(null==o){o=0;break t}if(t(null!=o.s.yc),t(null!=o.s.Ya),t(0<o.s.Wb),t(null!=(r=o.l)),t(null!=(a=r.ma)),0!=o.xb){if(o.ca=a.ba,o.tb=a.tb,t(null!=o.ca),!Un(a.Oa,r,Mr)){o.a=2;break n}if(!Fe(o,r.width))break n;if(r.da)break n;if((r.da||re(o.ca.S))&&mn(),11>o.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=o.ca.f.kb.F&&mn()),o.Pb&&0<o.s.ua&&null==o.s.vb.X&&!L(o.s.vb,o.s.Wa.Xa)){o.a=1;break n}o.xb=0}if(!Se(o,o.V,o.Ba,o.c,o.i,r.o,xe))break n;a.Dc=o.Ma,o=1;break t}t(0!=o.a),o=0}o=!o}o&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){s=1;break e}if(e.Fa=a.na,e.P=a.P,e.qc=a.Sa,Ye(e,o)){if(0==(n=Pn(o.width,o.height,s.Oa,s.ba))){if(e.Aa=0,r=s.Oa,t(null!=(a=e)),null!=r){if(0<(l=0>(l=r.Md)?0:100<l?255:255*l/100)){for(u=A=0;4>u;++u)12>(h=a.pb[u]).lc&&(h.ia=l*Ho[0>h.lc?0:h.lc]>>3),A|=h.ia;A&&(alert("todo:VP8InitRandom"),a.ia=1)}a.Ga=r.Id,100<a.Ga?a.Ga=100:0>a.Ga&&(a.Ga=0)}$e(e,o)||(n=e.a)}}else n=e.a}0==n&&null!=s.Oa&&s.Oa.fd&&(n=Dn(s.ba))}s=n}i=0!=s?null:11>i?c.f.RGBA.eb:c.f.kb.y}else i=null;return i};var Vo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16)>>>0}function A(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new c;var h=[0],d=[0],p=[],f=new c,g=e,m=function(e,t){var n={},r=0,o=!1,a=0,i=0;if(n.frames=[],!function(e,t,n,r){for(var o=0;o<4;o++)if(e[t+o]!="RIFF".charCodeAt(o))return!0;return!1}(e,t)){var s,c;for(A(e,t+=4),t+=8;t<e.length;){var h=l(e,t),d=A(e,t+=4);t+=4;var p=d+(1&d);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(m=n.frames[r]).src_off=o?i:t-8,m.src_size=a+d+8,r++,o&&(o=!1,a=0,i=0);break;case"VP8X":(m=n.header={}).feature_flags=e[t];var f=t+4;m.canvas_width=1+u(e,f),f+=3,m.canvas_height=1+u(e,f),f+=3;break;case"ALPH":o=!0,a=p+8,i=t-8;break;case"ANIM":(m=n.header).bgcolor=A(e,t),f=t+4,m.loop_count=(s=e)[(c=f)+0]<<0|s[c+1]<<8,f+=2;break;case"ANMF":var g,m;(m=n.frames[r]={}).offset_x=2*u(e,t),t+=3,m.offset_y=2*u(e,t),t+=3,m.width=1+u(e,t),t+=3,m.height=1+u(e,t),t+=3,m.duration=u(e,t),t+=3,g=e[t++],m.dispose=1&g,m.blend=g>>1&1}"ANMF"!=h&&(t+=p)}return n}}(g,0);m.response=g,m.rgbaoutput=!0,m.dataurl=!1;var y=m.header?m.header:null,v=m.frames?m.frames:null;if(y){y.loop_counter=y.loop_count,h=[y.canvas_height],d=[y.canvas_width];for(var b=0;b<v.length&&0!=v[b].blend;b++);}var w=v[0],x=f.WebPDecodeRGBA(g,w.src_off,w.src_size,d,h);w.rgba=x,w.imgwidth=d[0],w.imgheight=h[0];for(var C=0;C<d[0]*h[0]*4;C++)p[C]=x[C];return this.width=d,this.height=h,this.data=p,this}!function(e){var t=function(t,r,c,l){var u=4,A=a;switch(l){case e.image_compression.FAST:u=1,A=o;break;case e.image_compression.MEDIUM:u=6,A=i;break;case e.image_compression.SLOW:u=9,A=s}var h=Ime(t=n(t,r,c,A),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,r){for(var o,a,i,s=e.length/t,c=new Uint8Array(e.length+s),A=l(),h=0;h<s;h+=1){if(i=h*t,o=e.subarray(i,i+t),r)c.set(r(o,n,a),i+h);else{for(var d,p=A.length,f=[];d<p;d+=1)f[d]=A[d](o,n,a);var g=u(f.concat());c.set(f[g],i+h)}a=o}return c},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},o=function(e,t){var n,r=[],o=e.length;r[0]=1;for(var a=0;a<o;a+=1)n=e[a-t]||0,r[a+1]=e[a]-n+256&255;return r},a=function(e,t,n){var r,o=[],a=e.length;o[0]=2;for(var i=0;i<a;i+=1)r=n&&n[i]||0,o[i+1]=e[i]-r+256&255;return o},i=function(e,t,n){var r,o,a=[],i=e.length;a[0]=3;for(var s=0;s<i;s+=1)r=e[s-t]||0,o=n&&n[s]||0,a[s+1]=e[s]+256-(r+o>>>1)&255;return a},s=function(e,t,n){var r,o,a,i,s=[],l=e.length;s[0]=4;for(var u=0;u<l;u+=1)r=e[u-t]||0,o=n&&n[u]||0,a=n&&n[u-t]||0,i=c(r,o,a),s[u+1]=e[u]-i+256&255;return s},c=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),o=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=o&&r<=a?e:o<=a?t:n},l=function(){return[r,o,a,i,s]},u=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,o,a){var i,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(c=new bve(n)).imgData,s=c.bits,i=c.colorSpace,u=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits){p=(d=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,g=new Uint8Array(p*c.colors),f=new Uint8Array(p);var C,k=c.pixelBitlength-c.bits;for(v=0,b=0;v<p;v++){for(y=d[v],C=0;C<k;)g[b++]=y>>>C&255,C+=c.bits;f[v]=y>>>C&255}}if(16===c.bits){p=(d=new Uint32Array(c.decodePixels().buffer)).length,g=new Uint8Array(p*(32/c.pixelBitlength)*c.colors),f=new Uint8Array(p*(32/c.pixelBitlength)),m=c.colors>1,v=0,b=0;for(var B=0;v<p;)y=d[v++],g[b++]=y>>>0&255,m&&(g[b++]=y>>>16&255,y=d[v++],g[b++]=y>>>0&255),f[B++]=y>>>16&255;s=8}a!==e.image_compression.NONE?(n=t(g,c.width*c.colors,c.colors,a),h=t(f,c.width,1,a)):(n=g,h=f,w=void 0)}if(3===c.colorType&&(i=this.color_spaces.INDEXED,A=c.palette,c.transparency.indexed)){var S=c.transparency.indexed,I=0;for(v=0,p=S.length;v<p;++v)I+=S[v];if((I/=255)===p-1&&-1!==S.indexOf(0))l=[S.indexOf(0)];else if(I!==p){for(d=c.decodePixels(),f=new Uint8Array(d.length),v=0,p=d.length;v<p;v++)f[v]=S[d[v]];h=t(f,c.width,1)}}var E=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(a);return w===this.decode.FLATE_DECODE&&(x="/Predictor "+E+" "),x+="/Colors "+u+" /BitsPerComponent "+s+" /Columns "+c.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:o,data:n,index:r,filter:w,decodeParameters:x,transparency:l,palette:A,sMask:h,predictor:E,width:c.width,height:c.height,bitsPerComponent:s,colorSpace:i}}}}(cye.API),function(e){e.processGIF89A=function(t,n,r,o){var a=new wve(t),i=a.width,s=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:i,height:s},u=new Cve(100).encode(l,100);return e.processJPEG.call(this,u,n,r,o)},e.processGIF87A=e.processGIF89A}(cye.API),kve.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},kve.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){Tme.log("bit decode error:"+e)}},kve.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*o*4,s=0;s<8&&8*o+s<this.width;s++){var c=this.palette[a>>7-s&1];this.data[i+4*s]=c.blue,this.data[i+4*s+1]=c.green,this.data[i+4*s+2]=c.red,this.data[i+4*s+3]=255}0!==n&&(this.pos+=4-n)}},kve.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*o*4,s=a>>4,c=15&a,l=this.palette[s];if(this.data[i]=l.blue,this.data[i+1]=l.green,this.data[i+2]=l.red,this.data[i+3]=255,2*o+1>=this.width)break;l=this.palette[c],this.data[i+4]=l.blue,this.data[i+4+1]=l.green,this.data[i+4+2]=l.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},kve.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(o<this.palette.length){var i=this.palette[o];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},kve.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,l=a>>15?255:0,u=r*this.width*4+4*o;this.data[u]=c,this.data[u+1]=s,this.data[u+2]=i,this.data[u+3]=l}this.pos+=e}},kve.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,c=(i>>5&n)/n*255|0,l=(i>>11)/t*255|0,u=o*this.width*4+4*a;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=s,this.data[u+3]=255}this.pos+=e}},kve.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=a,this.data[i+1]=o,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},kve.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=a,this.data[s+1]=o,this.data[s+2]=r,this.data[s+3]=i}},kve.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var a=new kve(t,!1),i=a.width,s=a.height,c={data:a.getData(),width:i,height:s},l=new Cve(100).encode(c,100);return e.processJPEG.call(this,l,n,r,o)}}(cye.API),Bve.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var a=new Bve(t,!1),i=a.width,s=a.height,c={data:a.getData(),width:i,height:s},l=new Cve(100).encode(c,100);return e.processJPEG.call(this,l,n,r,o)}}(cye.API),cye.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,a=new Uint8Array(o/4*3),i=new Uint8Array(o/4),s=0,c=0,l=0;l<o;l+=4){var u=r[l],A=r[l+1],h=r[l+2],d=r[l+3];a[s++]=u,a[s++]=A,a[s++]=h,i[c++]=d}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},cye.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},fve=cye.API,gve=fve.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:o.metadata.Unicode.widths,c=s.fof?s.fof:1,l=t.kerning?t.kerning:o.metadata.Unicode.kerning,u=l.fof?l.fof:1,A=!1!==t.doKerning,h=0,d=e.length,p=0,f=s[0]||c,g=[];for(n=0;n<d;n++)r=e.charCodeAt(n),"function"==typeof o.metadata.widthOfString?g.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(h=A&&"object"===(0,F6.Z)(l[r])&&!isNaN(parseInt(l[r][p],10))?l[r][p]/u:0,g.push((s[r]||f)/c+h)),p=r;return g},mve=fve.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return fve.processArabic&&(e=fve.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,o)/n:gve.apply(this,arguments).reduce((function(e,t){return e+t}),0)},yve=function(e,t,n,r){for(var o=[],a=0,i=e.length,s=0;a!==i&&s+t[a]<n;)s+=t[a],a++;o.push(e.slice(0,a));var c=a;for(s=0;a!==i;)s+t[a]>r&&(o.push(e.slice(c,a)),s=0,c=a),s+=t[a],a++;return c!==a&&o.push(e.slice(c,a)),o},vve=function(e,t,n){n||(n={});var r,o,a,i,s,c,l,u=[],A=[u],h=n.textIndent||0,d=0,p=0,f=e.split(" "),g=gve.apply(this,[" ",n])[0];if(c=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var m=Array(c).join(" "),y=[];f.map((function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):y.push(e[0])})),f=y,c=mve.apply(this,[m,n])}for(a=0,i=f.length;a<i;a++){var v=0;if(r=f[a],c&&"\n"==r[0]&&(r=r.substr(1),v=1),h+d+(p=(o=gve.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||v){if(p>t){for(s=yve.apply(this,[r,o,t-(h+d),t]),u.push(s.shift()),u=[s.pop()];s.length;)A.push([s.shift()]);p=o.slice(r.length-(u[0]?u[0].length:0)).reduce((function(e,t){return e+t}),0)}else u=[r];A.push(u),h=p+c,d=g}else u.push(r),h+=d+p,d=g}return l=c?function(e,t){return(t?m:"")+e.join(" ")}:function(e){return e.join(" ")},A.map(l)},fve.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var s,c,l=[];for(s=0,c=r.length;s<c;s++)l=l.concat(vve.apply(this,[r[s],i,a]));return l},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<16;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var a=function(e){return"0x"+parseInt(e,10).toString(16)},i=e.__fontmetrics__.compress=function(e){var t,n,o,s,c=["{"];for(var l in e){if(t=e[l],isNaN(parseInt(l,10))?n="'"+l+"'":(l=parseInt(l,10),n=(n=a(l).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(o=a(t).slice(3),s="-"):(o=a(t).slice(2),s=""),o=s+o.slice(0,-1)+r[o.slice(-1)];else{if("object"!==(0,F6.Z)(t))throw new Error("Don't know what to do with value type "+(0,F6.Z)(t)+".");o=i(t)}c.push(n+o)}return c.push("}"),c.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,o,a,i={},s=1,c=i,l=[],u="",A="",h=e.length-1,d=1;d<h;d+=1)"'"==(a=e[d])?t?(o=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(l.push([c,o]),c={},o=void 0):"}"==a?((r=l.pop())[0][r[1]]=c,o=void 0,c=r[0]):"-"==a?s=-1:void 0===o?n.hasOwnProperty(a)?(u+=n[a],o=parseInt(u,16)*s,s=1,u=""):u+=a:n.hasOwnProperty(a)?(A+=n[a],c[o]=parseInt(A,16)*s,s=1,o=void 0,A=""):A+=a;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=l.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(cye.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(void 0===a)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if("string"!=typeof(r=!1===a.existsFileInVFS(o.postScriptName)?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(Rme(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(o,r)}}])}(cye),function(e){function t(){return(Nme.canvg?Promise.resolve(Nme.canvg):n.e(513).then(n.bind(n,6513))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}cye.API.addSvgAsImage=function(e,n,r,o,a,i,s,c){if(isNaN(n)||isNaN(r))throw Tme.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw Tme.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=o,l.height=a;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return t().then((function(t){return t.fromString(u,e,A)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(A)})).then((function(){h.addImage(l.toDataURL("image/jpeg",1),n,r,o,a,s,c)}))}}(),cye.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},cye.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(i),c=[],l=0,u=0,A=0;function h(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var d=s.length;for(A=0;A<d;A+=1)n[s[A]].value=n[s[A]].defaultValue,n[s[A]].explicitSet=!1}if("object"===(0,F6.Z)(e))for(o in e)if(a=e[o],h(s,o)&&void 0!==a){if("boolean"===n[o].type&&"boolean"==typeof a)n[o].value=a;else if("name"===n[o].type&&h(n[o].valueSet,a))n[o].value=a;else if("integer"===n[o].type&&Number.isInteger(a))n[o].value=a;else if("array"===n[o].type){for(l=0;l<a.length;l+=1)if(r=!0,1===a[l].length&&"number"==typeof a[l][0])c.push(String(a[l]-1));else if(a[l].length>1){for(u=0;u<a[l].length;u+=1)"number"!=typeof a[l][u]&&(r=!1);!0===r&&c.push([a[l][0]-1,a[l][1]-1].join(" "))}n[o].value="["+c.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),a=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+r.length+o.length+t.length+a.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+o+a),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(cye.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,o=["","0","00","000","0000"],a=[""],i=0,s=e.length;i<s;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return a.join("");n=n.toString(16),a.push(o[4-n.length],n)}return a.join("")},r=function(e){var t,n,r,o,a,i,s;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,s=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;i<s;i++)t=n[i],r.length>=100&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(o=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+o+">"));return r.length&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,o=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var s=n.metadata.Unicode.widths,c=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u]);var A=a();i({data:l,addLength1:!0,objectId:A}),o("endobj");var h=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),o("endobj");var d=a();o("<<"),o("/Type /FontDescriptor"),o("/FontName /"+nye(n.fontName)),o("/FontFile2 "+A+" 0 R"),o("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),o("/Flags "+n.metadata.flags),o("/StemV "+n.metadata.stemV),o("/ItalicAngle "+n.metadata.italicAngle),o("/Ascent "+n.metadata.ascender),o("/Descent "+n.metadata.decender),o("/CapHeight "+n.metadata.capHeight),o(">>"),o("endobj");var p=a();o("<<"),o("/Type /Font"),o("/BaseFont /"+nye(n.fontName)),o("/FontDescriptor "+d+" 0 R"),o("/W "+e.API.PDFObject.convert(s)),o("/CIDToGIDMap /Identity"),o("/DW 1000"),o("/Subtype /CIDFontType2"),o("/CIDSystemInfo"),o("<<"),o("/Supplement 0"),o("/Registry (Adobe)"),o("/Ordering ("+n.encoding+")"),o(">>"),o(">>"),o("endobj"),n.objectNumber=a(),o("<<"),o("/Type /Font"),o("/Subtype /Type0"),o("/ToUnicode "+h+" 0 R"),o("/BaseFont /"+nye(n.fontName)),o("/Encoding /"+n.encoding),o("/DescendantFonts ["+p+" 0 R]"),o(">>"),o("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,o=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var s=n.metadata.rawData,c="",l=0;l<s.length;l++)c+=String.fromCharCode(s[l]);var u=a();i({data:c,addLength1:!0,objectId:u}),o("endobj");var A=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:A}),o("endobj");var h=a();o("<<"),o("/Descent "+n.metadata.decender),o("/CapHeight "+n.metadata.capHeight),o("/StemV "+n.metadata.stemV),o("/Type /FontDescriptor"),o("/FontFile2 "+u+" 0 R"),o("/Flags 96"),o("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),o("/FontName /"+nye(n.fontName)),o("/ItalicAngle "+n.metadata.italicAngle),o("/Ascent "+n.metadata.ascender),o(">>"),o("endobj"),n.objectNumber=a();for(var d=0;d<n.metadata.hmtx.widths.length;d++)n.metadata.hmtx.widths[d]=parseInt(n.metadata.hmtx.widths[d]*(1e3/n.metadata.head.unitsPerEm));o("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+nye(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),o("endobj"),n.isAlreadyPutted=!0}}(t)}]);var o=function(e){var t,r=e.text||"",o=e.x,a=e.y,i=e.options||{},s=e.mutex||{},c=s.pdfEscape,l=s.activeFontKey,u=s.fonts,A=l,h="",d=0,p="",f=u[A].encoding;if("Identity-H"!==u[A].encoding)return{text:r,x:o,y:a,options:i,mutex:s};for(p=r,A=l,Array.isArray(r)&&(p=r[0]),d=0;d<p.length;d+=1)u[A].metadata.hasOwnProperty("cmap")&&(t=u[A].metadata.cmap.unicode.codeMap[p[d].charCodeAt(0)]),t||p[d].charCodeAt(0)<256&&u[A].metadata.hasOwnProperty("Unicode")?h+=p[d]:h+="";var g="";return parseInt(A.slice(1))<14||"WinAnsiEncoding"===f?g=c(h,A).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===f&&(g=n(h,u[A])),s.isHex=!0,{text:g,x:o,y:a,options:i,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?n.push([o(Object.assign({},r,{text:t[a][0]})).text,t[a][1],t[a][2]]):n.push(o(Object.assign({},r,{text:t[a]})).text);e.text=n}else e.text=o(Object.assign({},r,{text:t})).text}])}(cye),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(cye.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,o,a,i,s,c,l=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},d={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,r=d[n];return void 0!==r?l[256*r+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},b=function(e,t,i,s){var c,l,u,A,h=t[s];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(c=i[s-1])&&"AN"!==c||"EN"!==(l=t[s+1])&&"AN"!==l?h="N":g&&(l="AN"),h=l===c?l:"N";break;case"ES":h="EN"===(c=s>0?i[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===i[s-1]){h="EN";break}if(g){h="N";break}for(u=s+1,A=t.length;u<A&&"ET"===t[u];)u++;h=u<A&&"EN"===t[u]?"EN":"N";break;case"NSM":if(o&&!a){for(A=t.length,u=s+1;u<A&&"NSM"===t[u];)u++;if(u<A){var d=e[s],p=d>=1425&&d<=2303||64286===d;if(c=t[u],p&&("R"===c||"AL"===c)){h="R";break}}}h=s<1||"B"===(c=t[s-1])?"N":i[s-1];break;case"B":g=!1,n=!0,h=m;break;case"S":r=!0,h="N"}return h},w=function(e,t,n){var r=e.split("");return n&&x(r,n,{hiLevel:m}),r.reverse(),t&&t.reverse(),r.join("")},x=function(e,t,o){var a,i,s,c,l,d=-1,p=e.length,f=0,v=[],w=m?A:u,x=[];for(g=!1,n=!1,r=!1,i=0;i<p;i++)x[i]=y(e[i]);for(s=0;s<p;s++){if(l=f,v[s]=b(e,x,v,s),a=240&(f=w[l][h[v[s]]]),f&=15,t[s]=c=w[f][5],a>0)if(16===a){for(i=d;i<s;i++)t[i]=1;d=-1}else d=-1;if(w[f][6])-1===d&&(d=s);else if(d>-1){for(i=d;i<s;i++)t[i]=c;d=-1}"B"===x[s]&&(t[s]=0),o.hiLevel|=c}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=m;for(var o=r-1;o>=0&&"WS"===e[o];o--)t[o]=m}}(x,t,p)},C=function(e,t,r,o,a){if(!(a.hiLevel<e)){if(1===e&&1===m&&!n)return t.reverse(),void(r&&r.reverse());for(var i,s,c,l,u=t.length,A=0;A<u;){if(o[A]>=e){for(c=A+1;c<u&&o[c]>=e;)c++;for(l=A,s=c-1;l<s;l++,s--)i=t[l],t[l]=t[s],t[s]=i,r&&(i=r[l],r[l]=r[s],r[s]=i);A=c}A++}}},k=function(e,t,n){var r=e.split(""),o={hiLevel:m};return n||(n=[]),x(r,n,o),function(e,t,n){if(0!==n.hiLevel&&c)for(var r,o=0;o<e.length;o++)1===t[o]&&(r=p.indexOf(e[o]))>=0&&(e[o]=p[r+1])}(r,n,o),C(2,r,t,n,o),C(1,r,t,n,o),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===a&&(a=v(e)),void 0===s&&(s=v(e))}(e,t),o||!i||s)if(o&&i&&a^s)m=a?1:0,e=w(e,t,n);else if(!o&&i&&s)m=a?1:0,e=k(e,t,n),e=w(e,t);else if(!o||a||i||s){if(o&&!i&&a^s)e=w(e,t),a?(m=0,e=k(e,t,n)):(m=1,e=k(e,t,n),e=w(e,t));else if(o&&a&&!i&&s)m=1,e=k(e,t,n),e=w(e,t);else if(!o&&!i&&a^s){var r=c;a?(m=1,e=k(e,t,n),m=0,c=!1,e=k(e,t,n),c=r):(m=0,e=k(e,t,n),e=w(e,t),m=1,c=!1,e=k(e,t,n),c=r,e=w(e,t))}}else m=0,e=k(e,t,n);else m=a?1:0,e=k(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(o=e.isInputVisual,i=e.isOutputVisual,a=e.isInputRtl,s=e.isOutputRtl,c=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),o=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(o=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?o.push([n.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):o.push([n.doBidiReorder(t[a])]);e.text=o}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(cye),cye.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Ive(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Kve(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Eve(this.contents),this.head=new Tve(this),this.name=new Pve(this),this.cmap=new Lve(this),this.toUnicode={},this.hhea=new Ove(this),this.maxp=new Mve(this),this.hmtx=new Qve(this),this.post=new Uve(this),this.os2=new Rve(this),this.loca=new Wve(this),this.glyf=new zve(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,o;for(o=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],o.push(Math.round(e*this.scaleFactor));return o}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(o=this.familyClass)||2===o||3===o||4===o||5===o||7===o,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,o,a,i;for(a=0,o=0,i=(e=""+e).length;0<=i?o<i:o>i;o=0<=i?++o:--o)r=e.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Sve,Ive=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,o,a,i,s;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^o)+65536*(255^a)+256*(255^i)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*o+65536*a+256*i+s},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(this.writeByte(t));return o},e}(),Eve=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,o,a,i,s,c,l,u,A,h,d,p;for(p in h=Object.keys(t).length,s=Math.log(2),u=16*Math.floor(Math.log(h)/s),a=Math.floor(u/s),l=16*h-u,(r=new Ive).writeInt(this.scalarType),r.writeShort(h),r.writeShort(u),r.writeShort(a),r.writeShort(l),o=16*h,c=r.pos+o,i=null,d=[],t)for(A=t[p],r.writeString(p),r.writeInt(e(A)),r.writeInt(c),r.writeInt(A.length),d=d.concat(A),"head"===p&&(i=c),c+=A.length;c%4;)d.push(0),c++;return r.write(d),n=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,o;for(e=Hve.call(e);e.length%4;)e.push(0);for(r=new Ive(e),n=0,t=0,o=e.length;t<o;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),Nve={}.hasOwnProperty,Fve=function(e,t){for(var n in t)Nve.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Sve=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Tve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new Ive).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),_ve=function(){function e(e,t){var n,r,o,a,i,s,c,l,u,A,h,d,p,f,g,m,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,o=function(){var t,n;for(n=[],s=t=0;0<=A?t<A:t>A;s=0<=A?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],s=t=0;0<=A?t<A:t>A;s=0<=A?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],s=t=0;0<=A?t<A:t>A;s=0<=A?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],s=t=0;0<=A?t<A:t>A;s=0<=A?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],s=t=0;0<=r?t<r:t>r;s=0<=r?++t:--t)n.push(e.readUInt16());return n}(),s=g=0,y=o.length;g<y;s=++g)for(f=o[s],n=m=d=p[s];d<=f?m<=f:m>=f;n=d<=f?++m:--m)0===l[s]?a=n+c[s]:0!==(a=i[l[s]/2+(n-d)-(A-s)]||0)&&(a+=c[s]),this.codeMap[n]=65535&a}e.pos=u}return e.encode=function(e,t){var n,r,o,a,i,s,c,l,u,A,h,d,p,f,g,m,y,v,b,w,x,C,k,B,S,I,E,N,F,T,_,L,O,R,U,D,P,M,Q,H,z,V,j,W,K,G;switch(N=new Ive,a=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(p=0,f=function(){var e=[];for(d=0;d<256;++d)e.push(0);return e}(),m={0:0},o={},F=0,O=a.length;F<O;F++)null==m[j=e[r=a[F]]]&&(m[j]=++p),o[r]={old:e[r],new:m[e[r]]},f[r]=m[e[r]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(f),{charMap:o,subtable:N.data,maxGlyphID:p+1};case"unicode":for(I=[],u=[],y=0,m={},n={},g=c=null,T=0,R=a.length;T<R;T++)null==m[b=e[r=a[T]]]&&(m[b]=++y),n[r]={old:b,new:m[b]},i=m[b]-r,null!=g&&i===c||(g&&u.push(g),I.push(r),c=i),g=r;for(g&&u.push(g),u.push(65535),I.push(65535),B=2*(k=I.length),C=2*Math.pow(Math.log(k)/Math.LN2,2),A=Math.log(C/2)/Math.LN2,x=2*k-C,s=[],w=[],h=[],d=_=0,U=I.length;_<U;d=++_){if(S=I[d],l=u[d],65535===S){s.push(0),w.push(0);break}if(S-(E=n[S].new)>=32768)for(s.push(0),w.push(2*(h.length+k-d)),r=L=S;S<=l?L<=l:L>=l;r=S<=l?++L:--L)h.push(n[r].new);else s.push(E-S),w.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*k+2*h.length),N.writeUInt16(0),N.writeUInt16(B),N.writeUInt16(C),N.writeUInt16(A),N.writeUInt16(x),z=0,D=u.length;z<D;z++)r=u[z],N.writeUInt16(r);for(N.writeUInt16(0),V=0,P=I.length;V<P;V++)r=I[V],N.writeUInt16(r);for(W=0,M=s.length;W<M;W++)i=s[W],N.writeUInt16(i);for(K=0,Q=w.length;K<Q;K++)v=w[K],N.writeUInt16(v);for(G=0,H=h.length;G<H;G++)p=h[G],N.writeUInt16(p);return{charMap:n,subtable:N.data,maxGlyphID:y+1}}},e}(),Lve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new _ve(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=_ve.encode(e,t),(r=new Ive).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},t}(),Ove=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Rve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Uve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="post",t.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],o=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;o=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},t}(),Dve=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Pve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="name",t.prototype.parse=function(e){var t,n,r,o,a,i,s,c,l,u,A;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(s={},o=l=0,u=n.length;l<u;o=++l)r=n[o],e.pos=r.offset,c=e.readString(r.length),a=new Dve(c,r),null==s[A=r.nameID]&&(s[A]=[]),s[r.nameID].push(a);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},t}(),Mve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Qve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,n,r,o,a,i,s;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,o;for(o=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)o.push(e.readInt16());return o}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)o=n[e],r.push(o.advance);return r}.call(this),n=this.widths[this.widths.length-1],s=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)s.push(this.widths.push(n));return s},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Hve=[].slice,zve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var t,n,r,o,a,i,s,c,l,u;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,n=o.indexOf(e),0===(r=o.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,a=(i=new Ive(t.read(r))).readShort(),c=i.readShort(),u=i.readShort(),s=i.readShort(),l=i.readShort(),this.cache[e]=-1===a?new jve(i,c,u,s,l):new Vve(i,a,c,u,s,l),this.cache[e]))},t.prototype.encode=function(e,t,n){var r,o,a,i,s;for(a=[],o=[],i=0,s=t.length;i<s;i++)r=e[t[i]],o.push(a.length),r&&(a=a.concat(r.encode(n)));return o.push(a.length),{table:a,offsets:o}},t}(),Vve=function(){function e(e,t,n,r,o,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),jve=function(){function e(e,t,n,r,o){var a,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;i=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&i;)a.pos+=1&i?4:2,128&i?a.pos+=8:64&i?a.pos+=4:8&i&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Ive(Hve.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Wve=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Fve(t,Sve),t.prototype.tag="loca",t.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,o=0,a=0;a<n.length;++a)if(n[a]=r,o<t.length&&t[o]==a){++o,n[a]=r;var i=this.offsets[a],s=this.offsets[a+1]-i;s>0&&(r+=s)}for(var c=new Array(4*n.length),l=0;l<n.length;++l)c[4*l+3]=255&n[l],c[4*l+2]=(65280&n[l])>>8,c[4*l+1]=(16711680&n[l])>>16,c[4*l]=(4278190080&n[l])>>24;return c},t}(),Kve=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,o;for(t in r=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,o,a,i,s;for(r={},a=0,i=e.length;a<i;a++)r[o=e[a]]=this.font.glyf.glyphFor(o);for(o in t=[],r)(null!=(n=r[o])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in s=this.glyphsFor(t))n=s[o],r[o]=n;return r},e.prototype.encode=function(e,t){var n,r,o,a,i,s,c,l,u,A,h,d,p,f,g;for(r in n=Lve.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),h={0:0},g=n.charMap)h[(s=g[r]).old]=s.new;for(d in A=n.maxGlyphID,a)d in h||(h[d]=A++);return l=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(l).sort((function(e,t){return e-t})),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)i=u[e],n.push(l[i]);return n}(),o=this.font.glyf.encode(a,p,h),c=this.font.loca.encode(o.offsets,p),f={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();cye.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,o,a,i;if(Array.isArray(n))return"["+function(){var e,o,a;for(a=[],e=0,o=n.length;e<o;e++)r=n[e],a.push(t.convert(r));return a}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(o in a=["<<"],n)i=n[o],a.push("/"+o+" "+t.convert(i));return a.push(">>"),a.join("\n")}return""+n},t}();const Gve=cye;var qve=n(5498),Xve=n.n(qve);const Yve=()=>{const e=Ie();return(0,ev.jsx)("div",{className:"fixed inset-x-0 bottom-0 bg-blue-600 shadow-lg",children:(0,ev.jsxs)("div",{className:"flex justify-center items-center max-w-md mx-auto py-3 space-x-12",children:[" ",(0,ev.jsxs)("button",{className:"flex flex-col items-center text-white",onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";const t=document.getElementById("result");Xve()(t).then((t=>{let n;n="jpeg"===e?t.toDataURL("image/jpeg"):t.toDataURL("image/png");let r=document.createElement("a");r.href=n,r.download="download.".concat("jpeg"===e?"jpg":"png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}))}("png"),children:[(0,ev.jsx)("span",{className:"material-icons",children:"image"}),(0,ev.jsx)("span",{className:"text-xs",children:"T\u1ea3i \u1ea3nh"})]}),(0,ev.jsxs)("button",{className:"flex flex-col items-center text-white",onClick:()=>{e("/upload")},children:[(0,ev.jsx)("span",{className:"material-icons",children:"add"}),(0,ev.jsx)("span",{className:"text-xs",children:"B\u1ec7nh nh\xe2n m\u1edbi"})]}),(0,ev.jsxs)("button",{className:"flex flex-col items-center text-white",onClick:()=>(()=>{const e=document.getElementById("result");Xve()(e).then((e=>{const t=e.toDataURL("image/png"),n=new Gve({orientation:"portrait",unit:"px",format:[e.width,e.height]});n.addImage(t,"PNG",0,0,e.width,e.height),n.save("download.pdf")}))})(),children:[(0,ev.jsx)("span",{className:"material-icons",children:"picture_as_pdf"}),(0,ev.jsx)("span",{className:"text-xs",children:"T\u1ea3i PDF"})]})]})})},Zve=()=>(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("div",{id:"result",className:"pb-20",children:[" ",(0,ev.jsx)("h1",{className:"text-2xl font-bold text-center",children:"K\u1ebft qu\u1ea3 ch\u1ea9n \u0111o\xe1n"}),(0,ev.jsx)(Rge,{}),(0,ev.jsx)(bpe,{})]}),(0,ev.jsx)(Yve,{})]});const Jve=function(){const[e,t]=(0,F.useState)(null);return(0,F.useEffect)((()=>{const e=e=>{e.preventDefault(),t(e)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}}),[]),e&&(0,ev.jsx)("div",{className:" top-0 left-0 right-0 p-4 bg-white border-t border-gray-200 shadow-md flex justify-center",children:(0,ev.jsx)("button",{className:"bg-green-500 hover:bg-red-700 text-white  py-2 px-4 rounded",onClick:()=>{e&&(e.prompt(),e.userChoice.then((e=>{"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),t(null)})))},children:"C\xe0i \u0110\u1eb7t \u1ee8ng D\u1ee5ng"})})},$ve=e=>{let{isLoggedIn:t,userEmail:n}=e;return t?(0,ev.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",textAlign:"right"},children:n}):null},ebe=()=>{const[e,t]=(0,F.useState)(!0),[n,r]=(0,F.useState)(!1),[o,a]=(0,F.useState)("");return(0,F.useEffect)((()=>{const e=mo(Jy,(e=>{r(!!e),a(e?e.email:""),t(!1)}));return()=>e()}),[]),e?(0,ev.jsx)("div",{children:"Loading..."}):(0,ev.jsxs)(Ke,{children:[(0,ev.jsx)($ve,{isLoggedIn:n,userEmail:o}),(0,ev.jsx)("div",{class:"flex items-center justify-center",children:(0,ev.jsx)("div",{class:"mb-4",children:(0,ev.jsx)(Jve,{})})}),(0,ev.jsxs)(Ve,{children:[(0,ev.jsx)(He,{path:"/login",element:(0,ev.jsx)(tv,{})}),(0,ev.jsx)(He,{path:"/upload",element:n?(0,ev.jsx)(gpe,{}):(0,ev.jsx)(Qe,{to:"/login"})}),(0,ev.jsx)(He,{path:"/question",element:n?(0,ev.jsx)(Fge,{}):(0,ev.jsx)(Qe,{to:"/login"})}),(0,ev.jsx)(He,{path:"/result",element:n?(0,ev.jsx)(Zve,{}):(0,ev.jsx)(Qe,{to:"/login"})}),(0,ev.jsx)(He,{path:"/infor",element:n?(0,ev.jsx)(_ge,{}):(0,ev.jsx)(Qe,{to:"/login"})}),(0,ev.jsx)(He,{path:"*",element:(0,ev.jsx)(Qe,{to:n?"/upload":"/login"})})]})]})},tbe=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:a,getTTFB:i}=t;n(e),r(e),o(e),a(e),i(e)}))};_.createRoot(document.getElementById("root")).render((0,ev.jsx)(F.StrictMode,{children:(0,ev.jsx)(ebe,{})})),tbe(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>{console.log("Service Worker registered: ",e)})).catch((e=>{console.log("Service Worker registration failed: ",e)}))}))})()})();
//# sourceMappingURL=main.9c0ad193.js.map